game.import('extension',function(lib,game,ui,get,ai,_status){
	return{
    name:'神怒降世',
    content:function(config,pack){
		if(config.snjs){
			for(var i in lib.characterPack['snjs']){
				if(lib.character[i][4].indexOf("forbidai")<0) lib.character[i][4].push("forbidai");
			};
		};
		lib.skill._snjs_zhenwangyuyin={
			trigger:{
				player:"dieBegin",
			},
			unique:true,
			silent:true,
			charlotte:true,
			content:function(){
				game.playAudio("..","extension","神怒降世",player.name+".mp3");
			},
		};
	},
	editable:false,
	precontent:function(config){
		if(!config.enable) return undefined;
		game.saveConfig('神怒降世_version','1.0');
		lib.config.神怒降世_version='1.0';
		game.saveConfig('max_loadtime',6e4);
		localStorage.setItem(lib.configprefix+'loadtime',6e4);
		game.import('character',function(){
			var snjs={
				name:'snjs',
				connect:true,
				character:{
					"snjs_shen_zhangfei":["male","shen",5,["szfzh","szfpx","szfyb","szffq"],["shu"]],
					"snjs_sp_shen_sunce":["male","shen","4/5",["sscwl","ssctn","sscyg","sscyy"],["wu"]],
					"snjs_shen_liuyan":["male","shen",3,["slylm","slyts","slypa","slyzf"],["qun"]],
					"snjs_re_shen_guanyu":["male","shen",5,["jsgysm","jsgygs","jsgyzh","jsgyly"],["shu"]],
					"snjs_shen_machao":["male","shen","4/5",["smctw","smcwf","smczm","smcsj"],["shu"]],
					"snjs_re_shen_zhangliao":["male","shen","4/5",["jszltx","jszldr","jszlzt","jszlxt"],["wei"]],
					"snjs_sp_shen_guojia":["male","shen",3,["spsgjss","spsgjyc"],["wei"]],
					"snjs_re_shen_zhouyu":["male","shen",4,["jszysz","jszyhl","jszyqy","jszyyy"],["wu"]],
					"snjs_re_shen_lvmeng":["male","shen",4,["jslmsl","jslmgx","jslmkj","jslmbt"],["wu"]],
					"snjs_re_shen_lvbu":["male","shen",6,["jslbwm","jslbws","jslbwq","jslbsf"],["qun"]],
					"snjs_re_shen_caocao":["male","shen",3,["jsccgx","jsccxx","jsccfy","jscccx"],["wei"]],
					"snjs_re_shen_zhugeliang":["male","shen",3,["jszglqx","jszglkf","jszgldw","jszglgx"],["shu"]],
					"snjs_dianweicaoang":["male","wei","4/6",["dwcaqx","dwcakk"]],
					"snjs_wenchou":["male","qun",4,["wcjm"]],
					"snjs_yanliang":["male","qun",4,["ylyj"]],
					"snjs_sp_liubei":["male","wu",4,["splbyw","splbxl"]],
					"snjs_re_shen_liubei":["male","shen",5,["jslbln","jslblw","jslbjy","jslbtg"],["shu"]],
					"snjs_shen_zhangxiu":["male","shen","4/5",["szxxl","szxxx","szxcj","szxnj"],["qun"]],
					"snjs_jiachong":["male","wei",4,["jckx","jcbs"]],
					"snjs_xiahouen":["male","wei",4,["xhepj","xhell"]],
					"snjs_houcheng":["male","qun",4,["hcdm","hcxm"]],
					"snjs_bianxi":["male","wei",4,["bxlx","bxfh"]],
					"snjs_liuli":["male","qun",4,["llhy"]],
					"snjs_guosheng":["male","qun",3,["gshd","gshm","snjs_huanshi"]],
					"snjs_jianshuo":["male","qun","5/6",["jsjb","snjs_huanshi"]],
					"snjs_chengkuang":["male","qun",3,["ckbr","ckad","snjs_huanshi"]],
					"snjs_fengxu":["male","qun",3,["fxlx","fxhj","snjs_huanshi"]],
					"snjs_duangui":["male","qun",4,["dgsx","dgcb","snjs_huanshi"]],
					"snjs_xiayun":["male","qun",3,["xyjf","snjs_huanshi"]],
					"snjs_houlan":["male","qun",4,["hllc","hlbh","snjs_huanshi"]],
					"snjs_caojie":["male","qun",4,["cjhb","snjs_huanshi"]],
					"snjs_sp_zhaozhong":["male","qun",3,["spzzlh","spzzhk","snjs_huanshi"]],
					"snjs_sp_zhangrang":["male","qun",3,["spzrhl","spzrlz","snjs_huanshi"]],
					"snjs_gouan":["male","shu",4,["gayl","gatj"]],
					"snjs_sp_zhangning":["female","qun",3,["zntp","zntd"]],
					"snjs_re_shen_zhaoyun":["male","shen",3,["jszylh","jszyjj"],["shu"]],
					"snjs_wangchong":["male","qun",4,["wcfx"]],
					"snjs_yushe":["male","qun",4,["ysxm"]],
					"snjs_zhaoang":["male","wei",4,["zajs","zaql"]],
					"snjs_sp_fanyufeng":["female","qun",3,["spfyfgz","spfyfyl"]],
					"snjs_simayan":["male","jin",3,["smyts","smynf"]],
					"snjs_zhangchu":["female","qun",3,["zctq","zctx"]],
					"snjs_re_shen_ganning":["male","shen","4/5",["jsgnpx","jsgnsp","jsgnxj","jsgnjj"],["wu"]],
					"snjs_sp_zhangjiao":["male","qun",3,["spzjlh","spzjjy"],['zhu']],
					"snjs_huangjinbing":["male","qun",4,["snjs_baodong"],["unseen"]],
					"snjs_zhangjv":["male","qun",3,["zjzcyl","zjzctf"]],
					"snjs_zhangchun":["male","qun",4,["zjzcmt","zjzctf"]],
					"snjs_zhangjvzhangchun":["male","qun",4,["zjzcyl","zjzcmt"],["unseen"]],
					"snjs_zhangyan":["male","qun",4,["zyfy","zyyy"]],
					"snjs_dengmao":["male","qun",8,["snjs_baodong","dmhc"]],
					"snjs_bocai":["male","qun",4,["snjs_baodong","bcsc"]],
					"snjs_chengyuanzhi":["male","qun",4,["snjs_baodong","cyzsz"]],
					"snjs_guanhai":["male","qun",4,["snjs_baodong","ghqx"]],
					"snjs_guanyuzhangfei":["male","shu",5,["gyzfws","gyzfpx"]],
					"snjs_xiahouzie":["female","shu",4,["xhzeqw","xhzeps"]],
					"snjs_zhangwei":["female","shu",4,["zwxq","mashu"]],
					"snjs_fanqiangzhangda":["male","shu",4,["fqzdyc"]],
					"snjs_wuban":["male","shu",4,["wbxz"]],
					"snjs_haomeng":["male","qun",4,["hmfg"]],
					"snjs_re_shen_luxun":["male","shen",4,["jslxjl","jslxck","jslxzh"],["wu"]],
					"snjs_re_shen_simayi":["male","shen",4,["jssmyrj","jssmyby","jssmylp"],["wei"]],
					"snjs_sp_fushirenmifang":["male","shu",4,["spfsrmfjz","spfsrmfxw"]],
					"snjs_shen_sunshangxiang":["female","shen",3,["sssxyj","sssxjw","sssxjx","sssxxj"],["wu"]],
					"snjs_sp_lvbu":["male","qun",5,["splbsf","splbws"]],
					"snjs_sp_xvjing":["male","shu",3,["xjpj","xjjx"]],
					"snjs_pengqi":["female","wu",3,["pqqp","pqqy"]],
					"snjs_penghu":["male","wu",4,["phyj"]],
					"snjs_yuanshi":["female","wu",3,["ysjj","ysmr"]],
					"snjs_sp_zhouche":["female","wu",3,["spzclr","spzcyl"]],
					"snjs_zhucaizhuji":["male","wu",4,["zczjtb","zczjsy"]],
					"snjs_zhuzhizhuranzhuhuan":["male","wu",4,["zzzrzhmm"]],
					"snjs_xianyufu":["male","wei",4,["xyfcj"]],
					"snjs_sp_chenzhen":["male","shu",3,["spczsm","spczjf"]],
					"snjs_sp_sunyi":["male","wu",4,["syxh","sygl"]],
					"snjs_sunyu":["male","wu",3,["sykk","syjr"]],
					"snjs_re_dingfeng":["male","wu",4,["jdfdb","jdffx"]],
					"snjs_shen_caozhi":["male","shen",3,["sczqb","sczlj"],["wei"]],
					"snjs_baoxin":["male","wei",4,["bxgy","bxym"]],
					"snjs_chezhou":["male","wei",4,["czdr","czkb"]],
					"snjs_caohua":["female","wei",1,["chdk","chrh"]],
					"snjs_caoxian":["female","wei",3,["cxzy","cxym"]],
					"snjs_shen_zhugeguo":["female","shen",3,["szggyh","szggqr","szggsx","szggxc"],["shu"]],
					"snjs_gaoxiang":["male","shu",4,["gxdp","gxqd"]],
					"snjs_sp_lvlingqi":["female","qun",4,["llqfp","llqjw"]],
					"snjs_shen_weiyan":["male","shen",5,["swykg","swybx","swyca","swyqm"],["shu"]],
					"snjs_shen_sunquan":["male","shen",4,["ssqwk"],["wu"]],
					"snjs_shen_zhoutai":["male","shen",17,["szthq","sztsz","sztfq"],["wu"]],
					"snjs_shen_xuchu":["female","shen",5,["sxcly","sxccb","sxchc","sxchh"],["wei"]],
					"snjs_shen_dianwei":["male","shen","5/6",["sdwqx","sdwlk","sdwpn"],["wei"]],
					"snjs_guodian":["male","qun",4,["gdyq","gdyh"]],
					"snjs_shen_caoren":["male","shen",5,["scrtb","scrhd","scrjt","scrgs"],["wei"]],
					"snjs_sp_dongbai":["female","qun","2/3",["spdbxh","spdblz"]],
					"snjs_al_guanyu":["female","shu",4,["algyws","algyyj"]],
					"snjs_caoyuee":["female","wei",3,["cyeym","cyehx"]],
					"snjs_sp_zhangxiu":["male","wei",4,["spzxpy","spzxyw"]],
					"snjs_al_chenqian":["female","jin",3,["alcqzm","alcqwz"]],
					"snjs_jiangwan":["male","shu",3,["jwsc","jwhc"]],
					"snjs_chenqian":["male","jin",4,["cqzm"]],
					"snjs_shen_zuoci":["female","shen",3,["szcxf"],["qun"]],
					"snjs_shen_dongzhuo":["male","shen",100,["sdzzf","sdzey"],["qun"]],
					"snjs_ju_sunquan":["male","wu",3,["jusqty","jusqcx"]],
					"snjs_shen_yuanshao":["female","shen",3,["syslj","syssm","sysmg","sysms"],["qun"]],
					"snjs_zhanghong":["male","wu",3,["zhgz","zhjl"]],
					"snjs_ex_machao":["male","shu",4,["exmctj","mashu","exwuhu"]],
					"snjs_ex_guojia":["male","wei",3,["exgjtd","exgjyj","exgjyc"]],
					"snjs_ex_huanggai":["male","wu",4,["exhgkr","exhgzx"]],
					"snjs_ex_zhangliao":["male","wei",4,["exzltx","exzlck"]],
					"snjs_ex_sunce":["male","wu",4,["exscja","exschz","exsczb"],['zhu']],
					"snjs_ex_sunjian":["male","wu","4/5",["exsjyh","exsjwl","exsjpl"],['zhu']],
					"snjs_ex_ganning":["male","wu",4,["exgnqx","exgnfw"]],
					"snjs_ex_zhouyu":["male","wu",3,["exzyyz","exzyfj"]],
					"snjs_ex_luxun":["male","wu",3,["exlxqx","exlxly"]],
					"snjs_ex_huangzhong":["male","shu",4,["exhzlg","exwuhu"]],
					"snjs_ex_guanyu":["male","shu",4,["exgyws","exgyyj","exwuhu"]],
					"snjs_ex_zhangfei":["male","shu",4,["exzfpx","exzfts","exwuhu"]],
					"snjs_ex_zhaoyun":["male","shu",4,["exzyld","exzyyj","exwuhu"]],
					"snjs_ex_liubei":["male","shu",4,["exlbrd","exlbrw","exlbjj"],['zhu']],
					"snjs_ex_simayi":["male","wei",3,["exsmyfk","exsmygc","exsmyqm"]],
					"snjs_ex_xuchu":["male","wei",4,["exxcly","exxcxc"]],
					"snjs_ex_xiahoudun":["male","wei",4,["exxhdgl","exxhdqj"]],
					"snjs_ex_dianwei":["male","wei",4,["exdwqx","exdwpn"]],
					"snjs_ex_gaoshun":["male","qun",4,["exgsxz","exgsjj"]],
					"snjs_ex_huaxiong":["male","qun",6,["exhxsy","exhxyw"]],
					"snjs_re_chengong":["male","qun",3,["jcgmc","jcgzc"]],
					"snjs_ex_lvbu":["male","qun",5,["exlbws","exlbly","exlbxl"]],
					"snjs_sp_shen_guanyu":["male","shen",5,["spsgyws","spsgyzy","spsgyzj","spsgycb"],["shu"]],
					"snjs_shen_zhangjiao":["male","shen",4,["szjfz","szjtf","szjcl","szjgd"],["qun"]],
					"snjs_shen_jiaxu":["male","shen",4,["sjxqb","sjxlw"],["qun"]],
					"snjs_re_beimihu":["female","qun",3,["jbmhzk","jbmhgj","jbmhbj"]],
					"snjs_chenshou":["male","jin",4,["csts"]],
					"snjs_sp_yanghu":["male","jin",4,["spyhbl"]],
					"snjs_sp_lusu":["male","wu",3,["splslm","splstx"]],
					"snjs_zhangsu":["male","qun",4,["zshq","zsdr"]],
					"snjs_shen_zhangsong":["male","shen",4,["szsrj","szscs","szsxz"],["shu"]],
					"snjs_shen_fazheng":["male","shen",4,["sfzbd","sfzjs","sfzdc"],["shu"]],
					"snjs_zhuhao":["male","qun",4,["zhcx","zhtc"]],
					"snjs_sp_zumao":["male","wu",4,["spzmjd"]],
					"snjs_re_mayunlu":["female","shu",4,["jmylfp","mashu"]],
					"snjs_ex_madai":["male","shu",4,["exmdqx","exmddz","mashu"]],
					"snjs_sp_mizhu":["male","shu",3,["spmzfs"]],
					"snjs_re_caochong":["male","wei",3,["jcccx","jccrx"]],
					"snjs_re_caoang":["male","wei",4,["jcakk"]],
					"snjs_sp_xushao":["male","qun",4,["spxspj"]],
					"snjs_old_caoren":["male","wei",4,["snjs_oldjushou"],["unseen"]],
					"snjs_old_zhoutai":["male","wu",4,["snjs_oldbuqu"],["unseen"]],
					"snjs_ex_sunquan":["male","wu",4,["exsqzh","exsqjy"],['zhu']],
					"snjs_ex_caocao":["male","wei",4,["exccjx","exccxc","excchj"],['zhu']],
					"snjs_jibu":["male","wei",4,["jbdx","jsccfy"]],
					"snjs_xiahoulan":["female","shu",4,["xhlmt","xhljr"]],
					"snjs_sunhuan":["male","wu",4,["shct"]],
					"snjs_sp_xunyu":["male","qun",3,["spxywz","spxyzh"]],
					"snjs_ex_zhenji":["female","wei",3,["exzjls","exzjqg"]],
					"snjs_ex_zhugeliang":["male","shu",3,["exzglgx","exzglkc"]],
					"snjs_ex_sunshangxiang":["female","wu",3,["exssxxj","exssxjy"]],
					"snjs_zhangbiao":["male","shu",3,["zbyf","zbqy"]],
					"snjs_xinping":["male","qun",3,["xpzt"]],
					"snjs_wangtao":["female","shu",3,["wtaw"]],
					"snjs_wangyue":["female","shu",3,["wyyh"]],
					"snjs_yuanshang":["male","qun",4,["yscy","ysdp"]],
					"snjs_yuantan":["male","qun",4,["ytzq","ytjq"]],
					"snjs_guotu":["male","qun",3,["gtqg"]],
					"snjs_pangji":["male","qun",3,["pjms"]],
					"snjs_liuxun":["male","shu",4,["lxsl"]],
					"snjs_pangxi":["male","shu",4,["pxtj","pxhl"]],
					"snjs_feiguan":["male","shu",3,["fgzj"]],
					"snjs_fazhen":["male","qun",3,["fzbx","fzyg"]],
					"snjs_sp_hanfu":["male","qun",4,["sphfkq","sphffj"]],
					
					"snjs_xiaosha":["female","qun",3,["snjs_guisha","snjs_shuli","snjs_xuxiang"]],
					"snjs_xiaoshan":["female","qun",3,["snjs_shanwu","snjs_xianli","snjs_xuxiang"]],
					"snjs_xiaojiu":["female","qun",3,["snjs_meiniang","snjs_yaoli","snjs_xuxiang"]],
					"snjs_xiaotao":["female","qun",3,["snjs_taoyan","snjs_yanli","snjs_xuxiang"]],
					"snjs_xiaole":["female","qun",3,["snjs_leyu","snjs_yuanli","snjs_xuxiang"]],
					
					
					"snjs_boss_zhengzhanhulao":['male','',0,['snjs_boss_hulao','snjs_boss_hulao_intro1','snjs_boss_hulao_intro2','snjs_boss_hulao_intro3'],['boss',"unseen","allowed"],'qun'],
					"snjs_boss_hulaojieduan111":['male','qun',"4/6",['snjs_boss_hulao2','snjs_boss_hulaoswdl','xinfu_yisuan','xinfu_langxi','snjs_boss_hulaomj','snjs_boss_hulaocaidan'],['qun','hiddenboss','bossallowed',"unseen"]],
					"snjs_boss_hulaojieduan112":['male','qun',4,['snjs_boss_hulao2','snjs_boss_hulaoswdl','xinfu_sidao','xinfu_tanbei','snjs_boss_hulaomj','snjs_boss_hulaocaidan'],['qun','hiddenboss','bossallowed',"unseen"]],
					"snjs_boss_hulaojieduan113":['male','qun',4,['snjs_boss_hulao2','snjs_boss_hulaoswdl','snjs_boss_hulaofg','snjs_boss_hulaomj','snjs_boss_hulaocaidan'],['qun','hiddenboss','bossallowed',"unseen"]],
					"snjs_boss_hulaojieduan114":['male','qun',4,['snjs_boss_hulao2','snjs_boss_hulaoswdl','snjs_boss_hulaojl','snjs_boss_hulaomj','snjs_boss_hulaocaidan','snjs_boss_hulaozjcaidan'],['qun','hiddenboss','bossallowed',"unseen"]],
					"snjs_boss_hulaojieduan121":['male','qun',3,['snjs_boss_hulao2','snjs_boss_hulaolx','snjs_boss_hulaoswdl'],['qun','hiddenboss','bossallowed',"unseen"]],
					"snjs_boss_hulaojieduan122":['male','qun',3,['snjs_boss_hulao2','snjs_boss_hulaohb','snjs_boss_hulaoswdl'],['qun','hiddenboss','bossallowed',"unseen"]],
					"snjs_boss_hulaojieduan123":['female','qun',2,['snjs_boss_hulao2','snjs_boss_hulaofy','snjs_boss_hulaoswdl'],['qun','hiddenboss','bossallowed',"unseen"]],
					"snjs_boss_hulaojieduan124":['male','qun',3,['snjs_boss_hulao2','snjs_boss_hulaobl','snjs_boss_hulaoswdl'],['qun','hiddenboss','bossallowed',"unseen"]],
					"snjs_boss_hulaojieduan125":['male','qun',3,['snjs_boss_hulao2','snjs_boss_hulaofx','snjs_boss_hulaoswdl'],['qun','hiddenboss','bossallowed',"unseen"]],
					"snjs_boss_hulaojieduan126":['male','qun',2,['snjs_boss_hulao2','snjs_boss_hulaotl','snjs_boss_hulaoswdl'],['qun','hiddenboss','bossallowed',"unseen"]],
					"snjs_boss_hulaojieduan211":['male','qun',7,['snjs_boss_hulaomq','snjs_boss_hulaoyw','snjs_boss_hulaomj','snjs_boss_hulao3','snjs_boss_hulaoswdl2','snjs_boss_hulaohxcaidan'],['qun','hiddenboss','bossallowed',"unseen"]],
					"snjs_boss_hulaojieduan221":['male','qun',5,['cxliushi','zhanwan','snjs_boss_hulaoswdl2','snjs_boss_hulaocxcaidan','snjs_boss_hulao3'],['qun','hiddenboss','bossallowed',"unseen"]],
					"snjs_boss_hulaojieduan222":['male','qun',4,['snjs_boss_hulaosc','zhichi','snjs_boss_hulaoswdl2','snjs_boss_hulao3'],['qun','hiddenboss','bossallowed',"unseen"]],
					"snjs_boss_hulaojieduan223":['male','qun',6,['mashu','snjs_boss_hulaosz','snjs_boss_hulaojj','snjs_boss_hulaoswdl2','snjs_boss_hulao3'],['qun','hiddenboss','bossallowed',"unseen"]],
					"snjs_boss_hulaojieduan224":['female','qun',"4/5",['juntun','jiaojie','snjs_boss_hulaoswdl2','snjs_boss_hulao3'],['qun','hiddenboss','bossallowed',"unseen"]],
					"snjs_boss_hulaolvbu1":['male','shen',22,['mashu','snjs_boss_hulaows','snjs_boss_hulaobg','snjs_boss_hulaozj','snjs_boss_hulaoxl','snjs_boss_hulaolbcaidan'],['shen','hiddenboss','bossallowed',"unseen"]],
					"snjs_boss_hulaolvbu2":['male','shen',22,['snjs_boss_hulaows2','snjs_boss_hulaozk','snjs_boss_hulaosj','snjs_boss_hulaolbyw'],['shen','hiddenboss','bossallowed',"unseen"]],
					"snjs_boss_hulaolvbu3":['male','shen',24,['mashu','snjs_boss_hulaows2','snjs_boss_hulaoxiuluo','snjs_boss_hulaolbcaidan'],['shen','hiddenboss','bossallowed',"unseen"]],
					
					
					"snjs_boss_qihuanzhizheng":['male','',0,['snjs_boss_qihuan','snjs_boss_qihuan_intro1','snjs_boss_qihuan_intro2','snjs_boss_qihuan_intro3'],['boss',"unseen","allowed"],'qun'],
					"snjs_boss_qihuanzhangrang":['male','qun',15,['snjs_boss_qihuanzrhl','snjs_boss_qihuanzryk','snjs_boss_qihuanzrjq','snjs_boss_qihuanzrlz','snjs_huanshi'],['qun','hiddenboss','bossallowed',"unseen"]],
					"snjs_boss_qihuanzhaozhong":['male','qun',15,['snjs_boss_qihuanzzdz','snjs_boss_qihuanzzlh','snjs_boss_qihuanzzhk','snjs_boss_qihuanzzlz','snjs_huanshi'],['qun','hiddenboss','bossallowed',"unseen"]],
					"snjs_boss_qihuancaojie":['male','qun',7,['snjs_boss_qihuancjhb','snjs_huanshi','snjs_boss_qihuan2'],['qun','hiddenboss','bossallowed',"unseen"]],
					"snjs_boss_qihuanchengkuang":['male','qun',3,['snjs_boss_qihuanckad','snjs_boss_qihuanckbr','snjs_huanshi','snjs_boss_qihuan2'],['qun','hiddenboss','bossallowed',"unseen"]],
					"snjs_boss_qihuanduangui":['male','qun',7,['snjs_boss_qihuandgsx','dgcb','snjs_huanshi','snjs_boss_qihuan2'],['qun','hiddenboss','bossallowed',"unseen"]],
					"snjs_boss_qihuanfengxu":['male','qun',6,['snjs_boss_qihuanfxlx','fxhj','snjs_huanshi','snjs_boss_qihuan2'],['qun','hiddenboss','bossallowed',"unseen"]],
					"snjs_boss_qihuanguosheng":['male','qun',5,['snjs_boss_qihuangshd','snjs_boss_qihuangshm','snjs_huanshi','snjs_boss_qihuan2'],['qun','hiddenboss','bossallowed',"unseen"]],
					"snjs_boss_qihuanhoulan":['male','qun',6,['snjs_boss_qihuanhljs','hllc','snjs_huanshi','snjs_boss_qihuan2'],['qun','hiddenboss','bossallowed',"unseen"]],
					"snjs_boss_qihuanjianshuo":['male','qun',10,['snjs_boss_qihuanjsjb','snjs_huanshi','snjs_boss_qihuan2'],['qun','hiddenboss','bossallowed',"unseen"]],
					"snjs_boss_qihuanxiayun":['male','qun',7,['snjs_boss_qihuanxyjf','snjs_huanshi','snjs_boss_qihuan2'],['qun','hiddenboss','bossallowed',"unseen"]],
					"snjs_boss_qihuanhejin":['male','qun',20,['snjs_boss_qihuanhjzm','snjs_boss_qihuanhjgl','snjs_boss_qihuanhjwx','snjs_boss_qihuanhjqb'],['qun','hiddenboss','bossallowed',"unseen"]],
					"snjs_boss_qihuanhetaihou":['female','qun',15,['snjs_boss_qihuanhthzq','snjs_boss_qihuanhthch','snjs_boss_qihuanhthnq','snjs_boss_qihuanhthsx'],['qun','hiddenboss','bossallowed',"unseen"]],
					"snjs_boss_qihuancaocao":['male','qun',7,['new_rejianxiong','reguicai','snjs_boss_qihuan2'],['qun','hiddenboss','bossallowed',"unseen"]],
					"snjs_boss_qihuanxiahoudun":['male','qun',5,['reganglie','new_qingjian','xunxun','snjs_boss_qihuan2'],['qun','hiddenboss','bossallowed',"unseen"]],
					"snjs_boss_qihuanxiahouyuan":['male','qun',5,['xinshensu','refankui','snjs_boss_qihuan2'],['qun','hiddenboss','bossallowed',"unseen"]],
					"snjs_boss_qihuancaoren":['male','qun',5,['xinjushou','xinjiewei','tiandu','snjs_boss_qihuan2'],['qun','hiddenboss','bossallowed',"unseen"]],
					"snjs_boss_qihuancaoang":['male','qun',5,['kaikang','wushuang','snjs_boss_qihuan2'],['qun','hiddenboss','bossallowed',"unseen"]],
					"snjs_boss_qihuanyuanshao":['male','qun',7,['luanji','zongshi','snjs_boss_qihuan2','snjs_boss_qihuan2'],['qun','hiddenboss','bossallowed',"unseen"]],
					"snjs_boss_qihuanxuyou":['male','qun',4,['nzry_chenglve','nzry_shicai','nzry_cunmu','reyingzi','snjs_boss_qihuan2'],['qun','hiddenboss','bossallowed',"unseen"]],
					"snjs_boss_qihuanjushou":['male','qun',4,['jianying','shibei','zhaxiang','snjs_boss_qihuan2'],['qun','hiddenboss','bossallowed',"unseen"]],
					"snjs_boss_qihuanyanwen":['male','qun',6,['shuangxiong','jianchu','snjs_boss_qihuan2'],['qun','hiddenboss','bossallowed',"unseen"]],
					"snjs_boss_qihuanguofeng":['male','qun',4,['jigong','shifei','jiuchi','snjs_boss_qihuan2'],['qun','hiddenboss','bossallowed',"unseen"]],
					"snjs_boss_qihuanyuanshu":['male','qun',7,['drlt_yongsi','drlt_congjian','snjs_boss_qihuan2'],['qun','hiddenboss','bossallowed',"unseen"]],
					"snjs_boss_qihuanxunyou":['male','qun',5,['qice','zhiyu','jieming','snjs_boss_qihuan2'],['qun','hiddenboss','bossallowed',"unseen"]],
					"snjs_boss_qihuanchenlin":['male','qun',4,['bifa','songci','danlao','snjs_boss_qihuan2'],['qun','hiddenboss','bossallowed',"unseen"]],
					
					
					"snjs_boss_quguizhuxie":['male','',0,['snjs_boss_zhuogui','snjs_boss_zhuogui_intro1','snjs_boss_zhuogui_intro2','snjs_boss_zhuogui_intro3','snjs_boss_zhuogui_intro4'],['boss',"unseen","allowed"],'jin'],
					"snjs_boss_zhuoguimengpo":['female','shen',8,['snjs_boss_zhuoguimpat','snjs_boss_zhuoguimpyj','snjs_boss_zhuoguigm','snjs_boss_zhuogui2'],['shen','hiddenboss','bossallowed',"unseen"]],
					"snjs_boss_zhuoguiheiwuchang":['male','shen',4,['snjs_boss_zhuoguihwcxx','snjs_boss_zhuoguihwctp','snjs_boss_zhuoguihwcdh','snjs_boss_zhuoguigm','snjs_boss_zhuogui3','snjs_boss_zhuoguiswdl'],['shen','hiddenboss','bossallowed',"unseen"]],
					"snjs_boss_zhuoguibaiwuchang":['male','shen',7,['snjs_boss_zhuoguibwcbl','snjs_boss_zhuoguibwcqz','snjs_boss_zhuoguibwcmz','snjs_boss_zhuoguigm','snjs_boss_zhuogui3','snjs_boss_zhuoguiswdl'],['shen','hiddenboss','bossallowed',"unseen"]],
					"snjs_boss_zhuoguiheiwuchangbaiwuchang":['male','shen',8,['snjs_boss_zhuoguihwcxx','snjs_boss_zhuoguihwctp','snjs_boss_zhuoguibwcqz','snjs_boss_zhuoguibwcmz','snjs_boss_zhuoguigm','snjs_boss_zhuogui3x','snjs_boss_zhuoguiswdl2'],['shen','hiddenboss','bossallowed',"unseen"]],
					"snjs_boss_zhuoguiniutou":['male','shen',6,['snjs_boss_zhuoguintxs','snjs_boss_zhuoguintmj','snjs_boss_zhuoguigm','snjs_boss_zhuogui3','snjs_boss_zhuoguiswdl'],['shen','hiddenboss','bossallowed',"unseen"]],
					"snjs_boss_zhuoguimamian":['male','shen',6,['snjs_boss_zhuoguimmsy','snjs_boss_zhuoguimmgz','snjs_boss_zhuoguigm','snjs_boss_zhuogui3','snjs_boss_zhuoguiswdl'],['shen','hiddenboss','bossallowed',"unseen"]],
					"snjs_boss_zhuoguiniutoumamian":['male','shen',8,['snjs_boss_zhuoguintxs','snjs_boss_zhuoguintmj','snjs_boss_zhuoguimmsy','snjs_boss_zhuoguimmgz','snjs_boss_zhuoguigm','snjs_boss_zhuogui3x','snjs_boss_zhuoguiswdl2'],['shen','hiddenboss','bossallowed',"unseen"]],
					"snjs_boss_zhuoguiriyoushenyeyoushen":['male','shen',8,['snjs_boss_zhuoguirysyyszc','snjs_boss_zhuoguirysyysyz','snjs_boss_zhuoguirysyyshy','snjs_boss_zhuoguirysyysde','snjs_boss_zhuoguigm','snjs_boss_zhuogui3x','snjs_boss_zhuoguiswdl2'],['shen','hiddenboss','bossallowed',"unseen"]],
					"snjs_boss_zhuoguibaowei":['male','shen',6,['snjs_boss_zhuoguibwys','snjs_boss_zhuoguibwel','snjs_boss_zhuoguigm','snjs_boss_zhuogui4','snjs_boss_zhuoguiswdl2'],['shen','hiddenboss','bossallowed',"unseen"]],
					"snjs_boss_zhuoguiniaozui":['male','shen',6,['snjs_boss_zhuoguinzby','snjs_boss_zhuoguinzsx','snjs_boss_zhuoguigm','snjs_boss_zhuogui4','snjs_boss_zhuoguiswdl'],['shen','hiddenboss','bossallowed',"unseen"]],
					"snjs_boss_zhuoguiyusai":['female','shen',9,['snjs_boss_zhuoguiysgx','snjs_boss_zhuoguiysac','snjs_boss_zhuoguigm','snjs_boss_zhuogui4','snjs_boss_zhuoguiswdl'],['shen','hiddenboss','bossallowed',"unseen"]],
					"snjs_boss_zhuoguihuangfeng":['male','shen',4,['snjs_boss_zhuoguihfdz','snjs_boss_zhuoguihfmc','snjs_boss_zhuoguigm','snjs_boss_zhuogui4','snjs_boss_zhuoguiswdl'],['shen','hiddenboss','bossallowed',"unseen"]],
					"snjs_boss_zhuoguiguiwang":['male','shen',30,['snjs_boss_zhuoguitm','snjs_boss_zhuoguigwjz','snjs_boss_zhuoguigwds','snjs_boss_zhuoguigwch','snjs_boss_zhuoguigm'],['shen','hiddenboss','bossallowed',"unseen"]],
					"snjs_boss_zhuoguiyanluowang":['male','shen',15,['snjs_boss_zhuoguitm','snjs_boss_zhuoguiylwdf','snjs_boss_zhuoguiylwzn','snjs_boss_zhuoguiylwxp','snjs_boss_zhuoguiylwdw','snjs_boss_zhuoguiylwxp2','snjs_boss_zhuoguigm'],['shen','hiddenboss','bossallowed',"unseen"]],
					
					
					"snjs_boss_tianshuluandou":['male','',0,['snjs_boss_tianshu','snjs_boss_tianshu_intro1','snjs_boss_tianshu_intro2','snjs_boss_tianshu_intro3','snjs_boss_tianshu_intro4','snjs_boss_tianshu_intro5'],['boss',"unseen","allowed"],'wei'],
					"snjs_boss_tianshuzishu":['male','qun',5,['snjs_boss_tianshuzishuzishu','snjs_boss_tianshuswdl'],['shen','hiddenboss','bossallowed',"unseen"]],
					"snjs_boss_tianshuchouniu":['male','wei',"5/7",['snjs_boss_tianshuchouniuchouniu','snjs_boss_tianshuswdl'],['shen','hiddenboss','bossallowed',"unseen"]],
					"snjs_boss_tianshuyinhu":['male','wu',6,['snjs_boss_tianshuyinhuyinhu','snjs_boss_tianshuswdl'],['shen','hiddenboss','bossallowed',"unseen"]],
					"snjs_boss_tianshumaotu":['female','wei',5,['snjs_boss_tianshumaotumaotu','snjs_boss_tianshuswdl'],['shen','hiddenboss','bossallowed',"unseen"]],
					"snjs_boss_tianshuchenlong":['male','shu',7,['snjs_boss_tianshuchenlongchenlong','snjs_boss_tianshuswdl'],['shen','hiddenboss','bossallowed',"unseen"]],
					"snjs_boss_tianshusishe":['female','shu',5,['snjs_boss_tianshusishesishe','snjs_boss_tianshuswdl'],['shen','hiddenboss','bossallowed',"unseen"]],
					"snjs_boss_tianshuwuma":['male','qun',6,['snjs_boss_tianshuwumawuma','snjs_boss_tianshuswdl'],['shen','hiddenboss','bossallowed',"unseen"]],
					"snjs_boss_tianshuweiyang":['female','wu',5,['snjs_boss_tianshuweiyangweiyang','snjs_boss_tianshuswdl'],['shen','hiddenboss','bossallowed',"unseen"]],
					"snjs_boss_tianshushenhou":['male','wu',5,['snjs_boss_tianshushenhoushenhou','snjs_boss_tianshuswdl'],['shen','hiddenboss','bossallowed',"unseen"]],
					"snjs_boss_tianshuyouji":['male','wei',5,['snjs_boss_tianshuyoujiyouji','snjs_boss_tianshuswdl'],['shen','hiddenboss','bossallowed',"unseen"]],
					"snjs_boss_tianshuxugou":['male','shu',6,['snjs_boss_tianshuxugouxugou','snjs_boss_tianshuswdl'],['shen','hiddenboss','bossallowed',"unseen"]],
					"snjs_boss_tianshuhaizhu":['male','qun',7,['snjs_boss_tianshuhaizhuhaizhu','snjs_boss_tianshuswdl'],['shen','hiddenboss','bossallowed',"unseen"]],
					"snjs_boss_tianshubaihu":['male','shen',8,['boss_shenyi','snjs_boss_tianshubaihuhuwei','snjs_boss_tianshubaihukuangxiao','snjs_boss_tianshuswdl'],['shen','hiddenboss','bossallowed',"unseen"]],
					"snjs_boss_tianshuqinglong":['male','shen',8,['boss_shenyi','snjs_boss_tianshuqinglonglonghui','snjs_boss_tianshuqinglonglonglin','snjs_boss_tianshuswdl'],['shen','hiddenboss','bossallowed',"unseen"]],
					"snjs_boss_tianshuxuanwu":['female','shen',8,['boss_shenyi','snjs_boss_tianshuxuanwulingqu','snjs_boss_tianshuxuanwuxuankai','snjs_boss_tianshuswdl'],['shen','hiddenboss','bossallowed',"unseen"]],
					"snjs_boss_tianshuzhuque":['female','shen',8,['boss_shenyi','snjs_boss_tianshuzhuquezhuyu','snjs_boss_tianshuzhuquefentian','snjs_boss_tianshuswdl'],['shen','hiddenboss','bossallowed',"unseen"]],
					"snjs_boss_tianshumengpo":['female','shen',8,['snjs_boss_zhuoguimpat','snjs_boss_zhuoguimpyj','snjs_boss_zhuoguigm','snjs_boss_tianshuswdl'],['shen','hiddenboss','bossallowed',"unseen"]],
					"snjs_boss_tianshuheiwuchang":['male','shen',5,['snjs_boss_zhuoguihwcxx','snjs_boss_zhuoguihwctp','snjs_boss_zhuoguihwcdh','snjs_boss_zhuoguigm','snjs_boss_tianshuswdl'],['shen','hiddenboss','bossallowed',"unseen"]],
					"snjs_boss_tianshubaiwuchang":['male','shen',7,['snjs_boss_zhuoguibwcbl','snjs_boss_zhuoguibwcqz','snjs_boss_zhuoguibwcmz','snjs_boss_zhuoguigm','snjs_boss_tianshuswdl'],['shen','hiddenboss','bossallowed',"unseen"]],
					"snjs_boss_tianshuniutou":['male','shen',6,['snjs_boss_zhuoguintxs','snjs_boss_zhuoguintmj','snjs_boss_zhuoguigm','snjs_boss_tianshuswdl'],['shen','hiddenboss','bossallowed',"unseen"]],
					"snjs_boss_tianshumamian":['male','shen',6,['snjs_boss_zhuoguimmsy','snjs_boss_zhuoguimmgz','snjs_boss_zhuoguigm','snjs_boss_tianshuswdl'],['shen','hiddenboss','bossallowed',"unseen"]],
					"snjs_boss_tianshubaowei":['male','shen',6,['snjs_boss_zhuoguibwys','snjs_boss_zhuoguibwel','snjs_boss_zhuoguigm','snjs_boss_tianshuswdl'],['shen','hiddenboss','bossallowed',"unseen"]],
					"snjs_boss_tianshuniaozui":['male','shen',6,['snjs_boss_zhuoguinzby','snjs_boss_zhuoguinzsx','snjs_boss_zhuoguigm','snjs_boss_tianshuswdl'],['shen','hiddenboss','bossallowed',"unseen"]],
					"snjs_boss_tianshuyusai":['female','shen',9,['snjs_boss_zhuoguiysgx','snjs_boss_zhuoguiysac','snjs_boss_zhuoguigm','snjs_boss_tianshuswdl'],['shen','hiddenboss','bossallowed',"unseen"]],
					"snjs_boss_tianshuhuangfeng":['male','shen',5,['snjs_boss_zhuoguihfdz','snjs_boss_zhuoguihfmc','snjs_boss_zhuoguigm','snjs_boss_tianshuswdl'],['shen','hiddenboss','bossallowed',"unseen"]],
					"snjs_boss_tianshuweixi":['male','wei',7,['snjs_boss_tianshuweixitaoyuan','snjs_boss_tianshuswdl'],['shen','hiddenboss','bossallowed',"unseen"]],
					"snjs_boss_tianshushuxi":['male','shu',7,['snjs_boss_tianshushuxipaoxiao','snjs_boss_tianshushuxilizhan','snjs_boss_tianshuswdl'],['shen','hiddenboss','bossallowed',"unseen"]],
					"snjs_boss_tianshuwuxi":['female','wu',7,['snjs_boss_tianshuwuximingzhe','snjs_boss_tianshuwuxitianxiang','snjs_boss_tianshuswdl'],['shen','hiddenboss','bossallowed',"unseen"]],
					"snjs_boss_tianshuqunxi":['male','qun',7,['snjs_boss_tianshuqunxijvxiang','snjs_boss_tianshuqunxishouxi','snjs_boss_tianshuswdl'],['shen','hiddenboss','bossallowed',"unseen"]],
					"snjs_boss_tianshuweinian":['male','wei',8,['snjs_boss_tianshuweinianfange','snjs_boss_tianshuswdl'],['shen','hiddenboss','bossallowed',"unseen"]],
					"snjs_boss_tianshushunian":['male','shu',8,['snjs_boss_tianshushuniansiyao','snjs_boss_tianshushunianhengsao','snjs_boss_tianshuswdl'],['shen','hiddenboss','bossallowed',"unseen"]],
					"snjs_boss_tianshuwunian":['female','wu',8,['snjs_boss_tianshuwunianzhuyan','snjs_boss_tianshuwunianxiaoshou','snjs_boss_tianshuswdl'],['shen','hiddenboss','bossallowed',"unseen"]],
					"snjs_boss_tianshuqunnian":['male','qun',8,['snjs_boss_tianshuqunnianqunxiang','snjs_boss_tianshuqunniantanshi','snjs_boss_tianshuswdl'],['shen','hiddenboss','bossallowed',"unseen"]],
					"snjs_boss_tianshuweishunian":['male','shen',10,['snjs_boss_tianshuweishunianqubi','snjs_boss_tianshuweishunianhuaji','snjs_boss_tianshuswdl'],['shen','hiddenboss','bossallowed',"unseen"]],
					"snjs_boss_tianshuweiwunian":['male','shen',10,['snjs_boss_tianshuweiwunianweihe','snjs_boss_tianshuswdl'],['shen','hiddenboss','bossallowed',"unseen"]],
					"snjs_boss_tianshuweiqunnian":['male','shen',10,['snjs_boss_tianshuweiqunnianyuxiang','snjs_boss_tianshuswdl'],['shen','hiddenboss','bossallowed',"unseen"]],
					"snjs_boss_tianshushuwunian":['female','shen',10,['snjs_boss_tianshushuwunianhuanling','snjs_boss_tianshushuwunianfangong','snjs_boss_tianshuswdl'],['shen','hiddenboss','bossallowed',"unseen"]],
					"snjs_boss_tianshushuqunnian":['male','shen',10,['snjs_boss_tianshushuqunnianxunshou','snjs_boss_tianshushuqunnianxunlie','snjs_boss_tianshuswdl'],['shen','hiddenboss','bossallowed',"unseen"]],
					"snjs_boss_tianshuwuqunnian":['female','shen',10,['snjs_boss_tianshuwuqunnianhuozhong','snjs_boss_tianshuwuqunnianzange','snjs_boss_tianshuswdl'],['shen','hiddenboss','bossallowed',"unseen"]],
					"snjs_boss_tianshuheiwuchangbaiwuchang":['male','shen',8,['snjs_boss_zhuoguihwcxx','snjs_boss_zhuoguihwctp','snjs_boss_zhuoguibwcqz','snjs_boss_zhuoguibwcmz','snjs_boss_zhuoguigm','snjs_boss_tianshuswdl'],['shen','hiddenboss','bossallowed',"unseen"]],
					"snjs_boss_tianshuniutoumamian":['male','shen',8,['snjs_boss_zhuoguintxs','snjs_boss_zhuoguintmj','snjs_boss_zhuoguimmsy','snjs_boss_zhuoguimmgz','snjs_boss_zhuoguigm','snjs_boss_tianshuswdl'],['shen','hiddenboss','bossallowed',"unseen"]],
					"snjs_boss_tianshuriyoushenyeyoushen":['male','shen',8,['snjs_boss_zhuoguirysyyszc','snjs_boss_zhuoguirysyysyz','snjs_boss_zhuoguirysyyshy','snjs_boss_zhuoguirysyysde','snjs_boss_zhuoguigm','snjs_boss_tianshuswdl'],['shen','hiddenboss','bossallowed',"unseen"]],
					"snjs_boss_tianshuqiuniu":['male','shen',8,['snjs_boss_tianshuqiuniulongxian','snjs_boss_tianshuqiuniulige','snjs_boss_tianshuqiuniuqinlv','snjs_boss_tianshuqiuniujilv','snjs_boss_tianshuswdl'],['shen','hiddenboss','bossallowed',"unseen"]],
					"snjs_boss_tianshusuanni":['male','shen',8,['snjs_boss_tianshusuannilongzhen','snjs_boss_tianshusuanniruiyan','snjs_boss_tianshusuanniraoling','snjs_boss_tianshusuannixiangjin','snjs_boss_tianshuswdl'],['shen','hiddenboss','bossallowed',"unseen"]],
					"snjs_boss_tianshuchiwen":['male','shen',8,['snjs_boss_tianshuchiwenlongao','snjs_boss_tianshuchiwenquyan','snjs_boss_tianshuchiwenyuhuo','snjs_boss_tianshuchiwenfubing','snjs_boss_tianshuswdl'],['shen','hiddenboss','bossallowed',"unseen"]],
					"snjs_boss_tianshuyazi":['male','shen',8,['snjs_boss_tianshuyazilonglie','snjs_boss_tianshuyazichaiyue','snjs_boss_tianshuyazilangri','snjs_boss_tianshuyazibibao','snjs_boss_tianshuswdl'],['shen','hiddenboss','bossallowed',"unseen"]],
					"snjs_boss_tianshuchaofeng":['male','shen',8,['snjs_boss_tianshuchaofenglonglin','snjs_boss_tianshuchaofengzhijiao','snjs_boss_tianshuchaofengzhixie','snjs_boss_tianshuchaofenghaoxian','snjs_boss_tianshuswdl'],['shen','hiddenboss','bossallowed',"unseen"]],
					"snjs_boss_tianshupulao":['male','shen',8,['snjs_boss_tianshupulaolonghou','snjs_boss_tianshupulaoqiejing','snjs_boss_tianshupulaomingyin','snjs_boss_tianshupulaoduyuan','snjs_boss_tianshuswdl'],['shen','hiddenboss','bossallowed',"unseen"]],
					"snjs_boss_tianshubian":['male','shen',8,['snjs_boss_tianshubianlongshi','snjs_boss_tianshubiansongyan','snjs_boss_tianshubiansuwei','snjs_boss_tianshubianhualao','snjs_boss_tianshuswdl'],['shen','hiddenboss','bossallowed',"unseen"]],
					"snjs_boss_tianshubixi":['male','shen',8,['snjs_boss_tianshubixilongxuan','snjs_boss_tianshubixilingxi','snjs_boss_tianshubixishuliu','snjs_boss_tianshubixijienu','snjs_boss_tianshuswdl'],['shen','hiddenboss','bossallowed',"unseen"]],
					"snjs_boss_tianshufuxi":['male','shen',8,['snjs_boss_tianshufuxilongzhi','snjs_boss_tianshufuxilingjie','snjs_boss_tianshufuxifeizhang','snjs_boss_tianshufuxibowen','snjs_boss_tianshuswdl'],['shen','hiddenboss','bossallowed',"unseen"]],
					"snjs_boss_tianshuhuoshenzhurong":['male','shen',10,['boss_shenyi','snjs_boss_tianshuhuoshenzhurongxingxia','snjs_boss_tianshuswdl'],['shen','hiddenboss','bossallowed',"unseen"]],
					"snjs_boss_tianshushuishengonggong":['male','shen',10,['boss_shenyi','snjs_boss_tianshushuishengonggongjuehong','snjs_boss_tianshuswdl'],['shen','hiddenboss','bossallowed',"unseen"]],
					"snjs_boss_tianshubaiqi":['male','shen',10,['snjs_boss_tianshubaiqiwuan','snjs_boss_tianshubaiqishashen','snjs_boss_tianshubaiqichangsheng','snjs_boss_tianshuswdl'],['shen','hiddenboss','bossallowed',"unseen"]],
					"snjs_boss_tianshuyanluowang":['male','shen',15,['snjs_boss_zhuoguiylwdf','snjs_boss_zhuoguiylwxp','snjs_boss_zhuoguiylwdw','snjs_boss_zhuoguigm','snjs_boss_tianshuswdl'],['shen','hiddenboss','bossallowed',"unseen"]],
					"snjs_boss_tianshutaoshen":['male','shen',14,['snjs_boss_tianshutaoshennutao','mashu','snjs_boss_tianshutaoshenxiongzi','snjs_boss_tianshutaoshenlongdan','snjs_boss_tianshutaoshenwushuang','snjs_boss_tianshutaoshenpaoxiao','snjs_boss_tianshuswdl'],['shen','hiddenboss','bossallowed',"unseen"]],
					"snjs_boss_tianshucaoe":['female','qun',12,['snjs_boss_tianshucaoeshoujiang','snjs_boss_tianshucaoeluoshen','snjs_boss_tianshucaoebiyue','snjs_boss_tianshucaoeguose','snjs_boss_tianshucaoejizhi','snjs_boss_tianshuswdl'],['shen','hiddenboss','bossallowed',"unseen"]],
					"snjs_boss_tianshushaohao":['male','shen',13,['boss_shenyi','snjs_boss_tianshushaohaoshenen','snjs_boss_tianshushaohaobaiyi','snjs_boss_tianshuswdl'],['shen','hiddenboss','bossallowed',"unseen"]],
					"snjs_boss_tianshuhanba":['female','shen',13,['snjs_boss_tianshuhanbafenshi','snjs_boss_tianshuhanbazhiri','snjs_boss_tianshuhanbaxinji','snjs_boss_tianshuswdl'],['shen','hiddenboss','bossallowed',"unseen"]],
					"snjs_boss_tianshuxuannv":['female','shen',12,['snjs_boss_tianshuxuannvdishi','snjs_boss_tianshuxuannvjiutian','snjs_boss_tianshuxuannvxuanlie','snjs_boss_tianshushenqu','snjs_boss_tianshuswdl'],['shen','hiddenboss','bossallowed',"unseen"]],
					"snjs_boss_tianshukuafu":['male','shen',15,['snjs_boss_tianshukuafuzhuri','snjs_boss_tianshukuafuyinjiang','snjs_boss_tianshukuafulieben','snjs_boss_tianshushenqu','snjs_boss_tianshuswdl'],['shen','hiddenboss','bossallowed',"unseen"]],
					
					"snjs_tszz_xiaosha":["female","qun",4,["snjs_tszz_guisha","snjs_tszz_shuli","snjs_tszz_xuxiang"],["unseen"]],
					"snjs_tszz_xiaoshan":["female","qun",4,["snjs_tszz_shanwu","snjs_tszz_xianli","snjs_tszz_xuxiang"],["unseen"]],
					"snjs_tszz_xiaojiu":["female","qun",4,["snjs_tszz_meiniang","snjs_tszz_yaoli","snjs_tszz_xuxiang"],["unseen"]],
					"snjs_tszz_xiaotao":["female","qun",4,["snjs_tszz_taoyan","snjs_yanli","snjs_tszz_xuxiang"],["unseen"]],
					"snjs_tszz_xiaole":["female","qun",4,["snjs_tszz_leyu","snjs_yuanli","snjs_tszz_xuxiang"],["unseen"]],
					
					
					"snjs_boss_baizhantianshu":['male','',0,['snjs_boss_baizhan','snjs_boss_baizhan_intro1','snjs_boss_baizhan_intro2','snjs_boss_baizhan_intro3','snjs_boss_baizhan_intro4','snjs_boss_baizhan_intro5'],['boss',"unseen","allowed"],'shu'],
				},
				characterSort:{
					snjs:{
						snjs_wei:["snjs_bianxi","snjs_dianweicaoang","snjs_jiachong","snjs_xiahouen","snjs_zhaoang","snjs_xianyufu","snjs_baoxin","snjs_chezhou","snjs_caohua","snjs_caoxian","snjs_caoyuee","snjs_sp_zhangxiu","snjs_re_caochong","snjs_re_caoang","snjs_jibu"],
						snjs_shu:["snjs_fanqiangzhangda","snjs_sp_fushirenmifang","snjs_gouan","snjs_guanyuzhangfei","snjs_wuban","snjs_xiahouzie","snjs_sp_xvjing","snjs_zhangwei","snjs_sp_chenzhen","snjs_gaoxiang","snjs_al_guanyu","snjs_jiangwan","snjs_re_mayunlu","snjs_sp_mizhu","snjs_xiahoulan","snjs_zhangbiao","snjs_wangtao","snjs_wangyue","snjs_liuxun","snjs_pangxi","snjs_feiguan"],
						snjs_wu:["snjs_sp_liubei","snjs_penghu","snjs_pengqi","snjs_yuanshi","snjs_sp_zhouche","snjs_zhucaizhuji","snjs_zhuzhizhuranzhuhuan","snjs_sp_sunyi","snjs_sunyu","snjs_re_dingfeng","snjs_ju_sunquan","snjs_zhanghong","snjs_sp_lusu","snjs_sp_zumao","snjs_sunhuan"],
						snjs_qun:["snjs_sp_fanyufeng","snjs_haomeng","snjs_houcheng","snjs_liuli","snjs_sp_lvbu","snjs_wangchong","snjs_wenchou","snjs_yanliang","snjs_yushe","snjs_sp_lvlingqi","snjs_guodian","snjs_sp_dongbai","snjs_zhangsu","snjs_zhuhao","snjs_sp_xunyu","snjs_xinping","snjs_yuanshang","snjs_yuantan","snjs_guotu","snjs_pangji","snjs_fazhen","snjs_sp_hanfu"],
						snjs_jin:["snjs_simayan","snjs_al_chenqian","snjs_chenqian","snjs_chenshou","snjs_sp_yanghu"],
						snjs_huang:["snjs_bocai","snjs_chengyuanzhi","snjs_dengmao","snjs_guanhai","snjs_huangjinbing","snjs_zhangchu","snjs_zhangchun","snjs_sp_zhangjiao","snjs_zhangjv","snjs_zhangjvzhangchun","snjs_sp_zhangning","snjs_zhangyan"],
						snjs_gui:["snjs_re_beimihu"],
						snjs_shi:["snjs_caojie","snjs_chengkuang","snjs_duangui","snjs_fengxu","snjs_guosheng","snjs_houlan","snjs_jianshuo","snjs_xiayun","snjs_sp_zhangrang","snjs_sp_zhaozhong"],
						snjs_lao:["snjs_ex_gaoshun","snjs_ex_huaxiong","snjs_ex_lvbu","snjs_re_chengong"],
						snjs_dou:["snjs_sp_xushao","snjs_xiaosha","snjs_xiaoshan","snjs_xiaojiu","snjs_xiaotao","snjs_xiaole"],
						snjs_extreme:["snjs_ex_machao","snjs_ex_guojia","snjs_ex_huanggai","snjs_ex_zhangliao","snjs_ex_sunce","snjs_ex_sunjian","snjs_ex_ganning","snjs_ex_zhouyu","snjs_ex_luxun","snjs_ex_huangzhong","snjs_ex_guanyu","snjs_ex_zhangfei","snjs_ex_zhaoyun","snjs_ex_liubei","snjs_ex_simayi","snjs_ex_xuchu","snjs_ex_xiahoudun","snjs_ex_dianwei","snjs_ex_madai","snjs_ex_sunquan","snjs_ex_caocao","snjs_ex_zhenji","snjs_ex_zhugeliang","snjs_ex_sunshangxiang"],
						snjs_virtual:[],
						snjs_shen:["snjs_re_shen_caocao","snjs_re_shen_ganning","snjs_re_shen_guanyu","snjs_sp_shen_guojia","snjs_re_shen_liubei","snjs_shen_liuyan","snjs_re_shen_luxun","snjs_re_shen_lvbu","snjs_re_shen_lvmeng","snjs_shen_machao","snjs_re_shen_simayi","snjs_sp_shen_sunce","snjs_shen_sunshangxiang","snjs_shen_zhangfei","snjs_re_shen_zhangliao","snjs_shen_zhangxiu","snjs_re_shen_zhaoyun","snjs_re_shen_zhouyu","snjs_re_shen_zhugeliang","snjs_shen_caozhi","snjs_shen_zhugeguo","snjs_shen_weiyan","snjs_shen_sunquan","snjs_shen_zhoutai","snjs_shen_xuchu","snjs_shen_dianwei","snjs_shen_caoren","snjs_shen_zuoci","snjs_shen_dongzhuo","snjs_shen_yuanshao","snjs_sp_shen_guanyu","snjs_shen_zhangjiao","snjs_shen_jiaxu","snjs_shen_zhangsong","snjs_shen_fazheng"],
						snjs_old:["snjs_old_caoren","snjs_old_zhoutai"],
						snjs_hulao:["snjs_boss_zhengzhanhulao","snjs_boss_hulaojieduan111","snjs_boss_hulaojieduan112","snjs_boss_hulaojieduan113","snjs_boss_hulaojieduan114","snjs_boss_hulaojieduan121","snjs_boss_hulaojieduan122","snjs_boss_hulaojieduan123","snjs_boss_hulaojieduan124","snjs_boss_hulaojieduan125","snjs_boss_hulaojieduan126","snjs_boss_hulaojieduan211","snjs_boss_hulaojieduan221","snjs_boss_hulaojieduan222","snjs_boss_hulaojieduan223","snjs_boss_hulaojieduan224","snjs_boss_hulaolvbu1","snjs_boss_hulaolvbu2","snjs_boss_hulaolvbu3"],
						snjs_qihuan:["snjs_boss_qihuanzhizheng","snjs_boss_qihuanzhangrang","snjs_boss_qihuanzhaozhong","snjs_boss_qihuancaojie","snjs_boss_qihuanchengkuang","snjs_boss_qihuanduangui","snjs_boss_qihuanfengxu","snjs_boss_qihuanguosheng","snjs_boss_qihuanhoulan","snjs_boss_qihuanjianshuo","snjs_boss_qihuanxiayun","snjs_boss_qihuanhejin","snjs_boss_qihuanhetaihou","snjs_boss_qihuancaocao","snjs_boss_qihuanxiahoudun","snjs_boss_qihuanxiahouyuan","snjs_boss_qihuancaoren","snjs_boss_qihuancaoang","snjs_boss_qihuanyuanshao","snjs_boss_qihuanxuyou","snjs_boss_qihuanjushou","snjs_boss_qihuanyanwen","snjs_boss_qihuanguofeng","snjs_boss_qihuanyuanshu","snjs_boss_qihuanxunyou","snjs_boss_qihuanchenlin"],
						snjs_zhuogui:["snjs_boss_zhuoguimengpo","snjs_boss_zhuoguiheiwuchang","snjs_boss_zhuoguibaiwuchang","snjs_boss_zhuoguiheiwuchangbaiwuchang","snjs_boss_zhuoguiniutou","snjs_boss_zhuoguimamian","snjs_boss_zhuoguiniutoumamian","snjs_boss_zhuoguiriyoushenyeyoushen","snjs_boss_zhuoguibaowei","snjs_boss_zhuoguiniaozui","snjs_boss_zhuoguiyusai","snjs_boss_zhuoguihuangfeng","snjs_boss_zhuoguiguiwang","snjs_boss_zhuoguiyanluowang"],
						snjs_tianshu:["snjs_boss_tianshubaihu","snjs_boss_tianshuqinglong","snjs_boss_tianshuzhuque","snjs_boss_tianshuxuanwu","snjs_boss_tianshumengpo","snjs_boss_tianshuheiwuchang","snjs_boss_tianshubaiwuchang","snjs_boss_tianshuniutou","snjs_boss_tianshumamian","snjs_boss_tianshubaowei","snjs_boss_tianshuyusai","snjs_boss_tianshuniaozui","snjs_boss_tianshuhuangfeng","snjs_boss_tianshuzishu","snjs_boss_tianshuchouniu","snjs_boss_tianshuyinhu","snjs_boss_tianshumaotu","snjs_boss_tianshuchenlong","snjs_boss_tianshusishe","snjs_boss_tianshuwuma","snjs_boss_tianshuweiyang","snjs_boss_tianshushenhou","snjs_boss_tianshuyouji","snjs_boss_tianshuxugou","snjs_boss_tianshuhaizhu","snjs_boss_tianshuqiuniu","snjs_boss_tianshusuanni","snjs_boss_tianshuchiwen","snjs_boss_tianshuyazi","snjs_boss_tianshuchaofeng","snjs_boss_tianshupulao","snjs_boss_tianshubian","snjs_boss_tianshubixi","snjs_boss_tianshufuxi","snjs_boss_tianshuweixi","snjs_boss_tianshushuxi","snjs_boss_tianshuwuxi","snjs_boss_tianshuqunxi","snjs_boss_tianshuweinian","snjs_boss_tianshushunian","snjs_boss_tianshuwunian","snjs_boss_tianshuqunnian","snjs_boss_tianshuweishunian","snjs_boss_tianshuweiwunian","snjs_boss_tianshuweiqunnian","snjs_boss_tianshushuwunian","snjs_boss_tianshushuqunnian","snjs_boss_tianshuwuqunnian","snjs_boss_tianshuhuoshenzhurong","snjs_boss_tianshushuishengonggong","snjs_boss_tianshubaiqi","snjs_boss_tianshuyanluowang","snjs_boss_tianshutaoshen","snjs_boss_tianshucaoe","snjs_boss_tianshushaohao","snjs_boss_tianshuhanba","snjs_boss_tianshuxuannv","snjs_boss_tianshukuafu","snjs_boss_tianshuheiwuchangbaiwuchang","snjs_boss_tianshuniutoumamian","snjs_boss_tianshuriyoushenyeyoushen"],
					},
				},
				skill:{
            szfyb:{
                audio:"ext:神怒降世:2",
				init:function(player){
					if(!player.storage.szfyb) player.storage.szfyb=[];
				},
				usable:1,
				intro:{
					content:"cards",
					onunmark:function(storage,player){
						if(storage&&storage.length){
							player.$throw(storage,1000);
							game.cardsDiscard(storage);
							game.log(storage,'被置入了弃牌堆');
							storage.length=0;
						}
					},
				},
				trigger:{
					global:"useCardAfter",
					player:"die",
				},
				forced:true,
				filter:function(event,player,name){
					if(name!="die"){
						return event.cards.filterInD().length>0&&event.card.name=='sha';
					}
					else return player.storage.szfyb.length>0;
				},
				content:function(){
					if(event.triggername!="die"){
						if(!player.storage.szffq){
							player.$gain2(trigger.cards.filterInD());
							player.markAuto('szfyb',trigger.cards.filterInD());
							game.cardsGotoSpecial(trigger.cards.filterInD());
							player.markSkill('szfyb');
							game.log(player,'将',trigger.cards.filterInD(),'置于了','#g「疑兵」上');
						}
						else player.gain(trigger.cards.filterInD(),'gain2');
					}
					else{
						event.card=player.storage.szfyb;
						player.$throw(event.card,1000);
						game.delayx();
						game.cardsDiscard(event.card);
						game.log(event.card,'被置入了弃牌堆');
						player.storage.szfyb=[];
					}
				},
            },
			szfyb2:{},
            szffq:{
                audio:"ext:神怒降世:1",
                unique:true,
                skillAnimation:true,
                animationStr:"奋起",
                animationColor:"soil",
                juexingji:true,
                derivation:"szfyb2",
                trigger:{
                    player:"phaseUseBegin",
                },
                filter:function(event,player){
					if(player.storage.szffq) return false;
					return player.storage.szfyb.length>=player.hp;
				},
				forced:true,
                content:function(){
					player.storage[event.name]=true;
					player.awakenSkill('szffq');
					if(player.storage.szfyb.length>player.hp) player.recover(player.storage.szfyb.length-player.hp);
					if(player.storage.szfyb.length>0){
						player.gain(player.storage.szfyb,'gain2','log','fromStorage');
						player.storage.szfyb=[];
						player.updateMarks('szfyb');
						player.unmarkSkill('szfyb');
					}
					game.log(player,'修改了技能','#g〖咆哮〗','与','#g〖疑兵〗')
				},
			},
            szfzh:{
                audio:"ext:神怒降世:2",
                trigger:{
                    player:"phaseZhunbeiBegin",
                },
                direct:true,
                content:function (){
					"step 0"
					player.chooseTarget(get.prompt('szfzh'),'<center>令一名角色展示所有手牌，若其中有【闪】，其选择：1.弃置所有【闪】2.受到1点伤害</center>',function(card,player,target){
						return target!=player&&target.countCards('h')>0;
					}).set('ai',function(target){
						var player=_status.event.player;
						return get.damageEffect(target,player,player);
					});
					"step 1"
					if(result.bool&&result.targets&&result.targets.length){
						event.mubiao=result.targets[0];
						player.logSkill('szfzh',result.targets);
						if(event.mubiao.countCards('h')>0) event.mubiao.showHandcards();
					}
					else event.goto(5);
					"step 2"
					if(event.mubiao.getCards('h',{name:'shan'}).length<1){
						//event.mubiao.damage();
						event.goto(5);
					}
					"step 3"
					event.mubiao.chooseControl('弃【闪】','受到伤害').set('prompt','〖战吼〗：选择一项').set('ai',function(target){
						if(event.mubiao.getCards('h',{name:'shan'}).length>2) return '受到伤害';
						return '弃【闪】';
					});
					"step 4"
					if(result.control=='弃【闪】'){
						event.mubiao.discard(event.mubiao.getCards('h',{name:'shan'}));
					}
					else{
						event.mubiao.damage();
					}
					"step 5"
				},
                ai:{
                    expose:0.25,
                    threaten:1.7,
                },
            },
            szfpx:{
                audio:"ext:神怒降世:2",
				group:"szfpx_mark",
                mod:{
                    cardUsable:function(card,player,num){
						if(card.name=='sha') return Infinity;
					},
					targetInRange:function (card,player){
						if(player.countUsed('sha',true)>0&&card.name=='sha') return true;
					},
                },
                firstDo:true,
                trigger:{
                    player:"useCard1",
                },
                forced:true,
                filter:function(event,player){
					return !event.audioed&&event.card.name=='sha'&&player.countUsed('sha',true)>1&&event.getParent().type=='phase';
				},
                content:function(){
					trigger.audioed=true;
				},
				subSkill:{
					mark:{
						trigger:{
							player:"shaMiss",
						},
						forced:true,
						direct:true,
						content:function(){
							player.addTempSkill('szfpx_damage');
							player.addMark('szfpx_damage',1,false);
						},
						sub:true,
					},
					damage:{
						trigger:{
							source:"damageBegin1",
						},
						intro:{
							name:"咆哮",
							content:"本回合内下一次使用【杀】造成伤害时令伤害值+#",
						},
						filter:function(event,player){
							return event.card&&event.card.name=='sha'&&player.countMark('szfpx_damage')>0;
						},
						forced:true,
						direct:true,
						onremove:true,
						content:function(){
							trigger.num+=player.countMark('szfpx_damage');
							player.removeSkill('szfpx_damage');
						},
						sub:true,
					},
				},
                ai:{
                    unequip:true,
                    skillTagFilter:function(player,tag,arg){
						if(!get.zhu(player,'shouyue')) return false;
						if(arg&&arg.name=='sha') return true;
						return false;
					},
                },
            },
            slyts:{
                audio:"ext:神怒降世:1",
				mod:{
					aiOrder:function(player,card,num){
						if(typeof card=='object'&&player==_status.currentPhase){
							if(get.type(card)=='basic') return num+10;
							if(get.type(card)=='equip') return num=1;
							if(card.name=='wugu'||card.name=='wanjian'||card.name=='nanman'||card.name=='taoyuan'){
								if(player.countCards('h',{type:'basic'})<1) return num+10;
								else return num=1;
							}
							if(card.name!='wugu'&&card.name!='wanjian'&&card.name!='nanman'&&card.name!='taoyuan'){
								if(player.countCards('h',{type:'basic'})<1) return num+9;
								else return num=1;
							}
						}
					},
				},
                trigger:{
                    player:"useCardToPlayered",
                },
				intro:{
					name:"图射",
					content:"以通过〖图射〗摸了#张牌",
				},
                frequent:false,
                filter:function (event,player){
					if(get.type(event.card)=='equip') return false;
					if(event.getParent().triggeredTargets3.length>1) return false;
					return event.targets.length>0&&!player.countCards('h',{type:'basic',});
				},
                content:function (){
					player.draw(trigger.targets.length);
					player.addMark('slyts',trigger.targets.length);
				},
                ai:{
                    presha:true,
                    pretao:true,
                    threaten:1.8,
                },
                "audioname2":{
                    caoshuang:"tuogu",
                },
            },
            slylm:{
                mod:{
                    targetInRange:function (card,player,target){
						if(player.countCards('j')&&player.inRange(target)){
							return true;
						}
					},
                    cardUsableTarget:function(card,player,target){
						if(player.countCards('j')&&player.inRange(target)) return true;
					},
                    aiValue:function(player,card,num){
						if(card.name=='zhangba') return 15;
						if(player.getEquip('zhangba')&&player.countCards('h')>1&&['shan','tao'].contains(card.name)) return 0;
						if(card.name=='shan'||card.name=='tao') return num/2;
					},
                },
                locked:false,
                audio:"ext:神怒降世:1",
                enable:"phaseUse",
                discard:false,
                filter:function (event,player){
					if(player.hasJudge('lebu')) return false;
					return player.countCards('he',{suit:'diamond'})>0;
				},
                viewAs:{
                    name:"lebu",
                },
                position:"he",
                filterCard:function(card,player,event){
					return get.suit(card)=='diamond'&&player.canAddJudge({name:'lebu',cards:[card]});
				},
                selectTarget:-1,
                filterTarget:function (card,player,target){
					return player==target;
				},
                check:function(card){
					var player=_status.event.player;
					if(!player.getEquip('zhangba')&&player.countCards('h','sha')<2){
						if(player.countCards('h',function(cardx){
							return cardx!=card&&cardx.name=='shan';
						})>0) return 0;
						var damaged=player.maxHp-player.hp-1;
						var ts=player.countCards('h',function(cardx){
							return cardx!=card&&cardx.name=='tao';
						});
						if(ts>0&&ts>damaged) return 0;
					}
					if(card.name=='shan') return 15;
					if(card.name=='tao') return 10;
					return 9-get.value(card);
				},
                onuse:function (links,player){
					var next=game.createEvent('slylm_recover',false,_status.event.getParent());
					next.player=player;
					next.setContent(function(){player.recover()});
				},
                ai:{
                    result:{
                        target:1,
                    },
                    order:12,
                    basic:{
                        order:1,
                        useful:1,
                        value:8,
                    },
                    tag:{
                        skip:"phaseUse",
                    },
                },
            },
            slyzf:{
                audio:"ext:神怒降世:1",
                unique:true,
                enable:"phaseUse",
                mark:true,
                skillAnimation:true,
                animationStr:"自封",
                animationColor:"water",
                limited:true,
                init:function(player){
					player.storage.slyzf=false;
				},
                filter:function(event,player){
					if(player.countMark('slyts')<18) return false;
					if(player.storage.slyzf) return false;
					return true;
				},
                content:function(){
					player.storage.slyzf=true;
					player.awakenSkill('slyzf');
					//player.addSkill('slybc');
					var card=get.cardPile('zhangba','field');
					if(card){
						player.gain(card,'gain2','log');
					}
				},
                intro:{
					name:"自封",
                    content:"limited",
                },
                ai:{
                    order:20,
                    result:{
                        player:1,
                    },
                },
            },
            slypa:{
                audio:"ext:神怒降世:1",
				group:['slypa_fanmian','slypa_fanhuilai'],
                enable:"phaseUse",
                usable:1,
				filterCard:true,
				selectCard:-1,
				viewAs:{
					name:"wugu",
				},
                ai:{
					combo:"slyts",
                    order:1,
                    result:{
						player:function(player){
							return 1;
						},
                    },
                },
				subSkill:{
					fanmian:{
						trigger:{player:'useCardAfter'},
                        direct:true,
						forced:true,
						popup:false,
						filter:function(event,player){
							return event.skill=='slypa';
						},
						content:function(){
							player.turnOver();
						},
						sub:true,
					},
					fanhuilai:{
						trigger:{
							player:"turnOverEnd",
						},
						filter:function(event,player){
							return !player.isTurnedOver();
						},
                        direct:true,
						content:function(){
							"step 0"
							player.chooseTarget('〖偏安〗：弃置一名角色区域内的一张牌',function(card,player,target){
								return target.countCards('hej');
							}).set('ai',function(target){
								var player=_status.event.player;
								var att=get.attitude(player,target);
								if(att<0){
									att=-Math.sqrt(-att);
								}
								else{
									att=Math.sqrt(att);
								}
								return att*lib.card.guohe.ai.result.target(player,target);
							});
							"step 1"
							if(result.bool){
								player.logSkill('slypa',result.targets[0]);
								player.discardPlayerCard(result.targets[0],'hej',true);
							}
						},
						sub:true,
					},
				},
            },
            jsgysm:{
                audio:"ext:神怒降世:1",
				/*mod:{
					targetInRange:function (card,player,target){
						if(target.hasSkill('jsgysm_mark')){
							return true;
						}
					},
					cardUsableTarget:function(card,player,target){
						if(target.hasSkill('jsgysm_mark')) return true;
					},
				},*/
                trigger:{
                    source:"damageSource",
                },
                forced:true,
                filter:function(event,player){
					return event.player.isAlive()&&_status.currentPhase==player&&event.card.name=='sha'&&get.color(event.card)=='red';
				},
                logTarget:"player",
                content:function(){
					var num=trigger.num;
					//trigger.cancel();
					trigger.player.loseMaxHp(num);
					if(!trigger.player.hasSkill('jsgysm_mark')) trigger.player.addSkill('jsgysm_mark');
				},
                subSkill:{
                    mark:{
						audio:"ext:神怒降世:1",
						unique:true,
						mark:true,
                        intro:{
                            name:"噬命",
                            content:"梦魇缠身",
                        },
						trigger:{
							player:"recoverBegin",
						},
						forced:true,
						content:function(){
							player.gainMaxHp(trigger.num);
							trigger.cancel();
							player.removeSkill('jsgysm_mark');
						},
                        sub:true,
                    },
                },
            },
            jsgyzh:{
                audio:"ext:神怒降世:2",
                group:["jsgyzh_damage"],
				trigger:{
					player:"shaMiss",
				},
                forced:true,
				filter:function(event,player){
					return player.canUse('sha',event.target,false);
				},
				content:function(){
					"step 0"
					player.draw();
					"step 1"
					player.chooseToUse('〖追魂〗：是否对'+get.translation(trigger.target)+'使用一张【杀】',function(card,player,event){
						if(get.name(card)!='sha') return false;
						return lib.filter.filterCard.apply(this,arguments);
					},trigger.target,-1).set('addCount',false);
				},
                subSkill:{
                    damage:{
                        audio:"ext:神怒降世:1",
						trigger:{
							player:"damageEnd",
						},
						filter:function(event,player){
							return (event.source!=undefined&&event.num>0);
						},
						forced:true,
						content:function(){
							player.draw();
							player.chooseToUse('〖追魂〗：是否对'+get.translation(trigger.source)+'使用一张【杀】',function(card,player,event){
								if(get.name(card)!='sha') return false;
								return lib.filter.filterCard.apply(this,arguments);
							},trigger.source,-1).set('addCount',false);
						},
                        sub:true,
                    },
                },
            },
            jsgyly:{
                audio:"ext:神怒降世:1",
                group:["jsgyly_die","jsgyly_mark"],
                trigger:{
                    source:"damageEnd",
                },
				direct:true,
                forced:true,
                content:function (){
					player.addMark('jsgyly_mark',trigger.num);
				},
                subSkill:{
                    die:{
                        audio:"jsgyly",
                        skillAnimation:true,
                        animationColor:"metal",
						filter:function(event,player){
							return player.maxHp>1&&player.countMark('jsgyly_mark')>=player.maxHp;
						},
						trigger:{
							player:"dieBegin",
						},
						forced:true,
						priority:99,
						firstDo:true,
						content:function(){
							"step 0"
							trigger.cancel();
							player.removeMark('jsgyly_mark',player.countMark('jsgyly_mark'));
							player.loseMaxHp();
							player.recover(player.maxHp-player.hp);
							"step 1"
							if(player.countCards('h')<player.hp) player.draw(player.hp-player.countCards('h'));
							else if(player.countCards('h')>player.hp) player.chooseToDiscard('弃置'+get.cnNumber(player.countCards('h')-player.hp)+'张牌',player.countCards('h')-player.hp,true,'h');
						},
                        sub:true,
                    },
                    mark:{
                        intro:{
                            name:"戾魇",
                            content:"已造成的伤害：#",
                        },
                        sub:true,
                    },
                },
            },
            jsgygs:{
                mod:{
					cardname:function(card,player,name){
						if(get.color(card)=='red') return 'sha';
					},
					cardnature:function(card,player){
						if(get.color(card)=='red') return 'fire';
					},
				},
                audio:"ext:神怒降世:1",
				trigger:{
					player:"useCard",
				},
				forced:true,
				filter:function(event,player){
					return event.card.name=='sha'&&get.color(event.card)=='red';
				},
				content:function(){},
            },
            smczm:{
                animationColor:"metal",
                skillAnimation:"legend",
				usable:1,
                audio:"ext:神怒降世:1",
				global:"smczm2",
				init:function(player){
					game.countPlayer(function(current){
						if(!current.storage.smczm2) current.storage.smczm2=[];
						if(!current.storage.smczm2_qingchu) current.storage.smczm2_qingchu=[];
					});
				},
                trigger:{
                    player:"useCardEnd",
                },
                filter:function(event,player){
					var shuliang=0;
					for(var i=0;i<event.targets.length;i++){
						if(!event.targets[i].isAlive()) shuliang++;
					}
					return event.card.name=='sha'&&shuliang<event.targets.length;
				},
				check:function(event,player){
					if(event.targets.length<2&&event.targets[0].countCards('he')<1&&event.targets[0].storage.smczm2.length<3) return false;
					var fadong1=0;
					var fadong2=0;
					for(var i=0;i<event.targets.length;i++){
						if(get.attitude(player,event.targets[i])>0) fadong1++;
						else fadong2++;
					}
					return fadong1<fadong2;
				},
                logTarget:"targets",
                content:function(){
					'step 0'
					event.mubiao=trigger.targets;
					event.i=0;
					'step 1'
					if(event.mubiao[event.i].storage.smczm2.length>=4) event.goto(4);
					'step 2'
					var huase=0;
					if(!event.mubiao[event.i].storage.smczm2.contains('spade')&&event.mubiao[event.i].countCards('he',{suit:'spade'})>0) huase++;
					if(!event.mubiao[event.i].storage.smczm2.contains('heart')&&event.mubiao[event.i].countCards('he',{suit:'heart'})>0) huase++;
					if(!event.mubiao[event.i].storage.smczm2.contains('club')&&event.mubiao[event.i].countCards('he',{suit:'club'})>0) huase++;
					if(!event.mubiao[event.i].storage.smczm2.contains('diamond')&&event.mubiao[event.i].countCards('he',{suit:'diamond'})>0) huase++;
					if(huase!=0){
						event.mubiao[event.i].chooseToDiscard('〖追命〗：弃置一张本回合未失去过的花色的牌','he',true,function(card){
							return !event.mubiao[event.i].storage.smczm2.contains(get.suit(card));
						});
					}
					else event.goto(4);
					'step 3'
					if(result.bool){
						event.goto(1);
					}
					'step 4'
					if(event.mubiao[event.i].storage.smczm2.length>=3){
						event.mubiao[event.i].damage('nocard');
					}
					event.i++;
					'step 5'
					if(event.i<event.mubiao.length) event.goto(1);
				},
				ai:{
					expose:0.4,
					threaten:0.4,
				},
            },
			smczm2:{
				mod:{
					"cardEnabled2":function(card,player){
						if(player.storage.smczm2.contains(get.suit(card))) return false;
					},
				},
				trigger:{
					player:"loseEnd",
				},
				filter:function(event,player){
					return player!=_status.currentPhase&&_status.currentPhase.hasSkill('smczm');
				},
				silent:true,
				unique:true,
				forced:true,
				charlotte:true,
				content:function(){
					if(!player.hasSkill('smczm2_qingchu')) player.addTempSkill('smczm2_qingchu');
					for(var i=0;i<trigger.cards2.length;i++){
						if(!player.storage.smczm2.contains(get.suit(trigger.cards2[i]))){
							player.storage.smczm2.push(get.suit(trigger.cards2[i]));
							if(get.suit(trigger.cards2[i])=='spade') player.storage.smczm2_qingchu.push('♠');
							if(get.suit(trigger.cards2[i])=='heart') player.storage.smczm2_qingchu.push('♥');
							if(get.suit(trigger.cards2[i])=='club') player.storage.smczm2_qingchu.push('♣');
							if(get.suit(trigger.cards2[i])=='diamond') player.storage.smczm2_qingchu.push('♦');
						}
					}
					player.updateMarks('smczm2_qingchu');
				},
				subSkill:{
					qingchu:{
						mark:true,
						marktext:"追命",
						mod:{},
						intro:{
							name:"追命",
							content:"$",
						},
						silent:true,
						unique:true,
						forced:true,
						onremove:function(player){
							player.storage.smczm2=[];
							player.storage.smczm2_qingchu=[];
							player.updateMarks('smczm_qingchu');
						},
						sub:true,
						popup:false,
					},
				},
			},
            smcwf:{
                audio:"ext:神怒降世:1",
				group:["smcwf_damage","smcwf_draw"],
				enable:"chooseToUse",
				filterCard:{
					name:"sha",
				},
				selectCard:[1,Infinity],
				position:"h",
				viewAs:{
					name:"sha",
				},
				complexCard:true,
				filter:function(event,player){
					return player.countCards('h',{name:'sha'})>=1;
				},
				prompt:"将任意张【杀】当作【杀】使用",
				check:function(card){
					return 5-get.value(card)
				},
				subSkill:{
					damage:{
						trigger:{
							player:"useCardToTargeted",
						},
						filter:function(event,player){
							if (event.cards.filterInD().length<1) return false;
							return event.card.name=='sha';
						},
						direct:true,
						forced:true,
						content:function(){
							var id=trigger.target.playerid;
							var map=trigger.getParent().customArgs;
							if(!map[id]) map[id]={};
							if(typeof map[id].extraDamage!='number'){
								map[id].extraDamage=0;
							}
							map[id].extraDamage+=trigger.cards.length-1;
						},
						sub:true,
					},
					draw:{
						trigger:{
							source:"damageSource",
						},
						filter:function(event,player){
							return event.card&&event.card.name=='sha';
						},
						direct:true,
						forced:true,
						content:function(){
							player.draw(trigger.num);
						},
						sub:true,
					},
				},
				ai:{
					order:function(){
						return get.order({name:'sha'})+1;
					},
					result:{
						target:function(player,target){
							return -1;
						},
					},
				},
            },
            smcsj:{
                mod:{
                    globalFrom:function(from,to){
						return -Infinity;
					},
                },
            },
            smctw:{
                audio:"ext:神怒降世:1",
				trigger:{
					player:"phaseZhunbeiBegin",
				},
				direct:true,
                content:function(){
					'step 0'
					player.chooseTarget(get.prompt('smctw'),'<center>令一名角色交给你一张【杀】，若其没交给你牌，则该角色本回合所有非锁定技失效且视为你对其使用一张不计入使用次数的【杀】</center>',function(card,player,target){
						return target!=player&&target.countCards('h');
					}).set('ai',function(target){
						return get.attitude(player,target)<0;
					});
					'step 1'
					if(result.bool){
						var target=result.targets[0];
						event.target=target;
						player.logSkill('smctw',target);
						target.chooseCard('h',{name:'sha'},'将一张【杀】交给'+get.translation(player));
					}
					else{
						event.finish();
					}
					'step 2'
					if(result.bool){
						event.target.give(result.cards,player,true);
					}
					else{
						if(!event.target.hasSkill('fengyin')) event.target.addTempSkill('fengyin');
						player.useCard({name:'sha',isCard:true},false,event.target);
					}
				},
                ai:{
					ignoreSkill:true,
                },
            },
            jszldr:{
                audio:"ext:神怒降世:1",
                init:function(player){
					if(!player.storage.jszldr) player.storage.jszldr=[];
				},
				mark:true,
				intro:{
					name:"夺锐",
					content:"$",
				},
                trigger:{
                    source:"damageBegin",
                },
                usable:1,
                filter:function(event,player){
					return player!=event.player&&!event.player.hasSkill('drlt_jszldr1');
				},
                check:function(event,player){
					if(player.countDisabled()<5&&player.isDisabled(5)) return false;
					return true;
				},
                skillAnimation:true,
                animationColor:"thunder",
                bannedList:["bifa","buqu","gzbuqu","songci","funan","xinfu_guhuo","reguhuo","huashen","rehuashen","old_guhuo","shouxi","xinpojun","taoluan","xintaoluan","yinbing","xinfu_yingshi","zhenwei","zhengnan","xinzhengnan","zhoufu"],
                content:function(){
					"step 0"
					var list=[];
					var listm=[];
					var listv=[];
					if(trigger.player.name1!=undefined) listm=lib.character[trigger.player.name1][3];
					else listm=lib.character[trigger.player.name][3];
					if(trigger.player.name2!=undefined) listv=lib.character[trigger.player.name2][3];
					listm=listm.concat(listv);
					var func=function(skill){
						var info=get.info(skill);
						if(!info||info.charlotte||info.zhuSkill||info.juexingji||info.limited||(info.unique&&!info.gainable)||lib.skill.drlt_duorui.bannedList.contains(skill)) return false;
						return true;
					};
					for(var i=0;i<listm.length;i++){
						if(func(listm[i])) list.add(listm[i]);
					}
					event.skills=list;
					"step 1"
					if(event.skills.length>0){
						player.chooseControl(event.skills).set('prompt','〖夺锐〗：请选择要获得的技能').set('ai',function(){return event.skills.randomGet()});
					}
					else event.goto(9);
					"step 2"
					event.jineng1=result.control;
					if(player.hasSkill(event.jineng1)){
						trigger.player.storage.drlt_jszldr=[event.jineng1];
						trigger.player.addTempSkill('drlt_jszldr1',{player:'phaseEnd'});
						event.goto(9);
					}
					else event.goto(3);
					"step 3"
					if(player.storage.jszldr.length>0) event.goto(4);
					else{
						player.loseMaxHp(1);
						event.goto(8);
					}
					"step 4"
					player.chooseControl('替换一个获得的技能','减少1点体力上限').set('prompt','〖夺锐〗：选择一项').set('ai',function(){
						if(player.maxHp>3) return '减少1点体力上限';
						return '替换一个获得的技能';
					});
					"step 5"
					if(result.control=='减少1点体力上限'){
						player.loseMaxHp(1);
						event.goto(8);
					}
					else{
						event.goto(6);
					}
					"step 6"
					player.chooseControl(player.storage.jszldr).set('prompt','〖夺锐〗：请选择要替换的技能').set('ai',function(){return player.storage.jszldr.randomGet()});
					"step 7"
					event.jineng2=result.control;
					player.removeSkill(event.jineng2);
					player.storage.jszldr.remove(event.jineng2);
					game.log(player,'失去了技能','#g〖'+get.translation(event.jineng2)+'〗');
					"step 8"
					player.addSkill(event.jineng1);
					player.popup(event.jineng1,'thunder');
					player.storage.jszldr.push(event.jineng1);
					trigger.player.storage.drlt_jszldr=[event.jineng1];
					trigger.player.addTempSkill('drlt_jszldr1',{player:'phaseJieshuBegin'});
					player.updateMarks('jszldr');
					game.log(player,'获得了技能','#g〖'+get.translation(event.jineng1)+'〗');
					"step9"
				},
            },
            jszltx:{
                audio:"ext:神怒降世:1",
                group:"jszltx_chongzhu",
                trigger:{
                    player:"phaseDrawBegin",
                },
                direct:true,
                filter:function (event){
					return event.num>0&&!event.numFixed;
				},
                content:function (){
					"step 0"
					var num=get.copy(trigger.num);
					if(get.mode()=='guozhan'&&num>2) num=2;
					player.chooseTarget(get.prompt('jszltx'),'<center>获得至多'+get.translation(num)+'名角色的各一张手牌，然后少摸等量的牌</center>',[1,num],function(card,player,target){
						return target.countCards('h')>0&&player!=target;
					},function(target){
						var att=get.attitude(_status.event.player,target);
						if(target.hasSkill('tuntian')) return att/10;
						return 1-att;
					});
					"step 1"
					if(result.bool){
						result.targets.sortBySeat();
						player.logSkill('jszltx',result.targets);
						player.gainMultiple(result.targets);
						trigger.num-=result.targets.length;
					}
					else{
						event.finish();
					}
					"step 2"
					if(trigger.num<=0) game.delay();
				},
                ai:{
                    threaten:1.6,
                    expose:0.2,
                },
                subSkill:{
                    chongzhu:{
                        trigger:{
                            player:"phaseDrawAfter",
                        },
                        direct:true,
                        filter:function(event,player){
							return player.storage.jszldr&&player.storage.jszldr.length>0&&player.countCards('he')>0;
						},
                        content:function(){
							"step 0"
							player.chooseToDiscard('〖突袭〗：是否重铸至多'+get.cnNumber(player.storage.jszldr.length)+'张牌？',[1,player.storage.jszldr.length],'he').set('ai',function(card){
								return 7-get.value(card);
							});
							"step 1"
							if(result.bool==true){
								player.draw(result.cards.length);
							}
						},
                        sub:true,
                    },
                },
            },
            jszlzt:{
                audio:"ext:神怒降世:1",
                group:"jszlzt_zhiti",
                global:"jszlzt2",
                content:function(){
					//trigger.num++;
				},
                subSkill:{
                    zhiti:{
                        audio:"jszlzt",
                        trigger:{
                            global:"phaseDiscardBefore",
                        },
                        forced:true,
                        filter:function(event,player){
							return player.inRange(event.player)&&event.player!=player&&event.player.isDamaged();
						},
                        content:function(){
						},
                        sub:true,
                    },
                },
            },
            sscwl:{
                audio:"ext:神怒降世:2",
				group:["sscwl_qingchu"],
				mod:{
					maxHandcardBase:function(player,num){
						return num+player.countMark('sscwl');
					},
				},
				intro:{
					name:"武略",
					content:"当前有#个标记",
				},
				trigger:{
					player:"phaseDrawBegin2",
				},
				filter:function(event,player){
					return player.countCards('h')>0&&event.num>0&&!event.numFixed&&game.hasPlayer(function(target){
						return target.countCards('h')>0&&player!=target;
					});
				},
				direct:true,
                content:function(){
					"step 0"
					event.card=[];
					player.chooseCard(get.prompt('sscwl'),'<center>展示一张手牌</center>').set('ai',function(card){
						var shoupai=player.getCards('h');
						var zhanshi=shoupai[0].number;
						for(var i=0;i<shoupai.length;i++){
							if(zhanshi<shoupai[i].number) zhanshi=shoupai[i].number;
						}
						return card.number>=zhanshi;
					});
					"step 1"
					if(result.bool){
						event.card.push(result.cards[0]);
						player.showCards(event.card);
					}
					else event.goto(8);
					"step 2"
					event.i=0;
					event.cards=[];
					event.draw=0;
					event.targets=game.filterPlayer();
					event.targets.remove(player);
					for(var i=0;i<event.targets.length;i++){
						if(event.targets[i].countCards('h')<1) event.targets.remove(event.targets[i]);
					}
					event.targets.sort(lib.sort.seat);
					player.logSkill('sscwl',event.targets);
					"step 3"
					if(event.i>=event.targets.length) event.goto(7);
					"step 4"
					event.targets[event.i].chooseCard('展示一张手牌，取消则弃置一张牌').set('ai',function(card){
						if(get.attitude(player,event.targets[event.i])<0){
							for(var i=0;i<event.targets[event.i].countCards('h');i++){
								if(card.number>=event.card[0].number) return 1;
							}
							return 0;
						}
						else{
							for(var i=0;i<event.targets[event.i].countCards('h');i++){
								if(card.number<event.card[0].number) return 1;
							}
							return 0;
						}
					});
					"step 5"
					if(result.bool){
						event.cards.push(result.cards[0]);
						event.targets[event.i].showCards(result.cards[0]);
						if(result.cards[0].number<event.card[0].number) event.draw++;
						else event.targets[event.i].useCard({name:'sha',isCard:true},player);
					}
					else event.targets[event.i].chooseToDiscard('弃置一张牌',true);
					"step 6"
					event.i++;
					event.goto(3);
					"step 7"
					trigger.num+=event.draw;
					player.addMark('sscwl',event.draw);
					"step 8"
				},
				ai:{
					threaten:1,
				},
				subSkill:{
					qingchu:{
						trigger:{
							player:"phaseBegin",
						},
						silent:true,
						unique:true,
						forced:true,
						filter:function(event,player){
							return game.countGroup()>2;
						},
						content:function(){
							if(player.countMark('sscwl')>0) player.removeMark('sscwl',player.countMark('sscwl'));
						},
						sub:true,
					},
				},
            },
            sscyy:{
                audio:"ext:神怒降世:2",
                skillAnimation:true,
                animationColor:"wood",
				trigger:{
					player:"phaseZhunbeiBegin",
				},
				forced:true,
				content:function(){
					"step 0"
					var list;
					if(_status.characterlist){
						list=[];
						for(var i=0;i<_status.characterlist.length;i++){
							var name=_status.characterlist[i];
							if(lib.character[name][1]=='wu') list.push(name);
						}
					}
					else if(_status.connectMode){
						list=get.charactersOL(function(i){
							return lib.character[i][1]!='wu';
						});
					}
					else{
						list=get.gainableCharacters(function(info){
							return info[1]=='wu';
						});
					}
					var players=game.players.concat(game.dead);
					for(var i=0;i<players.length;i++){
						list.remove(players[i].name);
						list.remove(players[i].name1);
						list.remove(players[i].name2);
					}
					list.remove('sunce');
					list.remove('re_sunce');
					list.remove('re_sunben');
					list=list.randomGets(3);
					var skills=[];
					for(var i of list){
						skills.addArray((lib.character[i][3]||[]).filter(function(skill){
							var info=get.info(skill);
							return info&&!info.zhuSkill&&!info.limited&&!info.juexingji&&!info.hiddenSkill&&!info.charlotte;
						}));
					}
					if(!list.length||!skills.length){event.finish();return;}
					if(player.isUnderControl()){
						game.swapPlayerAuto(player);
					}
					var switchToAuto=function(){
						_status.imchoosing=false;
						event._result={
							bool:true,
							skills:skills.randomGets(1),
						};
						if(event.dialog) event.dialog.close();
						if(event.control) event.control.close();
					};
					var chooseButton=function(list,skills){
						var event=_status.event;
						if(!event._result) event._result={};
						event._result.skills=[];
						var rSkill=event._result.skills;
						var dialog=ui.create.dialog('请选择获得一个技能',[list,'character'],'hidden');
						event.dialog=dialog;
						var table=document.createElement('div');
						table.classList.add('add-setting');
						table.style.margin='0';
						table.style.width='100%';
						table.style.position='relative';
						for(var i=0;i<skills.length;i++){
							var td=ui.create.div('.shadowed.reduce_radius.pointerdiv.tdnode');
							td.link=skills[i];
							table.appendChild(td);
							td.innerHTML='<span>'+get.translation(skills[i])+'</span>';
							td.addEventListener(lib.config.touchscreen?'touchend':'click',function(){
								if(_status.dragged) return;
								if(_status.justdragged) return;
								_status.tempNoButton=true;
								setTimeout(function(){
									_status.tempNoButton=false;
								},500);
								var link=this.link;
								if(!this.classList.contains('bluebg')){
									if(rSkill.length>=1) return;
									rSkill.add(link);
									this.classList.add('bluebg');
								}
								else{
									this.classList.remove('bluebg');
									rSkill.remove(link);
								}
							});
						}
						dialog.content.appendChild(table);
						dialog.add('　　');
						dialog.open();
            
						event.switchToAuto=function(){
							event.dialog.close();
							event.control.close();
							game.resume();
							_status.imchoosing=false;
						};
						event.control=ui.create.control('ok',function(link){
							event.dialog.close();
							event.control.close();
							game.resume();
							_status.imchoosing=false;
						});
						for(var i=0;i<event.dialog.buttons.length;i++){
							event.dialog.buttons[i].classList.add('selectable');
						}
						game.pause();
						game.countChoose();
					};
					if(event.isMine()){
						chooseButton(list,skills);
					}
					else if(event.isOnline()){
						event.player.send(chooseButton,list,skills);
						event.player.wait();
						game.pause();
					}
					else{
						switchToAuto();
					}
					"step 1"
					var map=event.result||result;
					if(map&&map.skills&&map.skills.length){
						player.addTempSkill(map.skills[0]);
					}
					game.broadcastAll(function(list){
						game.expandSkills(list);
						for(var i of list){
							var info=lib.skill[i];
							if(!info) continue;
							if(!info.audioname2) info.audioname2={};
							info.audioname2.old_yuanshu='weidi';
						}
					},map.skills);
				},
			},
            sscyg:{
                shaRelated:true,
                audio:"ext:神怒降世:2",
                group:["sscyg_dengji2","sscyg_dengji3"],
				trigger:{
					player:"useCardToPlayered",
					target:"useCardToTargeted",
				},
				filter:function(event,player){
					if(!(event.card.name=='juedou'||(event.card.name=='sha'&&get.color(event.card)=='red'))) return false;
					if(event.player==player&&event.card.name=='sha'&&get.color(event.card)=='red'&&player.countMark('sscwl')>2) return false;
					if(event.target==player&&event.card.name=='sha'&&get.color(event.card)=='red'&&player.countMark('sscwl')>1) return false;
					return player==event.target||event.getParent().triggeredTargets3.length==1;
				},
				frequent:true,
				content:function(){
					player.draw();
				},
				subSkill:{
					dengji2:{
						audio:"sscyg",
						trigger:{
							target:"useCardToTargeted",
						},
						filter:function(event,player){
							return player.countMark('sscwl')>1&&get.color(event.card)=='red'&&event.player!=player&&event.target==player;
						},
						frequent:true,
						content:function(){
							player.draw();
						},
						sub:true,
					},
					dengji3:{
						audio:"sscyg",
						trigger:{
							player:"useCard",
						},
						filter:function(event,player){
							return player.countMark('sscwl')>2&&get.color(event.card)=='red';
						},
						frequent:true,
						content:function(){
							player.draw();
						},
						sub:true,
					},
				},
                ai:{
					combo:"sscwl",
					threaten:0.4,
                },
            },
            /*spsgjtd:{
                audio:"ext:神怒降世:1",
                group:"spsgjtd_guji",
                trigger:{
                    player:"judgeEnd",
                },
                frequent:function(event){
					if(event.result.card.name=='du') return false;
					return true;
				},
                check:function(event){
					if(event.result.card.name=='du') return false;
					return true;
				},
                filter:function(event,player){
					return get.position(event.result.card,true)=='o';
				},
                content:function(){
					player.gain(trigger.result.card,'gain2');
				},
                subSkill:{
                    guji:{
                        audio:"ext:神怒降世:1",
                        trigger:{
                            player:"phaseDrawBegin",
                        },
                        frequent:true,
                        filter:function(event,player){
							return !event.numFixed&&player.countCards('h')>4;
						},
                        content:function(){
							trigger.cancel();
							game.log(player,'跳过了摸牌阶段');
						},
                        sub:true,
                    },
                },
            },*/
            spsgjyc:{
                audio:"ext:神怒降世:1",
                trigger:{
                    player:"die",
                },
                direct:true,
                skillAnimation:true,
                animationColor:"wood",
                forceDie:true,
                content:function(){
					"step 0"
					player.chooseTarget(get.prompt('spsgjyc'),'<center>令一名角色摸两张牌、增加1点体力上限并回复1点体力，然后获得〖遗计〗</center>',function(card,player,target){
						return player!=target;
					}).set('forceDie',true).set('ai',function(target){
						var num=get.attitude(_status.event.player,target);
						if(num>0){
							if(target.hp==1){
								num+=2;
							}
							if(target.hp<target.maxHp){
								num+=2;
							}
						}
						return num;
					}).set('sourcex',trigger.source);
					"step 1"
					if(result.bool){
						var target=result.targets[0];
						player.logSkill('spsgjyc',target);
						target.gainMaxHp();
						target.recover();
						target.draw(2);
						target.addSkill('exgjyj');
						game.log(target,'获得了技能','#g【遗计】');
					}
				},
                ai:{
                    expose:0.5,
                },
            },
            /*spsgjty:{
                audio:"ext:神怒降世:1",
                trigger:{
                    player:"damageBegin4",
                },
                forced:true,
                content:function(){
					"step 0"
					player.judge();
					"step 1"
					event.color=result.color;
					if(event.color=='black'){
						trigger.num++;
					}
				},
            },*/
            jszysz:{
                audio:"ext:神怒降世:1",
                trigger:{
                    player:"phaseZhunbeiBegin",
                },
                filter:function(event,player){
					return !event.numFixed;
				},
                check:function(event,player){
					if(event.player.hasJudge('lebu')) return false;
					if(event.player.hp<3) return event.player.countCards('h',{name:'tao'})>0;
					if(event.player.hp==1) return event.player.countCards('h',{name:'tao'})>0||event.player.countCards('h',{name:'jiu'})>0;
					return 1;
				},
                content:function(){
					player.damage('fire',1,'nocard');
				},
                ai:{
                    threaten:1.5,
                },
                mod:{
                    maxHandcardBase:function(player,num){
						return player.maxHp;
					},
                },
            },
            jszyyy:{
                unique:true,
                enable:"phaseUse",
                audio:"ext:神怒降世:1",
                mark:true,
                derivation:"jszyyh",
                animationColor:"metal",
                skillAnimation:"legend",
                limited:true,
                init:function(player){
					player.storage.jszyyy=false;
				},
                filter:function(event,player){
					return player.countCards('he',{color:'red'})>0&&player.storage.jszyyy==false;
				},
                position:"he",
                filterCard:{
                    color:"red",
                },
                filterTarget:function(card,player,target){
					return target!=player;
				},
                selectCard:[1,3],
                selectTarget:function(){
					return [1,ui.selected.cards.length];
				},
                complexCard:true,
                check:function(card){
					return 8-get.value(card);
				},
                content:function(){
					"step 0"
					if(targets.length==2&&cards.length==3&&player.storage.jszyyy==false){
						player.chooseTarget('〖业炎〗：请选择受到2点伤害的角色',true,function(card,player,target){
							return _status.event.targets.contains(target)
						}).set('ai',function(target){
							return 1;
						}).set('targets',targets);
					}
					else{
						if(player.storage.jszyyy==true) event.finish();
						event.goto(2);
					}
					"step 1"
					if(result.bool) event.xuanze=result.targets[0];
					"step 2"
					for(var i=0;i<targets.length;i++){
						if(targets.length==cards.length) targets[i].damage('fire','nocard');
						if(targets.length!=cards.length){
							if(targets.length==2&&cards.length==3){
								if(targets[i]==event.xuanze) targets[i].damage('fire',2,'nocard');
								else targets[i].damage('fire','nocard');
							}
							else targets[i].damage('fire',cards.length,'nocard');
						}
						event.delay=true;
					}
					if(cards.length>1&&player.storage.jszyyy==false) player.damage('fire',cards.length-1,'nocard');
					"step 3"
					player.storage.jszyyy=true;
					player.awakenSkill('jszyyy');
					player.addSkill('jszyyh2');
				},
                intro:{
					name:"业炎",
                    content:"limited",
                },
                ai:{
					expose:0.3,
					fireAttack:true,
                    order:function(){
						return get.order({name:'sha'})-1;
					},
                    result:{
                        target:function(player,target){
							if(player.hp>3&&player.countCards('h',{color:'red'})>0) return -1;
							if(player.hp==1&&player.getEquip('baiyin')){
								if(player.countCards('he',{color:'red'})-player.countCards('h',{name:'tao'})>2&&player.countCards('h',{name:'tao'})+player.countCards('h',{name:'jiu'})>0) return -1;
								if(player.countCards('he',{color:'red'})-player.countCards('h',{name:'tao'})>1) return -1;
								if(player.countCards('he',{color:'red'})-player.countCards('h',{name:'tao'})>0) return -1;
								return 0;
							}
							if(player.hp==3&&player.getEquip('tengjia')){
								if(player.countCards('he',{color:'red'})-player.countCards('h',{name:'tao'})>2&&player.countCards('h',{name:'tao'})+player.countCards('h',{name:'jiu'})>0) return -1;
								if(player.countCards('he',{color:'red'})-player.countCards('h',{name:'tao'})>1) return -1;
								if(player.countCards('he',{color:'red'})-player.countCards('h',{name:'tao'})>0) return -1;
								return 0;
							}
							if(player.hp==2&&player.getEquip('tengjia')){
								if(player.countCards('he',{color:'red'})-player.countCards('h',{name:'tao'})>2&&player.countCards('h',{name:'tao'})+player.countCards('h',{name:'jiu'})>1) return -1;
								if(player.countCards('he',{color:'red'})-player.countCards('h',{name:'tao'})>1&&player.countCards('h',{name:'tao'})+player.countCards('h',{name:'jiu'})>0) return -1;
								if(player.countCards('he',{color:'red'})-player.countCards('h',{name:'tao'})>0) return -1;
								return 0;
							}
							if(player.hp==1&&player.getEquip('tengjia')){
								if(player.countCards('he',{color:'red'})-player.countCards('h',	{name:'tao'})>2&&player.countCards('h',{name:'tao'})+player.countCards('h',{name:'jiu'})>2) return -1;
								if(player.countCards('he',{color:'red'})-player.countCards('h',	{name:'tao'})>1&&player.countCards('h',{name:'tao'})+player.countCards('h',{name:'jiu'})>1) return -1;
								if(player.countCards('he',{color:'red'})-player.countCards('h',{name:'tao'})>0) return -1;
								return 0;
							}
							if(player.hp==3){
								if(player.countCards('he',{color:'red'})-player.countCards('h',{name:'tao'})>2) return -1;
								if(player.countCards('he',{color:'red'})-player.countCards('h',{name:'tao'})>1) return -1;
								if(player.countCards('he',{color:'red'})-player.countCards('h',{name:'tao'})>0) return -1;
								return 0;
							}
							if(player.hp==2){
								if(player.countCards('he',{color:'red'})-player.countCards('h',{name:'tao'})>2&&player.countCards('h',{name:'tao'})+player.countCards('h',{name:'jiu'})>0) return -1;
								if(player.countCards('he',{color:'red'})-player.countCards('h',{name:'tao'})>1) return -1;
								if(player.countCards('he',{color:'red'})-player.countCards('h',{name:'tao'})>0) return -1;
								return 0;
							}
							if(player.hp==1){
								if(player.countCards('he',{color:'red'})-player.countCards('h',	{name:'tao'})>2&&player.countCards('h',{name:'tao'})+player.countCards('h',{name:'jiu'})>1) return -1;
								if(player.countCards('he',{color:'red'})-player.countCards('h',{name:'tao'})>1&&player.countCards('h',{name:'tao'})+player.countCards('h',{name:'jiu'})>0) return -1;
								if(player.countCards('he',{color:'red'})-player.countCards('h',{name:'tao'})>0) return -1;
								return 0;
							}
							return 0;
						},
                    },
                },
            },
            jszyhl:{
                audio:"ext:神怒降世:1",
                trigger:{
                    player:"damageBegin4",
                },
                filter:function(event,player){
					return event.nature=='fire';
				},
                forced:true,
                content:function(){
					"step 0"
					player.chooseBool('〖红莲〗：是否防止该伤害？').set('ai',function(target){
						if(player.hp<=trigger.num&&player.countCards('hs',{name:'tao'})<1&&player.countCards('hs',{name:'jiu'})<1) return true;
						return false;
					});
					"step 1"
					if(result.bool){
						trigger.cancel();
						event.finish();
					}
					"step 2"
					var num=trigger.num;
					player.draw(2*num);
				},
                ai:{
                    maihp:true,
					nofire:true,
					effect:{
						target:function(card,player,target,current){
							if(get.tag(card,'fireDamage')) return 'zerotarget';
						},
					},
                },
            },
            jszyyh:{
                audio:"ext:神怒降世:1",
                enable:"phaseUse",
                usable:1,
                filter:function(event,player){
					return player.countCards('he',{color:'red'})>0&&player.isDamaged();
				},
				filterTarget:function(card,player,target){
					return true;
				},
                position:"he",
                filterCard:{
                    color:"red",
                },
                selectCard:function(){
					var player=_status.event.player
					return [1,Math.max(1,player.getDamagedHp())];
				},
                complexCard:true,
                selectTarget:function(){
					return ui.selected.cards.length;
				},
                check:function(card){
					return 4-get.value(card);
				},
                multitarget:true,
                multiline:true,
                line:"fire",
                content:function(){
					event.delay=false;
					for(var i=0;i<targets.length;i++){
						targets[i].damage('fire',1,'nocard');
						event.delay=true;
					}
				},
                ai:{
					expose:0.3,
					fireAttack:true,
                    order:8,
                    result:{
                        target:function(player,target){
							if(player.isDamaged()&&player.countCards('he',{color:'red'})>0) return -1;
							return 0;
						},
                    },
                },
            },
            jszyqy:{
                audio:"ext:神怒降世:1",
                trigger:{
                    player:"phaseDiscardEnd",
                },
                direct:true,
                content:function(){
					"step 0"
					event.forceDie=true;
					if(typeof event.count!='number'){
						// event.count=trigger.cards.length-1;
						event.count=1;
					}
					var recover=0,lose=0,players=game.filterPlayer();
					for(var i=0;i<players.length;i++){
						if(players[i].hp<players[i].maxHp){
							if(get.attitude(player,players[i])>0){
								if(players[i].hp<2){
									lose--;
									recover+=0.5;
								}
								lose--;
								recover++;
							}
							else if(get.attitude(player,players[i])<0){
								if(players[i].hp<2){
									lose++;
									recover-=0.5;
								}
								lose++;
								recover--;
							}
						}
						else{
							if(get.attitude(player,players[i])>0){
								lose--;
							}
							else if(get.attitude(player,players[i])<0){
								lose++;
							}
						}
					}
					var prompt=get.prompt('jszyqy')+'（剩余'+get.cnNumber(event.count)+'次）';
					player.chooseControl('伤害','回复','cancel2',ui.create.dialog(get.prompt('qinyin'),'hidden')).ai=function(){
						if(lose>recover&&lose>0) return 0;
						if(lose<recover&&recover>0) return 1;
						return 2;
					}
					"step 1"
					if(result.control=='cancel2'){
						event.finish();
					}
					else{
						player.logSkill('jszyqy');
						event.bool=(result.control=='回复');
						event.num=0;
						event.players=game.filterPlayer();
						event.players.sort(lib.sort.seat);
					}
					"step 2"
					if(event.num<event.players.length){
						var target=event.players[event.num];
						if(event.bool){
							target.recover();
						}
						else{
							target.damage('fire',1,'nocard');
						}
						event.num++;
						event.redo();
					}
					"step 3"
					if(event.count>1){
						event.count--;
						event.goto(0);
					}
				},
                ai:{
                    expose:0.1,
                    threaten:2,
                },
            },
            jslmsl:{
                audio:"ext:神怒降世:1",
                trigger:{
                    player:"phaseDrawBegin1",
                },
                filter:function(event,player){
					return !event.numFixed;
				},
                content:function(){
					"step 0"
					trigger.changeToZero();
					event.cards=get.cards(6);
					game.cardsGotoOrdering(event.cards);
					event.videoId=lib.status.videoId++;
					game.broadcastAll(function(player,id,cards){
						var str;
						if(player==game.me&&!_status.auto){
							str='涉猎：获取花色各不相同的牌';
						}
						else{
							str='涉猎';
						}
						var dialog=ui.create.dialog(str,cards);
						dialog.videoId=id;
					},player,event.videoId,event.cards);
					event.time=get.utc();
					game.addVideo('showCards',player,['涉猎',get.cardsInfo(event.cards)]);
					game.addVideo('delay',null,2);
					"step 1"
					var next=player.chooseButton([0,6],true);
					next.set('dialog',event.videoId);
					next.set('filterButton',function(button){
						for(var i=0;i<ui.selected.buttons.length;i++){
							if(get.suit(ui.selected.buttons[i].link)==get.suit(button.link)) return false;
						}
						return true;
					});
					next.set('ai',function(button){
						return get.value(button.link,_status.event.player);
					});
					"step 2"
					if(result.bool&&result.links){
						event.cards2=result.links;
					}
					else{
						event.finish();
					}
					var time=1000-(get.utc()-event.time);
					if(time>0){
						game.delay(0,time);
					}
					"step 3"
					game.broadcastAll('closeDialog',event.videoId);
					var cards2=event.cards2;
					player.gain(cards2,'log','gain2');
				},
                ai:{
                    threaten:1.2,
                },
            },
            jslmgx:{
                audio:"ext:神怒降世:1",
                enable:"phaseUse",
                usable:1,
                filterTarget:function(card,player,target){
					return target!=player&&target.countCards('h');
				},
                content:function(){
					"step 0"
					var chooseButton=player.chooseButton(1,[get.translation(target.name)+'的手牌',target.getCards('h')]);
					chooseButton.set('target',target);
					chooseButton.set('ai',function(button){
						return get.value(button.link);
					});
					"step 1"
					if(result.bool){
						event.card=result.links[0];
						event.suit=get.suit(result.links[0]);
						player.gain(event.card,target,'giveAuto');
						if(event.suit=='heart') player.draw();
					}
				},
                ai:{
                    threaten:1.5,
                    result:{
                        target:function(player,target){
							return -target.countCards('h');
						},
                    },
                    order:10,
                    expose:0.4,
                },
            },
            jslmkj:{
                audio:"ext:神怒降世:1",
                trigger:{
                    player:"phaseDiscardBefore",
                },
                frequent:function(event,player){
					return player.needsToDiscard();
				},
                filter:function(event,player){
					if(player.getHistory('skipped').contains('phaseUse')) return true;
					var history=player.getHistory('useCard').concat(player.getHistory('respond'));
					for(var i=0;i<history.length;i++){
						if(history[i].card.name=='sha'&&history[i].isPhaseUsing()) return false;
					}
					return true;
				},
                content:function(){
					trigger.cancel();
				},
            },
            jslmbt:{
                audio:"ext:神怒降世:1",
                group:"jslmbt_mark",
				init:function(player){
					if(!player.storage.jslmbt) player.storage.jslmbt=[];
					if(!player.storage.jslmbt1) player.storage.jslmbt1=[];
				},
                skillAnimation:true,
                animationColor:"soil",
				mark:true,
				intro:{
					name:"博图",
					content:"$",
				},
                trigger:{
                    player:"phaseAfter",
                },
                frequent:true,
                filter:function(event,player){
					var history=player.getHistory('useCard',function(evt){
						return evt.isPhaseUsing();
					});
					var suits=[];
					for(var i=0;i<history.length;i++){
						var suit=get.suit(history[i].card);
						if(suit) suits.add(suit);
					}
					return suits.length==4;
				},
                content:function(){
					player.insertPhase();
				},
				subSkill:{
                    mark:{
                        trigger:{
                            player:"useCard",
                        },
						filter:function(event,player){
							return player.isPhaseUsing();
						},
						silent:true,
						unique:true,
						forced:true,
                        content:function(){
							if(!player.hasSkill('jslmbt_qingchu')) player.addTempSkill('jslmbt_qingchu');
							if(!player.storage.jslmbt1.contains(get.suit(trigger.card))){
								player.storage.jslmbt1.push(get.suit(trigger.card));
								if(get.suit(trigger.card)=='spade') player.storage.jslmbt.push('♠');
								if(get.suit(trigger.card)=='heart') player.storage.jslmbt.push('♥');
								if(get.suit(trigger.card)=='club') player.storage.jslmbt.push('♣');
								if(get.suit(trigger.card)=='diamond') player.storage.jslmbt.push('♦');
							}
							player.updateMarks('jslmbt');
						},
                        sub:true,
                    },
                    qingchu:{
						silent:true,
						unique:true,
						forced:true,
						onremove:function(player){
							player.storage.jslmbt=[];
							player.storage.jslmbt1=[];
							player.updateMarks('jslmbt');
						},
                        sub:true,
                    },
				},
            },
            spsgjss:{
                audio:"ext:神怒降世:3",
				intro:{
					name:"十胜",
					content:"共有#枚标记",
				},
                usable:1,
				enable:"phaseUse",
				filterTarget:function(card,player,target){
					if(player.countMark('spsgjss')<10){
						if(target!=player) return target.countMark('spsgjss')<1;
						return true;
					}
					else return target.countMark('spsgjss')>0;
				},
                content:function(){
					"step 0"
					if(player.countMark('spsgjss')>=10) event.goto(18);
					event.cishu=10;
					"step 1"
					event.cishu-=1;
					"step 2"
					if(event.cishu<0) event.finish();
					"step 3"
					target.chooseControl('红色','黑色').set('ai',function(target){
						return ['红色','黑色'].randomGet();
					});
					"step 4"
					event.xuanxiang1=result.control;
					"step 5"
					target.chooseControl('奇数','偶数').set('ai',function(target){
						return ['奇数','偶数'].randomGet();
					});
					"step 6"
					event.xuanxiang2=result.control;
					"step 7"
					target.chooseControl('基本','锦囊','装备').set('ai',function(target){
						return ['基本','锦囊','装备'].randomGet();
					});
					"step 8"
					event.xuanxiang3=result.control;
					"step 9"
					target.chooseControl('黑桃','红桃','梅花','方片').set('ai',function(target){
						return ['黑桃','红桃','梅花','方片'].randomGet();
					});
					"step 10"
					event.xuanxiang4=result.control;
					"step 11"
					event.disixiang=0;
                    target.chat(event.xuanxiang1+'、'+event.xuanxiang2+'、'+event.xuanxiang3+'、'+event.xuanxiang4);
					event.card=get.cards(1);
					target.showCards(event.card);
					"step 12"
					if(event.xuanxiang1=='红色'&&get.color(event.card[0])=='red'){
						if(player!=target&&target.countMark('spsgjss')<10) target.addMark('spsgjss',1);
						if(player.countMark('spsgjss')<10) player.addMark('spsgjss',1);
					}
					else if(event.xuanxiang1=='黑色'&&get.color(event.card[0])=='black'){
						if(player!=target&&target.countMark('spsgjss')<10) target.addMark('spsgjss',1);
						if(player.countMark('spsgjss')<10) player.addMark('spsgjss',1);
					}
					"step 13"
					if(event.xuanxiang2=='奇数'&&event.card[0].number%2==1){
						if(player!=target) target.gain(event.card,'log','gain2');
					}
					else if(event.xuanxiang2=='偶数'&&event.card[0].number%2==0){
						if(player!=target) target.gain(event.card,'log','gain2');
					}
					else{
						game.cardsDiscard(event.card);
						game.log(event.card,'被置入了弃牌堆');
					}
					"step 14"
					if(event.xuanxiang4=='黑桃'&&get.suit(event.card[0])=='spade') player.draw();
					else{
						if(event.xuanxiang4=='红桃'&&get.suit(event.card[0])=='heart') player.draw();
						else{
							if(event.xuanxiang4=='梅花'&&get.suit(event.card[0])=='club') player.draw();
							else if(event.xuanxiang4=='方片'&&get.suit(event.card[0])=='diamond') player.draw();
						}
					}
					"step 15"
					if(event.xuanxiang3=='基本'&&get.type(event.card[0])=='basic'){
						event.goto(16);
					}
					else{
						if(event.xuanxiang3=='锦囊'&&(get.type(event.card[0])=='trick'||get.type(event.card[0])=='delay')){
							event.goto(16);
						}
						else if(event.xuanxiang3=='装备'&&get.type(event.card[0])=='equip'){
							event.goto(16);
						}
						else{
							event.goto(1);
						}
					}
					"step 16"
					target.chooseTarget('弃置一名角色区域内的一张牌',function(card,player,target){
						return target.countCards('hej');
					}).set('ai',function(target){
						var player=_status.event.player;
						var att=get.attitude(player,target);
						if(att<0){
							att=-Math.sqrt(-att);
						}
						else{
							att=Math.sqrt(att);
						}
						return att*lib.card.guohe.ai.result.target(player,target);
					});
					"step 17"
					if(result.bool){
						target.line(result.targets[0]);
						target.discardPlayerCard(result.targets[0],'hej',true);
					}
					event.goto(1);
					"step 18"
					player.storage.spsgjss1=true;
					event.cards=get.cards(10);
					if(target==player) event.num=5;
					else event.num=target.countMark('spsgjss');
					target.showCards(event.cards);
					"step 19"
					var next=target.chooseButton(true,event.num,['〖十胜〗：选择要获得的牌',event.cards]);
					next.set('ai',function(button,player){
						return get.value(button.link);
					});
					"step 20"
					event.cards.remove(result.links);
					target.gain(result.links,'log','gain2');
					"step 21"
					game.cardsDiscard(event.cards);
					game.log(event.cards,'被置入了弃牌堆');
					if(target.countMark('spsgjss')>0) target.removeMark('spsgjss',target.countMark('spsgjss'));
					if(player.countMark('spsgjss')>0) player.removeMark('spsgjss',player.countMark('spsgjss'));
					player.loseMaxHp();
				},
				ai:{
					threaten:1.5,
					result:{
						target:function(player,target){
							if(target!=player&&get.attitude(player,target)>0) return 10;
							else return 1;
						},
					},
					order:20,
					expose:0.4,
				},
            },
            jslbwm:{
                mod:{
                    cardname:function(card,player,name){
						if(player.storage.snjs_xingtai_skill==false){
							if(player.storage.jslbwm1.contains(card)) return 'juedou';
							if(player.storage.jslbwm2.contains(card)) return 'sha';
						}
					},
                },
                audio:"ext:神怒降世:4",
				forced:true,
                group:["jslbwm_biao","jslbwm_li","jslbwm_gamebegin","jslbwm_huode","jslbwm_losecard"],
                init:function(player){
					if(!player.storage.jslbwm1) player.storage.jslbwm1=[];
					if(!player.storage.jslbwm2) player.storage.jslbwm2=[];
					var shoupai=player.getCards('h');
					for (var i=0;i<shoupai.length;i++) {
						var card=shoupai[i];
						if(get.type(card)=='trick'&&!player.storage.jslbwm1.contains(card)&&!player.storage.jslbwm2.contains(card)){
							if (get.tag(card,'damage')){
								player.storage.jslbwm1.push(card);
							}
							else player.storage.jslbwm2.push(card);
						}
					}
				},
                subSkill:{
                    biao:{
						audio:"ext:神怒降世:2",
						trigger:{
							player:'useCard1',
						},
						filter:function(event,player){
							if(event.card.name!='sha'&&event.card.name!='juedou') return false;
							return event.card&&event.cards&&event.cards.length==1&&event.cards[0].name!=event.card.name;
						},
						forced:true,
						content:function(){},
                        sub:true,
                    },
                    li:{
						audio:"ext:神怒降世:2",
						trigger:{
							global:"useCard",
						},
						forced:true,
						filter:function(event,player){
							return get.type(event.card)=='trick'&&event.player.countCards('he')>0&&player.storage.snjs_xingtai_skill==true;
						},
						logTarget:function(event){
							return event.player;
						},
						content:function(){
							trigger.player.chooseToDiscard('〖无谋〗：弃置一张牌','he',true);
						},
                        sub:true,
                    },
                    gamebegin:{
                        trigger:{
                            player:"enterGame",
                            global:"gameDrawAfter",
                        },
						silent:true,
						unique:true,
						forced:true,
						charlotte:true,
                        content:function(){
							var shoupai=player.getCards('h');
							for (var i=0;i<shoupai.length;i++) {
								var card=shoupai[i];
								if(get.type(card)=='trick'&&!player.storage.jslbwm1.contains(card)&&!player.storage.jslbwm2.contains(card)){
									if (get.tag(card,'damage')){
										player.storage.jslbwm1.push(card);
									}
									else player.storage.jslbwm2.push(card);
								}
							}
						},
                        sub:true,
                    },
                    huode:{
                        trigger:{
                            player:["drawAfter","gainAfter"],
                        },
						silent:true,
						unique:true,
						forced:true,
						charlotte:true,
                        content:function(){
							var shoupai=player.getCards('h');
							for (var i=0;i<shoupai.length;i++) {
								var card=shoupai[i];
								if(get.type(card)=='trick'&&!player.storage.jslbwm1.contains(card)&&!player.storage.jslbwm2.contains(card)){
									if (get.tag(card,'damage')){
										player.storage.jslbwm1.push(card);
									}
									else player.storage.jslbwm2.push(card);
								}
							}
						},
                        sub:true,
                    },
                    losecard:{
                        trigger:{
                            player:"loseAfter",
                        },
                        filter:function(event,player){
							for (var i=0;i<event.cards2.length;i++){
								if (player.storage.jslbwm1.contains(event.cards2[i])||player.storage.jslbwm2.contains(event.cards2[i])) return true;
							}
							return false;
						},
						silent:true,
						unique:true,
						forced:true,
						charlotte:true,
                        content:function(){
							for (var i=0;i<trigger.cards2.length;i++){
								if (player.storage.jslbwm1.contains(trigger.cards2[i])) player.storage.jslbwm1.remove(trigger.cards2[i]);
								if (player.storage.jslbwm2.contains(trigger.cards2[i])) player.storage.jslbwm2.remove(trigger.cards2[i]);
							}
						},
                        sub:true,
                    },
                },
            },
            jslbsf:{
                mod:{},
                audio:"ext:神怒降世:4",
                forced:true,
                group:["jslbsf_shenfen","jslbsf_qiehuan","jslbsf_kuangbao"],
				init:function(player){
					player.addSkill('snjs_xingtai_skill');
				},
				marktext:"暴怒",
                intro:{
                    name:"暴怒",
                    content:"mark",
                },
                subSkill:{
					biao:{
						audio:"ext:神怒降世:2",
                        skillAnimation:true,
                        animationColor:"metal",
                        sub:true,
					},
					li:{
						audio:"ext:神怒降世:2",
                        skillAnimation:true,
                        animationColor:"metal",
                        sub:true,
					},
                    shenfen:{
                        enable:"phaseUse",
                        filter:function(event,player){
							return player.countMark('jslbsf')>=5;
						},
                        usable:1,
						direct:true,
                        content:function(){
							"step 0"
							if(player.storage.snjs_xingtai_skill==false) player.logSkill('jslbsf_biao');
							else player.logSkill('jslbsf_li');
							"step 1"
							player.removeMark('jslbsf',5);
							event.targets=game.filterPlayer();
							event.targets.remove(player);
							event.targets.sort(lib.sort.seat);
							player.line(event.targets);
							event.num=0;
							"step 2"
							if(event.num<event.targets.length){
								var target=event.targets[event.num];
								if(player.storage.snjs_xingtai_skill==false){
									target.damage('nocard');
								}
								else target.discard(target.getCards('he'));
								event.num++;
							}
							"step 3"
							if(num<event.targets.length) event.goto(2);
							"step 4"
							player.turnOver();
						},
						ai:{
                            combo:"jslbsf_kuangbao",
                            order:10,
                            result:{
                                player:function(player){
									return game.countPlayer(function(current){
										if(current!=player){
											return get.sgn(get.damageEffect(current,player,player));
										}
									});
								},
                            },
                        },
                        sub:true,
                    },
                    qiehuan:{
                        trigger:{
                            player:"phaseJieshuBegin",
                        },
                        filter:function(event,player){
							return player.countMark('jslbsf')>=2;
						},
						check:function(event,player){
							return true;
						},
						prompt:'〖神愤〗：是否弃置两枚「暴怒」并翻面？',
                        content:function(){
							player.removeMark('jslbsf',2);
							player.turnOver();
						},
                        sub:true,
                    },
                    kuangbao:{
                        trigger:{
                            source:"damageSource",
                            player:["damageEnd","turnOverBefore"],
                        },
                        forced:true,
                        content:function(){
							"step 0"
							if(player.storage.snjs_xingtai_skill==false){
								var skillname=['jslbsf_kuangbao_biao1','jslbsf_kuangbao_biao2'].randomGet();
								game.playAudio('..','extension','神怒降世',skillname+'.mp3');
							}
							else{
								var skillname=['jslbsf_kuangbao_li1','jslbsf_kuangbao_li2'].randomGet();
								game.playAudio('..','extension','神怒降世',skillname+'.mp3');
							}
							"step 1"
							if(event.triggername!='turnOverBefore') player.addMark('jslbsf',trigger.num);
							else{
								trigger.cancel();
								if(player.hasSkill('snjs_xingtai_skill_biao')) player.removeSkill('snjs_xingtai_skill_biao');
								else player.removeSkill('snjs_xingtai_skill_li');
								player.draw(2);
							}
						},
                        ai:{
                            combo:"jslbsf",
							noturn:true,
                            maixie:true,
                            "maixie_hp":true,
                        },
                        sub:true,
                    },
                },
            },
            jslbws:{
                mod:{},
                shaRelated:true,
                audio:"ext:神怒降世:4",
				forced:true,
                group:["jslbws_xiaoguo","jslbws_beijuedou"],
                subSkill:{
					xiaoguo:{
						trigger:{
							player:"useCardToPlayered",
						},
						forced:true,
						filter:function(event,player){
							return event.card.name=='sha'||event.card.name=='juedou';
						},
						logTarget:"target",
						content:function(){
							"step 0"
							if(player.storage.snjs_xingtai_skill==false){
								var skillname=['jslbws_biao1','jslbws_biao2'].randomGet();
								game.playAudio('..','extension','神怒降世',skillname+'.mp3');
							}
							else{
								var skillname=['jslbws_li1','jslbws_li2'].randomGet();
								game.playAudio('..','extension','神怒降世',skillname+'.mp3');
							}
							"step 1"
							if(trigger.card.name=='sha'){
								if(!trigger.getParent().directHit.contains(trigger.target)){
									var id=trigger.target.playerid;
									var map=trigger.getParent().customArgs;
									if(!map[id]) map[id]={};
									if(typeof map[id].shanRequired=='number'){
										map[id].shanRequired++;
									}
									else{
										map[id].shanRequired=2;
									}
								}
							}
							else{
								trigger.getParent().directHit.push(trigger.target);
							}
						},
                        sub:true,
					},
                    beijuedou:{
                        trigger:{
                            target:"useCardToTargeted",
                        },
                        filter:function(event,player){
							return event.card.name=='juedou'&&event.player!=player;
						},
                        logTarget:"player",
                        forced:true,
                        content:function(){
							if(player.storage.snjs_xingtai_skill==false){
								var skillname=['jslbws_biao1','jslbws_biao2'].randomGet();
								game.playAudio('..','extension','神怒降世',skillname+'.mp3');
							}
							else{
								var skillname=['jslbws_li1','jslbws_li2'].randomGet();
								game.playAudio('..','extension','神怒降世',skillname+'.mp3');
							}
							trigger.getParent().excluded.add(player);
							trigger.player.damage();
						},
                        sub:true,
                    },
                },
            },
            jslbwq:{
                mod:{},
                audio:"ext:神怒降世:2",
				forced:true,
                group:["jslbwq_biao","jslbwq_li"],
				ai:{
					unequip:true,
				},
                subSkill:{
                    biao:{
						mod:{
							selectTarget:function(card,player,range){
								if(range[1]==-1) return;
								if((card.name=='sha'||card.name=="juedou")&&player.storage.snjs_xingtai_skill==false) range[1]+=2;
							},
							globalFrom:function(from,to,distance){
								if(from.storage.snjs_xingtai_skill==false) return distance-1;
							},
						},
						forced:true,
                        sub:true,
                    },
                    li:{
                        audio:"jslbwq",
						mod:{
							cardUsable:function(card,player,num){
								if(card.name=='sha'&&player.storage.snjs_xingtai_skill==true) return num+2;
							},
						},
                        trigger:{
                            player:"phaseDrawBegin2",
                        },
						filter:function(event,player){
							return !event.numFixed&&player.storage.snjs_xingtai_skill==true;
						},
						forced:true,
						content:function(){
							trigger.num+=2;
						},
                        sub:true,
                    },
                },
            },
            jsccgx:{
                audio:"ext:神怒降世:1",
                trigger:{
                    player:"damageEnd",
                },
                check:function (event,player){
					if(player.isTurnedOver()||event.num>1) return true;
					var num=game.countPlayer(function(current){
						if(current.countCards('he')&&current!=player&&get.attitude(player,current)<=0){
							return true;
						}
						if(current.countCards('j')&&current!=player&&get.attitude(player,current)>0){
							return true;
						}
					});
					return num>=2;
				},
                content:function(){
					"step 0"
					var targets=game.filterPlayer();
					targets.remove(player);
					targets.sort(lib.sort.seat);
					event.targets=targets;
					event.count=trigger.num;
					"step 1"
					event.num=0;
					player.line(targets,'green');
					"step 2"
					if(num<event.targets.length){
						var target=event.targets[num];
                        if(target.countGainableCards(player,'hej')>0){
							player.gainPlayerCard('hej',target,true);
                        }
						event.num++;
					}
					"step 3"
					if(num<event.targets.length) event.goto(2);
					"step 4"
					player.turnOver();
					"step 5"
					event.count--;
					if(event.count){
						player.chooseBool(get.prompt2('jsccgx')).ai=function(){
							return lib.skill.new_guixin.check({num:event.count},player);
						};
					}
					else{
						event.finish();
					}
					"step 6"
					if(event.count&&result.bool){
						player.logSkill('jsccgx');
						event.goto(1);
					}
				},
                ai:{
                    maixie:true,
                    "maixie_hp":true,
                    threaten:function (player,target){
						if(target.hp==1) return 2.5;
						return 1;
					},
                    effect:{
                        target:function (card,player,target){
							if(get.tag(card,'damage')){
								if(player.hasSkillTag('jueqing',false,target)) return [1,-2];
								if(target.hp==1) return 0.8;
								if(target.isTurnedOver()) return [0,3];
								var num=game.countPlayer(function(current){
									if(current.countCards('he')&&current!=player&&get.attitude(player,current)<=0){
										return true;
									}
									if(current.countCards('j')&&current!=player&&get.attitude(player,current)>0){
										return true;
									}
								});
								if(num>2) return [0,1];
								if(num==2) return [0.5,1];
							}
						},
                    },
                },
            },
            jsccfy:{
                mod:{
                    globalTo:function(from,to,distance){
						return distance+1;
					},
                },
            },
            jsccxx:{
                trigger:{
                    player:"turnOverEnd",
                },
                filter:function(event,player){
					return player.isDamaged()&&player.isMinHp()&&!player.isTurnedOver();
				},
                audio:"ext:神怒降世:1",
                forced:true,
                content:function(){
					"step 0"
					var func=function(result){
						if(get.color(result)=='red') return 5;
						return -1;
					};
					player.judge(func);
					"step 1"
					event.color=result.color;
					if(event.color=='red'){
						player.recover();
					}
				},
            },
            jscccx:{
                audio:"ext:神怒降世:1",
                unique:true,
                skillAnimation:true,
                animationColor:"metal",
                juexingji:true,
                forced:true,
                derivation:"jsccjx",
                trigger:{
                    player:"phaseZhunbeiBegin",
                },
                filter:function(event,player){
					return game.countPlayer()<=4&&!player.storage.jscccx;
				},
                content:function() {
					player.storage[event.name]=true;
					player.awakenSkill('jscccx');
					player.gainMaxHp();
					player.recover();
					player.addSkill('jsccjx');
					game.log(player,'获得了技能','#g【奸雄】');
				},
            },
            jsccjx:{
                audio:"ext:神怒降世:1",
                trigger:{
                    player:"damageEnd",
                },
                content:function (){
					"step 0"
					if(get.itemtype(trigger.cards)=='cards'&&get.position(trigger.cards[0],true)=='o'){
						player.gain(trigger.cards,"gain2");
					}
					player.draw('nodelay');
				},
                ai:{
                    maixie:true,
                    "maixie_hp":true,
                    effect:{
                        target:function (card,player,target){
							if(player.hasSkillTag('jueqing',false,target)) return [1,-1];
							if(get.tag(card,'damage')&&player!=target) return [1,0.6];
						},
                    },
                },
            },
            dwcaqx:{
                audio:"ext:神怒降世:1",
                usable:1,
                filterTarget:function (card,player,target){
					return player!=target&&player.inRange(target);
				},
                enable:"phaseUse",
                content:function (){
					if(player.getDamagedHp()>=1){
						player.loseMaxHp();
						target.damage('nocard');
					}
					else{
						player.loseHp();
						target.damage('nocard');
					}
				},
                ai:{
                    order:function(){
						return get.order({name:'sha'})-1;
					},
                    result:{
                        target:function(player,target){
							if(player.maxHp<4&&player.isDamaged()) return 0;
							return -1;
						},
					},
                },
            },
            dwcakk:{
                audio:"ext:神怒降世:1",
                trigger:{
                    global:"useCardToTargeted",
                },
                filter:function(event,player){
					return event.card.name=='sha'&&get.distance(player,event.target)<=1;
				},
                check:function(event,player){
					return get.attitude(player,event.target)>=0;
				},
                content:function(){
					"step 0"
					player.draw();
					if(trigger.target!=player){
						player.chooseCard(true,'he','交给'+get.translation(trigger.target)+'一张牌').set('ai',function(card){
							if(get.position(card)=='e') return -1;
							if(card.name=='shan') return 1;
							if(get.type(card)=='equip') return 0.5;
							return 0;
						});
					}
					else{
						event.finish();
					}
					"step 1"
					trigger.target.gain(result.cards,player,'give');
					game.delay();
					event.card=result.cards[0];
					"step 2"
					if(trigger.target.getCards('h').contains(card)&&get.type(card)=='equip'){
						trigger.target.chooseUseTarget(card);
					}
				},
                ai:{
                    threaten:1.1,
                },
            },
            jszglqx:{
                audio:"ext:神怒降世:1",
				usable:2,
                mod:{
                    maxHandcard:function(player,num){
						return player.storage.jszglqx.length;
					},
                },
                group:["jszglqx_tongtian","jszglqx_die"],
                marktext:"星",
                mark:true,
				trigger:{
					global:["judgeEnd","damageEnd","gameDrawAfter"],
					player:["phaseBegin","phaseEnd","enterGame"],
				},
                filter:function(event,player,name){
					if(name=="enterGame"||name=="gameDrawAfter") return true;
					else return player.storage.jszglqx.length<7;
				},
				intro:{
					onunmark:function(storage,player){
						if(storage&&storage.length){
							player.$throw(storage,1000);
							game.cardsDiscard(storage);
							game.log(storage,'被置入了弃牌堆');
							storage.length=0;
						}
					},
					mark:function(dialog,content,player){
						if(content&&content.length){
							if(player==game.me||player.isUnderControl()){
								dialog.addAuto(content);
							}
							else{
								return '共有'+get.cnNumber(content.length)+'张「星」';
							}
						}
					},
					content:function(content,player){
						if(content&&content.length){
							if(player==game.me||player.isUnderControl()){
								return get.translation(content);
							}
							return '共有'+get.cnNumber(content.length)+'张「星」';
						}
					},
				},
                init:function(player){
					if(!player.storage.jszglqx) player.storage.jszglqx=[];
				},
				unique:true,
				direct:true,
				forced:true,
                content:function(){
					"step 0"
					if(event.triggername=="enterGame"||event.triggername=="gameDrawAfter"){
						player.logSkill('jszglqx_donghua');
						var card=game.cardsGotoSpecial(get.bottomCards(7)).cards;
						player.storage.jszglqx=card
						player.markSkill('jszglqx');
						game.addVideo('storage',player,['jszglqx',get.cardsInfo(player.storage.jszglqx),'cards']);
					}
					else{
						player.logSkill('jszglqx');
						var card=get.bottomCards(1);
						player.markAuto('jszglqx',card);
						game.cardsGotoSpecial(card).cards[0];
						player.markSkill('jszglqx');
						event.finish();
					}
					"step 1"
					player.chooseCard(get.prompt('jszglqx'),'<center>选择任意张手牌与「星」交换</center>',[1,Math.min(player.countCards('h'),player.storage.jszglqx.length)]).set('ai',function(card){
						return get.unuseful(card);
					});
					"step 2"
					if(result.bool){
						player.lose(result.cards,ui.special,'toStorage');
						player.storage.jszglqx=player.storage.jszglqx.concat(result.cards);
						player.syncStorage('jszglqx');
						event.num=result.cards.length;
					}
					else{
						event.finish();
					}
					"step 3"
					player.chooseCardButton(player.storage.jszglqx,'〖七星〗：选择'+event.num+'张牌作为手牌',event.num,true).set('ai',function(card){
						return get.value(button.link);
					});
					if(player==game.me&&!event.isMine()){
						game.delay(0.5);
					}
					"step 4"
					player.gain(result.links,'fromStorage');
					for(var i=0;i<result.links.length;i++){
						player.storage.jszglqx.remove(result.links[i]);
					}
					player.syncStorage('jszglqx');
					if(player==game.me&&_status.auto){
						game.delay(0.5);
					}
				},
                subSkill:{
                    tongtian:{
                        audio:"ext:神怒降世:1",
                        trigger:{
                            player:["phaseDrawBegin","phaseDrawAfter","phaseDiscardBegin"],
                        },
						direct:true,
                        filter:function(event,player,name){
							if(name=="phaseDrawBegin") return player.storage.jszglqx&&player.storage.jszglqx.length>0&&player.countCards('h')<player.storage.jszglqx.length;
							else return player.storage.jszglqx&&player.storage.jszglqx.length>0;
						},
                        content:function(){
							"step 0"
							if(event.triggername=="phaseDrawBegin"){
								player.chooseBool(get.prompt('jszglqx'),'<center>改为将手牌摸至'+get.cnNumber(player.storage.jszglqx.length)+'张</center>').ai=function(event,player){
									return trigger.num<player.storage.jszglqx.length-player.countCards('h');
								};
							}
							else{
								player.chooseCard(get.prompt('jszglqx'),'<center>选择任意张手牌与「星」交换</center>',[1,Math.min(player.countCards('h'),player.storage.jszglqx.length)]).set('ai',function(card){
									return get.unuseful(card);
								});
							}
							"step 1"
							if(result.bool){
								player.logSkill('jszglqx_tongtian');
								if(event.triggername!="phaseDrawBegin"){
									player.lose(result.cards,ui.special,'toStorage');
									player.storage.jszglqx=player.storage.jszglqx.concat(result.cards);
									player.syncStorage('jszglqx');
									event.num=result.cards.length;
								}
								else{
									trigger.num=player.storage.jszglqx.length-player.countCards('h');
									event.finish();
								}
							}
							else event.finish();
							"step 2"
							player.chooseCardButton(player.storage.jszglqx,'〖七星〗：选择'+event.num+'张牌作为手牌',event.num,true).set('ai',function(card){
								return get.value(button.link);
							});
							if(player==game.me&&!event.isMine()){
								game.delay(0.5);
							}
							"step 3"
							player.gain(result.links,'fromStorage');
							for(var i=0;i<result.links.length;i++){
								player.storage.jszglqx.remove(result.links[i]);
							}
							player.syncStorage('jszglqx');
							if(player==game.me&&_status.auto){
								game.delay(0.5);
							}
						},
                        sub:true,
                    },
					die:{
						trigger:{
							player:"die",
						},
						silent:true,
						forced:true,
						filter:function(event,player){
							return player.storage.jszglqx&&player.storage.jszglqx.length>0;
						},
						content:function(){
							event.card=player.storage.jszglqx;
							player.$throw(event.card,1000);
							game.delayx();
							game.cardsDiscard(event.card);
							game.log(event.card,'被置入了弃牌堆');
							player.storage.jszglqx=[];
						},
						sub:true,
					},
					donghua:{
                        audio:"ext:神怒降世:1",
						skillAnimation:true,
						animationStr:"七星",
						animationColor:"soil",
						sub:true,
					},
                },
            },
            jszglgx:{
                audio:"ext:神怒降世:2",
                trigger:{
					global:["drawBegin","judgeBegin"],
                },
				filter:function(event,player){
					return player.storage.jszglqx&&player.storage.jszglqx.length>0;
				},
				check:function(event,player){
					if(player.storage.jszglqx.length<=player.hp&&_status.currentPhase==player) return false;
					if(get.attitude(player,event.player)<0) return true;
					else if(player.storage.jszglqx.length>4) return true;
					if(event.triggername=='judgeBegin') return true;
					return false;
				},
				logTarget:function(event){
					return event.player;
				},
				content:function(){
					"step 0"
					var player = player;
					if(player.isUnderControl()) game.modeSwapPlayer(player);
        
					var cards = get.cards(player.storage.jszglqx.length);
					var guanXing = decadeUI.content.chooseGuanXing(player, cards, cards.length, null, cards.length);
					game.broadcast(function(player, cards){
						if (!window.decadeUI) return;
						decadeUI.content.chooseGuanXing(player, cards, cards.length, null, cards.length);
					}, player, cards);
        
					event.switchToAuto = function(){
						var cheats = [];
						var cards = guanXing.cards[0].concat();
						var judges;
            
						var next = trigger.player.getNext();
						var friend = trigger.player;
						if (event.triggername == 'phaseJieshuBegin') {
							friend = next;
							judges = friend.node.judges.childNodes;
							if (get.attitude(player, friend) < 0) friend = null;
						} else {
							judges = player.node.judges.childNodes;
						}
            
						if (judges.length) {
							cheats = decadeUI.get.cheatJudgeCards(cards, judges, friend != null);
						}
                
						if (cards.length && cheats.length == judges.length) {
							for (var i = 0; i >= 0 && i < cards.length; i++) {
								if (friend) {
									if (get.value(cards[i], friend) >= 5) {
										cheats.push(cards[i]);
										cards.splice(i, 1)
									}
								} else {
									if (get.value(cards[i], next) < 4) {
										cheats.push(cards[i]);
										cards.splice(i, 1)
									}
								}
							}
						}
            
						var time = 500;
						for (var i = 0; i < cheats.length; i++) {
							setTimeout(function(card, index, finished){
								guanXing.move(card, index, 0);
								if (finished) guanXing.finishTime(1000);
							}, time, cheats[i], i, (i >= cheats.length - 1) && cards.length == 0);
							time += 500;
						}
            
						for (var i = 0; i < cards.length; i++) {
							setTimeout(function(card, index, finished){
								guanXing.move(card, index, 1);
								if (finished) guanXing.finishTime(1000);
							}, time, cards[i], i, (i >= cards.length - 1));
							time += 500;
						}
					};
   	     
					if (event.isOnline()) {
						// 判断其他玩家是否有十周年UI，否则直接给他结束，不知道有没有效果
						event.player.send(function(){
							if (!window.decadeUI && decadeUI.eventDialog) _status.event.finish();
						}, event.player);
            
						// 等待其他玩家操作
						event.player.wait();
						// 暂停主机端游戏
						decadeUI.game.wait();
					} else if (!event.isMine()) {
						event.switchToAuto();
						/*
						注释说明
						var guanXing = decadeUI.content.chooseGuanXing(
						控制观星的玩家,                      // 必选
						[顶部初始化的牌],                // 必选，可为null，但底部不能为null
						顶部允许控制的牌数范围,            // 可选，不填根据初始化的牌数量
						[底部初始化的牌],                // 必选，可为null，但顶部不能为null
						底部允许控制的牌数范围,            // 可选，不填根据初始化的牌数量
						第一个参数的玩家是否可见);          // 可选，不设置则根据控制观星的玩家来显示
        	    
						// undefined 均为可设置，其他为只读或调用
						var properties = {
						caption: undefined,            // 设置标题
						header1: undefined,            // 牌堆顶的文字
						header2: undefined,            // 牌堆底的文字
						cards: [[],[]],                // 获取当前观星的牌，不要瞎改
						callback: undefined,        // 回调函数，返回 true 表示可以点击【确认】按钮，例：guanXing.callback = function(){ return guanXing.cards[1].length == 1; }
						// 注意：此值一旦设置，观星finish后不会自己置顶牌堆顶和牌堆底，需要自行实现
						infohide: undefined,        // 设置上面第1个参数的玩家是否可见观星的牌
						confirmed: undefined,        // 是否按下确认按钮
						doubleSwitch: undefined,    // 双击切换牌
						finishTime:function(time),    // 指定的毫秒数后完成观星
						finish:function(),            // 观星完成，在下一个step 中，可以通过 event.cards1 与 event.cards2 访问观星后的牌
						swap:function(s, t),        // 交换观星中的两个牌
						switch:function(card),       // 将观星中的牌切换到另一方
						move:function(card, index, moveDown)    // 移动观星的牌到指定的一方位置
						}
						*/
					}
					"step 1"
					player.popup(get.cnNumber(event.num1) + '上' + get.cnNumber(event.num2) + '下');
					game.log(player, '将' + get.cnNumber(event.num1) + '张牌置于牌堆顶，' + get.cnNumber(event.num2) +'张牌置于牌堆底');
					game.updateRoundNumber()
					"step 2"
					player.chooseCardButton('〖观星〗：选择一枚「星」',1,player.storage.jszglqx,true);
					"step 3"
					event.cards=result.links;
					if(trigger.player==player){
						player.$give(1,player,false);
						player.gain(event.cards,'fromStorage');
						event.goto(6);
					}
					"step 4"
					player.chooseControl('给'+get.translation(trigger.player),'给自己').set('prompt','〖观星〗：选择一项').set('ai',function(target){
						if(player.countCards('h')<player.hp) return '给自己';
						else if(trigger.player.countCards('h')<trigger.player.hp&&get.attitude(player,trigger.player)>0) return '给'+get.translation(trigger.player);
						return '给自己';
					});
					"step 5"
					if(result.control=='给自己'){
						player.$give(1,player,false);
						player.gain(event.cards,'fromStorage');
					}
					else{
						player.line(trigger.player);
						player.$give(1,trigger.player,false);
						trigger.player.gain(event.cards,'fromStorage');
					}
					"step 6"
					for(var i=0;i<event.cards.length;i++){
						player.storage.jszglqx.remove(event.cards[i]);
					}
					player.syncStorage('jszglqx');
					if(player==game.me&&_status.auto){
						game.delay(0.5);
					}
				},
            },
            jszglkf:{
				audio:"ext:神怒降世:1",
				group:'jszglkf_yichu',
				enable:"phaseUse",
				usable:1,
				position:"he",
				filterCard:function(card,player){
					if(get.color(card)!='red') return false;
					if(ui.selected.cards.length){
						return get.suit(card)==get.suit(ui.selected.cards[0]);
					}
					var cards=player.getCards('he');
					for(var i=0;i<cards.length;i++){
						if(card!=cards[i]){
							return true;
						}
					}
					return false;
				},
				selectCard:2,
				complexCard:true,
				check:function(card){
					return 8-get.value(card);
				},
				filterTarget:function(card,player,target){
					return target!=player;
				},
				filter:function(event,player){
					return player.storage.jszglqx&&player.storage.jszglqx.length>1&&player.countCards('h',{color:"red"})>1;
				},
				content:function(){
					"step 0"
					player.chooseCardButton('〖狂风〗：获得两枚「星」',2,player.storage.jszglqx,true);
					"step 1"
					player.$give(result.links.length,player,false);
					player.gain(result.links,'fromStorage');
					for(var i=0;i<result.links.length;i++){
						player.storage.jszglqx.remove(result.links[i]);
					}
					player.syncStorage('jszglqx');
					if(player==game.me&&_status.auto){
						game.delay(0.5);
					}
					"step 2"
					if(target.hasSkill('jszglkf_mark')){
						target.damage('fire',1,'nocard');
						event.finish();
					}
					"step 3"
					player.chooseControl('造成1点火焰伤害','获得「狂风」标记').set('prompt','〖狂风〗：选择一项').set('ai',function(target){
						return '造成1点火焰伤害';
					});
					"step 4"
					if(result.control=='造成1点火焰伤害'){
						target.damage('fire',1,'nocard');
					}
					else{
						target.addSkill('jszglkf_mark');
					}
				},
				ai:{
					expose:0.3,
					fireAttack:true,
					order:function(){
						return get.order({name:'tao'})-1;
					},
					result:{
						target:function(player,target){
							if(player.storage.jszglqx.length<=player.hp) return 0;
							return -1;
						},
					},
				},
				subSkill:{
					yichu:{
						trigger:{
							player:['phaseZhunbeiBegin','dieBegin']
						},
						silent:true,
						content:function(){
							for(var i=0;i<game.players.length;i++){
								if(game.players[i].hasSkill('jszglkf_mark')){
									game.players[i].removeSkill('jszglkf_mark');
								}
							}
						},
						sub:true,
					},
					mark:{
						audio:"jszglkf",
						trigger:{
							player:"damageBegin4",
						},
						mark:true,
						marktext:"风",
						charlotte:true,
						filter:function(event){
							if(event.nature=='fire') return true;
							return false;
						},
						forced:true,
						intro:{
							name:"狂风",
							content:"受到火焰伤害时进行一次判定：<br><li>红色，此伤害+1并弃置此标记<br><li>黑色，弃置此标记",
						},
						content:function(){
							"step 0"
							var func=function(result){
								if(get.color(result)=='red') return -10;
								return 1;
							};
							player.judge(func);
							"step 1"
							event.color=result.color;
							if(event.color=='red'){
								trigger.num++;
								player.removeSkill('jszglkf_mark');
							}
						},
						sub:true,
					},
				},
            },
            jszgldw:{
				audio:"ext:神怒降世:1",
				group:'jszgldw_yichu',
				trigger:{
					player:"phaseEnd",
				},
				filter:function(event,player){
					return player.storage.jszglqx&&player.storage.jszglqx.length>1;
				},
				direct:true,
				content:function(){
					"step 0"
					if(player.storage.jszglqx.length%2==0) event.num=player.storage.jszglqx.length/2;
					else event.num=(player.storage.jszglqx.length-1)/2;
					player.chooseTarget(get.prompt('jszgldw'),'<center>令至多'+get.cnNumber(event.num)+'名角色获得「大雾」标记<center>',[1,event.num],function(card,player,target){
						return !target.hasSkill('jszgldw_mark');
					}).set('ai',function(target){
						var player=_status.event.player;
						return get.attitude(target,player);
					});
					"step 1"
					if(result.bool){
						var length=result.targets.length;
						for(var i=0;i<length;i++){
							result.targets[i].addSkill('jszgldw_mark');
						}
						player.logSkill('jszgldw',result.targets,'thunder');
						player.chooseCardButton('弃置'+get.cnNumber(length*2)+'枚「星」',length*2,player.storage.jszglqx,true).set('ai',function(card){
							if(player.storage.jszglqx.length>2) return true;
							return false;
						});
					}
					else{
						event.finish();
					}
					"step 2"
					for(var i=0;i<result.links.length;i++){
						player.storage.jszglqx.remove(result.links[i]);
					}
					player.syncStorage('jszglqx');
					player.$throw(result.links,1000);
					game.cardsDiscard(result.links);
					game.log(result.links,'被置入了弃牌堆');
				},
				ai:{
					expose:0.3,
				},
				subSkill:{
					yichu:{
						trigger:{
							player:['phaseZhunbeiBegin','dieBegin']
						},
						silent:true,
						content:function(){
							for(var i=0;i<game.players.length;i++){
								if(game.players[i].hasSkill('jszgldw_mark')){
									game.players[i].removeSkill('jszgldw_mark');
								}
							}
						},
						sub:true,
					},
					mark:{
						trigger:{
							player:"damageBegin4",
						},
						mark:true,
						marktext:"雾",
						charlotte:true,
						forced:true,
						direct:true,
						intro:{
							name:"大雾",
							content:"<li>受到非雷电伤害时进行一次判定，结果为红色，此伤害-1<br><li>受到雷电伤害时，弃置此标记",
						},
						content:function(){
							"step 0"
							if(trigger.nature=='thunder'){
								player.removeSkill('jszgldw_mark');
								event.finish();
							}
							"step 1"
							player.logSkill('jszgldw');
							var func=function(result){
								if(get.color(result)=='red') return 4;
								return -4;
							};
							player.judge(func);
							"step 2"
							event.color=result.color;
							if(event.color=='red'){
								trigger.num--;
							}
						},
						sub:true,
					},
				},
            },
            ylyj:{
                audio:"ext:神怒降世:2",
                group:"ylyj_pindian",
                enable:"phaseUse",
                usable:1,
                filterTarget:function(card,player,target){
					return player.canCompare(target);
				},
                content:function(){
					player.chooseToCompare(target);
				},
                ai:{
                    order:8,
                    result:{
                        target:function(player,target){
							return -1;
						},
                    },
                },
                subSkill:{
                    pindian:{
                        trigger:{
                            player:["chooseToCompareAfter","compareMultipleAfter"],
                            target:["chooseToCompareAfter","compareMultipleAfter"],
                        },
                        filter:function(event,player){
							if(event.preserve) return false;
							return true;
						},
                        forced:true,
						direct:true,
                        content:function(){
							if(player!=trigger.player){
								if(trigger.num1<trigger.num2){
									player.logSkill('ylyj');
									var card=get.cardPile2(function(card){
										return card.name=='sha'&&get.type(card)=='basic';
									});
									if(card){
										player.gain(card,'gain2','log');
										player.draw(1);
									}
									else{
										player.draw(2);
									}
									player.useCard({name:'juedou',isCard:true},trigger.player);
								}
								else{
									if(trigger.num1==trigger.num2){
										player.logSkill('ylyj');
										var bieren=trigger.player;
										var mpdr=[player,bieren];
										game.asyncDraw(mpdr);
									}
								}
							}
							else{
								if(trigger.num1>trigger.num2){
									player.logSkill('ylyj');
									var card=get.cardPile2(function(card){
										return card.name=='sha'&&get.type(card)=='basic';
									});
									if(card){
										player.gain(card,'gain2','log');
										player.draw(1);
									}
									else{
										player.draw(2);
									}
									player.useCard({name:'juedou',isCard:true},trigger.target);
								}
								else{
									if(trigger.num1==trigger.num2){
										player.logSkill('ylyj');
										var bieren=trigger.target;
										var mpdr=[player,bieren];
										game.asyncDraw(mpdr);
									}
								}
							}
						},
                        sub:true,
                    },
                },
            },
            wcjm:{
                audio:"ext:神怒降世:2",
                usable:1,
                group:"wcjm_jueming",
                trigger:{
                    source:"damageAfter",
                },
                filter:function(event,player){
					return player.countCards('h')>0&&_status.currentPhase==player&&event.player.isAlive()&&event.player!=player;
				},
				direct:true,
                content:function(){
					"step 0"
					player.chooseToDiscard(get.prompt('wcjm',trigger.player),'<center>弃置一张手牌视为对其使用一张【决斗】</center>',1,'h').set('ai',function(card){
						if(get.attitude(trigger.player,player)>=0) return -1;
						return 8-get.value(card);
					});
					"step 1"
					if(result.bool){
						player.logSkill('wcjm');
						player.useCard({name:'juedou',isCard:true},trigger.player);
					}
				},
                subSkill:{
                    jueming:{
                        audio:"wcjm",
                        trigger:{
                            player:"damageEnd",
                        },
                        filter:function(event,player){
							if(event.card&&event.card.name=='juedou') return false;
							return _status.currentPhase!=player&&event.source!=undefined&&event.source!=player;
						},
                        check:function(event,player){
							return get.attitude(player,event.source)<=0;
						},
                        content:function(){
							"step 0"
							var card=get.cardPile2(function(card){
								return card.name=='sha'&&get.type(card)=='basic';
							});
							if(card){
								player.gain(card,'gain2','log');
								if(trigger.num>1) player.draw(trigger.num-1);
							}
							else{
								player.draw(trigger.num);
							}
							"step 1"
							player.useCard({name:'juedou',isCard:true},trigger.source);
						},
                        sub:true,
                    },
                },
            },
            splbyw:{
                audio:"ext:神怒降世:1",

                enable:"phaseUse",
                usable:1,
                content:function(){
					"step 0"
					player.draw(2);
					"step 1"
					event.targets=game.filterPlayer();
					event.targets.remove(player);
					game.asyncDraw(event.targets);
				},
                ai:{
                    order:8,
                    result:{
                        player:1,
                    },
                },
            },
            splbxl:{
                audio:"ext:神怒降世:1",
                trigger:{
                    target:"useCardToTargeted",
                },
                forced:true,
                filter:function(event,player){
					return event.card.name=='sha';
				},
                content:function(){
					"step 0"
					var eff=get.effect(player,trigger.card,trigger.player,trigger.player);
					trigger.player.chooseToDiscard('〖享乐〗：弃置一张基本牌，否则杀对'+get.translation(player)+'无效',function(card){
						return get.type(card)=='basic';
					}).set('ai',function(card){
						if(_status.event.eff>0){
							return 10-get.value(card);
						}
						return 0;
					}).set('eff',eff);
					"step 1"
					if(result.bool==false){
						trigger.getParent().excluded.add(player);
					}
				},
                ai:{
                    effect:{
                        target:function(card,player,target,current){
							if(card.name=='sha'&&get.attitude(player,target)<0){
								if(_status.event.name=='xiangle') return;
								var bs=player.getCards('h',{type:'basic'});
								if(bs.length<2) return 0;
								if(player.hasSkill('jiu')||player.hasSkill('tianxianjiu')) return;
								if(bs.length<=3&&player.countCards('h','sha')<=1){
									for(var i=0;i<bs.length;i++){
										if(bs[i].name!='sha'&&get.value(bs[i])<7){
											return [1,0,1,-0.5];
										}
									}
									return 0;
								}
								return [1,0,1,-0.5];
							}
						},
                    },
                },
            },
            szxxl:{
                audio:"ext:神怒降世:1",
                usable:1,
                enable:"phaseUse",
                skillAnimation:true,
                animationColor:"soil",
                filter:function(event,player){
					return player.storage.disableEquip.length==0;
				},
                filterTarget:function(card,player,target){
					return target!=player;
				},
                content:function(){
					if(!target.hasSkill('fengyin')){
						target.addTempSkill('fengyin');
					}
					player.disableEquip('equip1');
					player.disableEquip('equip2');
					player.disableEquip('equip3');
					player.disableEquip('equip4');
					player.disableEquip('equip5');
					player.addTempSkill('drlt_szxxl1');
					player.storage.drlt_szxxl1=target;
					target.addSkill('drlt_szxxl2');
					target.markSkillCharacter('drlt_szxxl1',player,'雄乱','无法使用或打出任何手牌');
				},
                ai:{
                    order:13,
                    result:{
                        target:function(player,target){
							if(target.getEquip('bagua')||target.getEquip('rewrite_bagua')) return 0;
							var hs=player.countCards('h',function(card){
								return ['sha','juedou'].contains(card.name)&&get.effect(target,card,player,player)!=0;
							});
							var ts=target.hp;
							if(hs>=ts&&ts>1) return -1;
							return 0;
						},
                    },
                },
            },
            szxxx:{
                audio:"ext:神怒降世:1",
				init:function(player){
					if(!player.storage.szxxx) player.storage.szxxx=[];
				},
				intro:{
					content:"cards",
					onunmark:function(storage,player){
						if(storage&&storage.length){
							player.$throw(storage,1000);
							game.cardsDiscard(storage);
							game.log(storage,'被置入了弃牌堆');
							storage.length=0;
						}
					},
				},
                trigger:{
                    player:["damageEnd","die"],
                },
				filter:function(event,player,name){
					if(name=="die") return player.storage.szxxx.length>0;
					else return true;
				},
				forced:true,
                content:function(){
					"step 0"
					if(event.triggername=="die"){
						event.card=player.storage.szxxx;
						player.$throw(event.card,1000);
						game.delayx();
						game.cardsDiscard(event.card);
						game.log(event.card,'被置入了弃牌堆');
						player.storage.szxxx=[];
						evetn.finish();
					}
					"step 1"
					var names=[];
					var cards=[];
					while(cards.length<trigger.num){
						var card=get.cardPile2(function(card){
							return !cards.contains(card)&&card.name=='sha'&&get.type(card)=='basic';
						});
						if(card){
							cards.push(card);
							names.push(card.name);
						}
						else break;
					}
					if(cards.length){
						if(player.storage.disableEquip.length>0){
							player.$gain2(cards);
							player.markAuto('szxxx',cards);
							game.cardsGotoSpecial(cards);
							game.log(player,'将',cards,'置于了','#g「枭雄」上');
							game.updateRoundNumber();
						}
						else player.gain(cards,'gain2');
					}
					"step 2"
					if(player.storage.disableEquip.length>0) player.chooseToEnable();
					"step 3"
					if(player.storage.disableEquip.length<1){
						if(player.storage.szxxx.length>0){
							player.gain(player.storage.szxxx,'gain2','log','fromStorage');
							player.storage.szxxx=[];
							player.unmarkSkill('szxxx');
						}
					}
					player.updateMarks('szxxx');
				},
            },
            szxcj:{
                audio:"ext:神怒降世:1",
                trigger:{
                    target:"useCardToTargeted",
                },
                direct:true,
                filter:function (event,player){
					return get.type(event.card)=='trick'&&event.targets.length>1&&player.countCards('he')>0;
				},
                content:function(){
					'step 0'
					player.chooseCardTarget({
						filterCard:true,
						selectCard:1,
						position:'he',
						filterTarget:function(card,player,target){
							return player!=target&&_status.event.targets.contains(target);
						},
						ai1:function(card){
							if(card.name=='du') return 20;
							if(_status.event.player.storage.drlt_xiongluan&&get.type(card)=="equip") return 15;
							return 6-get.value(card);
						},
						ai2:function(target){
							var att=get.attitude(_status.event.player,target);
							if(ui.selected.cards.length&&ui.selected.cards[0].name=='du'){
								if(target.hasSkillTag('nodu')) return 0.1;
								return 1-att;
							}
							return att-3;
						},
						prompt:get.prompt('szxcj'),
						targets:trigger.targets,
					});
					'step 1'
					if(result.bool){
						event.target=result.targets[0];
						player.line(event.target);
						player.logSkill('szxcj');
						event.target.gain(result.cards[0],player,'give');
						player.draw(2);
					};
				},
            },
            jslbln:{
                mark:true,
				zhuanhuanji:true,
                intro:{
                    content:function(storage,player,skill){
						if(player.storage.jslbln==true) return '锁定技，出牌阶段开始时摸一张牌，然后本回合你的红色手牌均视为火杀且无距离限制';
						return '锁定技，出牌阶段开始时摸一张牌，然后本回合你的锦囊牌均视为雷杀且无使用次数限制';
					},
                },
                audio:"ext:神怒降世:1",
                trigger:{
                    player:"phaseUseBegin",
                },
                forced:true,
                content:function(){
					if(player.storage.jslbln==true){
						player.storage.jslbln=false;
						player.draw();
						player.addTempSkill('jslbln_2',{player:'phaseAfter'});
					}else{
						player.storage.jslbln=true;
						player.draw();
						player.addTempSkill('jslbln_1',{player:'phaseAfter'});
					};
				},
				subSkill:{
                    "1":{
						prompt:"本回合你的红色手牌均视为火杀且无距离限制",
                        mod:{
							cardname:function(card,player){
								if(get.color(card)=='red') return 'sha';
							},
                            cardnature:function(card,player){
								if(get.color(card)=='red') return 'fire';
							},
                            targetInRange:function(card){
								if(get.color(card)=='red') return true;
							},
                        },
                        ai:{
                            effect:{
								target:function(card,player,target,current){
									if(get.tag(card,'respondSha')&&current<0) return 0.6
								},
                            },
                            respondSha:true,
                        },
                        sub:true,
                    },
                    "2":{
                        prompt:"本回合你的锦囊牌均视为雷杀且无使用次数限制",
                        mod:{
                            cardname:function(card,player){
								if(['trick','delay'].contains(lib.card[card.name].type)) return 'sha';
							},
                            cardnature:function(card,player){
								if(['trick','delay'].contains(lib.card[card.name].type)) return 'thunder';
							},
                            cardUsable:function(card,player){
								if(card.name=='sha'&&card.nature=='thunder') return Infinity;
							},
                        },
                        ai:{
                            effect:{
                                target:function(card,player,target,current){
									if(get.tag(card,'respondSha')&&current<0) return 0.6
								},
                            },
                            respondSha:true,
                        },
                        sub:true,
                    },
                },
            },
            jslbjy:{
                audio:"ext:神怒降世:1",
                locked:true,
                global:"jslbjyspsx",
                ai:{
                    effect:{
                        target:function(card){
							if(card.name=='tiesuo') return 'zeroplayertarget';
						},
                    },
                },
                group:["jslbjy_1","jslbjy_2"],
                subSkill:{
                    "1":{
                        audio:"jslbjy",
                        trigger:{
                            player:["linkBefore","enterGame"],
                            global:"gameDrawAfter",
                        },
                        forced:true,
                        filter:function(event,player){
							return player.isLinked()==(event.name=='link');
						},
                        content:function(){
							if(trigger.name!='link') player.link(true);
							else trigger.cancel();
						},
                        sub:true,
                    },
                    "2":{
                        audio:"jslbjy",
                        trigger:{
                            player:"phaseEnd",
                        },
                        direct:true,
                        filter:function(event,player){
							return game.hasPlayer(function(current){
								return current!=player&&!current.isLinked();
							});
						},
                        content:function(){
							"step 0"
							player.chooseTarget(true,'〖结营〗：请选择横置的目标',function(card,player,target){
								return target!=player&&!target.isLinked();
							}).ai=function(target){
								return 1+Math.random();
							};
							"step 1"
							if(result.bool){
								player.line(result.targets);
								player.logSkill('jslbjy_2');
								result.targets[0].link(true);
							}else{
								event.finish();
							};
						},
                        sub:true,
                    },
                },
            },
            jcys:{
                audio:"ext:神怒降世:1",
                unique:true,
                group:["jcys_lei","jcys_du"],
                mark:true,
                subSkill:{
                    lei:{
						audio:"jcys",
                        trigger:{
                            player:"damageBegin4",
                        },
                        filter:function(event,player){
							if(event._notrigger.contains(event.player)) return false;
							return event.nature=='thunder';
						},
                        forced:true,
                        content:function (){
							trigger.num++;
							player.removeSkill('jcys');
						},
                        sub:true,
                    },
                    du:{
                        audio:"jcys",
                        trigger:{
                            player:"loseHpEnd",
                        },
                        forced:true,
                        content:function (){
							player.loseHp();
							player.removeSkill('jcys');
						},
                        sub:true,
                    },
                },
                intro:{
                    name:"炎殇",
                    content:"<li>受到雷电伤害时，此伤害+1<br><li>触发「寒燠」标记后，弃一张牌<br><li>失去体力后，失去1点体力",
                },
            },
            jckx:{
                audio:"ext:神怒降世:1",
                trigger:{
                    player:"phaseZhunbeiBegin",
                },
                derivation:["jczlt","jczys","jczdh","jczhy"],
                forced:true,
                content:function(){
					'step 0'
					var func=function(result){
						return 1;
					};
					player.judge(func);
					'step 1'
					event.suit=result.suit;
					'step 2'
					if(event.suit=='spade'){
						player.addTempSkill('jczlt',{player:'phaseZhunbeiBegin'});
					}
					if(event.suit=='heart'){
						player.addTempSkill('jczys',{player:'phaseZhunbeiBegin'});
					}
					if(event.suit=='club'){
						player.addTempSkill('jczdh',{player:'phaseZhunbeiBegin'});
					}
					if(event.suit=='diamond'){
						player.addTempSkill('jczhy',{player:'phaseZhunbeiBegin'});
					}
				},
            },
            jcbs:{
                audio:"ext:神怒降世:1",
                trigger:{
                    player:"phaseDiscardEnd",
                },
                direct:true,
                filter:function(event,player){
					var cards=[];
					player.getHistory('lose',function(evt){
						if(evt.type=='discard'&&evt.getParent('phaseDiscard')==event) cards.addArray(evt.cards2);
					});
					return player.isMinHp()||player.isMinHandcard()||cards.length>1;
				},
                content:function(){
					"step 0"
					player.chooseTarget(get.prompt('jcbs'),'<center>对一名体力值不低于你的其他角色造成1点伤害</center>',function(card,player,target){
						return target!=player&&target.hp>=player.hp;
					}).set('ai',function(target){
						var player=_status.event.player;
						return get.damageEffect(target,player,player);
					});
					"step 1"
					if(result.bool&&result.targets&&result.targets.length){
						player.logSkill('jcbs',result.targets);
						result.targets[0].damage();
					}
				},
            },
            jclt:{
                audio:"ext:神怒降世:1",
                unique:true,
                group:["jclt_huo","jclt_du"],
                mark:true,
                subSkill:{
                    huo:{
                        audio:"jclt",
                        trigger:{
                            player:"damageEnd",
                        },
                        filter:function(event,player){
							if(event._notrigger.contains(event.player)) return false;
							return event.nature=='fire';
						},
                        forced:true,
                        content:function (){
							if(player.countCards('e')){
								player.discard(player.getCards('e'));
							}
							player.removeSkill('jclt');
						},
                        sub:true,
                    },
                    du:{
                        audio:"jclt",
                        trigger:{
                            player:"loseHpEnd",
                        },
                        forced:true,
                        content:function (){
							player.chooseToDisable();
							player.removeSkill('jclt');
						},
                        sub:true,
                    },
                },
                intro:{
                    name:"雷霆",
                    content:"<li>受到火焰伤害后，弃置装备区的所有牌<br><li>触发「寒燠」标记后，弃两张牌<br><li>失去体力后，废除一个装备栏",
                },
            },
            jcdh:{
                audio:"ext:神怒降世:1",
                unique:true,
                group:["jcdh_huo","jcdh_lei"],
                mark:true,
                subSkill:{
                    huo:{
                        audio:"jcdh",
                        trigger:{
                            player:"damageEnd",
                        },
                        filter:function(event,player){
							if(event._notrigger.contains(event.player)) return false;
							return event.nature=='fire';
						},
                        forced:true,
                        content:function (){
							player.loseHp();
							player.removeSkill('jcdh');
						},
                        sub:true,
                    },
                    lei:{
                        audio:"jcdh",
                        trigger:{
                            player:"damageEnd",
                        },
                        filter:function(event,player){
							if(event._notrigger.contains(event.player)) return false;
							return event.nature=='thunder';
						},
                        forced:true,
                        content:function (){
							player.chooseToDisable();
							player.removeSkill('jcdh');
						},
                        sub:true,
                    },
                },
                intro:{
                    name:"毒祸",
                    content:"<li>受到火焰伤害后，你失去1点体力<br><li>触发「寒燠」后，减少1点体力上限<br><li>受到雷电伤害后，废除一个装备栏",
                },
            },
            jchy:{
                audio:"ext:神怒降世:1",
                unique:true,
                group:["jchy_huo","jchy_lei","jchy_du"],
                mark:true,
                subSkill:{
                    huo:{
                        audio:"jchy",
                        trigger:{
                            player:"damageBegin4",
                        },
                        filter:function(event,player){
							if(event._notrigger.contains(event.player)) return false;
							return event.nature=='fire';
						},
                        forced:true,
                        content:function (){
							trigger.num++;
							player.removeSkill('jchy');
						},
                        sub:true,
                    },
                    lei:{
                        audio:"jchy",
                        trigger:{
                            player:"damageEnd",
                        },
                        filter:function(event,player){
							if(event._notrigger.contains(event.player)) return false;
							return event.nature=='thunder';
						},
                        forced:true,
                        content:function (){
							player.chooseToDiscard('弃置一张牌',1,true,'he');
							player.removeSkill('jchy');
						},
                        sub:true,
                    },
                    du:{
                        audio:"jchy",
                        trigger:{
                            player:"loseHpEnd",
                        },
                        forced:true,
                        content:function (){
							player.loseMaxHp();
							player.removeSkill('jchy');
						},
                        sub:true,
                    },
                },
                intro:{
                    name:"寒燠",
                    content:"<li>受到火焰伤害时，此伤害+1<br><li>受到雷电伤害后，弃一张牌<br><li>失去体力后，减少1点体力上限",
                },
            },
            jczys:{
                audio:"jcys",
                trigger:{
                    source:"damageBegin",
                },
                logTarget:"player",
                forced:true,
                content:function(){
					if(trigger.player.hasSkill('jclt')||trigger.player.hasSkill('jchy')||trigger.player.hasSkill('jcdh')){
						trigger.nature='fire';
					}
					else{
						trigger.nature='fire';
						trigger.player.addSkill('jcys');
					}
				},
            },
            jczlt:{
                audio:"jclt",
                trigger:{
                    source:"damageBegin",
                },
                forced:true,
                logTarget:"player",
                content:function(){
					if(trigger.player.hasSkill('jcys')||trigger.player.hasSkill('jchy')||trigger.player.hasSkill('jcdh')){
						trigger.nature='thunder';
					}
					else{
						trigger.nature='thunder';
						trigger.player.addSkill('jclt');
					}
				},
            },
            jczdh:{
                audio:"jcdh",
                trigger:{
                    source:"damageBegin",
                },
                logTarget:"player",
                forced:true,
                content:function(){
					if(trigger.player.hasSkill('jcys')||trigger.player.hasSkill('jclt')||trigger.player.hasSkill('jchy')){
						var num=trigger.num;
						trigger.cancel();
						trigger.player.loseHp(num);
					}
					else{
						var num=trigger.num;
						trigger.cancel();
						trigger.player.loseHp(num);
						trigger.player.addSkill('jcdh');
					}
				},
            },
            jczhy:{
                audio:"jchy",
                trigger:{
                    source:"damageBegin",
                },
                logTarget:"player",
                forced:true,
                content:function(){
					if(trigger.player.hasSkill('jcys')||trigger.player.hasSkill('jclt')||trigger.player.hasSkill('jcdh')||trigger.player.hasSkill('jchy')){
						if(trigger.player.hasSkill('jcys')){
							trigger.cancel();
							player.discardPlayerCard(trigger.player,2,'he',true);
							trigger.player.chooseToDiscard('弃置一张牌',1,true,'he');
							trigger.player.removeSkill('jcys');
						}
						if(trigger.player.hasSkill('jclt')){
							trigger.cancel();
							player.discardPlayerCard(trigger.player,2,'he',true);
							trigger.player.chooseToDiscard('弃置两张牌',2,true,'he');
							trigger.player.removeSkill('jclt');
						}
						if(trigger.player.hasSkill('jcdh')){
							trigger.cancel();
							player.discardPlayerCard(trigger.player,2,'he',true);
							trigger.player.loseMaxHp();
							trigger.player.removeSkill('jcdh');
						}
						if(trigger.player.hasSkill('jchy')){
							trigger.cancel();
							player.discardPlayerCard(trigger.player,2,'he',true);
						}
					}
					else{
						trigger.cancel();
						player.discardPlayerCard(trigger.player,2,'he',true);
						trigger.player.addSkill('jchy');
					}
				},
            },
            xhell:{
                audio:"ext:神怒降世:1",
                enable:"phaseUse",
                usable:1,
                viewAs:{
                    name:"shunshou",
                },
                filterCard:function(card,player){
					return true;
				},
                selectCard:2,
                check:function(card){
					return 8-get.value(card);
				},
                complexCard:true,
                ai:{
                    wuxie:function(target,card,player,viewer){
						if(get.attitude(viewer,player)>0&&get.attitude(viewer,target)>0){
							return 0;
						}
					},
                    basic:{
                        order:7.5,
                        useful:4,
                        value:9,
                    },
                    result:{
                        target:function(player,target){
							if(get.attitude(player,target)<=0) return (target.countCards('he',function(card){
								return card.name=='tengjia'||get.value(card)>0;
							})>0)?-1.5:1.5;
							var js=target.getCards('j');
							if(js.length){
								var jj=js[0].viewAs?{name:js[0].viewAs}:js[0];
								if(jj.name=='shunshou') return 3;
								if(js.length==1&&get.effect(target,jj,target,player)>=0){
									return -1.5;
								}
								return 3;
							}
							return -1.5;
						},
                        player:function(player,target){
							if(get.attitude(player,target)<0&&!target.countCards('he')){
								return 0;
							}
							if(get.attitude(player,target)>1){
								var js=target.getCards('j');
								if(js.length){
									var jj=js[0].viewAs?{name:js[0].viewAs}:js[0];
									if(jj.name=='shunshou') return 1;
									if(js.length==1&&get.effect(target,jj,target,player)>=0){
										return 0;
									}
									return 1;
								}
								return 0;
							}
							return 1;
						},
                    },
                    tag:{
                        loseCard:1,
                        gain:1,
                    },
                },
            },
            xhepj:{
                audio:"ext:神怒降世:1",
                group:["xhepj_huode","xhepj_zengdao","xhepj_die"],
                subSkill:{
                    huode:{
                        trigger:{
                            global:"gameDrawAfter",
                            player:"phaseZhunbeiBegin",
                        },
                        direct:true,
                        forced:true,
                        filter:function(event,player){
							return !player.getEquip('qinggang');
						},
                        content:function(){
							var card=get.cardPile('qinggang','field');
							if(card){
								player.logSkill('xhepj');
								player.equip(card);
							}
						},
                        sub:true,
                    },
                    zengdao:{
                        audio:"xhepj",
                        enable:"phaseUse",
                        usable:1,
                        filter:function(event,player){
							return player.getEquip('qinggang');
						},
                        filterTarget:function(card,player,target){
							return player!=target;
						},
                        content:function(){
							var card=get.cardPile('qinggang','field');
							if(card){
								var mpdr=[player,target]
								target.equip(card);
								game.asyncDraw(mpdr);
							}
						},
						ai:{
                            order:function(){
								return get.order({name:'sha'})-1;
							},
                            result:{
								target:function(player,target){
									return 1;
								},
							},
                        },
                        sub:true,
                    },
                    die:{
                        trigger:{
                            player:"die",
                        },
                        forced:true,
                        forceDie:true,
                        filter:function(event){
							return event.source&&event.source.isIn();
						},
                        logTarget:"source",
                        content:function(){
							var card=get.cardPile('qinggang','field');
							if(card){
								trigger.source.gain(card,'gain2','log');
							}
						},
                        sub:true,
                    },
                },
            },
            hcdm:{
                audio:"ext:神怒降世:1",
                group:["hcdm_discard","hcdm_usecard"],
                subSkill:{
                    discard:{
                        audio:"hcdm",
                        trigger:{
                            global:"loseAfter",
                        },
                        filter:function(event,player){
							if (event.player==player) return false;
							if (event.type!='discard') return false;
							for (var i=0;i<event.cards2.length;i++) {
								if (get.subtype(event.cards2[i],event.player)=='equip3'||get.subtype(event.cards2[i],event.player)=='equip4'){
									return true;
								}
							}
							return false;
						},
                        content:function() {
							"step 0"
							if (trigger.delay==false) game.delay();
							"step 1"
							var cards=[];
							for (var i=0;i<trigger.cards2.length;i++) {
								var card=trigger.cards2[i];
								if (get.subtype(card,trigger.player)=='equip3'||get.subtype(card,trigger.player)=='equip4'){
									player.gain(card,'gain2','log');
								}
							}
						},
                        sub:true,
                    },
                    usecard:{
                        trigger:{
                            global:"useCardEnd",
                        },
                        filter:function(event,player){
							return event.player!=player&&(get.subtype(event.card)=='equip3'||get.subtype(event.card)=='equip4');
						},
						direct:true,
                        check:function(event,player){
							return get.attitude(player,event.player)<=0;
						},
                        content:function() {
							'step 0'
							player.chooseToDiscard(get.prompt('hcdm'),'<center>弃置一张牌，然后获得'+get.translation(trigger.card)+'</center>','he').set('ai',function(target){
								return get.attitude(player,trigger.player)<=0;
							});
							'step 1'
							if(result.bool){
								player.logSkill('hcdm',trigger.player);
								if(get.subtype(trigger.card)=='equip3') player.gain(trigger.player.getEquip(3),'gain2','log');
								if(get.subtype(trigger.card)=='equip4') player.gain(trigger.player.getEquip(4),'gain2','log');
							}
						},
                        sub:true,
                    },
                },
            },
            hcxm:{
                audio:"ext:神怒降世:1",
                enable:"phaseUse",
                filter:function(event,player){
					return player.countCards('he')>0;
				},
                filterCard:function(card){
					return get.subtype(card)=='equip3'||get.subtype(card)=='equip4';
				},
                check:function(card){
					var player=_status.currentPhase;
					if(player.countCards('he',{subtype:get.subtype(card)})>1){
						return 11-get.equipValue(card);
					}
					return 6-get.value(card);
				},
				filterTarget:function(card,player,target){
					if(target.isMin()) return false;
					var type=get.subtype(card);
					return target.isEmpty(type);
				},
                content:function(){
					if(target==player){
						player.discard(cards[0]);
						player.draw();
					}
					else{
						target.equip(cards[0]);
						target.recover();
						target.draw(2);
					}
				},
				position:"he",
                delay:false,
                lose:false,
                discard:false,
                prepare:function(cards,player,targets){
					player.$give(cards,targets[0],false);
				},
                ai:{
                    basic:{
                        order:10,
                    },
                    result:{
                        target:function(player,target){
							var card=ui.selected.cards[0];
							if(card) return get.effect(target,card,target,target);
							return 0;
						},
                    },
                    threaten:1.3,
                },
            },
            bxfh:{
                audio:"ext:神怒降世:1",
                enable:"phaseUse",
                usable:1,
                filter:function (event,player){
					return true;
				},
                filterTarget:function(card,player,target){
					return target!=player;
				},
                check:function(target){
					var player=_status.event.player;
					return -get.attitude(_status.event.player,target);
				},
                content:function (){
					if(player.hp<target.hp){
						player.draw();
					}
					else{
						if(player.hp>target.hp){
							target.discardPlayerCard(player,'he',true);
						}
						else{
							target.discardPlayerCard(player,'h',true);
							player.draw(1);
						}
					}
					player.useCard({name:'sha',isCard:true},false,target);
				},
                ai:{
					order:function(){
						return get.order({name:'sha'})-1;
					},
                    result:{
                        target:function(player,target){
							return -1;
						},
                    },
                },
            },
            bxlx:{
                audio:"ext:神怒降世:1",
                shaRelated:true,
                trigger:{
                    player:"useCardToPlayered",
                },
                forced:true,
                filter:function(event,player){
					return event.card.name=='sha'&&!event.getParent().directHit.contains(event.target)&&player.countCards('e')>0;
				},
                logTarget:"target",
                content:function(){
					var id=trigger.target.playerid;
					var map=trigger.getParent().customArgs;
					if(!map[id]) map[id]={};
					if(typeof map[id].shanRequired=='number'){
						map[id].shanRequired++;
					}
					else{
						map[id].shanRequired=2;
					}
				},
            },
            llhy:{
                audio:"ext:神怒降世:1",
                mod:{
                    globalFrom:function(from,to,distance){
						return distance-from.getDamagedHp();
					},
                    cardUsable:function(card,player,num){
						if(card.name=='sha') return num+player.getDamagedHp();
					},
                },
                trigger:{
                    source:"damageEnd",
                },
                filter:function(event,player){
					if(event._notrigger.contains(event.player)) return false;
					return event.card&&event.card.name=='sha'&&event.player!=player&&event.player.isAlive();
				},
                logTarget:"player",
                forced:true,
                intro:{
                    name:"悍勇",
                    content:"mark",
                },
                content:function(){
					trigger.player.addMark('llhy',1);
					if(trigger.player.countMark('llhy')>=3){
						trigger.player.die();
						player.recover();
						player.awakenSkill('llhy');
					}
				},
            },
            gshm:{
                audio:"ext:神怒降世:1",
                group:["gshm_bryblack","gshm_zjyblack"],
                subSkill:{
                    bryblack:{
                        audio:"gshm",
                        trigger:{
                            global:"useCard",
                        },
                        filter:function(event,player){
							return get.color(event.card)=='black'&&event.player!=player&&get.type(event.card)=='basic';
						},
						frequent:true,
						content:function(){
							player.draw();
						},
                        sub:true,
                    },
                    zjyblack:{
                        trigger:{
                            player:"useCard",
                        },
                        filter:function(event,player){
							return get.color(event.card)=='black';
						},
                        direct:true,
                        content:function(){
							"step 0"
							player.chooseTarget(get.prompt('gshm'),'<center>令一名其他角色弃置一张牌</center>',function(card,player,target){
								return player!=target&&target.countCards('he')>0;
							}).set('ai',function(target){
								var player=_status.event.player;
								return -get.attitude(target,player);
							});
							"step 1"
							if(result.bool){
								game.delay(0,200);
								event.target=result.targets[0];
								player.logSkill('gshm',result.targets[0]);
							}
							else{
								event.finish();
							}
							"step 2"
							result.targets[0].chooseToDiscard('弃置一张牌',1,'he',true);
						},
                        sub:true,
                    },
                },
            },
            gshd:{
                audio:"ext:神怒降世:1",
                trigger:{
                    player:"judgeEnd",
                },
                direct:true,
                frequent:function(event){
					return true;
				},
                check:function(event){
					return true;
				},
				filter:function(event,player){
					return get.position(event.result.card,true)=='o'&&get.color(event.result.card)=='black';
				},
                content:function(){
					"step 0"
					player.chooseTarget(get.prompt('gshd'),'<center>对一名其他角色造成1点伤害</center>',function(card,player,target){
						return target!=player;
					}).set('ai',function(target){
						var player=_status.event.player;
						return get.damageEffect(target,player,player);
					});
					"step 1"
					if(result.bool&&result.targets&&result.targets.length){
						player.logSkill('gshd',result.targets);
						var num=1;
						result.targets[0].damage(num);
					}
				},
            },
            jsjb:{
                audio:"ext:神怒降世:1",
                group:["jsjb_jieshu","jsjb_mopai","jsjb_shanghai"],
                subSkill:{
                    jieshu:{
                        direct:true,
                        forced:true,
                        trigger:{
                            player:"phaseJieshuBegin",
                        },
                        filter:function(event,player){
							return true;
						},
                        content:function(){
							"step 0"
							player.chooseControl('失去1点体力','减少1点体力上限',function(event,player){
								if(player.hp==player.maxHp) return '失去1点体力';
								if(player.hp<player.maxHp-1||player.hp<=2) return '减少1点体力上限';
								return '失去1点体力';
							}).set('prompt','〖集兵〗：选择一项');
							"step 1"
							if(result.control=='失去1点体力'){
								player.loseHp();
							}
							else{
								player.loseMaxHp(true);
							}
						},
                        sub:true,
                    },
                    mopai:{
                        audio:"jsjb",
                        forced:true,
                        trigger:{
                            player:"loseHpEnd",
                        },
                        filter:function(event,player){
							return true;
						},
                        content:function(){
							player.draw(trigger.num);
						},
                        sub:true,
                    },
                    shanghai:{
                        trigger:{
                            player:"loseMaxHpEnd",
                        },
                        direct:true,
                        forced:true,
                        frequent:function(event){
							return true;
						},
						check:function(event){
							return true;
						},
                        filter:function(event,player){
							return true;
						},
                        content:function(){
							"step 0"
							player.chooseTarget(true,'〖集兵〗：对一名其他角色造成'+get.cnNumber(trigger.num)+'点伤害',function(card,player,target){
								return target!=player;
							}).set('ai',function(target){
								var player=_status.event.player;
								return get.damageEffect(target,player,player);
							});
							"step 1"
							if(result.bool&&result.targets&&result.targets.length){
								player.logSkill('jsjb',result.targets);
								var num=trigger.num;
								result.targets[0].damage(num);
							}
						},
                        sub:true,
                    },
                },
            },
            snjs_huanshi:{
                audio:"ext:神怒降世:3",
                trigger:{
                    target:"useCardToPlayered",
                },
                filter:function(event,player){
					return (event.card.name=='lebu'||event.card.name=='bingliang'||event.card.name=='shandian')&&event.player!=player;
				},
                forced:true,
				direct:true,
                content:function(){
					"step 0"
					var skillname='snjs_huanshi_putong';
					if(player.name=='snjs_sp_zhaozhong') skillname='snjs_huanshi_spzz';
					if(player.name=='snjs_sp_zhangrang') skillname='snjs_huanshi_spzr';
					player.logSkill(skillname);
					"step 1"
					var func=function(result){
						if(get.color(result)=='black') return 6;
						return -4;
					};
					player.judge(func);
					"step 2"
					event.color=result.color;
					if(event.color=='black'){
						trigger.getParent().excluded.add(player);
					}
				},
				subSkill:{
					putong:{
						audio:"ext:神怒降世:1",
						sub:true,
					},
					spzz:{
						audio:"ext:神怒降世:1",
						sub:true,
					},
					spzr:{
						audio:"ext:神怒降世:1",
						sub:true,
					},
				},
            },
            ckbr:{
                audio:"ext:神怒降世:1",
                trigger:{
                    player:"damageBegin4",
                },
                filter:function(event,player){
					return (event.source!=undefined&&event.num>0)&&event.source!=player;
				},
                logTarget:"source",
                forced:true,
                content:function(){
					"step 0"
					var target=trigger.source;
					event.target=target;
					var res=get.damageEffect(target,player,target);
					target.chooseToDiscard('弃置X张牌(X至多为3)，然后'+get.translation(player)+'摸3-X张牌，若X为0，此伤害-1','he',[1,3]).set('ai',function(card){
						if(get.attitude(target,player)>=0) return -1;
						return 8-get.value(card);
					}).set('res',res);
					"step 1"
					if(result.bool==true){
						if(result.cards.length<3) player.draw(3-result.cards.length);
					}
					else{
						player.draw(3);
						trigger.num--;
					}
				},
				ai:{
					maixie:true,
					"maixie_hp":true,
					result:{
						effect:function (card,player,target){
							if(get.tag(card,'damage')){
								if(player.hasSkillTag('jueqing',false,target)) return [1,-2];
								if(!target.hasFriend()) return;
								var num=1;
								if(get.attitude(player,target)>0){
									if(player.needsToDiscard()){
										num=0.7;
									}
									else{
										num=0.5;
									}
								}
								return [1,num*2];
							}
						},
					},
					threaten:0.6,
				},
            },
            ckad:{
                audio:"ext:神怒降世:1",
                trigger:{
                    global:"phaseEnd",
                },
                direct:true,
                filter:function(event,player){
					return event.player!=player&&event.player.hp>=player.hp&&player.countCards('he',{color:'black'})>0;
				},
                check:function(event,player){
					return get.attitude(player,event.player)<0;
				},
                content:function (){
					"step 0"
					player.chooseToDiscard(get.prompt('ckad'),'<center>弃置一张黑牌令'+get.translation(trigger.player)+'失去1点体力</center>',1,'he',{color:'black'}).set('ai',function(card){
						if(get.attitude(trigger.player,player)>=0) return -10;
						else{
							if(card.name=='baiyin'&&player.isDamaged()) return 1;
							if(card.name=='jiu'&&player.hp==1) return -10;
							return 10-get.value(card);
						}
					});
					"step 1"
					if(result.bool==true){
						player.logSkill('ckad',trigger.player);
						trigger.player.loseHp();
					}
				},
                ai:{
                    expose:0.4,
                    threaten:1,
                },
            },
            fxlx:{
                audio:"ext:神怒降世:1",
                trigger:{
                    player:["useCard","respond"],
                },
                filter:function(event,player){
					return (event.card.name=='shan'||event.card.name=='sha')&&_status.currentPhase!=player;
				},
                direct:true,
                content:function(){
					"step 0"
					var func=function(result){
						return 1;
					};
					player.judge(func);
					"step 1"
					event.color=result.color;
					if(event.color=='red') event.str='弃置一名角色一张牌';
					else event.str='对一名角色造成1点雷电伤害';
					"step 2"
					player.chooseTarget(get.prompt('fxlx'),'<center>'+event.str+'</center>',function(card,player,target){
						if(event.color=='red') return target!=player&&target.countCards('he')>0;
						return target!=player;
					}).ai=function(target){
						var player=_status.event.player;
						var att=get.attitude(player,target);
						if(att<0){
							att=-Math.sqrt(-att);
						}
						else{
							att=Math.sqrt(att);
						}
						if(event.color=='red') return att*lib.card.guohe.ai.result.target(player,target);
						return get.damageEffect(target,player,player,'thunder');
					};
					"step 3"
					if(result.bool){
						event.target=result.targets[0];
						player.logSkill('fxlx',result.targets,'thunder');
						if(event.color=='red'){
							player.discardPlayerCard(event.target,'he',true);
						}
						else{
							event.target.damage('thunder');
						}
					}
				},
                ai:{
                    expose:0.25,
                    threaten:1.7,
                },
            },
            fxhj:{
                audio:"ext:神怒降世:1",
                trigger:{
                    target:"useCardToPlayered",
                },
                filter:function(event,player){
					return event.player==player&&_status.currentPhase==player;
				},
                forced:true,
                content:function(){
					player.draw();
				},
            },
            ssctn:{
				audio:"ext:神怒降世:2",
				usable:2,
				enable:"phaseUse",
				filterTarget:true,
				selectTarget:1,
				init:function(player){
					if(!player.storage.ssctn1) player.storage.ssctn1=false;
					if(!player.storage.ssctn2) player.storage.ssctn2=false;
				},
                filter:function(event,player){
					if(player.getDamagedHp()<1&&player.storage.ssctn1==true) return false;
					return player.countMark('sscwl')>0&&(player.storage.ssctn1==false||player.storage.ssctn2==false);
				},
                content:function(){
					"step 0"
					if(!player.hasSkill('ssctn_qingchu')) player.addTempSkill('ssctn_qingchu');
					if(!player.isDamaged()) event.goto(3);
					if(player.storage.ssctn1==true&&player.storage.ssctn2==false) event.goto(4);
					if(player.storage.ssctn1==false&&player.storage.ssctn2==true) event.goto(3);
					"step 1"
					player.chooseControl('决斗','英魂').set('prompt','〖讨逆〗：选择一项').set('ai',function(event,player){
						if(get.attitude(player,event.target)>=0) return '英魂';
						if(player.countCards('h',{name:'sha'})>0&&target.countCards('h')<=player.countCards('h')) return '决斗';
						if(player.getDamagedHp()==1) return '决斗';
						if(target.countCards('he')<2) return '决斗';
						return '英魂';
					});
					"step 2"
					if(result.control=='决斗'){
						event.goto(3);
					}
					else{
						event.goto(4);
					}
					"step 3"
					player.removeMark('sscwl',1);
					player.useCard({name:'juedou',isCard:true},target);
					player.storage.ssctn1=true;
					event.goto(7);
					"step 4"
					player.removeMark('sscwl',1);
					if(player.getDamagedHp()==1){
						target.draw();
						target.chooseToDiscard(true,'he');
						player.storage.ssctn2=true;
						event.goto(7);
					}
					"step 5"
					player.chooseControl('摸'+get.cnNumber(player.getDamagedHp(),true)+'弃一','摸一弃'+get.cnNumber(player.getDamagedHp(),true)+'').set('prompt','〖英魂〗：选择一项').set('ai',function(event,player){
						if(get.attitude(player,event.target)>=0) return '摸'+get.cnNumber(player.getDamagedHp(),true)+'弃一';
						return '摸一弃'+get.cnNumber(player.getDamagedHp(),true)+'';
					});
					"step 6"
					if(result.control=='摸'+get.cnNumber(player.getDamagedHp(),true)+'弃一'){
						target.draw(player.getDamagedHp());
						target.chooseToDiscard('弃置一张牌',true,'he');
					}
					else{
						target.draw();
						target.chooseToDiscard('弃置一张牌'+get.cnNumber(player.getDamagedHp())+'',player.getDamagedHp(),true,'he');
					}
					player.storage.ssctn2=true;
					"step 7"
				},
				subSkill:{
					qingchu:{
						silent:true,
						unique:true,
						forced:true,
						onremove:function(player){
							player.storage.ssctn1=false;
							player.storage.ssctn2=false;
						},
						sub:true,
					},
				},
                ai:{
					combo:"sscwl",
					expose:0.4,
					threaten:0.4,
					order:1,
					result:{
						target:function(player,target){
							if(player.countMark('sscwl')<4&&game.countGroup()<3) return 0;
							if(player.getDamagedHp()<1) return -1;
							if(get.attitude(player,target)>0&&player.storage.ssctn2==false) return 1;
							if(get.attitude(player,target)<0) return -1;
							return 0;
						},
					},
                },
            },
            dgsx:{
                audio:"ext:神怒降世:1",
                trigger:{
                    source:"damageSource",
                },
                direct:true,
                filter:function(event,player){
					return event.num>0&&player.countCards('he')>0&&game.countPlayer(function(current){return current!=event.player&&current!=player&&player.inRange(current);})>0;
				},
                content:function(){
					"step 0"
					var next=player.chooseCardTarget({
						position:'he',
						filterCard:lib.filter.cardDiscardable,
						filterTarget:function(card,player,target){
							return player.inRange(target)&&target!=player&&target!=trigger.player;
						},
						ai1:function(card){
							return get.unuseful(card)+9;
						},
						ai2:function(target){
							var player=_status.event.player;
							return get.damageEffect(target,player,player);
						},
						prompt:get.prompt('dgsx'),
						prompt2:'<center>弃置一张牌，令攻击范围内的一名其他角色失去1点体力</center>',
					});
					"step 1"
					if(result.bool){
						player.logSkill('dgsx',result.targets[0]);
						player.discard(result.cards);
						result.targets[0].loseHp(1);
					}
				},
            },
            dgcb:{
                audio:"ext:神怒降世:1",
                forced:true,
                trigger:{
                    player:"phaseJieshuBegin",
                },
                filter:function(event,player){
					return player.countCards('h',{name:'sha'})<1;
				},
                content:function(){
					var names=[];
					var cards=[];
					while(cards.length<2){
						var card=get.cardPile2(function(card){
							return !cards.contains(card)&&card.name=='sha'&&get.type(card)=='basic';
						});
						if(card){
							cards.push(card);
							names.push(card.name);
						}
						else break;
					}
					if(cards.length) player.gain(cards,'gain2');
				},
			},
            xyjf:{
                audio:"ext:神怒降世:1",
                group:"xyjf_damage",
                trigger:{
                    player:"phaseDrawBegin",
                },
                intro:{
                    name:"嫉富",
                    content:"可以额外发动#次〖嫉富〗",
                },
                direct:true,
                content:function (){
					"step 0"
					player.chooseTarget(get.prompt('xyjf'),'<center>获得一名其他角色的一张牌</center>',function(card,player,target){
						return target.countCards('hej')>0&&player!=target&&target.countCards('h')>=player.countCards('h');
					}).set('ai',function(target){
						return 10-get.attitude(_status.event.player,target);
					});
					"step 1"
					if(result.bool){
						trigger.num=0;
						event.target=result.targets[0];
						player.logSkill('xyjf',event.target);
						player.gainPlayerCard(event.target,'hej',true);
						event.goto(2);
					}
					else event.goto(3);
					"step 2"
					if(!player.isMaxHandcard(true)) event.goto(0);
					"step 3"
					if(player.countMark('xyjf')>0){
						player.chooseBool('〖嫉富〗：是否移去1枚“嫉富”标记再次发动〖嫉富〗？').ai=function(event,player){
							return true;
						};
					}
					else event.finish();
					"step 4"
					if(result.bool){
						trigger.num=0;
						event.goto(5);
					}
					else event.finish();
					"step 5"
					player.chooseTarget(get.prompt('xyjf'),'<center>获得一名其他角色的一张牌</center>',function(card,player,target){
						return target.countCards('hej')>0&&player!=target;
					}).set('ai',function(target){
						return 10-get.attitude(_status.event.player,target);
					});
					"step 6"
					if(result.bool){
						player.removeMark('xyjf',1);
						event.target=result.targets[0];
						player.logSkill('xyjf',event.target);
						player.gainPlayerCard(event.target,'hej',true);
						event.goto(7);
					}
					else event.finish();
					"step 7"
					event.goto(3);
				},
                subSkill:{
                    damage:{
                        audio:"xyjf",
                        trigger:{
                            player:"damageEnd",
                        },
                        filter:function(event,player){
							return (event.source!=undefined&&event.num>0)&&event.source!=player;
						},
						frequent:true,
                        content:function(){
							player.addMark('xyjf',trigger.num);
						},
                        sub:true,
                    },
                },
            },
            hllc:{
                audio:"ext:神怒降世:1",
                trigger:{
                    player:"phaseUseBegin",
                },
                forced:true,
                filter:function(event,player){
					return player.countCards('h')<player.maxHp;
				},
                content:function(){
					player.draw(player.maxHp-player.countCards('h'));
				},
            },
            hljs:{
                mark:true,
                marktext:"惊",
                unique:true,
                intro:{
                    name:"惊蛇",
                    content:"打草惊蛇",
                },
				direct:true,
                forced:true,
                onremove:function(player){
					game.countPlayer(function(current){
						if(current.hasSkill('hlyd')){
							current.removeSkill('hlyd');
						}
					});
				},
                mod:{
                    cardEnabled:function(card,player){
						return false;
					},
                },
            },
            hlyd:{
                mark:true,
                marktext:"遁",
                unique:true,
                intro:{
                    name:"远遁",
                    content:"远遁避祸",
                },
                mod:{
                    targetEnabled:function(player,card){
						return false;
					},
                },
			},
            cjhb:{
                audio:"ext:神怒降世:1",
                enable:"phaseUse",
                usable:1,
                filter:function(event,player){
					return player.countCards('he',{color:'black'})>0;
				},
                filterTarget:function(card,target,player){
					return target!=player;
				},
                complexCard:true,
                selectTarget:function(){
					var player=_status.event.player
					return [1,Math.max(1,3)];
				},
                check:function(card){
					return 7-get.value(card);
				},
                position:"he",
                filterCard:{
                    color:"black",
                },
                selectCard:1,
                delay:false,
                multitarget:true,
                multiline:true,
                content:function(){
					'step 0'
					player.chooseUseTarget('nanman',targets,true,false);
					'step 1'
					var bool=game.hasPlayer2(function(current){
						return current.getHistory('damage',function(evt){
							return evt.getParent(4)==event;
						}).length>0
					});
					if(!bool) player.draw(targets.length);
				},
                ai:{
                    order:8,
                    result:{
                        target:function(player,target){
							return -1;
						},
                    },
                },
            },
            hlbh:{
                audio:"ext:神怒降世:1",
                trigger:{
                    player:"damageEnd",
                },
                filter:function(event,player){
					return (event.source!=undefined&&event.num>0)&&event.source!=player&&_status.currentPhase!=player;
				},
                logTarget:"source",
                forced:true,
                content:function(){
					if(trigger.num>1){
						var shanghai=trigger.num;
						player.recover(shanghai-1);
					}
					player.addTempSkill('hlyd');
					trigger.source.addTempSkill('hljs');
				},
            },
            spzzlh:{
                audio:"ext:神怒降世:1",
                group:"spzzlh_die",
                trigger:{
                    global:"gameDrawAfter",
                    player:["enterGame","phaseJieshuBegin"],
                },
                direct:true,
                filter:function(){
					return game.players.length>1;
				},
                content:function(){
					'step 0'
					player.chooseTarget(get.prompt('spzzlh'),'<center>请选择【连祸】的目标</center>',lib.translate.spzzlh_info,function(card,player,target){
						return target!=player&&!(target.hasSkill('spzzlh2'))&&!(target.hasSkill('spzzlh'));
					}).set('ai',function(target){
						var player=_status.event.player;
						return get.damageEffect(target,player,player);
					});
					'step 1'
					if(result.bool){
						var target=result.targets[0];
						player.logSkill('spzzlh',target);
						target.addSkill('spzzlh2');
					}
				},
                subSkill:{
                    die:{
                        trigger:{
                            player:"die",
                        },
                        filter:function(event,player){
							return true;
						},
                        forced:true,
                        content:function(){
							game.countPlayer(function(current){
								if(current.hasSkill('spzzlh2')){
									current.removeSkill('spzzlh2');
								}
							});
						},
                        sub:true,
                    },
                },
                ai:{
                    expose:0.4,
                },
            },
            spzzhk:{
                audio:"ext:神怒降世:2",
                group:"spzzhk_damage",
                trigger:{
                    player:"loseAfter",
                    global:["equipAfter","addJudgeAfter","gainAfter"],
                },
                direct:true,
                filter:function(event,player){
					if(player.countCards('h')) return false;
					var evt=event.getl(player);
					return evt&&evt.player==player&&evt.hs&&evt.hs.length>0;
				},
                content:function(){
					"step 0"
					player.chooseTarget(get.prompt('spzzhk'),'<center>获得一名角色的一张手牌，取消摸一张牌</center>',1,function(card,player,target){
						return target!=player&&target.countCards('h')>0;
					}).ai=function(target){
						return -get.attitude(player,target);
					}
					"step 1"
					if(result.bool&&result.targets&&result.targets.length){
						player.logSkill('spzzhk',result.targets[0]);
						player.gainPlayerCard(result.targets[0],'h',true);
					}
					else{
						player.logSkill('spzzhk');
						player.draw();
					}
				},
                ai:{
                    threaten:1.6,
                    expose:0.2,
                },
                subSkill:{
                    damage:{
                        audio:"spzzhk",
                        trigger:{
                            player:"damageEnd",
                        },
                        filter:function(event,player){
							return true;
						},
						direct:true,
                        content:function(){
							"step 0"
							player.chooseTarget(get.prompt('spzzhk'),'<center>获得一名角色的一张手牌，取消摸一张牌</center>',1,function(card,player,target){
								return target!=player&&target.countCards('h')>0;
							}).ai=function(target){
								return -get.attitude(player,target);
							}
							"step 1"
							if(result.bool&&result.targets&&result.targets.length){
								player.logSkill('spzzhk',result.targets[0]);
								player.gainPlayerCard(result.targets[0],'h',true);
							}
							else player.draw();
						},
                        sub:true,
                    },
                },
            },
            "spzzlh2":{
                mark:true,
                marktext:"祸",
                unique:true,
                intro:{
                    name:"连祸",
                    content:"脱不了干系",
                },
                trigger:{
                    global:"damageEnd",
                },
                forced:true,
                filter:function(event,player){
					return event.player.hasSkill('spzzlh')&&event.player!=player;
				},
                content:function(){
					"step 0"
					player.removeSkill('spzzlh2');
					"step 1"
					trigger.player.logSkill('spzzlh');
					if(trigger.source){
						trigger.source.line(player);
						player.damage(trigger.source,trigger.num,trigger.nature);
						player.draw();
					}
					else{
						player.damage(trigger.num,trigger.nature);
						player.draw();
					}
				},
            },
            spzrhl:{
                audio:"ext:神怒降世:1",
                trigger:{
                    global:"useCardEnd",
                },
                usable:1,
                filter:function (event,player){
					return get.type(event.card)=='trick'&&get.color(event.card)=='black'&&event.player!=player&&event.cards.filterInD().length>0;
				},
                check:function(){return 1;},
                content:function(){
					"step 0"
					player.draw();
					player.chooseCard('he',true,'交给'+get.translation(trigger.player)+'一张牌').set('ai',function(card){
						if(card.name=='baiyin'&&player.isDamaged()) return 1;
						if(card.name=='tao'&&trigger.player.isDamaged()){
							if(get.attitude(trigger.player,player)>=0&&trigger.player.hp<player.hp) return 1;
							return -1;
						}
						if(get.attitude(trigger.player,player)>=0&&card.name=='jiu'&&trigger.player.hp==1) return 0.5;
						if(get.attitude(trigger.player,player)>=0) return get.value(card);
						if(get.attitude(trigger.player,player)<0) return 10-get.value(card);
					});
					"step 1"
					player.give(result.cards,trigger.player,true);
					player.gain(trigger.cards.filterInD(),'gain2','log');
				},
            },
            gatj:{
                audio:"ext:神怒降世:1",
                trigger:{
                    player:"useCard",
                },
                filter:function(event){
					return event.card.name=='jiu';
				},
                forced:true,
                content:function(){
					player.loseHp(1);
				},
            },
            gayl:{
                audio:"ext:神怒降世:1",
                enable:"phaseUse",
                usable:1,
                filterTarget:function(card,player,target){
					return player!=target;
				},
                content:function(){
					if(target.hp>get.distance(player,target)){
						target.draw(target.hp-get.distance(player,target));
						if((target.hp-get.distance(player,target))>2) player.useCard({name:'jiu',isCard:true},player);
					}
					else{
						if(target.hp<get.distance(player,target)){
							target.chooseToDiscard('弃置'+get.cnNumber(get.distance(player,target)-target.hp)+'张牌',get.distance(player,target)-target.hp,"he",true);
							if((get.distance(player,target)-target.hp)>2) player.useCard({name:'jiu',isCard:true},player);
						}
					}
				},
                ai:{
                    order:8,
                    expose:0.2,
                    threaten:0.5,
                    result:{
                        target:function(player,target){
                if(target.hp>get.distance(player,target)){
                    return 1;
                }
                if(target.hp<get.distance(player,target)){
                    return -1;
                }
                return -1;
            },
                    },
                },
            },
            zntp:{
                audio:"ext:神怒降世:1",
                group:"zntp_dachu",
                trigger:{
                    player:"useCard",
                },
                direct:true,
                filter:function(event,player){
					return event.card.isCard&&event.cards.filterInD().length>0&&event.card.name!='lebu'&&event.card.name!='bingliang'&&event.card.name!='shandian';
				},
                content:function(){


					"step 0"
					if(trigger.card.name=='tao') event.goto(4);
					if(trigger.card.name=='jiedao') event.goto(6);
					if(trigger.card.name=='sha') event.goto(8);
					if(trigger.card.name=='shunshou') event.goto(10);
					if(trigger.card.name=='shan'||trigger.card.name=='wuxie') event.goto(12);
					"step 1"
					player.chooseTarget(get.prompt('zntp'),'<center>是否将'+get.translation(trigger.card)+'改为由另一名角色使用？</center>',function(card,player,target){
						return target!=player;
					});
					"step 2"
					if(result.bool&&result.targets&&result.targets.length){
						player.logSkill('zntp',result.targets);
						if(get.type(trigger.card)=='equip') result.targets[0].equip(trigger.card);
						else result.targets[0].chooseUseTarget(trigger.card,true);
					}
					else event.goto(14);
					"step 3"
					trigger.cancel();
					event.goto(14);
					"step 4"
					player.chooseTarget(get.prompt('zntp'),'<center>是否将'+get.translation(trigger.card)+'改为由另一名角色使用？</center>',function(card,player,target){
						return target!=player&&target.getDamagedHp()>0;
					}).set('ai',function(target){
						var player=_status.event.player;
						return get.attitude(player,target)&&target.hp<player.hp;
					});
					"step 5"
					if(result.bool&&result.targets&&result.targets.length){
						player.logSkill('zntp',result.targets);
						result.targets[0].chooseUseTarget(trigger.card,true);
						event.goto(3);
					}
					else event.goto(14);
					"step 6"
					player.chooseTarget(get.prompt('zntp'),'<center>是否将'+get.translation(trigger.card)+'改为由另一名角色使用？</center>',function(card,player,target){
						return target!=player&&game.countPlayer(function(current){return current!=target&&current.getEquip(1);});
					}).set('ai',function(target){
						var player=_status.event.player;
						return get.attitude(player,target)&&player.getEquip(1);
					});
					"step 7"
					if(result.bool&&result.targets&&result.targets.length){
						player.logSkill('zntp',result.targets);
						result.targets[0].chooseUseTarget(trigger.card,true);
						event.goto(3);
					}
					else event.goto(14);
					"step 8"
					player.chooseTarget(get.prompt('zntp'),'<center>是否将'+get.translation(trigger.card)+'改为由另一名角色使用？</center>',function(card,player,target){
						return target!=player&&game.countPlayer(function(current){return current!=target&&target.inRange(current);});
					});
					"step 9"
					if(result.bool&&result.targets&&result.targets.length){
						player.logSkill('zntp',result.targets);
						result.targets[0].chooseUseTarget(trigger.card,true);
						event.goto(3);
					}
					else event.goto(14);
					"step 10"
					player.chooseTarget(get.prompt('zntp'),'<center>是否将'+get.translation(trigger.card)+'改为由另一名角色使用？</center>',function(card,player,target){
						return target!=player&&game.countPlayer(function(current){return current!=target&&get.distance(target,current)<2;});
					}).set('ai',function(target){
						var player=_status.event.player;
						return get.attitude(player,target)&&target.isMinHandcard();
					});
					"step 11"
					if(result.bool&&result.targets&&result.targets.length){
						player.logSkill('zntp',result.targets);
						result.targets[0].chooseUseTarget(trigger.card,true);
						event.goto(3);
					}
					else event.goto(14);
					"step 12"
					player.chooseTarget(get.prompt('zntp'),'<center>是否将'+get.translation(trigger.card)+'交给一名其他角色？</center>',function(card,player,target){
						return target!=player;
					});
					"step 13"
					if(result.bool&&result.targets&&result.targets.length){
						player.logSkill('zntp',result.targets);
						result.targets[0].gain(trigger.cards.filterInD(),'gain2','log');
						player.draw();
					}
					"step 14"
				},
                subSkill:{
                    dachu:{
                        trigger:{
                            player:"respond",
                        },
                        direct:true,
                        filter:function(event,player){
							return event.card.isCard&&event.cards.filterInD().length>0&&(event.card.name=='sha'||event.card.name=='shan');
						},
                        content:function(){
							"step 0"
							player.chooseTarget(get.prompt('zntp'),'<center>是否将'+get.translation(trigger.card)+'交给一名其他角色？</center>',function(card,player,target){
								return target!=player;
							});
							"step 1"
							if(result.bool&&result.targets&&result.targets.length){
								player.logSkill('zntp',result.targets);
								result.targets[0].gain(trigger.cards.filterInD(),'gain2','log');
								player.draw();
							}
						},
                        sub:true,
                    },
                },
            },
            zntd:{
                audio:"ext:神怒降世:1",
                frequent:function(event){
					if(event.result.card.name=='du') return false;
					return true;
				},
                trigger:{
                    global:"judgeEnd",
                },
                check:function(event){
					if(event.result.card.name=='du') return false;
					return true;
				},
                filter:function(event,player){
					return get.position(event.result.card,true)=='o';
				},
                content:function(){
					player.gain(trigger.result.card,'gain2');
				},
            },
            jszysq:{
                audio:"ext:神怒降世:1",
                init:function(player){
					if(player.countCards('h')<4&&_status.currentPhase!=undefined){
						player.draw(4-player.countCards('h'));
					}
				},
                trigger:{
                    player:["loseAfter","phaseAfter"],
                    global:["equipAfter","addJudgeAfter","gainAfter","compare"],
                },
                filter:function(event,player){
					if(event.getl&&!event.getl(player)) return false;
					return player.countCards('h')<4;
				},
                forced:true,
                content:function(){
					player.draw(4-player.countCards('h'));
				},
            },
            jszylh:{
                audio:"ext:神怒降世:1",
				enable:["chooseToUse","chooseToRespond"],
				prompt:"将♦牌当做【杀】，♥牌当做【桃】，♣牌当做【闪】，♠牌当做【无懈可击】使用或打出",
				viewAs:function(cards,player){
					var name=false;
					var nature=null;
					//根据选择的卡牌的花色 判断要转化出的卡牌是闪还是杀还是无懈还是桃
					switch(get.suit(cards[0],player)){
						case 'club':name='shan';break;
						case 'diamond':name='sha';break;
						case 'spade':name='wuxie';break;
						case 'heart':name='tao';break;
					}
					//返回判断结果
					if(name) return {name:name,nature:nature};
					return null;
				},
				check:function(card){
					if(ui.selected.cards.length) return 0;
					var player=_status.event.player;
					if(_status.event.type=='phase'){
						var max=0;
						var name2;
						var list=['sha','tao'];
						var map={sha:'diamond',tao:'heart'}
						for(var i=0;i<list.length;i++){
							var name=list[i];
							if(player.countCards('hes',function(card){
								return (name!='sha'||get.value(card)<5)&&get.suit(card,player)==map[name];
							})>0&&player.getUseValue({name:name,nature:name=='sha'?'fire':null})>0){
								var temp=get.order({name:name,nature:name=='sha'?'fire':null});
								if(temp>max){
									max=temp;
									name2=map[name];
								}
							}
						}
						if(name2==get.suit(card,player)) return (name2=='diamond'?(5-get.value(card)):20-get.value(card));
						return 0;
					}
					return 1;
				},
				selectCard:[1,2],
				complexCard:true,
				position:"hes",
				filterCard:function(card,player,event){
					//如果已经选了一张牌 那么第二张牌和第一张花色相同即可
					if(ui.selected.cards.length) return get.suit(card,player)==get.suit(ui.selected.cards[0],player);
					event=event||_status.event;
					//获取当前时机的卡牌选择限制
					var filter=event._backup.filterCard;
					//获取卡牌花色
					var name=get.suit(card,player);
					//如果这张牌是梅花并且当前时机能够使用/打出闪 那么这张牌可以选择
					if(name=='club'&&filter({name:'shan',cards:[card]},player,event)) return true;
					//如果这张牌是方片并且当前时机能够使用/打出火杀 那么这张牌可以选择
					if(name=='diamond'&&filter({name:'sha',cards:[card],nature:'fire'},player,event)) return true;
					//如果这张牌是黑桃并且当前时机能够使用/打出无懈 那么这张牌可以选择
					if(name=='spade'&&filter({name:'wuxie',cards:[card]},player,event)) return true;
					//如果这张牌是红桃并且当前时机能够使用/打出桃 那么这张牌可以选择
					if(name=='heart'&&filter({name:'tao',cards:[card]},player,event)) return true;
					//上述条件都不满足 那么就不能选择这张牌
					return false;
				},
				filter:function(event,player){
					//获取当前时机的卡牌选择限制
					var filter=event.filterCard;
					//如果当前时机能够使用/打出火杀并且角色有方片 那么可以发动技能
					if(filter({name:'sha',nature:'fire'},player,event)&&player.countCards('hes',{suit:'diamond'})) return true;
					//如果当前时机能够使用/打出闪并且角色有梅花 那么可以发动技能
					if(filter({name:'shan'},player,event)&&player.countCards('hes',{suit:'club'})) return true;
					//如果当前时机能够使用/打出桃并且角色有红桃 那么可以发动技能
					if(filter({name:'tao'},player,event)&&player.countCards('hes',{suit:'heart'})) return true;
					//如果当前时机能够使用/打出无懈可击并且角色有黑桃 那么可以发动技能
					if(filter({name:'wuxie'},player,event)&&player.countCards('hes',{suit:'spade'})) return true;
					return false;
				},
				ai:{
					respondSha:true,
					respondShan:true,
					skillTagFilter:function(player,tag){
						var name;
						switch(tag){
							case 'respondSha':name='diamond';break;
							case 'respondShan':name='club';break;
							case 'save':name='heart';break;
						}
						if(!player.countCards('hes',{suit:name})) return false;
					},
					order:function(item,player){
						if(player&&_status.event.type=='phase'){
							var max=0;
							var list=['sha','tao'];
							var map={sha:'diamond',tao:'heart'}
							for(var i=0;i<list.length;i++){
								var name=list[i];
								if(player.countCards('hes',function(card){
									return (name!='sha'||get.value(card)<5)&&get.suit(card,player)==map[name];
								})>0&&player.getUseValue({name:name,nature:name=='sha'?'fire':null})>0){
									var temp=get.order({name:name,nature:name=='sha'?'fire':null});
									if(temp>max) max=temp;
								}
							}
							max/=1.1;
							return max;
						}
						return 2;
					},
				},
				hiddenCard:function(player,name){
					if(name=='wuxie'&&_status.connectMode&&player.countCards('hs')>0) return true;
					if(name=='wuxie') return player.countCards('hes',{suit:'spade'})>0;
					if(name=='tao') return player.countCards('hes',{suit:'heart'})>0;
				},
				group:["jszylh_num","jszylh_discard"],
				subSkill:{
					num:{
						trigger:{
							player:"useCard",
						},
						forced:true,
						popup:false,
						filter:function(event){
							var evt=event;
							return ['sha','tao'].contains(evt.card.name)&&evt.skill=='jszylh'&&evt.cards&&evt.cards.length==2;
						},
						content:function(){
							trigger.baseDamage++;
						},
						sub:true,
					},
					discard:{
						trigger:{
							player:["useCardAfter","respondAfter"],
						},
						forced:true,
						popup:false,
						logTarget:function(){
							return _status.currentPhase;
						},
						autodelay:function(event){
							return event.name=='respond'?0.5:false;
						},
						filter:function(evt,player){
							return ['shan','wuxie'].contains(evt.card.name)&&evt.skill=='jszylh'&&
								evt.cards&&evt.cards.length==2&&_status.currentPhase&&_status.currentPhase!=player&&_status.currentPhase.countDiscardableCards(player,'he');
						},
						content:function(){
							player.line(_status.currentPhase,'green');
							player.discardPlayerCard(_status.currentPhase,'he',true);
						},
						sub:true,
					},
				},
            },
            jszysw:{
                audio:"ext:神怒降世:1",
                group:"jszysw_shuxing",
                shaRelated:true,
                mod:{
                    targetInRange:function(card){
						if(card.name=='sha'&&get.color(card)=='red') return true;
					},
                },
				trigger:{
					player:"useCardToPlayered",
				},
				forced:true,
				filter:function(event,player){
					if(!event.card) return false;
					return event.card.name=='sha';
				},
				content:function(){
					if(get.color(trigger.card)=='black'){
						if(trigger.target.countCards('he')>0) player.gainPlayerCard(trigger.target,'he');
					}
				},
                subSkill:{
                    shuxing:{
						trigger:{
							player:"shaBefore",
						},
						forced:true,
						direct:true,
						content:function(){
							if(get.color(trigger.card)=='red'){
								trigger.card.nature='fire';
							}
							if(get.color(trigger.card)=='black'){
								trigger.card.nature='thunder';
							}
						},
                        sub:true,
                    },
                },
            },
            jszyjj:{
                audio:"ext:神怒降世:1",
                derivation:["jszysw","jszysq"],
                mark:true,
                locked:true,
				zhuanhuanji:true,
				animationColor:"metal",
				skillAnimation:"legend",
				mod:{
					maxHandcard:function(player,num){
						return 1+num;
					},
				},
                init:function(player){
					if(_status.currentPhase!=player){
						player.storage.jszyjj=false;
						if(player.hasSkill('jszysw')) player.removeSkill('jszysw');
						player.addTempSkill('jszysq',{player:'phaseBegin'});
					}
					if(_status.currentPhase==player){
						player.storage.jszyjj=true;
						if(player.hasSkill('jszysq')) player.removeSkill('jszysq');
						player.addTempSkill('jszysw',{player:'phaseEnd'});
					}
				},
                intro:{
                    content:function(storage,player,skill){
						if(player.storage.jszyjj==true) return '锁定技，回合内，拥有技能〖神威〗';
						return '锁定技，回合外，拥有技能〖神躯〗';
					},
                },
				trigger:{
					global:["phaseBegin","phaseEnd","gainBegin","judgeBegin","drawBegin","loseBegin","useCard","damageBegin","dieBeing","loseHpBegin","loseMaxHpBegin"],
				},
				filter:function(event,player){
					if(_status.currentPhase==player) return player.storage.jszyjj==false;
					if(_status.currentPhase!=player) return player.storage.jszyjj==true;
					return false;
				},
                forced:true,
                content:function(){
					if(player.storage.jszyjj==false&&_status.currentPhase==player){
						player.storage.jszyjj=true;
						if(player.hasSkill('jszysq')) player.removeSkill('jszysq');
						player.addTempSkill('jszysw',{player:'phaseEnd'});
					}
					if(player.storage.jszyjj==true&&_status.currentPhase!=player){
						player.storage.jszyjj=false;
						if(player.hasSkill('jszysw')) player.removeSkill('jszysw');
						player.addTempSkill('jszysq',{player:'phaseBegin'});
					}
				},
            },
            wcfx:{
                audio:"ext:神怒降世:1",
				mark:true,
                intro:{
					name:"奋先",
                    content:"limited",
                },
                forced:true,
                unique:true,
                limited:true,
                skillAnimation:true,
                animationColor:"gray",
                init:function(player){
					player.storage.wcfx=false;
				},
                trigger:{
                    global:"phaseBegin",
                },
                filter:function(event,player){
					if(player.storage.wcfx==true) return false;
					return true;
				},
                content:function(){
					while(_status.event.name!='phaseLoop'){
						_status.event=_status.event.parent;
					}
					_status.paused=false;
					_status.event.player=player;
					_status.event.step=0;
					_status.roundStart=player;
					player.storage.wcfx=true;
					player.addTempSkill('wcfx_chongzhu');
					player.addTempSkill('wcfx_jisha');
					player.awakenSkill('wcfx');
				},
                subSkill:{
                    chongzhu:{
						audio:"ext:神怒降世:1",
						mark:true,
						intro:{
							content:"使用牌无次数和距离限制；且每当使用【杀】指定目标时，可以重铸至多为目标体力值数量的牌",
						},
                        trigger:{
                            player:"useCardToPlayered",
                        },
						mod:{
							targetInRange:function(card){
								return true;
							},
							cardUsable:function(card,player){
								return Infinity;
							},
						},
                        filter:function (event,player){
							return event.card.name=='sha'&&player.countCards('he')>0&&event.card.isCard;
						},
                        direct:true,
                        content:function(){
							"step 0"
							player.chooseToDiscard('〖奋先〗：是否重铸至多'+get.cnNumber(trigger.target.hp)+'张牌？',[1,trigger.target.hp],'he').set('ai',function(card){
								return card.name!='sha';
							});
							"step 1"
							if(result.bool==true){
								player.logSkill('wcfx_chongzhu');
								player.draw(result.cards.length);
								event.goto('2');
							}
							else event.goto('4');
							"step 2"
							if(trigger.target.getDamagedHp()>0){
								event.num=trigger.target.getDamagedHp();
								trigger.target.chooseToDiscard('〖奋先〗：是否重铸至多'+get.cnNumber(event.num)+'张牌？',[1,event.num],'he').set('ai',function(card){
									return card.name!='tao'&&card.name!='shan'&&card.name!='jiu';
								});
							}
							"step 3"
							if(result.bool==true){
								trigger.target.draw(result.cards.length);
							}
							"step 4"
						},
                        sub:true,
                    },
                    jisha:{
                        trigger:{
                            global:"die",
                        },
                        forced:true,
                        forceDie:true,
                        filter:function(event,player){
							return event.source&&event.source.isIn()&&event.source==player;
						},
                        logTarget:"source",
                        content:function(){
							player.addTempSkill('wcpb');
						},
                        sub:true,
                    },
                },
            },
            wcpb:{
                audio:"ext:神怒降世:1",
                mod:{
                    cardEnabled:function(card,player){
						return false;
					},
                },
            },
            ysxm:{
                audio:"ext:神怒降世:1",
                trigger:{
                    source:"damageBegin",
                },
                logTarget:"player",
                forced:true,
                content:function(){
					var num=[1,0].randomGet();
					if(num==0){
						trigger.num--;
						player.draw();
					}
					if(num==1) trigger.num++;
				},
            },
            zaql:{
                audio:"ext:神怒降世:1",
                trigger:{
                    global:"loseHpEnd",
                },
                filter:function(event,player){
					return event.player.isDamaged();
				},
                check:function(event,player){
					return get.attitude(player,event.player)>=0;
				},
                content:function(){
					"step 0"
					player.draw(trigger.player.getDamagedHp());
					if(trigger.player!=player){
						player.chooseCard(true,'he',[1,Infinity],'交给'+get.translation(trigger.player)+'任意张牌').set('ai',function(card){
							return get.value(card);
						});
					}
					else{
						event.finish();
					}
					"step 1"
					trigger.player.gain(result.cards,player,'give');
					game.delay();
				},
                ai:{
                    threaten:1.1,
                },
            },
            zajs:{
                audio:"ext:神怒降世:1",
                filter:function(event,player){
					return player.countCards('h')>0&&event.player!=player&&event.card&&(event.card.name=='sha'||get.type(event.card)=='trick');
				},
                logTarget:"player",
                direct:true,
                trigger:{
                    target:"useCardToTargeted",
                },
                content:function(){
					"step 0"
					var dianshu=trigger.card.number;
					player.chooseToDiscard(get.prompt('zajs'),'<center>弃置一张点数大于'+dianshu+'的手牌令'+get.translation(trigger.card)+'对你无效</center>','h',function(card){
						return card.number>dianshu;
					}).set('ai',function(card){
						if(card.name=='tao') return -1;
						if(!(trigger.player.getEquip('qinggang'))&&player.getEquip('bagua')&&(trigger.card.name=='wanjian'||trigger.card.name=='sha')) return -1;
						if(!(trigger.player.getEquip('qinggang'))&&player.getEquip('tengjia')&&(trigger.card.name=='wanjian'||trigger.card.name=='nanman'||(trigger.card.name=='sha'&&trigger.nature!='thunder'&&trigger.nature!='fire'))) return -1;
						if(!(trigger.player.getEquip('qinggang'))&&player.getEquip('renwang')&&trigger.card.name=='sha'&&get.color(trigger.card)=='black') return -1;
						if(get.attitude(trigger.player,player)<=0){
							if(trigger.card.name=='taoyuan'||trigger.card.name=='wugu'||trigger.card.name=='tao'||trigger.card.name=='jiu') return -1;
						}
						if(get.attitude(trigger.player,player)>0){
							if(trigger.card.name=='shunshou'||trigger.card.name=='guohe'||trigger.card.name=='tao'||trigger.card.name=='jiu'||trigger.card.name=='taoyuan'||trigger.card.name=='tiesuo'||trigger.card.name=='wugu'||trigger.card.name=='jiedao') return -1;
						}
						return 1;
					});
					"step 1"
					if(result.bool==true){
						player.logSkill('zajs');
						trigger.getParent().excluded.add(player);
					}
				},
            },
            spfyfyl:{
                audio:"ext:神怒降世:1",
                group:"spfyfyl_respond",
                trigger:{
                    global:"useCard",
                },
				filter:function(event,player){
					return !(event.card.isCard);
				},
                check:function(event,player){
					return get.attitude(player,event.player)<0||get.attitude(player,event.player)>=0;
				},
                content:function(){
					"step 0"
					player.chooseControl('令'+get.translation(trigger.player)+'摸一张牌','令'+get.translation(trigger.cards)+'无效并摸一张牌').set('prompt','〖玉鸾〗：选择一项').set('ai',function(target){
						if(get.attitude(player,trigger.player)>=0) return '令'+get.translation(trigger.player)+'摸一张牌';
						return '令'+get.translation(trigger.cards)+'无效并摸一张牌';
					});
					"step 1"
					if(result.control=='令'+get.translation(trigger.player)+'摸一张牌'){
						trigger.player.draw();
					}
					else{
						player.draw();
						trigger.cancel();
					}
				},
                subSkill:{
                    respond:{
                        audio:"spfyfyl",
                        trigger:{
                            global:"respond",
                        },
                        filter:function(event,player){
							return !(event.card.isCard);
						},
                        check:function(event,player){
							return get.attitude(player,event.player)<0||get.attitude(player,event.player)>=0;
						},
                        content:function(){
							"step 0"
							if(trigger.player==player){
								player.draw();
								event.goto(3);
							}
							"step 1"
							player.chooseControl('令'+get.translation(trigger.player)+'摸一张牌').set('prompt','〖玉鸾〗：选择一项').set('ai',function(target){
								if(get.attitude(player,trigger.player)>=0) return '令'+get.translation(trigger.player)+'摸一张牌';
								return '摸一张牌';
							});
							"step 2"
							if(result.control=='令'+get.translation(trigger.player)+'摸一张牌'){
								trigger.player.draw();
							}
							else{
								player.draw();
							}
							"step 3"
						},
                        sub:true,
                        "audioname2":{
                            caoshuang:"tuogu",
                        },
                    },
                },
                "audioname2":{
                    caoshuang:"tuogu",
                },
            },
            spfyfgz:{
                audio:"ext:神怒降世:1",
                group:["spfyfgz_sha","spfyfgz_shan","spfyfgz_spade","spfyfgz_heart","spfyfgz_club","spfyfgz_diamond"],
                subSkill:{
                    spade:{
                        marktext:"♠",
                        intro:{
                            name:"瑰姿",
                            content:"♠ 黑桃 #",
                        },
                        trigger:{
                            player:["useCardEnd","respondEnd"],
                        },
                        forced:true,
                        direct:true,
                        filter:function(event,player){
							return get.suit(event.card)=='spade';
						},
                        content:function(){
							if(player.countMark('spfyfgz_spade')>0){
								player.removeMark('spfyfgz_spade',player.countMark('spfyfgz_spade'));
							}
							if(player.countMark('spfyfgz_heart')>0){
								player.removeMark('spfyfgz_heart',player.countMark('spfyfgz_heart'));
							}
							if(player.countMark('spfyfgz_club')>0){
								player.removeMark('spfyfgz_club',player.countMark('spfyfgz_club'));
							}
							if(player.countMark('spfyfgz_diamond')>0){
								player.removeMark('spfyfgz_diamond',player.countMark('spfyfgz_diamond'));
							}
							player.addMark('spfyfgz_spade',trigger.card.number);
						},
                        sub:true,
                    },
                    heart:{
                        marktext:"♥",
                        intro:{
                            name:"瑰姿",
                            content:"♥ 红桃 #",
                        },
                        trigger:{
                            player:["useCardEnd","respondEnd"],
                        },
                        forced:true,
                        direct:true,
                        filter:function(event,player){
							return get.suit(event.card)=='heart';
						},
                        content:function(){
							if(player.countMark('spfyfgz_spade')>0){
								player.removeMark('spfyfgz_spade',player.countMark('spfyfgz_spade'));
							}
							if(player.countMark('spfyfgz_heart')>0){
								player.removeMark('spfyfgz_heart',player.countMark('spfyfgz_heart'));
							}
							if(player.countMark('spfyfgz_club')>0){
								player.removeMark('spfyfgz_club',player.countMark('spfyfgz_club'));
							}
							if(player.countMark('spfyfgz_diamond')>0){
								player.removeMark('spfyfgz_diamond',player.countMark('spfyfgz_diamond'));
							}
							player.addMark('spfyfgz_heart',trigger.card.number);
						},
                        sub:true,
                    },
                    club:{
                        marktext:"♣",
                        intro:{
                            name:"瑰姿",
                            content:"♣ 梅花 #",
                        },
                        trigger:{
                            player:["useCardEnd","respondEnd"],
                        },
                        forced:true,
                        direct:true,
                        filter:function(event,player){
							return get.suit(event.card)=='club';
						},
                        content:function(){
							if(player.countMark('spfyfgz_spade')>0){
								player.removeMark('spfyfgz_spade',player.countMark('spfyfgz_spade'));
							}
							if(player.countMark('spfyfgz_heart')>0){
								player.removeMark('spfyfgz_heart',player.countMark('spfyfgz_heart'));
							}
							if(player.countMark('spfyfgz_club')>0){
								player.removeMark('spfyfgz_club',player.countMark('spfyfgz_club'));
							}
							if(player.countMark('spfyfgz_diamond')>0){
								player.removeMark('spfyfgz_diamond',player.countMark('spfyfgz_diamond'));
							}
							player.addMark('spfyfgz_club',trigger.card.number);
						},
                        sub:true,
                    },
                    diamond:{
                        marktext:"♦",
                        intro:{
                            name:"瑰姿",
                            content:"♦ 方片 #",
                        },
                        trigger:{
                            player:["useCardEnd","respondEnd"],
                        },
                        forced:true,
                        direct:true,
                        filter:function(event,player){
							return get.suit(event.card)=='diamond';
						},
                        content:function(){
							if(player.countMark('spfyfgz_spade')>0){
								player.removeMark('spfyfgz_spade',player.countMark('spfyfgz_spade'));
							}
							if(player.countMark('spfyfgz_heart')>0){
								player.removeMark('spfyfgz_heart',player.countMark('spfyfgz_heart'));
							}
							if(player.countMark('spfyfgz_club')>0){
								player.removeMark('spfyfgz_club',player.countMark('spfyfgz_club'));
							}
							if(player.countMark('spfyfgz_diamond')>0){
								player.removeMark('spfyfgz_diamond',player.countMark('spfyfgz_diamond'));
							}
							player.addMark('spfyfgz_diamond',trigger.card.number);
						},
                        sub:true,
                    },
                    sha:{
                        audio:"spfyfgz",
                        enable:["chooseToRespond","chooseToUse"],
                        filterCard:function(card,player){
							if(player.countMark('spfyfgz_spade')>1){
								return card.number<player.countMark('spfyfgz_spade')&&get.suit(card)!='spade';
							}
							if(player.countMark('spfyfgz_heart')>1){
								return card.number<player.countMark('spfyfgz_heart')&&get.suit(card)!='heart';
							}
							if(player.countMark('spfyfgz_club')>1){
								return card.number<player.countMark('spfyfgz_club')&&get.suit(card)!='club';
							}
							if(player.countMark('spfyfgz_diamond')>1){
								return card.number<player.countMark('spfyfgz_diamond')&&get.suit(card)!='diamond';
							}
						},
                        position:"he",
                        viewAs:{
                            name:"sha",
                        },
                        viewAsFilter:function(player){
							if(!player.countCards('he')) return false;
						},
                        prompt:"〖瑰姿〗：将一张点数小于「瑰姿」且花色不同的牌当做【杀】使用或打出",
                        check:function(){return 1},
                        ai:{
                            skillTagFilter:function(player){
								if(!player.countCards('he')) return false;
							},
                            respondSha:true,
                            basic:{
                                useful:[5,1],
                                value:[5,1],
                            },
                            order:function(item,player){
								if(player.hasSkillTag('presha',true,null,true)) return 10;
								if(lib.linked.contains(get.nature(item))) return (player.getCardUsable('sha')>1?3:3.1);
								return 3.05;
							},
							result:{
                                target:function(player,target,card,isLink){
									if(!isLink&&player.hasSkill('jiu')){
										if(!target.hasSkillTag('filterDamage',null,{
											player:player,
											card:card,
											jiu:true,
										})){
											if(get.attitude(player,target)>0){
												return -7;
											}
											else{
												return -4;
											}
										}
										return -0.5;
									}
									return -1.5;
								},
                            },
                            tag:{
                                respond:1,
                                respondShan:1,
                                damage:function(card){
									if(card.nature=='poison') return;
									return 1;
								},
                                natureDamage:function(card){
									if(card.nature) return 1;
								},
                                fireDamage:function(card,nature){
									if(card.nature=='fire') return 1;
								},
                                thunderDamage:function(card,nature){
									if(card.nature=='thunder') return 1;
								},
								poisonDamage:function(card,nature){
									if(card.nature=='poison') return 1;
								},
                            },
                            canLink:function(player,target,card){
								if(!target.isLinked()&&!player.hasSkill('wutiesuolian_skill')) return false;
								if(target.mayHaveShan()&&!player.hasSkillTag('directHit_ai',true,{
									target:target,
									card:card,
								},true)) return false;
								if(player.hasSkill('jueqing')||target.hasSkill('gangzhi')||target.hasSkill('gangzhi')) return false;
								return true;
							},
                        },
                        sub:true,
                    },
                    shan:{
                        audio:"ext:神怒降世:1",
                        enable:["chooseToRespond","chooseToUse"],
						filterCard:function(card,player){
							if(player.countMark('spfyfgz_spade')>0){
								return card.number>player.countMark('spfyfgz_spade')&&get.suit(card)!='spade';
							}
							if(player.countMark('spfyfgz_heart')>0){
								return card.number>player.countMark('spfyfgz_heart')&&get.suit(card)!='heart';
							}
							if(player.countMark('spfyfgz_club')>0){
								return card.number>player.countMark('spfyfgz_club')&&get.suit(card)!='club';
							}
							if(player.countMark('spfyfgz_diamond')>0){
								return card.number>player.countMark('spfyfgz_diamond')&&get.suit(card)!='diamond';
							}
						},
                        position:"he",
                        viewAs:{
                            name:"shan",
                        },
                        viewAsFilter:function(player){
							if(!player.countCards('he')) return false;
						},
                        prompt:"〖瑰姿〗：将一张点数大于「瑰姿」且花色不同的牌当做【闪】使用或打出",
                        check:function(){return 1},
                        ai:{
                            respondShan:true,
                            skillTagFilter:function(player){
								if(!player.countCards('he')) return false;
							},
                            effect:{
                                target:function(card,player,target,current){
									if(get.tag(card,'respondShan')&&current<0) return 0.6
								},
                            },
                            order:3,
                            basic:{
                                useful:[7,2],
                                value:[7,2],
                            },
                            result:{
                                player:1,
                            },
                        },
                        sub:true,
                    },
                },
            },
            smyts:{
                audio:"ext:神怒降世:1",
                enable:"phaseUse",
                usable:1,
                check:function (){return 1},
                content:function(){
					"step 0"
					player.draw(2,'bottom');
					"step 1"
					if(player.countCards('h')>0) player.chooseCard(true,1,'h','将一张手牌置于牌堆底').set('ai',function(card){
						return 10-get.value(card);
					});
					"step 2"
					if(result.bool&&result.cards.length) player.lose(result.cards[0],ui.special);
					"step 3"
					result.cards[0].fix();
					ui.cardPile.appendChild(result.cards[0]);
					player.update();
					game.updateRoundNumber();
					game.log(player,'将'+get.cnNumber(result.cards.length)+'张牌置入了牌堆底');
					"step 4"
					if(player.countCards('h')>0) player.chooseCard(true,1,'h','将一张手牌置于牌堆底').set('ai',function(card){
						return 10-get.value(card);
					});
					"step 5"
					if(result.bool&&result.cards.length) player.lose(result.cards[0],ui.special);
					"step 6"
					result.cards[0].fix();
					ui.cardPile.appendChild(result.cards[0]);
					player.update();
					game.updateRoundNumber();
					game.log(player,'将'+get.cnNumber(result.cards.length)+'张牌置入了牌堆底');
					"step 7"
					player.chooseTarget('令一名角色下个摸牌阶段改为从牌堆底摸牌',function(card,player,target){
						return true;
					}).set('ai',function(target){
						var player=_status.event.player;
						return get.damageEffect(target,player,player);
					});
					"step 8"
					if(result.bool&&result.targets&&result.targets.length){
						player.line(result.targets[0]);
						result.targets[0].addSkill('smyts2');
					}
				},
                ai:{
                    order:8,
                    result:{
                        player:1,
                    },
                },
            },
            smynf:{
                audio:"ext:神怒降世:1",
                trigger:{
                    global:"drawEnd",
                },
                filter:function (event,player){
					return event.bottom;
				},
                logTarget:"player",
                check:function(event,player){
					return (get.attitude(player,event.player)<=0);
				},
                content:function(){
					trigger.player.damage(player,1);
				},
            },
            zctq:{
                audio:"ext:神怒降世:1",
                filter:function(event,player){
					return player.countCards('he',{suit:'spade'})>0;
				},
                enable:"chooseToUse",
                usable:1,
                filterCard:function(card){
					return get.suit(card)=='spade';
				},
                position:"he",
                viewAs:{
                    name:"shandian",
                },
                prompt:"将一张♠牌当作【闪电】使用",
                check:function(card){return 8-get.value(card)},
                ai:{
                    order:8,
                    result:{
                        player:1,
                        target:function(player,target){
							var num=game.countPlayer(function(current){
								var skills=current.getSkills();
								for(var j=0;j<current.skills.length;j++){
									var rejudge=get.tag(current.skills[j],'rejudge',current);
									if(rejudge!=undefined){
										if(get.attitude(target,current)>0&&
										   get.attitude(current,target)>0){
											return rejudge;
										}
										else{
											return -rejudge;
										}
									}
								}
							});
							if(num>0) return num;
							if(num==0){
								var mode=get.mode();
								if(mode=='identity'){
									if(target.identity=='nei') return 1;
									var situ=get.situation();
									if(target.identity=='fan'){
										if(situ>1) return 1;
									}
									else{
										if(situ<-1) return 1;
									}
								}
								else if(mode=='guozhan'){
									if(target.identity=='ye') return 1;
									if(game.hasPlayer(function(current){
										return current.identity=='unknown';
									})){
										return -1;
									}
									if(get.population(target.identity)==1){
										if(target.maxHp>2&&target.hp<2) return 1;
										if(game.countPlayer()<3) return -1;
										if(target.hp<=2&&target.countCards('he')<=3) return 1;
									}
								}
							}
							return -1;
						},
                    },
                    skillTagFilter:function(player){
						returnplayer.countCards('he')>0;
					},
                    basic:{
                        order:1,
                        useful:0,
                        value:0,
                    },
                    tag:{
                    },
                },
            },
            zctx:{
                audio:"ext:神怒降世:1",
                group:["zctx_mubiao","zctx_mopai"],
                frequent:true,
                subSkill:{
                    mubiao:{
                        trigger:{
                            global:"useCardToTarget",
                        },
                        filter:function(event,player){
							return get.type(event.card)=='delay'&&event.target==player;
						},
                        direct:true,
                        content:function(){
							"step 0"
							player.chooseTarget(get.prompt('zctx'),'<center>更改'+get.translation(trigger.card)+'目标</center>',function(card,player,target){
								return target!=player&&!target.hasJudge(trigger.card);
							}).set('ai',function(target){
								return -get.attitude(player,target);
							});
							"step 1"
							if(result.bool&&result.targets&&result.targets.length){
								player.logSkill('zctx',result.targets[0]);
								player.draw();
								var evt=trigger.getParent();
								evt.triggeredTargets2.remove(trigger.target);
								evt.targets.remove(trigger.target);
								evt.targets.push(result.targets[0]);
							}
						},
                        sub:true,
                    },
                    mopai:{
                        audio:"ext:神怒降世:1",
                        trigger:{
                            global:"judgeEnd",
                        },
                        filter:function(event,player){
							return get.color(event.result.card)=='black';
						},
                        frequent:true,
                        content:function(){
							player.draw();
						},
                        sub:true,
                    },
                },
            },
            "smyts2":{
                audio:"ext:神怒降世:1",
                mark:true,
                unique:true,
                intro:{
                    name:"泰始",
                    content:"摸牌时改为从牌堆底摸牌",
                },
                trigger:{
                    player:"drawBegin",
                },
                forced:true,
                content:function(){
					trigger.bottom=true;
					player.removeSkill('smyts2');
				},
            },
            spzrlz:{
                audio:"ext:神怒降世:2",
                enable:"phaseUse",
                usable:1,
                filter:function(event,player){
					return player.countCards('he')>0;
				},
                filterCard:function(card,player){
					if(ui.selected.cards.length){
						return get.suit(card)==get.suit(ui.selected.cards[0]);
					}
					var cards=player.getCards('he');
					for(var i=0;i<cards.length;i++){
						if(card!=cards[i]){
							return true;
						}
					}
					return false;
				},
                check:function(card){
					return 8-get.value(card);
				},
                position:"he",
                complexCard:true,
                selectCard:[1,Infinity],
                content:function(){
					var names=[];
					var huode=[];
					while(huode.length<cards.length){
						var card=get.cardPile2(function(card){
							return !huode.contains(card)&&get.color(card)=='black'&&get.type(card)=='trick';
						});
						if(card){
							huode.push(card);
							names.push(card.name);
						}
						else break;
					}
					if(huode.length<cards.length){
						player.chat('百密一疏啊！');
						game.log('牌堆里面已经没有黑色锦囊牌了！');
					}
					if(huode.length) player.gain(huode,'gain2');
				},
                ai:{
                    order:8,
                    result:{
                        player:1,
                    },
                },
            },
            "jszyyh2":{
				unique:true,
                forced:true,
				direct:true,
                trigger:{
                    player:"phaseBegin",
                },
                content:function(){
					player.addSkill('jszyyh');
					game.log(player,'获得了技能','#g〖业火〗')
					player.removeSkill('jszyyh2');
				},
            },
            jslbjyspsx:{
                mod:{
                    maxHandcard:function (player,num){
						if(game.countPlayer(function(current){return current.hasSkill('jslbjy')})>0&&player.isLinked()) return num+2;
					},
                },
            },
            jslblw:{
                audio:"ext:神怒降世:1",
                group:["jslblw_draw","jslblw_damage"],
                trigger:{
                    player:"shaMiss",
                },
                marktext:"威",
                intro:{
                    name:"龙威",
                    content:"可以摸#张牌",
                },
                forced:true,
                filter:function(event,player){
					return _status.currentPhase==player;
				},
                content:function(){
					player.addMark('jslblw',1);
				},
                subSkill:{
                    draw:{
                        audio:"jslblw",
                        trigger:{
                            player:["phaseZhunbeiBegin","phaseJieshuBegin"],
                        },
                        filter:function(event,player){
							return player.countMark('jslblw');
						},
                        forced:true,
                        content:function(){
							player.draw(player.countMark('jslblw'));
							player.removeMark('jslblw',player.countMark('jslblw'));
						},
                        sub:true,
                    },
                    damage:{
                        audio:"jslblw",
                        trigger:{
                            player:"damageEnd",
                        },
                        filter:function(event,player){
							return true;
						},
                        forced:true,
                        content:function(){
							player.addMark('jslblw',trigger.num);
						},
                        sub:true,
                    },
                },
            },
            jslbtg:{
                audio:"ext:神怒降世:1",
                trigger:{
                    player:"die",
                },
                direct:true,
                skillAnimation:true,
                animationColor:"metal",
                forceDie:true,
                content:function(){
					"step 0"
					player.chooseTarget(get.prompt('jslbtg'),'<center>令一名角色获得〖观星〗和〖放权〗</center>',function(card,player,target){
						return player!=target;
					}).set('forceDie',true).set('ai',function(target){
						var num=get.attitude(_status.event.player,target);
						if(num>0){
							if(target.hp==1){
								num+=2;
							}
							if(target.hp<target.maxHp){
								num+=2;
							}
						}
						return num;
					}).set('sourcex',trigger.source);
					"step 1"
					if(result.bool){
						var target=result.targets[0];
						player.logSkill('jslbtg',target);
						player.line(target,'green');
						target.addSkill('exzglgx');
						target.addSkill('olfangquan');
						game.log(target,'获得了技能','#g〖观星〗','和','#g〖放权〗');
					}
				},
                ai:{
                    expose:0.5,
                },
            },
            szxws:{
                locked:true,
                audio:"ext:神怒降世:1",
                global:"szxws2",
                trigger:{
                    global:"dying",
                },
                priority:15,
                forced:true,
                filter:function(event,player,name){
					return _status.currentPhase==player&&event.player!=player;
				},
                content:function(){},
            },
            "szxws2":{
                mod:{
                    cardSavable:function(card,player){
						if(!_status.currentPhase) return;
						if(_status.currentPhase.isAlive()&&_status.currentPhase.hasSkill('szxws')&&_status.currentPhase!=player){
							if(card.name=='tao'&&!player.isDying()) return false;
						}
					},
                    cardEnabled:function(card,player){
						if(!_status.currentPhase) return;
						if(_status.currentPhase.isAlive()&&_status.currentPhase.hasSkill('szxws')&&_status.currentPhase!=player){
							if(card.name=='tao'&&!player.isDying()) return false;
						}
					},
                },
            },
            "drlt_szxxl1":{
                unique:true,
                onremove:function(player){
					player.storage.drlt_szxxl1.removeSkill('drlt_szxxl2');
					player.storage.drlt_szxxl1.unmarkSkill('drlt_szxxl1');
					delete player.storage.drlt_szxxl1;
				},
                mod:{
                    targetInRange:function (card,player,target){
						if(target.hasSkill('drlt_szxxl2')){
							return true;
						}
					},
                    cardUsableTarget:function(card,player,target){
						if(target.hasSkill('drlt_szxxl2')) return true;
					},
                },
            },
            "drlt_szxxl2":{
                unique:true,
                mod:{
                    "cardEnabled2":function(card,player){
						if(get.position(card)=='h') return false;
					},
                },
                ai:{
                    effect:{
                        target:function(card,player,target){
							if(get.tag(card,'damage')) return [0,-999999];
						},
                    },
                },
            },
            "jszlzt2":{
                mod:{
                    maxHandcardBase:function(player,num){
						if(game.countPlayer(function(current){
							if(current.hasSkill('jszlzt')&&current!=player) return current.inRange(player)&&player.isDamaged();
						})) return num-1;
					},
                },
            },
            "drlt_jszldr1":{
                init:function(player,skill){
					player.disableSkill(skill,player.storage.drlt_jszldr);
				},
                onremove:function(player,skill){
					player.enableSkill(skill);
				},
                locked:true,
                mark:true,
                charlotte:true,
                intro:{
                    content:function(storage,player,skill){
						var list=[];
						for(var i in player.disabledSkills){
							if(player.disabledSkills[i].contains(skill)) list.push(i);
						};
						if(list.length){
							var str='失效技能：';
							for(var i=0;i<list.length;i++){
								if(lib.translate[list[i]+'_info']) str+=get.translation(list[i])+'、';
							};
							return str.slice(0,str.length-1);
						};
					},
                },
            },
            jszlxt:{
				audio:"ext:神怒降世:1",
                group:"jszlxt_skill",
                subSkill:{
                    skill:{
						trigger:{
							global:"phaseEnd",
						},
						filter:function(event,player){
							return event.player.getStat('damage')>1&&event.player!=player;
						},
						check:function(event,player){
							return 1;
						},
						content:function(){
							"step 0"
							if(player.maxHp>=5) event.goto(3);
							"step 1"
							player.chooseControl('造成伤害','体力上限').set('prompt','〖刑天〗：选择一项').set('ai',function(){
								if(player.MaxHp<4) return '体力上限';
								return '造成伤害';
							});
							"step 2"
							if(result.control=='体力上限'){
								player.logSkill('jszlxt');
								player.gainMaxHp(1);
								event.goto(5);
							}
							else{
								event.goto(3);
							}
							"step 3"
							player.chooseTarget('对一名角色造成1点雷电伤害',true,function(card,player,target){
								return target!=player;
							}).set('ai',function(target){
								return get.damageEffect(target,player,player,'thunder');
							});
							"step 4"
							if(result.bool&&result.targets&&result.targets.length){
								player.logSkill('jszlxt',result.targets);
								result.targets[0].damage('thunder',1,'nocard');
							}
							"step 5"
						},
						ai:{
							expose:0.3,
							thunderAttack:true,
						},
                        sub:true,
                    },
                },
            },
            jsgnpx:{
                audio:"ext:神怒降世:1",
                enable:"phaseUse",
                usable:1,
                filterTarget:function(card,player,target){
					return target!=player&&target.countCards('h')>0;
					//return target!=player;
				},
                content:function(){
					'step 0'
					event.list1=[];
					event.list2=[];
					if(player.countCards('h')>0){
						var chooseButton=player.chooseButton(4,['你的手牌',player.getCards('h'),get.translation(target.name)+'的手牌',target.getCards('h')]);
					}
					else{
						var chooseButton=player.chooseButton(4,[get.translation(target.name)+'的手牌',target.getCards('h')]);
					}
					chooseButton.set('target',target);
					chooseButton.set('ai',function(button){
						var player=_status.event.player;
						var target=_status.event.target;
						var ps=[];
						var ts=[];
						for(var i=0;i<ui.selected.buttons.length;i++){
							var card=ui.selected.buttons[i].link;
							if(target.getCards('h').contains(card)) ts.push(card);
							else ps.push(card);
						}
						var card=button.link;
						var owner=get.owner(card);
						var val=get.value(card)||1;
						if(owner==target){
							if(ts.length>1) return 0;
							if(ts.length==0||player.hp>3) return val;
							return 2*val;
						}
						return 7-val;
					});
					chooseButton.set('filterButton',function(button){
						for(var i=0;i<ui.selected.buttons.length;i++){
							if(get.suit(button.link)==get.suit(ui.selected.buttons[i].link)) return false;
						};
						return true;
					});
					'step 1'
					if(result.bool){
						var list=result.links;
						for(var i=0;i<list.length;i++){
							if(get.owner(list[i])==player){
								event.list1.push(list[i]);
							}else{
								event.list2.push(list[i]);
							};
						};
						if(event.list1.length&&event.list2.length){
							target.discard(event.list2).delay=false;
							player.discard(event.list1);
						}
						else if(event.list2.length){
							target.discard(event.list2);
						}
						else player.discard(event.list1);
					};
					'step 2'
					if(event.list1.length+event.list2.length==4){
						if(event.list1.length==0) player.loseMaxHp();
						if(event.list1.length==1){
							var evt=_status.event;
							for(var i=0;i<10;i++){
								if(evt&&evt.getParent)evt=evt.getParent();
								if(evt.name=='phaseUse'){
									evt.skipped=true;
									break;
								};
							};
							player.addTempSkill('drlt_poxi1',{player:'phaseAfter'});
						};
						if(event.list1.length==3) player.recover();
						if(event.list1.length==4) player.draw(4);
					};
				},
                ai:{
                    order:13,
                    result:{
                        target:function(target,player){
                return -1;
            },
                    },
                },
            },
            jsgnjj:{
				enable:"phaseUse",
				limited:true,
                unique:true,
                forceDie:true,
                audio:"ext:神怒降世:1",
				filter:function(event,player){
					if(player.storage.jsgnjj==true) return false;
					return player.isMinHandcard()&&player.isMinHp()&&player.isMinEquip();
				},
				filterTarget:function(card,player,target){
					return player!=target;
				},
                mark:true,
                derivation:"jsgnxj2",
                animationColor:"water",
                skillAnimation:"legend",
                content:function (){
					"step 0"
					player.storage.jsgnjj=true;
					player.awakenSkill('jsgnjj');
					player.maxHp=4;
					player.swapHandcards(target);
					player.swapEquip(target);
					"step 1"
					var hp1=player.hp;
					var hp2=target.hp;
					player.hp=Math.min(player.maxHp,hp2);
					target.hp=Math.min(target.maxHp,hp1);
					player.update();
					target.update();
				},
                intro:{
                    content:"limited",
                },
                init:function(player,skill){
					player.storage.jsgnjj=false;
				},
                ai:{
                    order:1,
                    result:{
                        target:function(player,target){
							return -1;
						},
                    },
                },
            },
            jsgnxj:{
                audio:"ext:神怒降世:1",
                group:["jsgnxj_qiangpai","jsgnxj_yichu"],
                trigger:{
                    player:"phaseJieshuBegin",
                },
                direct:true,
                onremove:function(player){
					game.countPlayer(function(current){
						if(current.hasSkill('jsgnxj1')){
							current.removeSkill('jsgnxj1');
						}
					});
				},
                content:function(){
					"step 0"
					if(player.storage.jsgnjj&&player.storage.jsgnjj==true) event.goto(3);
					"step 1"
					player.chooseTarget(get.prompt('jsgnxj'),function(card,player,target){
						return target!=player&&!target.hasSkill('jsgnxj1');
					}).ai=function(target){
						if(get.attitude(player,target)>0)
							return 0.1;
						if(get.attitude(player,target)<1&&(target.isTurnedOver()||target.countCards('h')<1))
							return 0.2;
						if(get.attitude(player,target)<1&&target.countCards('h')>0&&target.countCards('j',{name:'lebu'})>0)
							return target.countCards('h')*0.8+target.getHandcardLimit()*0.7+2;
						if(get.attitude(player,target)<1&&target.countCards('h')>0)
							return target.countCards('h')*0.8+target.getHandcardLimit()*0.7;
						return 1;
					};
					"step 2"
					if(result.bool){
						var target=result.targets[0];
						player.logSkill('jsgnxj',target);
						result.targets[0].addTempSkill('jsgnsp',{player:'phaseAfter'});
						result.targets[0].addSkill('jsgnxj1');
					};
					event.finish();
					"step 3"
					player.chooseTarget(get.prompt('jsgnxj'),"<center>选择获得〖神魄〗的目标</center>",function(card,player,target){
						return target!=player&&!target.hasSkill('jsgnsp');
					}).set('ai',function(target){
						var player=_status.event.player;
						return get.attitude(target,player);
					});
					"step 4"
					if(result.bool){
						player.logSkill('jsgnxj',result.targets[0]);
						result.targets[0].addTempSkill('jsgnsp',{player:'phaseAfter'});
					};
					"step 5"
					player.chooseTarget(get.prompt('jsgnxj'),"<center>选择获得「袭劫」标记的目标</center>",function(card,player,target){
						return target!=player&&!target.hasSkill('jsgnxj1');
					}).set('ai',function(target){
						var player=_status.event.player;
						return -get.attitude(target,player);
					});
					"step 6"
					if(result.bool){
						player.logSkill('jsgnxj',result.targets[0]);
						result.targets[0].addSkill('jsgnxj1');
					};
				},
                subSkill:{
                    qiangpai:{
                        audio:"jsgnxj",
                        trigger:{
                            global:"phaseEnd",
                        },
                        filter:function(event,player){
							return player!=event.player&&event.player.hasSkill('jsgnxj1')&&event.player.isAlive();
						},
                        direct:true,
                        forced:true,
                        check:function(event,player){
							return get.attitude(player,event.player)<0;
						},
                        content:function(){
							"step 0"
							if(trigger.player.countCards('h')<1) event.goto(3);
							if(player.storage.jsgnjj&&player.storage.jsgnjj==true){
								if(trigger.player.countCards('h')>0){
									trigger.player.give(trigger.player.getCards('h'),player);
								}
								event.goto(3);
							}
							"step 1"
							player.chooseBool('〖袭劫〗：是否获得'+get.translation(trigger.player)+'的所有手牌').ai=function(event,player){
								return get.attitude(player,trigger.player)<=0;
							};
							"step 2"
							if(result.bool){
								player.logSkill('jsgnxj',trigger.player);
								trigger.player.give(trigger.player.getCards('h'),player);
							}
							"step 3"
							trigger.player.removeSkill('jsgnxj1');
						},
                        sub:true,
                    },
                    yichu:{
                        trigger:{
                            player:"die",
                        },
                        filter:function(event,player){
							return true;
						},
                        direct:true,
                        forced:true,
                        forceDie:true,
                        content:function(){
							game.countPlayer(function(current){
								if(current.hasSkill('jsgnxj1')){
									current.removeSkill('jsgnxj1');
								}
							});
						},
                        sub:true,
                    },
                },
            },
            "jsgnxj1":{
                mark:true,
                marktext:"劫",
                unique:true,
                intro:{
                    name:"袭劫",
                    content:"手牌即将不保！",
                },
            },
            jsgnsp:{
                audio:"ext:神怒降世:1",
                trigger:{
                    player:"phaseDrawBegin2",
                },
                forced:true,
                filter:function(event,player){
					return !event.numFixed;
				},
                content:function(){
					trigger.num++;
				},
                mod:{
                    maxHandcardBase:function(player,num){
						return num+1;
					},
					cardUsable:function(card,player,num){
						if(card.name=='sha') return num+1;
					},
                },
                ai:{
                    threaten:1.5,
                },
            },
            "jsgnxj2":{},
            spzjlh:{
                audio:"ext:神怒降世:1",
                unique:true,
                marktext:"合",
                mark:true,
                skillAnimation:"epic",
                animationStr:"六合",
                juexingji:true,
                derivation:["xinleiji","xinguidao","huangtian"],
                animationColor:"thunder",
                group:["spzjlh_biaoji1","spzjlh_biaoji2"],
                intro:{
                    name:"六合",
                    content:"mark",
                },
                trigger:{
                    global:"phaseEnd",
                },
                filter:function(event,player){
					return player.countMark('spzjlh')>=6;
				},
                forced:true,
                content:function(){
					"step 0"
					player.awakenSkill('spzjlh');
					if(player.countCards('h')<player.maxHp){
						player.draw(player.maxHp-player.countCards('h'));
					}
					if(player.hp<player.maxHp){
						player.recover(player.maxHp-player.hp);
					}
					"step 1"
					player.addSkill('xinleiji');
					player.addSkill('xinguidao');
					player.addSkill('huangtian');
					game.log(player,'获得了技能','#g〖雷击〗','、','#g〖鬼道〗','和','#g〖黄天〗')
				},
                subSkill:{
                    "biaoji1":{
                        audio:"ext:神怒降世:1",
                        trigger:{
                            global:"damageEnd",
                        },
                        forced:true,
                        filter:function(event,player){
							return player.countMark('spzjlh')<6&&event.player.group=='qun';
						},
                        content:function(){
							if(player.countMark('spzjlh')+trigger.num>6) player.addMark('spzjlh',6-player.countMark('spzjlh'));
							else player.addMark('spzjlh',trigger.num);
						},
                        sub:true,
                    },
                    "biaoji2":{
                        audio:"ext:神怒降世:1",
                        trigger:{
                            global:"damageSource",
                        },
                        forced:true,
                        filter:function(event,player){
							if(!event.source) return false;
							return player.countMark('spzjlh')<6&&event.source.group=='qun';
						},
                        content:function(){
							if(player.countMark('spzjlh')+trigger.num>6) player.addMark('spzjlh',6-player.countMark('spzjlh'));
							else player.addMark('spzjlh',trigger.num);
						},
                        sub:true,
                    },
                },
            },
            spzjjy:{
                audio:"ext:神怒降世:1",
                unique:true,
                marktext:"义",
                mark:true,
                skillAnimation:"epic",
                animationStr:"举义",
                limited:true,
                animationColor:"orange",
                init:function(player){
					player.storage.spzjjy=false;
				},
                intro:{
                    content:"limited",
                },
                trigger:{
                    global:"dieBegin",
                },
                filter:function(event,player){
					if(get.mode()!='identity') return true;
					if(player.storage.spzjjy) return false;
					if(player.identity!='zhong'&&event.player.identity=='zhu') return false;
					return event.player!=player;
				},
				priority:99,
				firstDo:true,
                check:function(event,player){
					return true;
				},
                content:function(){
					"step 0"
					player.storage.spzjjy=true;
					player.awakenSkill('spzjjy');
					player.line(trigger.player,'green');
					trigger.cancel();
					"step 1"
					game.broadcastAll(function(player,target,shown){
						var identity=player.identity;
						if(player.identity=='zhu') target.identity='zhong';
						else{
							if(player.identity=='zhong'&&target.identity=='zhu'){
								target.identity='zhong';
								player.identity='zhu';
								player.gainMaxHp();
								target.loseMaxHp();
								player.recover();
							}
							else target.identity=identity;
						}
					},player,trigger.player,trigger.player.identityShown);
					"step 2"
					if(trigger.player.name2!=undefined){
						trigger.player.chooseControl(trigger.player.name,trigger.player.name2).set('prompt','〖举义〗：请选择要更换的武将牌');
					}else event._result={control:trigger.player.name};
					"step 3"
					trigger.player.reinit(result.control,'snjs_huangjinbing');
					if(_status.characterlist){
						_status.characterlist.add(result.control);
						_status.characterlist.remove('snjs_huangjinbing');
					}
					trigger.player.group='qun';
					game.log('#g'+get.translation(result.control)+'','将武将牌替换为',trigger.player)
					"step 4"
					trigger.player.discard(trigger.player.getCards('hej'));
					"step 5"
					trigger.player.link(false);
					"step 6"
					trigger.player.turnOver(false);
					"step 7"
					trigger.player.draw(trigger.player.maxHp);
					"step 8"
					if(trigger.player.hp<trigger.player.maxHp){
						trigger.player.recover(trigger.player.maxHp-trigger.player.hp);
					}
				},
            },
            snjs_baodong:{
                audio:"ext:神怒降世:5",
                trigger:{
                    player:"phaseUseBegin",
                },
                direct:true,
                content:function(){
					var skillname='snjs_baodong_huangjinbing';
					if(player.name=='snjs_bocai') skillname='snjs_baodong_bocai';
					if(player.name=='snjs_chengyuanzhi') skillname='snjs_baodong_chengyuanzhi';
					if(player.name=='snjs_dengmao') skillname='snjs_baodong_dengmao';
					if(player.name=='snjs_guanhai') skillname='snjs_baodong_guanhai';
					player.chooseToUse('〖暴动〗：是否使用一张杀？',function(card,player){
						if(get.name(card)!='sha') return false;
						return lib.filter.filterCard.apply(this,arguments);
					}).set('targetRequired',true).set('complexSelect',true).set('filterTarget',function(card,player,target){
						return lib.filter.filterTarget.apply(this,arguments);
					}).set('sourcex',target).set('addCount',false).set('respondTo',[player,card]).logSkill=[skillname,target];
				},
				subSkill:{
					huangjinbing:{
						audio:"ext:神怒降世:1",
						sub:true,
					},
					bocai:{
						audio:"ext:神怒降世:1",
						sub:true,
					},
					chengyuanzhi:{
						audio:"ext:神怒降世:1",
						sub:true,
					},
					dengmao:{
						audio:"ext:神怒降世:1",
						sub:true,
					},
					guanhai:{
						audio:"ext:神怒降世:1",
						sub:true,
					},
				},
            },
            zjzctf:{
                audio:"ext:神怒降世:1",
                unique:true,
                skillAnimation:"epic",
                animationStr:"天罚",
                juexingji:true,
                animationColor:"orange",
                trigger:{
                    source:"damageBegin4",
                },
                filter:function(event,player){
					return event.player.isLinked()&&event.player.isAlive()&&event.nature;
				},
                forced:true,
                content:function(){
					"step 0"
					if(player.name2!=undefined){
						player.chooseControl(player.name,player.name2).set('prompt','〖天罚〗：请选择要更换的武将牌');
					}else event._result={control:player.name};
					"step 1"
					player.reinit(result.control,'snjs_zhangjvzhangchun');
					if(_status.characterlist){
						_status.characterlist.add(result.control);
						_status.characterlist.remove('snjs_zhangjvzhangchun');
					}
				},
            },
            zyfy:{
                audio:"ext:神怒降世:1",
                usable:1,
                filterTarget:function (card,player,target){
					return player!=target&&target.hp<=player.hp&&target.countCards('h')>0;
				},
                enable:"phaseUse",
                content:function (){
					player.gainPlayerCard(target,'he',true);
				},
                ai:{
                    order:20,
                    expose:0.4,
                    threaten:1,
                    result:{
                        target:function(player,target){
                return -1;
            },
                    },
                },
            },
            zyyy:{
                mod:{
                    targetInRange:function (card){
						return true;
					},
                },
            },
            dmhc:{
                mod:{
                    cardname:function(card,player,name){
						if(card.name=='shan') return 'sha';
					},
                },
            },
            bcsc:{
                audio:"ext:神怒降世:1",
                group:"bcsc_shanghai",
                marktext:"冲",
                trigger:{
                    source:"damageSource",
                },
                filter:function(event,player){
					return _status.currentPhase==player&&event.num>0;
				},
                usable:1,
                forced:true,
                intro:{
                    name:"首冲",
                    content:"本回合下一次造成的伤害+#",
                },
                onremove:function(player){
					if(player.countMark('bcsc')>0) player.removeMark('bcsc',player.countMark('bcsc'));
				},
                content:function(){
					if(!player.hasSkill('bcsc_yichu')) player.addTempSkill('bcsc_yichu');
					player.addMark('bcsc',1);
				},
                subSkill:{
                    shanghai:{
                        audio:"bcsc",
                        trigger:{
                            source:"damageBegin",
                        },
                        forced:true,
                        filter:function(event,player){
							return player.countMark('bcsc')>0;
						},
                        content:function(){
							trigger.num++;
							player.removeMark('bcsc',player.countMark('bcsc'));
						},
                        sub:true,
                    },
                    yichu:{
						silent:true,
						unique:true,
						forced:true,
						onremove:function(player){
							if(player.countMark('bcsc')>0) player.removeMark('bcsc',player.countMark('bcsc'));
						},
                        sub:true,
                    },
                },
            },
            ghqx:{
                audio:"ext:神怒降世:1",
                group:"ghqx_shanghai",
                marktext:"袭",
                trigger:{
                    source:"damageSource",
                },
                filter:function(event,player){
					return _status.currentPhase==player&&event.num>0;
				},
                usable:1,
                forced:true,
                intro:{
                    name:"侵袭",
                    content:"可以失去1点体力对一名其他角色造成1点伤害",
                },
                onremove:function(player){
					if(player.countMark('ghqx')>0) player.removeMark('ghqx',player.countMark('ghqx'));
				},
                content:function(){
					if(!player.hasSkill('ghqx_yichu')) player.addTempSkill('ghqx_yichu');
					player.addMark('ghqx',1);
				},
                subSkill:{
                    shanghai:{
                        audio:"ghqx",
                        usable:1,
                        filterTarget:function (card,player,target){
							return player!=target&&player.countMark('ghqx')>0;
						},
                        enable:"phaseUse",
                        content:function (){
							player.loseHp();
							target.damage('nocard');
						},
                        ai:{
                            order:function(){
								return get.order({name:'sha'})-1;
							},
                            result:{
                                target:function(player,target){
									if(player.hp==2&&player.countCards('h',{name:'tao'})<1) return 0;
									if(player.hp==1&&(player.countCards('h',{name:'tao'})<1||player.countCards('h',{name:'jiu'})<1)) return 0;
									return -1;
								},
                            },
                        },
                        sub:true,
                    },
                    yichu:{
						silent:true,
						unique:true,
						forced:true,
						onremove:function(player){
							if(player.countMark('ghqx')>0) player.removeMark('ghqx',player.countMark('ghqx'));
						},
                        sub:true,
                    },
                },
            },
            cyzsz:{
                audio:"ext:神怒降世:1",
                group:["cyzsz_damage","cyzsz_yichu"],
                marktext:"志",
                trigger:{
                    source:"damageBegin",
                },
                filter:function(event,player){
					if(event._notrigger.contains(event.player)) return false;
					return event.card&&event.card.name=='sha';
				},
                check:function(event,player){
					return get.attitude(player,event.player)<0;
				},
                logTarget:"player",
                intro:{
                    name:"首志",
                    content:"下一次受到来自【杀】的伤害+#",
                },
                content:function(){
					trigger.num++;
					player.addMark('cyzsz',1);
				},
                subSkill:{
                    damage:{
                        audio:"cyzsz",
                        trigger:{
                            player:"damageBegin",
                        },
                        forced:true,
                        filter:function(event,player){
							return event.card&&player.countMark('cyzsz')>0&&event.card.name=='sha';
						},
                        content:function(){
							trigger.num=trigger.num+player.countMark('cyzsz');
							player.removeMark('cyzsz',player.countMark('cyzsz'));
						},
                        sub:true,
                    },
                    yichu:{
                        trigger:{
                            player:"phaseBegin",
                        },
                        filter:function(event,player){
							return player.countMark('cyzsz')>0;
						},
						silent:true,
						unique:true,
						forced:true,
                        content:function(){
							player.removeMark('cyzsz',player.countMark('cyzsz'));
						},
                        sub:true,
                    },
                },
            },
            zwxq:{
                audio:"ext:神怒降世:1",
                group:["zwxq_draw","zwxq_chusha","zwxq_damage","zwxq_losehp"],
                enable:"phaseUse",
                usable:1,
				mod:{
					targetInRange:function(card,player){
						if(player.storage.zwxq==true&&card.name=='sha') return true;
					},
					cardUsable:function(card,player,num){
						if(player.storage.zwxq==true&&card.name=='sha') return num+1;
					},
				},
				init:function(player){
					if(!player.storage.zwxq) player.storage.zwxq=false;
				},
                filter:function(event,player){
					return player.countCards('h')>0;
				},
                content:function(){
					"step 0"
					player.storage.zwxq1=player.countCards('h');
					"step 1"
					player.discard(player.getCards('h'));
					var card=get.cardPile2(function(card){
						return get.color(card)=='red'&&card.name=='sha';
					});
					if(!card){
						player.chat('无力再战了么...');
						game.log('牌堆里面已经没有红色的【杀】了！');
					}
					else{
						player.gain(card,'gain2');
						player.addTempSkill('zwxq_shaend');
						//player.addTempSkill('zwxq2');
					}
					"step 2"
					player.storage.zwxq=true;
				},
                ai:{
                    order:1,
                    result:{
                        player:function(player){
							if(player.phaseNumber==1&&(player.identity=='zhu'||player.identity=='mingzhong')) return -1;
							return 1;
						},
                    },
                },
                subSkill:{
                    draw:{
                        audio:"ext:神怒降世:1",
                        sub:true,
                    },
                    losehp:{
                        audio:"ext:神怒降世:1",
                        sub:true,
                    },
					chusha:{
						audio:"ext:神怒降世:1",
						trigger:{
							player:"useCardToTargeted",
						},
						forced:true,
						filter:function(event,player){
							return player.storage.zwxq==true&&event.card.name=='sha';
						},
						content:function(){
							trigger.getParent().directHit.push(trigger.target);
						},
						sub:true,
					},
					damage:{
                        audio:"ext:神怒降世:1",
                        trigger:{
                            source:"damageEnd",
                        },
                        filter:function(event,player){
							if(event._notrigger.contains(event.player)) return false;
							return player.storage.zwxq==true&&event.player.isAlive()&&event.card&&event.card.name=='sha';
						},
                        forced:true,
                        content:function(){
							trigger.player.storage.zwxq2=player.storage.zwxq1;
							trigger.player.storage.zwxq3=player;
							if(!trigger.player.hasSkill('zwxq_xiaoguo')) trigger.player.addTempSkill('zwxq_xiaoguo');
						},
						sub:true,
					},
					shaend:{
						trigger:{
							player:"useCardEnd",
						},
						direct:true,
						forced:true,
						filter:function(event,player){
							return event.card.name=='sha';
						},
						onremove:function(player){
							player.storage.zwxq=false;
						},
						content:function(){
							player.removeSkill('zwxq_shaend');
						},
						sub:true,
					},
					xiaoguo:{
						mark:true,
						unique:true,
						intro:{
							name:"血骑",
							content:"防线失守！",
						},
						forced:true,
						direct:true,
						trigger:{
							player:"phaseUseBegin",
						},
						content:function(){
							"step 0"
							if(player.storage.zwxq3.hasSkill('zwxq')) player.storage.zwxq3.logSkill('zwxq_losehp');
							player.chooseToDiscard('〖血骑〗：弃置'+get.cnNumber(player.storage.zwxq2)+'张牌否则失去1点体力','he',player.storage.zwxq2).set('ai',function(card){
								if(card.name=='tao') return -10;
								if(card.name=='jiu'&&player.hp==1) return -10;
							});
							"step 1"
							if(result.bool==false){
								player.loseHp();
							}
						},
						onremove:function(player){
						if(player.storage.zwxq3.hasSkill('zwxq')&&player.storage.zwxq3.isDamaged()&&player.storage.zwxq3.isAlive()){
							player.storage.zwxq3.logSkill('zwxq_draw');
							player.storage.zwxq3.draw(player.storage.zwxq3.getDamagedHp());
						}
							delete player.storage.zwxq2;
							delete player.storage.zwxq3;
						},
						sub:true,
					},
                },
            },
            xhzeqw:{
                audio:"ext:神怒降世:1",
                trigger:{
                    source:"damageEnd",
                },
                filter:function(event,player){
					if(event._notrigger.contains(event.player)) return false;
					return event.card&&event.card.name=='sha'&&get.color(event.card)=='red'&&event.player!=player&&event.player.isAlive();
				},
                check:function(event,player){
					return get.attitude(player,event.player)<0;
				},
                logTarget:"player",
                content:function(){
					player.draw();
					if(!trigger.player.hasSkill('fengyin')){
						trigger.player.addTempSkill('fengyin',{player:'phaseEnd'});
					}
				},
			},
            xhzeps:{
                mod:{
                    targetInRange:function (card){
						if(!card.isCard&&card.name=='sha') return true;
					},
                    cardUsable:function(card,player,num){
						if(!card.isCard&&card.name=='sha') return Infinity;
					},
                },
                audio:"ext:神怒降世:1",
                enable:["chooseToRespond","chooseToUse"],
                filterCard:function(card,player){
					if(get.zhu(player,'shouyue')) return true;
					return get.color(card)=='red';
				},
                position:"he",
                viewAs:{
                    name:"sha",
                },
                selectCard:2,
                complexCard:true,
                viewAsFilter:function (player){
					if(get.zhu(player,'shouyue')){
						if(!player.countCards('he')) return false;
					}
					else{

						if(!player.countCards('he',{color:'red'})) return false;
					}
				},
                prompt:"将两张红牌当作【杀】使用或打出",
                check:function(card){return 4-get.value(card)},
                ai:{
                    skillTagFilter:function(player){
						if(get.zhu(player,'shouyue')){
							if(!player.countCards('he')) return false;
						}
						else{
							if(!player.countCards('he',{color:'red'})) return false;
						}
					},
                    basic:{
                        useful:[5,1],
                        value:[5,1],
                    },
                    order:function(item,player){
						if(player.hasSkillTag('presha',true,null,true)) return 10;
						if(lib.linked.contains(get.nature(item))) return (player.getCardUsable('sha')>1?3:3.1);
						return 3.05;
					},
                    result:{
                        target:function(player,target,card,isLink){
							if(!isLink&&player.hasSkill('jiu')){
								if(!target.hasSkillTag('filterDamage',null,{
									player:player,
									card:card,
									jiu:true,
								})){
									if(get.attitude(player,target)>0){
										return -7;
									}
									else{
										return -4;
									}
								}
								return -0.5;
							}
							return -1.5;
						},
                    },
                    tag:{
                        respond:1,
                        respondShan:1,
                        damage:function(card){
							if(card.nature=='poison') return;
							return 1;
						},
						natureDamage:function(card){
							if(card.nature) return 1;
						},
						fireDamage:function(card,nature){
							if(card.nature=='fire') return 1;
						},
                        thunderDamage:function(card,nature){
							if(card.nature=='thunder') return 1;
						},
                        poisonDamage:function(card,nature){
							if(card.nature=='poison') return 1;
						},
                    },
					canLink:function(player,target,card){
						if(!target.isLinked()&&!player.hasSkill('wutiesuolian_skill')) return false;
                        if(target.mayHaveShan()&&!player.hasSkillTag('directHit_ai',true,{
							target:target,
                            card:card,
                        },true)) return false;
						if(player.hasSkill('jueqing')||target.hasSkill('gangzhi')||target.hasSkill('gangzhi')) return false;
                        return true;
                    },
                },
            },
            fqzdyc:{
                audio:"ext:神怒降世:1",
                trigger:{
                    global:"phaseEnd",
                },
                filter:function(event,player){
					return event.player!=player&&event.player.countCards('h');
				},
                check:function(event,player){
					return get.attitude(player,event.player)<0;
				},
                logTarget:"player",
                content:function(){
					"step 0"
					if(trigger.player.countCards('h',{name:'sha'})<1) event.goto(3);
					"step 1"
					var chooseButton=player.chooseButton(true,1,[get.translation(trigger.player.name)+'的手牌',trigger.player.getCards('h')]);
					chooseButton.set('filterButton',function(button){
						return button.link.name=='sha';
					});
					"step 2"
					if(result.bool){
						trigger.player.lose(result.links,ui.special);
						player.useCard(trigger.player,false,result.links);
						event.goto(4);
					};
					"step 3"
					player.viewHandcards(trigger.player);
					"step 4"
				},
                ai:{
                    expose:0.4,
                    threaten:1,
                },
            },
            wbxz:{
                audio:"ext:神怒降世:2",
                enable:"phaseUse",
                usable:1,
                mod:{
                    targetInRange:function (card,player,target){
						if(target.hasSkill('wbxz2')) return true;
					},
                    cardUsableTarget:function(card,player,target){
						if(target.hasSkill('wbxz2')) return true;
					},
                },
                filterTarget:function(card,player,target){
					return target!=player;
				},
                content:function (){
					target.addTempSkill('wbxz2');
					event.num=0;
					if(target.countCards('h')>player.countCards('h')){
						if(target.countCards('h')-player.countCards('h')>5) event.num=5;
						else event.num=target.countCards('h')-player.countCards('h');
					}
					player.draw(event.num);
				},
                ai:{
                    order:1,
                    result:{
                        target:function(player,target){
							if(get.attitude(player,target)<0&&target.isMaxHandcard()) return true;
							if(get.attitude(player,target)<0&&target.countCards('h')>player.countCards('h')) return true;
							if(get.attitude(player,target)>0&&target.isMaxHandcard()) return true;
							if(get.attitude(player,target)>0&&target.countCards('h')>player.countCards('h')) return true;
							return -1;
						},
                    },
                },
            },
            "wbxz2":{
                mark:true,
                marktext:"寨",
                unique:true,
                intro:{
                    name:"袭寨",
                    content:"来，偷袭！",
                },
            },
            /*"zwxq3":{
                mark:true,
                marktext:"血",
                unique:true,
                intro:{
                    name:"血骑",
                    content:"防线失守！",
                },
                forced:true,
                direct:true,
                trigger:{
                    player:"phaseUseBegin",
                },
                content:function(){
					"step 0"
					if(player.storage.zwxq3.hasSkill('zwxq')) player.storage.zwxq3.logSkill('zwxq_losehp');
					player.chooseToDiscard('弃置'+get.cnNumber(player.storage.zwxq2)+'张牌否则失去1点体力','he',player.storage.zwxq2).set('ai',function(card){
						if(card.name=='tao') return -10;
						if(card.name=='jiu'&&player.hp==1) return -10;
					});
					"step 1"
					if(result.bool==false){
						player.loseHp();
					}
				},
                onremove:function(player){
					if(player.storage.zwxq3.hasSkill('zwxq')&&player.storage.zwxq3.isDamaged()&&player.storage.zwxq3.isAlive()){
						player.storage.zwxq3.logSkill('zwxq_draw');
						player.storage.zwxq3.draw(player.storage.zwxq3.getDamagedHp());
					}
					delete player.storage.zwxq2;
					delete player.storage.zwxq3;
				},
            },*/
            hmfg:{
                audio:"ext:神怒降世:1",
                trigger:{
                    player:"damageEnd",
                },
                filter:function(event,player){
					return (event.source!=undefined);
				},
                check:function(event,player){
					return (get.attitude(player,event.source)<=0);
				},
                logTarget:"source",
                content:function(){
					"step 0"
					if(trigger.source.countCards('he')>0) player.discardPlayerCard(trigger.source,'he',true);
					"step 1"
					if(player.countCards('h',{name:'sha'})>0) player.chooseCard('对'+get.translation(trigger.source)+'使用一张【杀】',true,{name:'sha'});
					else event.goto(3);
					"step 2"
					if(result.bool){
						player.lose(result.cards,ui.special);
						player.useCard(trigger.source,false,result.cards[0]);
					}
					event.goto(4);
					"step 3"
					player.draw();
					"step 4"
				},
                ai:{
                    effect:{
                        target:function(card,player,target){
							if(player.hasSkillTag('jueqing',false,target)) return [1,-1];
							return 0.8;
						},
                    },
                },
            },
            jslxzh:{
                audio:"ext:神怒降世:1",
                group:"jslxzh_mark",
                limited:true,
                init:function (player){
					player.storage.jslxzh=false;
				},
                intro:{
                    content:"limited",
                },
                unique:true,
                mark:true,
                skillAnimation:true,
                animationColor:"metal",
                enable:"phaseUse",
                filter:function (event,player){
					return !player.storage.jslxzh&&player.countMark('jslxzh_mark')>0;
				},
                filterTarget:true,
                selectTarget:function(){
					return [1,_status.event.player.countMark('jslxzh_mark')];
				},
                multiline:true,
                multitarget:true,
                content:function (){
					"step 0"
					player.awakenSkill('jslxzh');
					player.removeMark('jslxzh_mark',player.countMark('jslxzh_mark'));
					player.storage.jslxzh=true;
					"step 1"
					for(var i=0;i<targets.length;i++){
						if(!targets[i].isLinked()){
							targets[i].link(true);
						}
						else targets[i].link(false);
					}
					"step 2"
					var players=game.filterPlayer();
					players.remove(player);
					players.sort(lib.sort.seat);
					for(var i=0;i<players.length;i++){
						if(players[i]!=player&&players[i].isLinked()){
							players[i].damage('fire','nocard');
							players[i].discard(players[i].getCards('e'));
						}
					};
				},
                ai:{
                    order:1,
                    fireAttack:true,
                    result:{
                        target:function(player,target){
							if(target.isLinked()){
								if(target.hasSkillTag('link')) return 0;
								var f=target.hasSkillTag('nofire');
								var t=target.hasSkillTag('nothunder');
								if(f&&t) return 0;
								if(f||t) return 0.5;
								return 2;
							}
							if(get.attitude(player,target)>=0) return -0.9;
							if(ui.selected.targets.length) return -0.9;
							if(game.hasPlayer(function(current){
								return get.attitude(player,current)<=-1&&current!=target&&!current.isLinked();
							})){
								return -0.9;
							}
							return 0;
						},
                    },
                },
                subSkill:{
                    mark:{
                        intro:{
                            name:"绽火",
                            content:"当前有#个标记",
                        },
                        trigger:{
                            player:"damageBegin",
                            source:"damageBegin",
                        },
                        filter:function(event,player){
							return event.nature=='fire';
						},
                        forced:true,
                        content:function(){
							player.addMark('jslxzh_mark',trigger.num);
						},
                        sub:true,
                    },
                },
            },
            jslxjl:{
                audio:"ext:神怒降世:1",
                group:"jslxjl_mark",
                trigger:{
                    player:"phaseUseBegin",
                },
                direct:true,
                content:function(){
					'step 0'
					if(player.countMark('jslxjl_mark')%2==1){
						player.chooseTarget(get.prompt('jslxjl'),'<center>对一名角色造成1点火焰伤害</center>').ai=function(target){
							return -get.attitude(player,target);
						};
					}
					else{
						player.chooseTarget(get.prompt('jslxjl'),'<center>横置一名角色并弃置其区域内的一张牌</center>').ai=function(target){
							return -get.attitude(player,target);
						};
					}
					'step 1'
					if(result.bool){
						player.logSkill('jslxjl',result.targets);
						if(player.countMark('jslxjl_mark')%2==1){
							result.targets[0].damage('fire','nocard');
						}
						else{
							result.targets[0].link(true);
							player.discardPlayerCard(result.targets[0],1,'hej',true);
						};
					};
					'step 2'
					if(player.countMark('jslxjl_mark')>7){
						player.chooseBool().set('ai',function(){
							return true;
						}).set('prompt','〖军略〗：是否弃置所有「军略」标记并对所有其他角色造成1点火焰伤害？');
					}else{
						event.finish();
					};
					'step 3'
					if(result.bool){
						var players=game.players.slice(0).sortBySeat();
						player.line(players);
						player.removeMark('jslxjl_mark',player.countMark('jslxjl_mark'));
						for(var i=0;i<players.length;i++){
							if(players[i]!=player) players[i].damage('fire','nocard');
						};
					};
				},
				ai:{
					expose:0.3,
					fireAttack:true,
				},
                subSkill:{
                    mark:{
                        audio:"ext:神怒降世:1",
                        intro:{
                            name:"军略",
                            content:"当前有#个标记",
                        },
                        trigger:{
                            player:"damageAfter",
                            source:"damageSource",
                        },
                        forced:true,
                        content:function(){
							player.addMark('jslxjl_mark',trigger.num);
						},
                        sub:true,
                    },
                },
            },
            jslxck:{
                audio:"ext:神怒降世:2",
				init:function(player){
					if(!player.storage.jslxck) player.storage.jslxck=[];
				},
				trigger:{
					player:"useCardToTargeted",
					global:"phaseDrawBegin2",
				},
				filter:function(event,player,name){
					if(name=='useCardToTargeted') return player.storage.jslxck.length<4&&event.target.isLinked()&&player.isPhaseUsing();
					else return event.player.isLinked()&&!event.numFixed;
				},
				logTarget:function(event){
					if(!event.target) return event.player;
				},
				check:function(event,player){
					if(!event.target) return get.attitude(player,event.player)<=0;
					else return true;
				},
				content:function(){
					if(event.triggername=='useCardToTargeted'){
						var card=get.cardPile2(function(card){
							return !player.storage.jslxck.contains(get.suit(card));
						});
						if(card){
							if(!player.hasSkill('jslxck_qingchu')) player.addTempSkill('jslxck_qingchu');
							player.storage.jslxck.push(get.suit(card));
							player.gain(card,'gain2','log');
						}
					}
					else trigger.num--;
				},
				subSkill:{
					qingchu:{
						silent:true,
						unique:true,
						forced:true,
						onremove:function(player){
							player.storage.jslxck=[];
						},
						sub:true,
						popup:false,
					},
				},
			},
            jssmyrj:{
                audio:"ext:神怒降世:1",
                trigger:{
                    player:"damageEnd",
                },
                forced:true,
                unique:true,
                group:"jssmyrj_discard",
                filter:function(event){
					return event.num>0;
				},
                onremove:function(player){
					if(player.countMark('jssmyrj')>0) player.removeMark('jssmyrj',player.countMark('jssmyrj'));
				},
                content:function(){
					player.addMark('jssmyrj',trigger.num);
				},
                intro:{
                    name:"忍戒",
                    content:"mark",
                },
                ai:{
                    maixie:true,
                    "maixie_hp":true,
                    combo:"jssmyby",
                },
                subSkill:{
                    discard:{
                        audio:"ext:神怒降世:1",
                        trigger:{
                            player:"loseAfter",
                        },
                        forced:true,
                        filter:function(event,player){
							if (event.type=='discard') return true;
							return _status.currentPhase!=player;
						},
                        content:function(){
							player.addMark('jssmyrj',trigger.num);
						},
                        sub:true,
                    },
                },
            },
            jssmylp:{
                audio:"ext:神怒降世:1",
                skillAnimation:"epic",
                animationColor:"thunder",
                trigger:{
                    global:"phaseAfter",
                },
                frequent:true,
                filter:function(event,player){
					return player.getStat('kill')>0;
				},
                content:function(){
					player.insertPhase();
				},
            },
            jssmyby:{
                skillAnimation:"epic",
                animationColor:"thunder",
                juexingji:true,
                trigger:{
                    player:"phaseZhunbeiBegin",
                },
				init:function(player){
					if(!player.storage.jssmyjl) player.storage.jssmyjl=['jssmyzh','jssmyjz','jssmyfz','jssmygc','jssmyws'];
				},
                forced:true,
                unique:true,
                audio:"ext:神怒降世:1",
                derivation:["jssmyjl","jssmyzh","jssmyjz","jssmyfz","jssmygc","jssmyws"],
                filter:function(event,player){
					return player.countMark('jssmyrj')>=4&&!player.storage.jssmyby;
				},
                content:function(){
					"step 0"
					player.storage[event.name]=true;
					player.loseMaxHp();
					event.cishu=player.countMark('jssmyrj')-3;
					"step 1"
					if(event.cishu<1) event.goto(6);
					"step 2"
					player.chooseControl(player.storage.jssmyjl).set('prompt','〖拜印〗：请选择要获得的技能').set('ai',function(){return player.storage.jssmyjl.randomGet()});
					"step 3"
					event.jineng=result.control;
					player.addSkill(event.jineng);
					player.storage.jssmyjl.remove(event.jineng);
					game.log(player,'获得了技能','#g〖'+get.translation(event.jineng)+'〗')
					"step 4"
					event.cishu=event.cishu-1;
					"step 5"
					event.goto(1);
					"step 6"
					player.awakenSkill('jssmyby');
					player.removeSkill('jssmyrj');
					game.log(player,'获得了技能','#g〖忍戒〗')
					if(player.storage.jssmyjl.length<1) game.log(player,'已经独掌大权了！')
					if(player.storage.jssmyjl.length>0) player.addSkill('jssmyjl');
				},
            },
            jssmyjl:{
                audio:"ext:神怒降世:1",
                derivation:["jssmyzh","jssmyjz","jssmyfz","jssmygc","jssmyws"],
                trigger:{
                    player:"damageAfter",
                    source:"damageSource",
                },
                forced:true,
                init:function(player){
					if(!player.storage.jssmyjl&&player.storage.jssmyjl!=[]&&!(player.hasSkill('jssmyzh')||player.hasSkill('jssmyjz')||player.hasSkill('jssmyfz')||player.hasSkill('jssmygc')||player.hasSkill('jssmyws'))) player.storage.jssmyjl=['jssmyzh','jssmyjz','jssmyfz','jssmygc','jssmyws'];
				},
				content:function(){
					"step 0"
					player.chooseControl(player.storage.jssmyjl).set('prompt','〖极略〗：请选择要获得的技能').set('ai',function(){return player.storage.jssmyjl.randomGet()});
					"step 1"
					event.jineng=result.control;
					player.addSkill(event.jineng);
					player.storage.jssmyjl.remove(event.jineng);
					game.log(player,'获得了技能','#g〖'+get.translation(event.jineng)+'〗')
					"step 2"
					if(player.storage.jssmyjl.length<1){
						player.removeSkill('jssmyjl');
						game.log(player,'现已独掌大权，失去了技能','#g〖极略〗')
					}
				},
            },
            jssmyfz:{
                audio:"ext:神怒降世:1",
                trigger:{
                    player:"damageEnd",
                },
                direct:true,
                content:function(){
					"step 0"
					player.chooseTarget(get.prompt('jssmyfz'),'<center>令一名角色翻面</center>',function(card,player,target){
						return player!=target
					}).ai=function(target){
						if(target.hasSkillTag('noturn')) return 0;
						if(target.isTurnedOver()){
							return get.attitude(player,target)-1;
						}
						else{
							if(player.maxHp-player.hp==1){
								return -get.attitude(player,target)-1;
							}
						}
						return 0;
					}
					"step 1"
					if(result.bool){
						player.logSkill('jssmyfz',result.targets);
						result.targets[0].draw(player.maxHp-player.hp);
						result.targets[0].turnOver();
					}
				},
            },
            jssmygc:{
                audio:"ext:神怒降世:1",
                trigger:{
                    global:"judge",
                },
                direct:true,
                filter:function(event,player){
					return player.countCards('he')>0;
				},
                content:function(){
					"step 0"
					player.chooseCard(get.prompt('jssmyfz'),'<center>修改判定结果</center>','he',function(card){
						var player=_status.event.player;
						var mod2=game.checkMod(card,player,'unchanged','cardEnabled2',player);
						if(mod2!='unchanged') return mod2;
						var mod=game.checkMod(card,player,'unchanged','cardRespondable',player);
						if(mod!='unchanged') return mod;
						return true;
					}).ai=function(card){
						var trigger=_status.event.parent._trigger;
						var player=_status.event.player;
						var result=trigger.judge(card)-trigger.judge(trigger.player.judging[0]);
						var attitude=get.attitude(player,trigger.player);
						if(attitude==0||result==0) return 0;
						if(attitude>0){
							return result-get.value(card)/2;
						}
						else{
							return -result-get.value(card)/2;
						}
					};
					"step 1"
					if(result.bool){
						player.respond(result.cards,'highlight','jssmygc','noOrdering');
					}
					else{
						event.finish();
					}
					"step 2"
					if(result.bool){
						if(trigger.player.judging[0].clone){
							trigger.player.judging[0].clone.delete();
							game.addVideo('deletenode',player,get.cardsInfo([trigger.player.judging[0].clone]));
						}
						game.cardsDiscard(trigger.player.judging[0]);
						trigger.player.judging[0]=result.cards[0];
						trigger.orderingCards.addArray(result.cards);
						game.log(trigger.player,'的判定牌改为',result.cards[0]);
						game.delay(2);
					}
				},
                ai:{
                    rejudge:true,
                    tag:{
                        rejudge:1,
                    },
                },
            },
            jssmyjz:{
                audio:"ext:神怒降世:1",
                group:"jssmyjz_clear",
                trigger:{
                    player:"useCard",
                },
                filter:function(event,player){
					return (get.type(event.card,'trick')=='trick'&&event.card.isCard);
				},
				frequent:true,
                init:function(player){
					player.storage.jssmyjz=0;
				},
                content:function(){
					'step 0'
					player.draw();
					'step 1'
					event.card=result[0];
					if(get.type(event.card)=='basic'){
						player.chooseBool('是否弃置'+get.translation(event.card)+'并令本回合手牌上限+1？').set('ai',function(evt,player){
							return _status.currentPhase==player&&player.needsToDiscard(-3)&&_status.event.value<6;
						}).set('value',get.value(event.card,player));
					}
					'step 2'
					if(result.bool){
						player.discard(event.card);
						player.storage.jssmyjz++;
						if(_status.currentPhase==player){
							player.markSkill('jssmyjz');
						}
					}
				},
                ai:{
                    threaten:1.4,
                },
                mod:{
                    maxHandcard:function(player,num){
						return num+player.storage.jssmyjz;
					},
                },
                intro:{
                    content:"本回合手牌上限+#",
                },
                subSkill:{
                    clear:{
                        trigger:{
                            global:"phaseAfter",
                        },
                        silent:true,
                        content:function(){
							player.storage.jssmyjz=0;
							player.unmarkSkill('jssmyjz');
						},
                        sub:true,
                        forced:true,
                        popup:false,
                    },
                },
            },
            jssmyws:{
                locked:true,
                audio:"ext:神怒降世:1",
                global:"jssmyws2",
                trigger:{
                    global:"dying",
                },
                priority:15,
                forced:true,
				filter:function(event,player,name){
					return _status.currentPhase==player&&event.player!=player;
				},
                content:function(){},
            },
            "jssmyws2":{
                mod:{
                    cardSavable:function(card,player){
						if(!_status.currentPhase) return;
						if(_status.currentPhase.isAlive()&&_status.currentPhase.hasSkill('jssmyws')&&_status.currentPhase!=player){
							if(card.name=='tao'&&!player.isDying()) return false;
						}
					},
                    cardEnabled:function(card,player){
						if(!_status.currentPhase) return;
						if(_status.currentPhase.isAlive()&&_status.currentPhase.hasSkill('jssmyws')&&_status.currentPhase!=player){
							if(card.name=='tao'&&!player.isDying()) return false;
						}
					},
                },
            },
            jssmyzh:{
                audio:"ext:神怒降世:1",
				prompt:'弃置任意张牌并摸等量的牌，若你在每回合第一次发动〖制衡〗时弃置了所有手牌，则你多摸一张牌且本回合可以额外发动一次〖制衡〗。',
				enable:"phaseUse",
				usable:2,
				filter:function(event,player){
					return !player.hasSkill('jssmyzh_jilu');
				},
				position:"he",
				filterCard:function(card,player,event){
					event=event||_status.event;
					if(typeof event!='string') event=event.getParent().name;
					var mod=game.checkMod(card,player,event,'unchanged','cardDiscardable',player);
					if(mod!='unchanged') return mod;
					return true;
				},
				discard:false,
				lose:false,
				delay:false,
				selectCard:[1,Infinity],
				check:function(card){
					var player=_status.event.player;
					if(get.position(card)=='h'&&!player.countCards('h','du')&&(player.hp>2||!player.countCards('h',function(card){
						return get.value(card)>=8;
					}))){
						return 1;
					}
					return 6-get.value(card)
				},
				content:function(){
					'step 0'
					player.discard(cards);
					event.num=1;
					var hs=player.getCards('h');
					if(!hs.length) event.num=0;
					for(var i=0;i<hs.length;i++){
						if(!cards.contains(hs[i])){
							event.num=0;break;
						}
					}
					if(event.num==0) player.addTempSkill('jssmyzh_jilu');
					'step 1'
					if(!player.hasSkill('jssmyzh_jilu2')){
						player.draw(event.num+cards.length);
						player.addTempSkill('jssmyzh_jilu2')
					}
					else player.draw(cards.length);
				},
				subSkill:{
					jilu:{
						silent:true,
						unique:true,
						forced:true,
						sub:true,
						popup:false,
					},
					jilu2:{
						silent:true,
						unique:true,
						forced:true,
						sub:true,
						popup:false,
					},
				},
				ai:{
					order:function(item,player){
						if(!player.getStat('skill').jssmyzh) return get.order({name:'tao'})-1;
						return 1;
					},
					result:{
						player:1,
					},
					threaten:1.55,
				},
            },
            spfsrmfxw:{
                audio:"ext:神怒降世:1",
                mark:true,
                skillAnimation:true,
                animationStr:"降吴",
                animationColor:"wood",
                limited:true,
                unique:true,
                init:function(player){
					player.storage.spfsrmfxw=false;
				},
                intro:{
                    content:"limited",
                },
                trigger:{
                    global:"phaseBegin",
                },
                filter:function(event,player){
					if(player.storage.spfsrmfxw) return false;
					return event.player!=player&&event.player.group=='wu';
				},
                check:function(event,player){
					return get.attitude(player,event.player)>0;
				},
                logTarget:"player",
                content:function(){
					"step 0"
					player.awakenSkill('spfsrmfxw');
					player.storage.spfsrmfxw=true;
					player.storage.spfsrmfxw2=player.countCards('h');
					"step 1"
					if(player.countCards('h')>0){
						player.give(player.getCards('h'),trigger.player);
					}
					"step 2"
					player.draw(player.storage.spfsrmfxw2);
					"step 3"
					player.group='wu';
				},
                ai:{
                    expose:0.4,
                    threaten:1,
                },
            },
            spfsrmfjz:{
                audio:"ext:神怒降世:1",
                group:["spfsrmfjz_losecard","spfsrmfjz_usecard","spfsrmfjz_equip","spfsrmfjz_judge","spfsrmfjz_pindian"],
                subSkill:{
                    losecard:{
                        audio:"spfsrmfjz",
                        trigger:{
                            global:"loseAfter",
                        },
                        filter:function(event,player){
							if (event.player==player) return false;
							if (event.type=='gain') return false;
							if (event.type!='discard') return false;
							for (var i=0;i<event.cards2.length;i++) {
								if (get.type(event.cards2[i],event.player)=='equip'){
									return true;
								}
							}
							return false;
						},
                        content:function() {
							"step 0"
							if (trigger.delay==false) game.delay();
							"step 1"
							var cards=[];
							for (var i=0;i<trigger.cards2.length;i++) {
								var card=trigger.cards2[i];
								if (get.type(card,trigger.player)=='equip'){
									player.gain(card,'gain2','log');
								}
							}
						},
                        sub:true,
                    },
                    usecard:{
                        audio:"spfsrmfjz",
                        trigger:{
                            global:["useCardEnd","respondEnd"],
                        },
                        filter:function(event,player){
							if (event.player==player) return false;
							if (event.cards.filterInD().length<1) return false;
							for (var i=0;i<event.cards.filterInD().length;i++) {
								if (get.type(event.cards.filterInD()[i],event.player)=='equip'){
									return true;
								}
							}
							return false;
						},
                        content:function() {
							"step 0"
							if (trigger.delay==false) game.delay();
							"step 1"
							var cards=[];
							for (var i=0;i<trigger.cards.length;i++) {
								var card=trigger.cards[i];
								if (get.type(card,trigger.player)=='equip'){
									player.gain(card,'gain2','log');
								}
							}
						},
                        sub:true,
                    },
                    equip:{
                        audio:"spfsrmfjz",
                        trigger:{
                            global:"useCard",
                        },
                        filter:function(event,player){
							return event.player!=player&&((get.subtype(event.card)=='equip1'&&event.player.getEquip(1))||(get.subtype(event.card)=='equip2'&&event.player.getEquip(2))||(get.subtype(event.card)=='equip3'&&event.player.getEquip(3))||(get.subtype(event.card)=='equip4'&&event.player.getEquip(4))||(get.subtype(event.card)=='equip5'&&event.player.getEquip(5)));
						},
                        content:function() {
							if(get.subtype(trigger.card)=='equip1') player.gain(trigger.player.getEquip(1),'gain2','log');
							if(get.subtype(trigger.card)=='equip2') player.gain(trigger.player.getEquip(2),'gain2','log');
							if(get.subtype(trigger.card)=='equip3') player.gain(trigger.player.getEquip(3),'gain2','log');
							if(get.subtype(trigger.card)=='equip4') player.gain(trigger.player.getEquip(4),'gain2','log');
							if(get.subtype(trigger.card)=='equip5') player.gain(trigger.player.getEquip(5),'gain2','log');
						},
                        sub:true,
                    },
                    judge:{
                        audio:"spfsrmfjz",
                        trigger:{
                            global:"cardsDiscardAfter",
                        },
                        check:function(event, player) {
							return event.cards[0].name != 'du';
						},
                        filter:function(event, player) {
							var evt=event.getParent().relatedEvent;
							if (!evt||evt.name!='judge') return;
							if (get.position(event.cards[0],true)!='d') return false;
							return (get.type(event.cards[0])=='equip');
						},
                        content:function() {
							var cards=trigger.cards;
							if (cards){
								player.gain(cards,'gain2','log');
							}
						},
                        sub:true,
                    },
                    pindian:{
                        audio:"spfsrmfjz",
                        forced:true,
                        trigger:{
                            global:["chooseToCompareAfter","compareMultipleAfter"],
                        },
                        filter:function(event,player){
							if(event.preserve) return false;
							return get.type(event.card1)=='equip'||get.type(event.card2)=='equip';
						},
                        content:function(){
							if(get.type(trigger.card1)=='equip'&&player!=trigger.player) player.gain(trigger.card1,'gain2','log');
							if(get.type(trigger.card2)=='equip'&&player==trigger.player) player.gain(trigger.card2,'gain2','log');
						},
                        sub:true,
                    },
                },
                ai:{
                    threaten:0.2,
                },
            },
            sssxyj:{
                audio:"ext:神怒降世:1",
				locked:true,
				charlotte:true,
                mark:true,
                unique:true,
                intro:{
                    name:"御剑",
                    content:"card",
                },
                forced:true,
                group:["sssxyj_feichu","sssxyj_huode","sssxyj_huihekaishi","sssxyj_losecard","sssxyj_discard"],
                init:function(player){
					if(!player.storage.sssxyj) player.storage.sssxyj=[];
				},
                mod:{
                    targetInRange:function(card,player,target){
						if(card.name=='sha'){
							if(get.distance(player,target)<=player.countCards('he',{type:'equip'})+1) return true;
						}
					},
                    ignoredHandcard:function(card,player){
						if(get.subtype(card)=='equip1'||get.subtype(card)=='equip2'){
							return true;
						}
					},
                    cardDiscardable:function(card,player,name){
						if(name=='phaseDiscard'&&(get.subtype(card)=='equip1'||get.subtype(card)=='equip2')) return false;
					},
                },
                subSkill:{
                    feichu:{
                        audio:"sssxyj",
                        trigger:{
                            player:"enterGame",
                            global:"gameDrawAfter",
                        },
                        filter:function(event,player){
							return true;
						},
                        forced:true,
                        content:function(){
							player.disableEquip('equip1');
							player.disableEquip('equip2');
							var shoupai=player.getCards('h');
							for (var i=0;i<shoupai.length;i++){
								var card=shoupai[i];
								var jineng_skill=shoupai[i].name+'_skill';
								var jineng=shoupai[i].name;
								var jineng1=shoupai[i].name+'1';
								var jineng2=shoupai[i].name+'2';
								var jineng3=shoupai[i].name+'3';
								if (get.subtype(card)=='equip1'||get.subtype(card)=='equip2'){
									if(!player.storage.sssxyj.contains(card)) player.storage.sssxyj.push(card);
									if(!player.hasSkill(jineng_skill)) player.addSkill(jineng_skill);
									if(!player.hasSkill(jineng)) player.addSkill(jineng);
									if(!player.hasSkill(jineng1)) player.addSkill(jineng1);
									if(!player.hasSkill(jineng2)) player.addSkill(jineng2);
									if(!player.hasSkill(jineng3)) player.addSkill(jineng3);
								}
							}
							player.updateMarks('sssxyj');
							if(player.storage.sssxyj.length) player.showCards(player.storage.sssxyj);
						},
                        sub:true,
                    },
                    huode:{
                        audio:"ext:神怒降世:1",
                        trigger:{
                            player:["drawAfter","gainAfter"],
                        },
                        filter:function(event,player){
							var zhuangbei=[];
							var shoupai=player.getCards('h');
							for (var i=0;i<shoupai.length;i++) {
								var card=shoupai[i];
								if (get.subtype(card)=='equip1'||get.subtype(card)=='equip2'){
									zhuangbei.push(card);
								}
							}
							return zhuangbei.length>player.storage.sssxyj.length;
						},
                        forced:true,
                        content:function(){
							var shoupai=player.getCards('h');
							for (var i=0;i<shoupai.length;i++) {
								var card=shoupai[i];
								var jineng_skill=shoupai[i].name+'_skill';
								var jineng=shoupai[i].name;
								var jineng1=shoupai[i].name+'1';
								var jineng2=shoupai[i].name+'2';
								var jineng3=shoupai[i].name+'3';
								if (get.subtype(card)=='equip1'||get.subtype(card)=='equip2'){
									if(!player.storage.sssxyj.contains(card)) player.storage.sssxyj.push(card);
									if(!player.hasSkill(jineng_skill)) player.addSkill(jineng_skill);
									if(!player.hasSkill(jineng)) player.addSkill(jineng);
									if(!player.hasSkill(jineng1)) player.addSkill(jineng1);
									if(!player.hasSkill(jineng2)) player.addSkill(jineng2);
									if(!player.hasSkill(jineng3)) player.addSkill(jineng3);
								}
							}
							player.updateMarks('sssxyj');
							if(player.storage.sssxyj.length) player.showCards(player.storage.sssxyj);
						},
                        sub:true,
                    },
                    huihekaishi:{
                        audio:"sssxyj_huode",
                        trigger:{
                            player:"phaseBegin",
                        },
                        filter:function(event,player){
							if(player.storage.sssxyj.length>0) return true;
							return false;
						},
                        forced:true,
                        content:function(){
							var shoupai=player.getCards('h');
							for (var i=0;i<shoupai.length;i++) {
								var card=shoupai[i];
								var jineng_skill=shoupai[i].name+'_skill';
								var jineng=shoupai[i].name;
								var jineng1=shoupai[i].name+'1';
								var jineng2=shoupai[i].name+'2';
								var jineng3=shoupai[i].name+'3';
								if (get.subtype(card)=='equip1'||get.subtype(card)=='equip2'){
									if(!player.storage.sssxyj.contains(card)) player.storage.sssxyj.push(card);
									if(!player.hasSkill(jineng_skill)) player.addSkill(jineng_skill);
									if(!player.hasSkill(jineng)) player.addSkill(jineng);
									if(!player.hasSkill(jineng1)) player.addSkill(jineng1);
									if(!player.hasSkill(jineng2)) player.addSkill(jineng2);
									if(!player.hasSkill(jineng3)) player.addSkill(jineng3);
								}
							}
							player.updateMarks('sssxyj');
							if(player.storage.sssxyj.length) player.showCards(player.storage.sssxyj);
						},
                        sub:true,
                    },
                    losecard:{
                        trigger:{
                            player:"loseAfter",
                        },
                        filter:function(event,player){
							for (var i=0;i<event.cards2.length;i++){
								if(player.storage.sssxyj.contains(event.cards2[i])){
									return true;
								}
							}
							return false;
						},
                        forced:true,
                        direct:true,
                        content:function(){
							"step 0"
							for(var i=0;i<trigger.cards2.length;i++){
								var jineng_skill=trigger.cards2[i].name+'_skill';
								var jineng=trigger.cards2[i].name;
								var jineng1=trigger.cards2[i].name+'1';
								var jineng2=trigger.cards2[i].name+'2';
								var jineng3=trigger.cards2[i].name+'3';
								if(player.storage.sssxyj.contains(trigger.cards2[i])){
									player.storage.sssxyj.remove(trigger.cards2[i]);
									player.updateMarks('sssxyj');
									if(player.hasSkill(jineng_skill)) player.removeSkill(jineng_skill);
									if(player.hasSkill(jineng)) player.removeSkill(jineng);
									if(player.hasSkill(jineng1)) player.removeSkill(jineng1);
									if(player.hasSkill(jineng2)) player.removeSkill(jineng2);
									if(player.hasSkill(jineng3)) player.removeSkill(jineng3);
								};
							}
							"step 1"
							event.num=player.storage.sssxyj.length;
							"step 2"
							var shoupai=player.getCards('h');
							for (var i=0;i<shoupai.length;i++) {
								var card=shoupai[i];
								var jineng_skill=shoupai[i].name+'_skill';
								var jineng=shoupai[i].name;
								var jineng1=shoupai[i].name+'1';
								var jineng2=shoupai[i].name+'2';
								var jineng3=shoupai[i].name+'3';
								if (get.subtype(card)=='equip1'||get.subtype(card)=='equip2'){
									if(!player.storage.sssxyj.contains(card)) player.storage.sssxyj.push(card);
									if(!player.hasSkill(jineng_skill)) player.addSkill(jineng_skill);
									if(!player.hasSkill(jineng)) player.addSkill(jineng);
									if(!player.hasSkill(jineng1)) player.addSkill(jineng1);
									if(!player.hasSkill(jineng2)) player.addSkill(jineng2);
									if(!player.hasSkill(jineng3)) player.addSkill(jineng3);
								}
							}
							player.updateMarks('sssxyj');
							if(player.storage.sssxyj.length>event.num){
								player.logSkill('sssxyj_huode');
								player.showCards(player.storage.sssxyj);
							}
						},
                        sub:true,
                    },
                    discard:{
                        audio:"ext:神怒降世:1",
                        trigger:{
                            player:"phaseDiscardEnd",
                        },
                        forced:true,
                        filter:function(event,player){
							if(player.storage.sssxyj.length>0) return true;
							return false;
						},
						content:function(){
						},
                        sub:true,
                    },
                },
                ai:{
                    threaten:0.25,
                },
            },
            sssxjw:{
                audio:"ext:神怒降世:1",
                trigger:{
                    player:"loseEnd",
                },
                filter:function(event,player){
					for (var i=0;i<event.cards2.length;i++){
						if (get.type(event.cards2[i],event.player)=='equip'){
							return true;
						}
					}
					return false;
				},
                frequent:true,
                content:function(){
					var x=0;
					for(var i=0;i<trigger.cards2.length;i++){
						if(get.type(trigger.cards2[i])=='equip') x++;
					}
					player.draw(2*x);
				},
            },
            sssxjx:{
                audio:"ext:神怒降世:1",
                enable:"phaseUse",
                usable:1,
                filter:function(event,player){
					return player.countCards('he',{type:'equip'})>0;
				},
                filterTarget:true,
                position:"he",
                filterCard:{
                    type:"equip",
                },
                selectCard:1,
                selectTarget:1,
                check:function(card){
					return 4-get.value(card);
				},
                content:function(){
					"step 0"
					if(target.isDamaged()) event.goto(2);
					"step 1"
					target.damage(1);
					event.goto(4);
					"step 2"
					player.chooseControl('令'+get.translation(target)+'回复1点体力','对'+get.translation(target)+'造成1点伤害').set('prompt','〖剑仙〗：选择一项').set('ai',function(event,player){
						if(get.attitude(player,event.target)>=0) return '令'+get.translation(target)+'回复1点体力';
						return '对'+get.translation(target)+'造成1点伤害';
					});
					"step 3"
					if(result.control=='令'+get.translation(target)+'回复1点体力'){
						target.recover(1);
					}
					else{
						target.damage(1);
					}
					"step 4"
				},
                ai:{
                    expose:0.4,
                    threaten:0.4,
                    order:1,
                    result:{
                        target:function(player,target){
							if(get.attitude(player,target)<0&&target.isMinHp()) return -1;
							if(get.attitude(player,target)>0&&target.isMinHp()&&target.isDamaged()) return 1;
							return 0;
						},
                    },
                },
            },
            sssxxj:{
				limited:true,
                unique:true,
                forceDie:true,
                enable:"phaseUse",
                usable:1,
                audio:"ext:神怒降世:1",
                mark:true,
                animationColor:"water",
                skillAnimation:"legend",
                init:function(player){
					player.storage.sssxxj=false;
				},
                filter:function(event,player){
					if(player.storage.sssxxj) return false;
					return player.countCards('he',{type:'equip'})<1;
				},
                content:function (){
					"step 0"
					player.awakenSkill('sssxxj');
					player.storage.sssxxj=true;
					"step 1"
					var huode=[];
					while(huode.length<4){
						var card=get.cardPile2(function(card){
							return !huode.contains(card)&&get.type(card)=='equip';
						});
						if(card){
							huode.push(card);
						}
						else break;
					}
					if(huode.length) player.gain(huode,'gain2');
				},
                intro:{
                    name:"枭姬",
                    content:"limited",
                },
                ai:{
                    threaten:0.2,
                    order:20,
                    result:{
                        player:1,
                    },
                },
            },
            splbsf:{
                audio:"ext:神怒降世:1",
                group:["splbsf_renfu","splbsf_damage","splbsf_die"],
                forced:true,
                /*trigger:{
                    global:"phaseUseBegin",
                },
                filter:function(event,player){
				return player.countCards('he')>0&&player.storage.splbsf&&event.player==player.storage.splbsf;
				},
                content:function(){
				'step 0'
				player.draw();
				if(player.storage.splbsf){
				player.chooseCard('he',true,'将一张牌交给'+get.translation(player.storage.splbsf)).set('ai',function(card){
				if(get.attitude(player,trigger.player)>0) return get.useful(card);
				return 4-get.value(card);
				});
				}
				'step 1'
				if(result.bool){
				event.saohua=['吾儿奉先，天下无敌！','吾儿在此，谁敢造次！'].randomGet();
				player.line(player.storage.splbsf);
				player.storage.splbsf.gain(result.cards,player,'giveAuto');
				player.storage.splbsf.chat(event.saohua);
				}
				},*/
                subSkill:{
                    renfu:{
                        audio:"ext:神怒降世:1",
                        trigger:{
                            player:"phaseZhunbeiBegin",
                        },
                        direct:true,
                        forced:true,
                        content:function(){
							"step 0"
							if(!player.storage.splbsf){
								player.chooseTarget(true,'〖弑父〗:认一位义父',function(card,player,target){
									return player!=target;
								}).set('ai',function(target){
									return get.attitude(target,player)>0;
									if(player.inRange(target)&&get.attitude(target,player)<0) return true;
									return true;
								});
							}
							"step 1"
							if(result.bool){
								event.saohua1=['今日起，大人便是吕布的义父了','吕布向皇天后土立誓，拜大人为义父'].randomGet();
								event.saohua2=['不可不可，万万不可！','将军使不得呀！'].randomGet();
								player.logSkill('splbsf_renfu',result.targets[0]);
								player.storage.splbsf=result.targets[0];
								if(!result.targets[0].storage.splbyf) result.targets[0].storage.splbyf=[];
								result.targets[0].storage.splbyf.push(player);
								if(result.targets[0].hasSkill('splbyf')) result.targets[0].removeSkill('splbyf');
								result.targets[0].addSkill('splbyf');
								if(player.group!=result.targets[0].group&&player.group!='shen'&&result.targets[0].group!='shen') player.group=result.targets[0].group;
								player.chat(event.saohua1);
								player.storage.splbsf.chat(event.saohua2);
								event.goto(4);
							}
							"step 2"
							if(player.storage.splbsf&&player.countCards('he')>=1){
								var next=player.chooseCardTarget({
									position:'he',
									filterCard:lib.filter.cardDiscardable,
									filterTarget:function(card,player,target){
										return target!=player&&target!=player.storage.splbsf;
									},
									ai1:function(card){
										var player=_status.event.player;
										return 4-get.value(card);
									},
									ai2:function(target){
										var player=_status.event.player;
										if(player.inRange(target)&&get.attitude(target,player)<0&&target.hp<=2&&target.countCards('h')<4) return 1;
										return -1;
									},
									prompt:get.prompt('splbsf'),
									prompt2:'<center>弃置一张牌，换一位义父</center>',
								});
							}
							"step 3"
							if(result.bool){
								event.saohua3=['拜你为义父，才是至真至切之情','义父大人，吕布无眼，不识国贼，今弃暗投明，容吾将功赎罪'].randomGet();
								event.saohua4=['不可不可，万万不可！','将军使不得呀！'].randomGet();
								player.discard(result.cards);
								if(player.storage.splbsf){
									event.yifu=player.storage.splbsf;
									if(event.yifu.storage.splbyf.contains(player)) event.yifu.storage.splbyf.remove(player);
									event.yifu.removeSkill('splbyf');
									if(event.yifu.storage.splbyf.length>0) event.yifu.addSkill('splbyf');
								}
								player.logSkill('splbsf_renfu',result.targets[0]);
								player.storage.splbsf=result.targets[0];
								if(!result.targets[0].storage.splbyf) result.targets[0].storage.splbyf=[];
								result.targets[0].storage.splbyf.push(player);
								if(result.targets[0].hasSkill('splbyf')) result.targets[0].removeSkill('splbyf');
								result.targets[0].addSkill('splbyf');
								if(player.group!=result.targets[0].group&&player.group!='shen'&&result.targets[0].group!='shen') 	player.group=result.targets[0].group;
								player.chat(event.saohua3);
								player.storage.splbsf.chat(event.saohua4);
							}
							"step 4"
						},
                        sub:true,
                    },
                    damage:{
                        audio:"ext:神怒降世:1",
                        trigger:{
                            source:"damageBegin1",
                        },
                        forced:true,
                        filter:function(event,player){
							return event.card&&event.card.name=='sha'&&event.player==player.storage.splbsf;
						},
                        content:function(){
							var saohua1=['奉旨讨贼！','诛杀国贼！'].randomGet();
							var saohua2=['奉先，你！','吾儿，为何叛我！'].randomGet();
							trigger.num++;
							player.chat(saohua1);
							player.storage.splbsf.chat(saohua2);
						},
                        sub:true,
                    },
                    die:{
                        trigger:{
                            global:"die",
                        },
                        direct:true,
                        forced:true,
                        filter:function(event,player){
							return player.storage.splbsf&&event.player==player.storage.splbsf;
						},
                        content:function(){
							if(player.storage.splbsf) delete player.storage.splbsf;
						},
                        sub:true,
                    },
                },
            },
            splbyf:{
				group:["splbyf_juedou","splbyf_die"],
                trigger:{
                    player:"die",
                },
                init:function(player,skill){
					if(!player.storage[skill]) player.storage[skill]=[];
				},
                forceDie:true,
                mark:true,
                unique:true,
                direct:true,
                forced:true,
                marktext:"父",
                intro:{
                    name:"义父",
                    content:"我是$的爸爸",
                },
                content:function(){
					var saohua1=['吾儿何在...','奉先，快救为父...'].randomGet();
					var saohua2=['奉先，你...','吾儿，为何...'].randomGet();
					var saohua3=['吾灭此贼，以报国恩！','杀贼报国，乃吾本分！'].randomGet();
					if(!player.storage.splbyf.contains(trigger.source)) player.chat(saohua1);
					if(player.storage.splbyf.contains(trigger.source)){
						trigger.source.chat(saohua3);
						player.chat(saohua2);
					}
					for(var i=0;i<player.storage.splbyf.length;i++){
						if(player.storage.splbyf[i].storage.splbsf) delete player.storage.splbyf[i].storage.splbsf;
					}
					delete player.storage.splbyf;
					player.removeSkill('splbyf');
				},
				subSkill:{
					juedou:{
						audio:"ext:神怒降世:1",
						enable:"phaseUse",
						usable:1,
						filter:function(event,player){
							return player.countCards('he')>0;
						},
						position:"he",
						filterCard:true,
						selectCard:1,
						check:function(card){
							return 8-get.value(card);
						},
						filterTarget:function(card,player,target){
							if(ui.selected.targets.length){
								return player!=target&&!player.storage.splbyf.contains(target);
							}
							else return player!=target&&player.storage.splbyf.contains(target);
						},
						selectTarget:2,
						multitarget:true,
						targetprompt:["发起决斗","被儿子打"],
						content:function(){
							"step 0"
							event.saohua=['吾儿奉先，天下无敌！','吾儿在此，谁敢造次！'].randomGet();
							"step 1"
							targets[0].logSkill('splbsf');
							player.chat(event.saohua);
							targets[0].useCard({name:'juedou',isCard:true},targets[1]);
						},
						ai:{
							order:function(){
								return get.order({name:'juedou'})+1;
							},
							result:{
								target:function(player,target){
									if(ui.selected.targets.length){
										return -1;
									}
									else{
										return 1||-1;
									}
								},
							},
						},
						sub:true,
					},
                    die:{
                        trigger:{
                            global:"die",
                        },
                        direct:true,
                        forced:true,
                        filter:function(event,player){
							return player.storage.splbyf.contains(event.player);
						},
                        content:function(){
							player.storage.splbyf.remove(trigger.player);
							if(player.storage.splbyf.length<1) player.removeSkill('splbyf');
						},
                        sub:true,
                    },
				},
            },
            splbws:{
                shaRelated:true,
                audio:"ext:神怒降世:1",
                forced:true,
                locked:true,
                group:["splbws_sha","splbws_juedou"],
                subSkill:{
                    sha:{
                        audio:"splbws",
                        trigger:{
                            player:"useCardToPlayered",
                        },
                        forced:true,
                        filter:function(event,player){
							return event.card.name=='sha'&&!event.getParent().directHit.contains(event.target);
						},
                        logTarget:"target",
                        content:function(){

							var id=trigger.target.playerid;
							var map=trigger.getParent().customArgs;
							if(!map[id]) map[id]={};
							if(typeof map[id].shanRequired=='number'){
								map[id].shanRequired++;
							}
							else{
								map[id].shanRequired=2;
							}
						},
                        ai:{
                            "directHit_ai":true,
                            skillTagFilter:function(player,tag,arg){
								if(arg.card.name!='sha'||arg.target.countCards('h','shan')>1) return false;
							},
                        },
                        sub:true,
                    },
                    juedou:{
                        audio:"ext:神怒降世:1",
                        trigger:{
                            player:"useCardToPlayered",
                            target:"useCardToTargeted",
                        },
                        forced:true,
                        logTarget:function(trigger,player){
							return player==trigger.player?trigger.target:trigger.player
						},
                        filter:function(event,player){
							return event.card.name=='juedou';
						},
                        content:function(){
							var id=(player==trigger.player?trigger.target:trigger.player)['playerid'];
							var idt=trigger.target.playerid;
							var map=trigger.getParent().customArgs;
							if(!map[idt]) map[idt]={};
							if(!map[idt].shaReq) map[idt].shaReq={};
							if(!map[idt].shaReq[id]) map[idt].shaReq[id]=1;
							map[idt].shaReq[id]++;
						},
                        ai:{
                            "directHit_ai":true,
                            skillTagFilter:function(player,tag,arg){
								if(arg.card.name!='juedou'||Math.floor(arg.target.countCards('h','sha')/2)>player.countCards('h','sha')) return false;
							},
                        },
                        sub:true,
                    },
                },
            },
            xjpj:{
                audio:"ext:神怒降世:1",
                group:"xjpj_pindian",
                trigger:{
                    global:"judge",
                },
                direct:true,
                filter:function(event,player){
					return player.countCards('he')>0;
				},
				content:function(){
					"step 0"
					player.chooseCard(get.translation(trigger.player)+'的'+(trigger.judgestr||'')+'判定为'+get.translation(trigger.player.judging[0])+'，'+get.prompt('xjpj')+'','he',function(card){
						if(get.color(card)==get.color(trigger.player.judging[0])) return false;
						var player=_status.event.player;
						var mod2=game.checkMod(card,player,'unchanged','cardEnabled2',player);
						if(mod2!='unchanged') return mod2;
						var mod=game.checkMod(card,player,'unchanged','cardRespondable',player);
						if(mod!='unchanged') return mod;
						return true;
					}).set('ai',function(card){
						var trigger=_status.event.getTrigger();
						var player=_status.event.player;
						var judging=_status.event.judging;
						var result=trigger.judge(card)-trigger.judge(judging);
						var attitude=get.attitude(player,trigger.player);
						if(attitude==0||result==0) return 0;
						if(attitude>0){
							return result;
						}
						else{
							return -result;
						}
					}).set('judging',trigger.player.judging[0]);
					"step 1"
					if(result.bool){
						player.respond(result.cards,'highlight','xjpj','noOrdering');
					}
					else{
						event.finish();
					}
					"step 2"
					if(result.bool){
						player.$gain2(trigger.player.judging[0]);
						player.gain(trigger.player.judging[0]);
						trigger.player.judging[0]=result.cards[0];
						trigger.orderingCards.addArray(result.cards);
						game.log(trigger.player,'的判定牌改为',result.cards[0]);
					}
					"step 3"
					game.delay(2);
				},
                ai:{
                    expose:0.25,
                    threaten:0.25,
                },
                subSkill:{
                    pindian:{
                        audio:"xjpj",
                        direct:true,
                        trigger:{
                            global:"compare",
                        },
                        filter:function(event,player){
							return player.countCards('he')>0;
						},
                        content:function(){
							"step 0"
							player.chooseControl('替换'+get.translation(trigger.player)+'的拼点牌','替换'+get.translation(trigger.target)+'的拼点牌','取消').set('prompt',get.prompt('xjpj')).set('ai',function(target){
								var ketihuan1=0;
								var ketihuan2=0;
								var ketihuan3=0;
								var ketihuan4=0;
								var ketihuan5=0;
								var ketihuan6=0;
								var shoupai=player.getCards('he');
								for (var i=0;i<shoupai.length;i++) {
									var card=shoupai[i];
									if (get.color(card)!=get.color(trigger.card1)&&card.number>trigger.card1.number){
										ketihuan1++;
									}
									if (get.color(card)!=get.color(trigger.card1)&&card.number<trigger.card1.number){
										ketihuan2++;
									}
									if (get.color(card)!=get.color(trigger.card2)&&card.number>trigger.card2.number){
										ketihuan3++;
									}
									if (get.color(card)!=get.color(trigger.card2)&&card.number<trigger.card2.number){
										ketihuan4++;
									}
									if (get.color(card)!=get.color(trigger.card1)&&card.number==trigger.card1.number){
										ketihuan5++;
									}
									if (get.color(card)!=get.color(trigger.card2)&&card.number==trigger.card2.number){
										ketihuan6++;
									}
								}
								if(get.attitude(player,trigger.player)<0&&trigger.card1.number>trigger.card2.number){
									if(player.countCards('he')>0){
										if(ketihuan4>0||ketihuan6>0){
											return '替换'+get.translation(trigger.player)+'的拼点牌';
										}
										if(ketihuan1>0||ketihuan5>0){
											return '替换'+get.translation(trigger.target)+'的拼点牌';
										}
									}
								}
								if(get.attitude(player,trigger.target)<0&&trigger.card1.number<trigger.card2.number){
									if(player.countCards('he')){
										if(ketihuan2>0||ketihuan5>0){
											return '替换'+get.translation(trigger.target)+'的拼点牌';
										}
										if(ketihuan3>0||ketihuan6>0){
											return '替换'+get.translation(trigger.player)+'的拼点牌';
										}
									}
								}
								return '取消';
							});
							"step 1"
							if(result.control=='替换'+get.translation(trigger.player)+'的拼点牌') event.goto(2);
							if(result.control=='替换'+get.translation(trigger.target)+'的拼点牌') event.goto(4);
							if(result.control=='取消') event.goto(6);
							"step 2"
							player.chooseCard(get.translation(trigger.player)+'的拼点牌为'+get.translation(trigger.card1)+'，'+get.prompt('xjpj')+'','he',function(card){
								if(get.color(card)==get.color(trigger.card1)) return false;
								return true;
							}).set('ai',function(card){
								var ketihuan3=0;
								var ketihuan4=0;
								var shoupai=player.getCards('he');
								for (var i=0;i<shoupai.length;i++) {
									var card=shoupai[i];
									if (get.color(card)!=get.color(trigger.card2)&&card.number>trigger.card2.number){
										ketihuan3++;
									}
									if (get.color(card)!=get.color(trigger.card2)&&card.number<trigger.card2.number){
										ketihuan4++;
									}
								}
								if(get.attitude(player,trigger.player)<0){
									if(player.countCards('he')>0){
										if(card.number<trigger.card2.number) return 1;
										if(card.number==trigger.card2.number&&ketihuan4<1) return 1;
									}
								}
								if(get.attitude(player,trigger.player)>0){
									if(player.countCards('he')>0){
										if(card.number>trigger.card2.number) return 1;
										if(card.number==trigger.card2.number&&ketihuan3<1) return 1;
									}
								}
								return 4-get.value(card);
							});
							"step 3"
							if(result.bool){
								player.respond(result.cards,'highlight','xjpj','noOrdering');
								player.line(trigger.player);
								var huode=trigger.card1;
								player.gain(huode);
								trigger.num1=result.cards[0].number;
								trigger.card1=result.cards[0];
								game.log(trigger.player,'的拼点牌改为',result.cards[0]);
								event.goto(6);
							}
							else{
								event.goto(6);
							}
							"step 4"
							player.chooseCard(get.translation(trigger.target)+'的拼点牌为'+get.translation(trigger.card2)+'，'+get.prompt('xjpj')+'','he',function(card){
								if(get.color(card)==get.color(trigger.card2)) return false;
								return true;
							}).set('ai',function(card){
								var ketihuan1=0;
								var ketihuan2=0;
								var shoupai=player.getCards('he');
								for (var i=0;i<shoupai.length;i++) {
									var card=shoupai[i];
									if (get.color(card)!=get.color(trigger.card1)&&card.number>trigger.card1.number){
										ketihuan1++;
									}
									if (get.color(card)!=get.color(trigger.card1)&&card.number<trigger.card1.number){
										ketihuan2++;
									}
								}
								if(get.attitude(player,trigger.target)<0){
									if(player.countCards('he')>0){
										if(card.number<trigger.card1.number) return 1;
										if(card.number==trigger.card1.number&&ketihuan2<1) return 1;
									}
								}
								if(get.attitude(player,trigger.target)>0){
									if(player.countCards('he')>0){
										if(card.number>trigger.card1.number) return 1;
										if(card.number==trigger.card1.number&&ketihuan1<1) return 1;
									}
								}
								return 4-get.value(card);
							});
							"step 5"
							if(result.bool){
								player.respond(result.cards,'highlight','xjpj','noOrdering');
								player.line(trigger.target);
								var huode=trigger.card2;
								player.gain(huode);
								trigger.num2=result.cards[0].number;
								trigger.card2=result.cards[0];
								game.log(trigger.target,'的拼点牌改为',result.cards[0]);
							}
							"step 6"
						},
						ai:{
                            expose:0.25,
                            threaten:0.25,
                        },
                        sub:true,
                    },
                },
            },
            xjjx:{
                audio:"ext:神怒降世:1",
                trigger:{
                    global:"phaseUseBegin",
                },
                filter:function(event,player){
					return player.countCards('h')>0&&event.player!=player;
				},
                direct:true,
                check:function(event,player){
					return get.attitude(player,event.player)>0;
				},
                content:function(){
					"step 0"
					player.chooseTarget(get.prompt('xjpj'),'<center>与另一名角色拼点：1.胜，当前回合的角色摸两张牌，然后你摸一张牌 2.负，你摸一张牌</center>',
										function(card,player,target){
						return target!=trigger.player&&target!=player&&target.countCards('h')>0;
					}).set('ai',function(target){
						if(get.attitude(player,trigger.player)<0) return -1;
						return -get.attitude(player,target);
					});
					"step 1"
					if(result.bool&&result.targets&&result.targets.length){
						player.logSkill('xjjx',result.targets);
						event.pdmb=result.targets[0];
					}
					else event.goto(4);
					"step 2"
					player.chooseToCompare(event.pdmb);
					"step 3"
					if(result.bool){
						trigger.player.draw(2);
						player.draw();
					}
					else{
						player.draw();
					}
					"step 4"
				},
                ai:{
                    expose:0.25,
                    threaten:0.55,
                },
            },
            gyzfws:{
                audio:"ext:神怒降世:1",
				group:"gyzfws_damage",
                mod:{
                    targetInRange:function (card){
						if(get.suit(card)=='diamond'&&card.name=='sha') return true;
					},
                },
				subSkill:{
					damage:{
						trigger:{
							source:"damageBegin1",
						},
						filter:function(event){
							return event.card&&event.card.name=='sha'&&get.suit(event.card)=='heart';
						},
						direct:true,
						forced:true,
						content:function(){
							trigger.num++;
						},
						sub:true,
					},
				},
                enable:["chooseToRespond","chooseToUse"],
                filterCard:function(card,player){
					if(get.zhu(player,'shouyue')) return true;
					return get.color(card)=='red';
				},
                position:"he",
                viewAs:{
                    name:"sha",
                },
                viewAsFilter:function(player){
					if(get.zhu(player,'shouyue')){
						if(!player.countCards('he')) return false;
					}
					else{
						if(!player.countCards('he',{color:'red'})) return false;
					}
				},
                prompt:"将一张红牌当【杀】使用或打出",
                check:function(card){return 4-get.value(card)},
                ai:{
                    respondSha:true,
                    skillTagFilter:function(player){
						if(get.zhu(player,'shouyue')){
							if(!player.countCards('he')) return false;
						}
						else{
							if(!player.countCards('he',{color:'red'})) return false;
						}
					},
                    canLink:function(player,target,card){
						if(!target.isLinked()&&!player.hasSkill('wutiesuolian_skill')) return false;
						if(target.mayHaveShan()&&!player.hasSkillTag('directHit_ai',true,{
							target:target,
							card:card,
						},true)) return false;
						if(player.hasSkill('jueqing')||target.hasSkill('gangzhi')||target.hasSkill('gangzhi')) return false;
						return true;
					},
                    basic:{
                        useful:[5,1],
                        value:[5,1],
                    },
                    order:function(item,player){
						if(player.hasSkillTag('presha',true,null,true)) return 10;
						if(lib.linked.contains(get.nature(item))){
							if(game.hasPlayer(function(current){
								return current!=player&&current.isLinked()&&player.canUse(item,current,null,true)&&get.effect(current,item,player,player)>0&&lib.card.sha.ai.canLink(player,current,item);
							})&&game.countPlayer(function(current){
								return current.isLinked()&&get.damageEffect(current,player,player,get.nature(item))>0;
							})>1) return 3.1;
							return 3;
						}
						return 3.05;
					},
                    result:{
                        target:function(player,target,card,isLink){
							var eff=function(){
								if(!isLink&&player.hasSkill('jiu')){
									if(!target.hasSkillTag('filterDamage',null,{
										player:player,
										card:card,
										jiu:true,
									})){
										if(get.attitude(player,target)>0){
											return -7;
										}
										else{
											return -4;
										}
									}
									return -0.5;
								}
								return -1.5;
							}();
							if(!isLink&&target.mayHaveShan()&&!player.hasSkillTag('directHit_ai',true,{
								target:target,
								card:card,
							},true)) return eff/1.2;
							return eff;
						},
                    },
                    tag:{
                        respond:1,
                        respondShan:1,
                        damage:function(card){
							if(card.nature=='poison') return;
							return 1;
						},
                        natureDamage:function(card){
							if(card.nature) return 1;
						},
						fireDamage:function(card,nature){
							if(card.nature=='fire') return 1;
						},
                        thunderDamage:function(card,nature){
							if(card.nature=='thunder') return 1;
						},
                        poisonDamage:function(card,nature){
							if(card.nature=='poison') return 1;
						},
                    },
                },
            },
            gyzfpx:{
                audio:"ext:神怒降世:1",
                trigger:{
                    player:"shaMiss",
                },
                forced:true,
                content:function(){
					player.addTempSkill('olpaoxiao2');
					player.addMark('olpaoxiao2',1,false);	
				},
                mod:{
                    cardUsable:function (card,player,num){
						if(card.name=='sha') return Infinity;
					},
                },
            },
            zczjsy:{
                audio:"ext:神怒降世:1",
                trigger:{
                    player:"phaseUseEnd",
                },
                filter:function(event,player){
					return player.countCards('h')>0;
				},
                direct:true,
                content:function(){
					"step 0"
					event.yjgg=[];
					"step 1"
					var next=player.chooseCardTarget({
						position:'h',
						selectCard:[1,Infinity],
						filterTarget:function(card,player,target){
							return player!=target&&!event.yjgg.contains(target);
						},
						ai1:function(card){
							var player=_status.event.player;
							if(player.maxHp-player.hp==1&&card.name=='du') return 30;
							var check=_status.event.check;
							if(check<1) return 0;
							if(player.hp>1&&check<2) return 0;
							return get.unuseful(card)+9;
						},
						ai2:function(target){
							var att=get.attitude(_status.event.player,target);
							if(ui.selected.cards.length==1&&ui.selected.cards[0].name=='du') return 1-att;
							return att-2;
						},
						prompt:get.prompt('zczjsy'),
						prompt2:'<center>将任意数量的手牌交给一名其他角色</center>',
					});
					"step 2"
					if(result.bool){
						event.yjgg.push(result.targets[0]);
						event.mubiao=result.targets[0];
						event.mopai=result.cards.length;
						player.logSkill('zczjsy',result.targets);
						result.targets[0].gain(result.cards,player,'giveAuto');
					}
					else event.goto(4);
					"step 3"
					if(event.mubiao.countCards('h')<=event.mubiao.hp){
						player.draw(event.mopai);
						event.goto(1);
					}
					"step 4"
				},
                ai:{
                    expose:0.25,
                    threaten:1.7,
                },
            },
            zczjtb:{
                audio:"ext:神怒降世:1",
                trigger:{
                    player:"phaseDrawBegin2",
                },
                filter:function(event,player){
					return !event.numFixed;
				},
                check:function(event,player){
					if(player.hp-player.countCards('h')>=2) return true;
					return false;
				},
                content:function(){
					trigger.num=0;
					if(player.hp-player.countCards('h')>0) trigger.num=player.hp-player.countCards('h');
				},
                ai:{
                    threaten:0.25,
                },
            },
            ysjj:{
                audio:"ext:神怒降世:1",
                trigger:{
                    player:"phaseDrawBegin2",
                },
                forced:true,
                filter:function(event,player){
					return !event.numFixed;
				},
                content:function(){
					var num=game.countPlayer(function(current){
						if(current.group==player.group||(current.hasSkill('ysmr2')&&current!=player)) return true;
					});
					if(num>0){
						if(num<4) trigger.num+=num;
						else trigger.num+=4;
					}
				},
                ai:{
                    threaten:1.5,
                },
            },
            ysmr:{
                audio:"ext:神怒降世:1",
                enable:"phaseUse",
                unique:true,
                mark:true,
                skillAnimation:true,
                animationStr:"沐染",
                animationColor:"wood",
                limited:true,
                init:function(player){
					player.storage.ysmr=false;
				},
                filterTarget:function(card,player,target){
					if(player.storage.ysmr==true) return false;
					if(player.identity=='fan') return target.identity!='zhu'&&target!=player;
					return target!=player;
				},
                filter:function(event,player){
					if(player.storage.ysmr) return false;
					return true;
				},
                content:function(){
					player.awakenSkill('ysmr');
					player.storage.ysmr=true;
					if(!target.hasSkill('ysjj')) target.addSkill('ysjj');
					if(!target.hasSkill('ysmr2'))target.addSkill('ysmr2');
					if(!player.hasSkill('ysmr2'))player.addSkill('ysmr2');
				},
                intro:{
                    name:"沐染",
                    content:"limited",
                },
                ai:{
                    expose:0.45,
                    threaten:1.5,
                    order:1,
                    result:{
                        target:function(player,target){
							return 1;
						},
                    },
                },
            },
            "ysmr2":{
                mark:true,
                unique:true,
                intro:{
                    name:"沐染",
                    content:"带有此标记的角色死亡时，所有带有此标记的角色也会死亡",
                },
                direct:true,
                forced:true,
                trigger:{
                    global:"die",
                },
                filter:function(event,player){
					return event.player!=player&&event.player.hasSkill('ysmr2');
				},
				content:function(){
					player.die();
				},
			},
            phyj:{
                mod:{
                    cardEnabled:function(card,player){
						if(get.type(card)=='basic'&&player.countCards('h',{name:card.name})<2&&player.countCards('h')>player.hp) return false;
					},
				},
                audio:"ext:神怒降世:2",
                group:"phyj_usecard",
                trigger:{
                    player:"drawBegin",
                },
                forced:true,
                content:function(){
					trigger.num*=2;
				},
                subSkill:{
                    usecard:{
                        trigger:{
                            player:"useCard",
                        },
                        filter:function(event,player){
							if(get.type(event.card)=='equip') return false;
							if((get.type(event.card)=='delay'||get.type(event.card)=='trick')&&event.card.isCard&&player.countCards('h')>player.hp) return true;
							return get.type(event.card)=='basic'&&player.countCards('h',{name:event.card.name})>0&&event.card.isCard&&player.countCards('h')>player.hp;
						},
                        forced:true,
                        content:function(){
							if(get.type(trigger.card)=='basic') player.chooseToDiscard('〖义军〗：弃置一张同名的手牌',1,true,{name:trigger.card.name});
							if(get.type(trigger.card)=='trick'||get.type(trigger.card)=='delay'){
								var qipaishu=player.hp;
								if(qipaishu>player.countCards('h')-player.hp) qipaishu=player.countCards('h')-player.hp;
								player.chooseToDiscard('〖义军〗：弃置'+get.cnNumber(qipaishu)+'张牌',qipaishu,true);
							}
						},
                        sub:true,
                    },
                },
            },
            pqqp:{
                audio:"ext:神怒降世:1",
                trigger:{
                    player:"useCardToPlayered",
                },
                direct:true,
                filter:function(event,player){
					return event.card.name=='sha'&&event.target.countCards('h')>0&&event.targets.length==1;
				},
                logTarget:"target",
                content:function(){
					"step 0"
					player.chooseTarget(get.prompt('pqqp'),'<center>令另一名角色与'+get.translation(trigger.target)+'展示一张手牌</center>',function(card,player,target){
						return player.inRange(target)&&target!=player&&target!=trigger.target&&target.countCards('h')>0;
					}).set('ai',function(target){
						var player=_status.event.player;
						return get.damageEffect(target,player,player);
					});
					"step 1"
					if(result.bool&&result.targets&&result.targets.length){
						player.logSkill('pqqp',result.targets);
						event.jnmb=result.targets[0];
						event.goto(2);
					}
					else event.goto(8);
					"step 2"
					trigger.target.chooseCard('展示一张手牌',true);
					"step 3"
					if(result.bool) event.card1=result.cards[0];
					else event.goto(8);
					"step 4"
					event.jnmb.chooseCard('展示一张手牌',true);
					"step 5"
					if(result.bool) event.card2=result.cards[0];
					else event.goto(8);
					"step 6"
					trigger.target.$compare(event.card1,event.jnmb,event.card2);
					game.delay(4);
					game.log(trigger.target,'展示了',event.card1);
					game.log(event.jnmb,'展示了',event.card2);
					"step 7"
					if(get.type(event.card1)==get.type(event.card2)) trigger.getParent().directHit.push(trigger.target);
					else{
						trigger.getParent().targets.push(event.jnmb);
						trigger.getParent().triggeredTargets2.push(event.jnmb);
						game.log(event.jnmb,'成为了',trigger.card,'的额外目标');
					}
					"step 8"
				},
                ai:{
                    expose:0.4,
                    threaten:1,
                },
            },
            pqqy:{
                mod:{
                    globalTo:function(from,to,distance){
						return distance+to.storage.pqqy;
					},
                },
                audio:"ext:神怒降世:1",
                group:["pqqy_phaseBegin","pqqy_mark"],
                init:function(player){
					if(!player.storage.pqqy) player.storage.pqqy=0;
				},
                trigger:{
                    player:"phaseJieshuBegin",
                },
                filter:function(event,player){
					return player.getStat('damage')>0;
				},
                direct:true,
                content:function(){
					"step 0"
					event.num=player.getStat('damage');
					if(event.num>5) event.num=5;
					player.chooseControl('摸'+get.cnNumber(event.num)+'张牌','距离加'+get.cnNumber(event.num)).set('prompt','〖倩影〗：选择一项').set('ai',function(target){
						return ['摸'+get.cnNumber(event.num)+'张牌','距离加'+get.cnNumber(event.num)].randomGet();
					});
					"step 1"
					if(result.control=='摸'+get.cnNumber(event.num)+'张牌'){
						player.logSkill('pqqy');
						player.draw(event.num);
					}
					else{
						player.storage.pqqy=event.num;
						player.logSkill('pqqy');
						if(player.countMark('pqqy_mark')>0) player.removeMark('pqqy_mark',player.countMark('pqqy_mark'));
						player.addMark('pqqy_mark',event.num);
					}
				},
                subSkill:{
                    phaseBegin:{
                        trigger:{
                            player:"phaseBegin",
                        },
                        direct:true,
                        forced:true,
                        filter:function(event,player){
							return player.storage.pqqy!=0;
						},
                        content:function(){
							if(player.countMark('pqqy_mark')>0) player.removeMark('pqqy_mark',player.countMark('pqqy_mark'));
							player.storage.pqqy=0;
						},
                        sub:true,
                    },
                    mark:{
                        intro:{
                            name:"倩影",
                            content:"与该角色计算距离时+#",
                        },
                        sub:true,
                    },
                },
                ai:{
                    threaten:1,
                },
            },
            zjzcyl:{
                audio:"ext:神怒降世:2",
                trigger:{
                    player:"phaseJieshuBegin",
                },
                filter:function(event,player){
					return player.getStat('damage')>0;
				},
                direct:true,
                content:function(){
					"step 0"
					player.chooseTarget(get.prompt('zjzcyl'),'<center>对一名角色造成1点雷电伤害</center>',function(card,player,target){
						return target!=player;
					}).set('ai',function(target){
						return get.damageEffect(target,player,player,'thunder');
					});
					"step 1"
					if(result.bool&&result.targets&&result.targets.length){
						if(player.name=='snjs_zhangjvzhangchun') var skillname='zjzcyl_zjzc';
						else var skillname='zjzcyl_zj';
						player.logSkill(skillname,result.targets);
						result.targets[0].damage('thunder',1,'nocard');
					}
				},
                subSkill:{
                    zj:{
						audio:"ext:神怒降世:1",
                        sub:true,
                    },
                    zjzc:{
						audio:"ext:神怒降世:1",
                        sub:true,
                    },
                },
                ai:{
                    expose:0.25,
                    threaten:1,
                },
            },
            zjzcmt:{
                audio:"ext:神怒降世:2",
                trigger:{
                    player:["useCard","respond","loseAfter"],
                },
                filter:function(event,player,name){
					if(name=='loseAfter'){
						if(event.type!='discard') return false;
						for(var i=0;i<event.cards2.length;i++){
							if(get.name(event.cards2[i],event.player)=='shan'&&get.position(event.cards2[i],true)=='d'){
								return true;
							}
						}
						return false;
					}
					else return event.card.name=='shan';
				},
                direct:true,
                content:function(){
					"step 0";
					player.chooseTarget(get.prompt('zjzcmt'),'<center>选择要横置的角色</center>',player.isDamaged()?[1,2]:1,function(card,player,target){
						return !target.isLinked();
					}).set('ai',function(target){
						return -get.attitude(player,target);
					});
					"step 1"
					if(result.bool){
						if(player.name=='snjs_zhangjvzhangchun') var skillname='zjzcmt_zjzc';
						else var skillname='zjzcmt_zc';
						player.logSkill(skillname,result.targets);
						for(var i=0;i<result.targets.length;i++) result.targets[i].link(true);
					}
				},
                subSkill:{
                    zc:{
						audio:"ext:神怒降世:1",
                        sub:true,
                    },
                    zjzc:{
						audio:"ext:神怒降世:1",
                        sub:true,
                    },
                },
                ai:{
                    expose:0.25,
                    threaten:0.5,
                },
            },
            spzcyl:{
                audio:"ext:神怒降世:1",
                group:["spzcyl_damage","spzcyl_remove"],
                trigger:{
                    global:"phaseJieshuBegin",
                },
                filter:function(event,player){
					return game.countPlayer(function(current){return current!=player&&current.hasSkill('spzcyl2')})>0;
				},
                check:function(event,player){
					var foujue=0;
					var diren=game.countPlayer(function(current){
						return (current!=player&&current.hasSkill('spzcyl2')&&get.attitude(player,current)<0);
					});
					var duiyou=game.countPlayer(function(current){
						if(current!=player&&current.hasSkill('spzcyl2')&&get.attitude(player,current)>0){
							if(current.hp<2&&player.countCards('h',{name:'tao'})<1) foujue++;
							return true;
						}
					});
					if(diren<=duiyou||foujue>0) return false;
					return true;
				},
                content:function (){
					var mubiao=[];
					game.countPlayer(function(current){
						if(current!=player&&current.hasSkill('spzcyl2')) mubiao.push(current);
					});
					player.line(mubiao,'green');
					for(var i=0;i<mubiao.length;i++){
						mubiao[i].damage('fire',1,'nocard');
						mubiao[i].removeSkill('spzcyl2');
					}
				},
				ai:{
					expose:0.3,
					fireAttack:true,
				},
                subSkill:{
                    damage:{
                        trigger:{
                            global:"damageEnd",
                        },
                        direct:true,
                        forced:true,
                        filter:function(event,player){
							if(get.type(event.card)!='trick'&&event.nature=='fire'&&event.source==player) return false;
							if(event.player.hasSkill('spzcyl2')) return false;
							if(event.player==player) return false;
							return event.player.isAlive()&&(event.nature=='fire'||get.type(event.card)=='trick');
						},
                        content:function(){
							trigger.player.addSkill('spzcyl2');
						},
                        sub:true,
                    },
                    remove:{
                        trigger:{
                            global:"phaseEnd",
                        },
                        direct:true,
                        forced:true,
                        filter:function(event,player){
							return game.countPlayer(function(current){return 	current!=player&&current.hasSkill('spzcyl2')})>0;
						},
                        content:function(){
							game.countPlayer(function(current){
								if(current.hasSkill('spzcyl2')) current.removeSkill('spzcyl2');
							});
						},
                        sub:true,
                    },
                },
            },
            spzclr:{
                audio:"ext:神怒降世:1",
				intro:{
					content:"cards",
				},
				locked:false,
                trigger:{
                    player:"phaseUseBegin",
                },
				frequent:true,
                content:function (){
					"step 0"
					event.names=[];
					event.cards=[];
					event.cishu=1+player.getDamagedHp();
					while(event.cards.length<3+player.getDamagedHp()){
						var card=get.cardPile2(function(card){
							return !event.cards.contains(card)&&get.color(card)=='red'&&(get.type(card)=='trick'||get.type(card)=='delay');
						});
						if(card){
							event.cards.push(card);
							event.names.push(card.name);
						}
						else break;
					}
					if(event.cards.length<1){
						player.draw();
						event.finish();
					}
					"step 1"
					if(event.cards.length){
						game.cardsGotoOrdering(event.cards);
						player.showCards(event.cards);
					}
					"step 2"
					var next=player.chooseButton(['〖烈蕊〗：选择要使用的牌<br>(剩余次数:'+get.cnNumber(event.cishu)+')',[event.cards,'card']]);
					next.set('filterButton',function(button){
						return lib.filter.filterCard(button.link,player,_status.event.getParent());
					});
					next.set('ai',function(button,player){
						return get.value(button.link);
					});
					"step 3"
					if(result.bool&&result.links&&result.links.length){
						event.shiyong=result.links.slice(0);
					}
					else event.goto(6)
					"step 4"
					player.chooseUseTarget(event.shiyong);
					"step 5"
					if(result.bool) event.cards.remove(event.shiyong);
					else{
						event.cards.remove(event.shiyong);
						player.$throw(event.shiyong,1000,'spzclr','highlight');
					}
					event.cishu-=1;
					if(event.cards.length>0&&event.cishu>0) event.goto(2);
					"step 6"
					if(event.cards.length>0) player.$throw(event.cards,1000,'spzclr','highlight');
				},
			},
            "spzcyl2":{
                mark:true,
                marktext:"莲",
                unique:true,
                intro:{
                    name:"业莲",
                    content:"纵火目标",
                },
            },
            zzzrzhmm:{
                audio:"ext:神怒降世:1",
				skillAnimation:true,
				animationColor:"wood",
				juexingji:true,
				derivation:["xinanguo","xindanshou","fenli","pingkou"],
				unique:true,
                group:["zzzrzhmm_zzxag","zzzrzhmm_zrxds","zzzrzhmm_zhfl","zzzrzhmm_zhpk","zzzrzhmm_huihekaishi"],
				init:function(player){
					if(!player.storage.zzzrzhmm) player.storage.zzzrzhmm=false;
					if(!player.storage.zzzrzhmm_zzxag) player.storage.zzzrzhmm_zzxag=false;
					if(!player.storage.zzzrzhmm_zrxds) player.storage.zzzrzhmm_zrxds=false;
					if(!player.storage.zzzrzhmm_zhfl) player.storage.zzzrzhmm_zhfl=false;
					if(!player.storage.zzzrzhmm_zhpk) player.storage.zzzrzhmm_zhpk=false;
				},
				mark:true,
				intro:{
					name:"名门",
					content:function(storage,player,skill){
						var str1=player.storage.zzzrzhmm_zzxag==false?"未发动</center><br>":"已发动</center><br>";
						var str2=player.storage.zzzrzhmm_zrxds==false?"未发动</center><br>":"已发动</center><br>";
						var str3=player.storage.zzzrzhmm_zhfl==false?"未发动</center><br>":"已发动</center><br>";
						var str4=player.storage.zzzrzhmm_zhpk==false?"未发动</center><br>":"已发动</center>";
						return "<center>〖安国〗："+str1+"<center>〖胆守〗："+str2+"<center>〖奋励〗："+str3+"<center>〖平寇〗："+str4;
					},
				},
                subSkill:{
                    zzxag:{
						audio:"anguo",
						skillAnimation:true,
						animationColor:"wood",
                        trigger:{
                            player:["recoverBegin","drawBegin","useCard"],
                        },
                        forced:true,
                        filter:function(event,player){
							if(player.storage.zzzrzhmm==true) return false;
							if(player.storage.zzzrzhmm_zzxag==true) return false;
							if(event.name=='recover') return player.isMinHp();
							if(event.name=='draw') return player.isMinHandcard();
							if(event.name=='useCard') return get.type(event.card)=='equip'&&player.isMinEquip();
							return false;
						},
                        content:function(){
							player.storage.zzzrzhmm_zzxag=true;
							player.storage.zzzrzhmm=true;
							if(!player.hasSkill('xinanguo')){
								player.addSkill('xinanguo');
								game.log(player,'获得了技能','#g〖安国〗');
							}
							player.updateMarks('zzzrzhmm');
							if(player.storage.zzzrzhmm_zzxag==true&&player.storage.zzzrzhmm_zrxds==true&&player.storage.zzzrzhmm_zhfl==true&&player.storage.zzzrzhmm_zhpk==true){
								player.loseMaxHp();
								player.awakenSkill('zzzrzhmm');
							}
						},
                        sub:true,
                    },
                    zrxds:{
						audio:"xindanshou",
						skillAnimation:true,
						animationColor:"wood",
                        trigger:{
                            target:"useCardToTargeted",
                        },
                        forced:true,
                        filter:function(event,player){
							if(player.storage.zzzrzhmm==true) return false;
							if(player.storage.zzzrzhmm_zrxds==true) return false;
							var num=0;
							game.countPlayer2(function(current){
								var history=current.getHistory('useCard');
								for(var j=0;j<history.length;j++){
									if(['basic','trick'].contains(get.type(history[j].card,'trick'))&&history[j].targets&&history[j].targets.contains(player)) num++;
								}
							});
							return num>1&&event.targets&&event.targets.contains(player)&&['basic','trick'].contains(get.type(event.card,'trick'));
						},
                        content:function(){
							player.storage.zzzrzhmm_zrxds=true;
							player.storage.zzzrzhmm=true;
							if(!player.hasSkill('xindanshou')){
								player.addSkill('xindanshou');
								game.log(player,'获得了技能','#g〖胆守〗');
							}
							player.updateMarks('zzzrzhmm');
							if(player.storage.zzzrzhmm_zzxag==true&&player.storage.zzzrzhmm_zrxds==true&&player.storage.zzzrzhmm_zhfl==true&&player.storage.zzzrzhmm_zhpk==true){
								player.loseMaxHp();
								player.awakenSkill('zzzrzhmm');
							}
						},
                        sub:true,
                    },
                    zhfl:{
						audio:"fenli",
						skillAnimation:true,
						animationColor:"wood",
                        trigger:{
                            player:"phaseZhunbeiBegin",
                        },
                        forced:true,
                        filter:function(event,player){
							if(player.storage.zzzrzhmm==true) return false;
							if(player.storage.zzzrzhmm_zhfl==true) return false;
							return player.isMaxHp()||player.isMaxHandcard()||player.isMaxEquip();
						},
                        content:function(){
							player.storage.zzzrzhmm_zhfl=true;
							player.storage.zzzrzhmm=true;
							if(!player.hasSkill('fenli')){
								player.addSkill('fenli');
								game.log(player,'获得了技能','#g〖奋励〗');
							}
							player.updateMarks('zzzrzhmm');
							if(player.storage.zzzrzhmm_zzxag==true&&player.storage.zzzrzhmm_zrxds==true&&player.storage.zzzrzhmm_zhfl==true&&player.storage.zzzrzhmm_zhpk==true){
								player.loseMaxHp();
								player.awakenSkill('zzzrzhmm');
							}
						},
                        sub:true,
                    },
                    zhpk:{
						audio:"pingkou",
						skillAnimation:true,
						animationColor:"wood",
                        trigger:{
                            player:"phaseEnd",
                        },
                        forced:true,
                        filter:function(event,player){
							if(player.storage.zzzrzhmm==true) return false;
							if(player.storage.zzzrzhmm_zhpk==true) return false;
							return player.getHistory('skipped').length>0;
						},
                        content:function(){
							player.storage.zzzrzhmm_zhpk=true;
							player.storage.zzzrzhmm=true;
							if(!player.hasSkill('pingkou')){
								player.addSkill('pingkou');
								game.log(player,'获得了技能','#g〖平寇〗');
							}
							player.updateMarks('zzzrzhmm');
							if(player.storage.zzzrzhmm_zzxag==true&&player.storage.zzzrzhmm_zrxds==true&&player.storage.zzzrzhmm_zhfl==true&&player.storage.zzzrzhmm_zhpk==true){
								player.loseMaxHp();
								player.awakenSkill('zzzrzhmm');
							}
						},
                        sub:true,
                    },
                    huihekaishi:{
                        trigger:{
                            global:"phaseBegin",
                        },
						direct:true,
                        forced:true,
                        filter:function(event,player){
							return player.storage.zzzrzhmm==true;
						},
                        content:function(){
							player.storage.zzzrzhmm=false;
						},
                        sub:true,
                    },
                },
                ai:{
                    threaten:0.5,
                },
            },
            xyfcj:{
                audio:"ext:神怒降世:1",
                group:"xyfcj_zhudong",
                trigger:{
                    player:"damageEnd",
                },
				filter:function(event,player){
					return (event.source!=undefined&&event.num>0);
				},
				logTarget:"source",
				content:function (){
					"step 0"
					event.cishu=trigger.num;
					if(!trigger.source.storage.xyfcj2) trigger.source.storage.xyfcj2=[];
					player.draw(trigger.num);
					"step 1"
					var list=[];
					var listm=[];
					var listv=[];
					if(trigger.source.name1!=undefined) listm=lib.character[trigger.source.name1][3];
					else listm=lib.character[trigger.source.name][3];
					if(trigger.source.name2!=undefined) listv=lib.character[trigger.source.name2][3];
					listm=listm.concat(listv);
					var func=function(skill){
						var info=get.info(skill);
						if(!info||info.charlotte||info.zhuSkill||info.juexingji||info.limited||(info.unique&&!info.gainable)||lib.skill.drlt_duorui.bannedList.contains(skill)||trigger.source.storage.xyfcj2.contains(skill)) return false;
						return true;
					};
					for(var i=0;i<listm.length;i++){
						if(func(listm[i])) list.add(listm[i]);
					}
					event.skills=list;
					if(event.skills.length<1) event.goto(4);
					"step 2"
					if(event.skills.length>0&&event.cishu>0){
						player.chooseControl(event.skills).set('prompt','〖仇决〗：选择其失去的技能').set('ai',function(){return event.skills.randomGet()});
						event.cishu--;
					}
					"step 3"
					event.jineng=result.control;
					trigger.source.storage.xyfcj2.push(event.jineng);
					if(trigger.source.hasSkill(event.jineng)) trigger.source.removeSkill(event.jineng);
					if(!trigger.source.hasSkill('xyfcj2')) trigger.source.addSkill('xyfcj2');
					trigger.source.updateMarks('xyfcj2');
					if(event.cishu>0) event.goto(1);
					"step 4"
				},
				ai:{
					maixie:true,
					"maixie_hp":true,
					effect:{
						target:function (card,player,target){
							if(player.hasSkillTag('jueqing',false,target)) return [1,-1];
						},
					},
				},
				subSkill:{
					zhudong:{
						audio:"xyfcj",
						mod:{
							globalFrom:function(from,to){
								if(to.hasSkill('xyfcj2')){
							return -Infinity;
								}
							},
						},
						enable:"phaseUse",
						usable:1,
						filterTarget:function(card,player,target){
							return player!=target;
						},
						content:function(){
							"step 0"
							var names=[];
							var cards=[];
							while(cards.length<1){
								var card=get.cardPile2(function(card){
									return !cards.contains(card)&&card.name=='sha'&&get.type(card)=='basic';
								});
								if(card){
									cards.push(card);
									names.push(card.name);
								}
								else break;
							}
							player.loseHp(1);
							if(cards.length) player.gain(cards,'gain2');
							if(!target.storage.xyfcj2) target.storage.xyfcj2=[];
							"step 1"
							var list=[];
							var listm=[];
							var listv=[];
							if(target.name1!=undefined) listm=lib.character[target.name1][3];
							else listm=lib.character[target.name][3];
							if(target.name2!=undefined) listv=lib.character[target.name2][3];
							listm=listm.concat(listv);
							var func=function(skill){
								var info=get.info(skill);
								if(!info||info.charlotte||info.zhuSkill||info.juexingji||info.limited||(info.unique&&!info.gainable)||lib.skill.drlt_duorui.bannedList.contains(skill)||target.storage.xyfcj2.contains(skill)) return false;
								return true;
							};
							for(var i=0;i<listm.length;i++){
								if(func(listm[i])) list.add(listm[i]);
							}
							event.skills=list;
							if(event.skills.length<1) event.finish();
							"step 2"
							if(event.skills.length>0){
								player.chooseControl(event.skills).set('prompt','〖仇决〗：选择其失去的技能').set('ai',function(){return event.skills.randomGet()});
								event.cishu--;
							}
							"step 3"
							event.jineng=result.control;
							target.storage.xyfcj2.push(event.jineng);
							if(!target.hasSkill('xyfcj2')) target.addSkill('xyfcj2');
							"step 4"
							if(target.hasSkill(event.jineng)) target.removeSkill(event.jineng);
							target.updateMarks('xyfcj2');
						},
						ai:{
							expose:0.4,
							order:function(){
								return get.order({name:'sha'})+1;
							},
							result:{
								target:function(player,target){
									if(player.hp==1&&(player.countCards('h',{name:'tao'})<1||player.countCards('h',{name:'jiu'})<1)) return 0;
									return -1;
								},
							},
						},
						sub:true,
					},
				},
            },
            "xyfcj2":{
				locked:true,
				silent:true,
				charlotte:true,
                mark:true,
				direct:true,
				forced:true,
                unique:true,
				init:function(player){
					if(!player.storage.xyfcj2) player.storage.xyfcj2=[];
				},
				onremove:function(player,skill){
					for(var i=0;i<player.storage.xyfcj2.length;i++){
						if(!player.hasSkill(player.storage.xyfcj2[i])) player.addSkill(player.storage.xyfcj2[i]);
					}
					delete player.storage.xyfcj2;
				},
				marktext:"仇决",
                intro:{
                    name:"仇决",
                    content:"失去技能：$",
                },
                trigger:{
                    global:"phaseEnd",
                },
				filter:function(event,player){
					return player.getHistory('damage').length>0;
				},
				content:function (){
					player.removeSkill('xyfcj2');
				},
            },
            spczsm:{
				audio:"ext:神怒降世:1",
				enable:"phaseUse",
				usable:1,
				filterCard:true,
				selectCard:2,
				discard:false,
				lose:false,
				delay:0,
				filterTarget:function(card,player,target){
					return player!=target;
				},
				filter:function(event,player){
					return player.countCards('h')>1;
				},
				check:function(card){
					return 11-get.value(card);
				},
				content:function (){
					if(!target.storage.spczsm2) target.storage.spczsm2=[];
					if(!target.storage.spczsm2.contains(player)) target.storage.spczsm2.push(player);
					if(!target.hasSkill('spczsm2')) target.addSkill('spczsm2');
					target.updateMarks('spczsm2');
                    player.give(cards,target);
					player.draw(2);
				},
				ai:{
					threaten:1.5,
					result:{
						target:function(player,target){
							return 1;
						},
					},
					order:10,
					expose:0.4,
				},
            },
            spczsm2:{
                group:"spczsm2_die",
				locked:true,
				charlotte:true,
                mark:true,
                unique:true,
                intro:{
                    name:"歃盟",
                    content:"盟友：$",
                },
				init:function(player){
					if(!player.storage.spczsm2) player.storage.spczsm2=[];
				},
                trigger:{
                    player:"phaseUseBegin",
                },
				filter:function(event,player){
					return player.countCards('h')>0&&player.storage.spczsm2.length>0;
				},
				direct:true,
				forced:true,
				content:function (){
					"step 0"
					event.shuliang=2;
					"step 1"
					if(player.storage.spczsm2.length>1) event.goto(4);
					"step 2"
					if(player.countCards('h')<1) event.goto(6);
					if(player.countCards('h')<2) event.shuliang=player.countCards('h');
					player.chooseCard(true,event.shuliang,'h','〖歃盟〗：选择交给的'+get.translation(player.storage.spczsm2[0])+'牌').set('ai',function(card){
						if(get.attitude(player,player.storage.spczsm2[0])>=0) return 11-get.value(card);
						if(get.attitude(player,player.storage.spczsm2[0])<0) return -get.value(card);
					});
					"step 3"
					if(result.bool&&result.cards.length>0){
						player.storage.spczsm2[0].logSkill('spczsm');
						player.line(player.storage.spczsm2[0]);
						player.give(result.cards,player.storage.spczsm2[0]);
						player.draw(2);
					}
					player.storage.spczsm2=[];
					player.updateMarks('spczsm2');
					event.goto(6);
					"step 4"
					if(player.countCards('h')<1) event.goto(6);
					if(player.countCards('h')<2) event.shuliang=player.countCards('h');
					var next=player.chooseCardTarget({
						filterCard:true,
						filterTarget:function(card,player,target){
							return player.storage.spczsm2.contains(target);
						},
						discard:false,
						lose:false,
						delay:0,
						ai1:function(card){
							return 11-get.value(card);
						},
						ai2:function(target){
							if(get.attitude(player,target)>0) return true;
							return true;
						},
						prompt:'〖歃盟〗：将'+get.cnNumber(event.shuliang)+'张牌交给一名盟友',
					});
					"step 5"
					if(result.bool){
						result.targets[0].logSkill('spczsm');
						player.line(result.targets[0]);
						player.give(result.cards,result.targets[0]);
						player.draw(2);
					}
					player.storage.spczsm2.remove(result.targets[0]);
					player.updateMarks('spczsm2');
					if(player.storage.spczsm2.length>0&&player.countCards('h')>0) event.goto(4);
					"step 6"
					player.removeSkill('spczsm2');
				},
				subSkill:{
                    die:{
                        trigger:{
                            global:"die",
                        },
                        direct:true,
                        forced:true,
                        filter:function(event,player){
							return player.storage.spczsm2.contains(event.player);
						},
                        content:function(){
							player.storage.spczsm2.remove(trigger.player);
							player.updateMarks('xyfcj2');
							if(player.storage.spczsm2.length<1) player.removeSkill('spczsm2');
						},
                        sub:true,
                    },
				},
            },
			spczjf:{
				audio:"ext:神怒降世:1",
				trigger:{
					player:"gainEnd",
				},
				filter:function(event,player){
					var tof=game.countPlayer(function(current){return current.countCards('h')!=player.countCards('h');});
					if(tof<1) return false;
					return event.source&&event.source!=player;
				},
				direct:true,
				content:function(){
					"step 0"
					player.chooseTarget(get.prompt('jszltx'),'<center>选择一名手牌数不等于你的角色</center>',
										function(card,player,target){
						return target.countCards('h')!=player.countCards('h');
					}).set('ai',function(target){
						if(player.isMinHandcard()) return -get.attitude(player,target);
						if(player.isMaxHandcard()) return get.attitude(player,target);
						if(get.attitude(player,target)>=0&&target.countCards('h')<player.countCards('h')) return true;
						if(get.attitude(player,target)<0&&target.countCards('h')>player.countCards('h')) return true;
						return false;
					});
					"step 1"
					if(result.bool&&result.targets&&result.targets.length){
						event.mubiao=result.targets[0];
						player.logSkill('spczjf',result.targets);
						if(event.mubiao.countCards('h')>player.countCards('h')) player.discardPlayerCard(event.mubiao,1,'h',true);
						else result.targets[0].draw();
					}
					else event.goto(3);
					"step 2"
					if(event.mubiao.countCards('h')==event.mubiao.hp) player.draw();
					"step 3"
				},
			},
			syxh:{
				audio:"ext:神怒降世:1",
				enable:"phaseUse",
				usable:1,
				content:function(){
					"step 0"
                	event.card=get.bottomCards(1);
					player.showCards(event.card);
					"step 1"
					if(event.card[0].name!='sha'){
						player.gain(event.card,'log','gain2');
						event.goto(5);
					}
					"step 2"
					player.chooseControl('失去1点体力','取消').set('prompt','〖骁悍〗：选择一项').set('ai',function(card){
						if(player.hp==1&&player.countCards('h',{name:'tao'})<1&&player.countCards('h',{name:'jiu'})<1) return '取消';
						else return '失去1点体力';
					});
					"step 3"
					if(result.control=='失去1点体力'){
						player.loseHp();
						if(!player.hasSkill('syxh_mingzhong')) player.addSkill('syxh_mingzhong');
					}
					"step 4"
					if(get.color(event.card)=='red'&&!player.hasSkill('syxh_red')) player.addSkill('syxh_red');
					player.chooseUseTarget('sha',true,false,'nodistance');
					game.cardsDiscard(event.card);
					game.log(event.card,'被置入了弃牌堆');
					player.update();
					"step 5"
				},
				ai:{
					order:function(){
						return get.order({name:'sha'})-1;
					},
					result:{
						player:1,
					},
				},
				subSkill:{
					mingzhong:{
						trigger:{
							player:"useCardToTargeted",
						},
						filter:function(event,player){
							return event.card.name=='sha';
						},
						direct:true,
						forced:true,
						content:function(){
							trigger.getParent().directHit.push(trigger.target);
							player.removeSkill('syxh_mingzhong');
						},
						sub:true,
					},
					red:{
						trigger:{
							source:"damageBegin1",
						},
						filter:function(event,player){
							return event.card.name=='sha';
						},
						direct:true,
						forced:true,
						content:function(){
							trigger.num++;
							player.removeSkill('syxh_red');
						},
						sub:true,
					},
				},
			},
			sygl:{
				audio:"ext:神怒降世:1",
				trigger:{
					player:"useCardEnd",
				},
				filter:function (event,player,name){
					return event.card.name=='sha'&&event.cards.filterInD().length>0;
				},
				forced:true,
				content:function(){
					"step 0"
					event.cards=trigger.cards.filterInD();
					if(event.cards.length>1){
						player.chooseButton(true,event.cards.length,['按顺序将卡牌置于牌堆底（先选择的在下）',event.cards]);
					}
					"step 1"
					if(result.bool&&result.links&&result.links.length) cards=result.links.slice(0);
					while(cards.length){
						var card=cards.pop();
						if(get.position(card,true)=='o'){
							card.fix();
							ui.cardPile.appendChild(card);
							game.log(player,'将',card,'置于牌堆底');
						}
					}
					game.updateRoundNumber();
					"step 2"
				},
			},
			sykk:{
				audio:"ext:神怒降世:1",
				trigger:{
					global:"damageEnd",
				},
				filter:function (event,player){
					return event.player.isAlive();
				},
				check:function(event,player){
					return get.attitude(player,event.player)>=0;
				},
				logTarget:"player",
				content:function(){
					trigger.player.draw();
				},
			},
			syjr:{
				audio:"ext:神怒降世:1",
				mark:true,
				locked:true,
				zhuanhuanji:true,
				intro:{
					content:function(storage,player,skill){
						if(player.storage.syjr==true) return '锁定技，本回合你视为拥有〖制衡〗';
						return '锁定技，本回合你视为拥有〖英姿〗';
					},
				},
				trigger:{
					player:"phaseBegin",
				},
				forced:true,
				content:function(){
					if(player.storage.syjr==true){
						player.storage.syjr=false;
						player.addTempSkill('syjr_yingzi',{player:'phaseAfter'});
					}else{
						player.storage.syjr=true;
						player.addTempSkill('syjr_zhiheng',{player:'phaseAfter'});
					};
				},
				subSkill:{
					yingzi:{
						prompt:"本回合你视为拥有〖英姿〗",
						audio:"syjr",
						trigger:{
							player:"phaseDrawBegin2",
						},
						forced:true,
						filter:function(event,player){
							return !event.numFixed;
						},
						content:function(){
							trigger.num++;
						},
						ai:{
							threaten:1.5,
						},
						mod:{
							maxHandcardBase:function(player,num){
								return player.maxHp;
							},
						},
						sub:true,
					},
					zhiheng:{
						prompt:"本回合你视为拥有〖制衡〗",
						audio:"syjr",
						enable:"phaseUse",
						usable:1,
						position:"he",
						filterCard:function(card,player,event){
							event=event||_status.event;
							if(typeof event!='string') event=event.getParent().name;
							var mod=game.checkMod(card,player,event,'unchanged','cardDiscardable',player);
							if(mod!='unchanged') return mod;
							return true;
						},
						discard:false,
						lose:false,
						delay:false,
						selectCard:[1,Infinity],
						check:function(card){
							var player=_status.event.player;
							if(get.position(card)=='h'&&!player.countCards('h','du')&&(player.hp>2||!player.countCards('h',function(card){
								return get.value(card)>=8;
							}))){
								return 1;
							}
							return 6-get.value(card)
						},
						content:function(){
							'step 0'
							player.discard(cards);
							event.num=1;
							var hs=player.getCards('h');
							if(!hs.length) event.num=0;
							for(var i=0;i<hs.length;i++){
								if(!cards.contains(hs[i])){
									event.num=0;break;
								}
							}
							'step 1'
							player.draw(event.num+cards.length);
						},
						ai:{
							order:1,
							result:{
								player:1,
							},
							threaten:1.55,
						},
						sub:true,
					},
				},
			},
			jdfdb:{
				audio:"ext:神怒降世:2",
				trigger:{
					player:"useCard2",
				},
				filter:function(event,player){
					if(event.card.name=='shan'||event.card.name=='wuxie') return false;
					if(get.type(event.card)!='basic'&&get.type(event.card)!='trick') return false;
					if(!event.targets.contains(player)&&event.targets.length>=game.countPlayer(function(current){return current!=player;})) return false;
					if(event.targets.contains(player)&&event.targets.length==game.countPlayer()) return false;
					return game.hasPlayer(function(current){
						return !event.targets.contains(current)&&get.distance(player,current)<=1;
					});
				},
				direct:true,
				content:function(){
					'step 0'
					player.chooseTarget(get.prompt('jdfdb'),'<center>为'+get.translation(trigger.card)+'增加一个目标</center>',function(card,player,target){
						var player=_status.event.player;
						if(_status.event.targets.contains(target)) return false;
						return lib.filter.targetEnabled2(_status.event.card,player,target)&&get.distance(player,target)<=1&&player!=target;
					}).set('ai',function(target){
						var trigger=_status.event.getTrigger();
						var player=_status.event.player;
						return get.effect(target,trigger.card,player,player);
					}).set('targets',trigger.targets).set('card',trigger.card);
					'step 1'
					if(result.bool){
						if(!event.isMine()) game.delayx();
						event.target=result.targets[0];
					}
					else{
						event.finish();
					}
					'step 2'
					if(event.target){
						player.logSkill('jdfdb',event.target);
						trigger.targets.push(event.target);
						game.log(event.target,'成为了',trigger.card,'的额外目标');
					}
				},
			},
			jdffx:{
				audio:"ext:神怒降世:2",
				mod:{
					globalFrom:function(from,to){
						if(from.storage.jdffx_mark&&to==from.storage.jdffx_mark){
							return -Infinity;
						}
					},
				},
				trigger:{
					player:"phaseUseBegin",
				},
				direct:true,
				content:function(){
					"step 0"
					event.num=game.countPlayer(function(current){
							return get.distance(player,current)<=1&&current!=player;
					});
					"step 1"
					player.chooseTarget(get.prompt('jdffx'),'<center>选择一名角色，本回合你到该角色的距离视为1，取消则摸'+get.cnNumber(event.num)+'张牌</center>',function(card,player,target){
						return target!=player;
					}).set('ai',function(target){
						if(game.hasPlayer(function(current){return get.attitude(player,current)<0&&get.distance(player,current)>1;})) return -get.attitude(player,target)&&get.distance(player,target)>1;
						else return false;
					});
					"step 2"
					if(result.bool){
						player.logSkill('jdffx',result.targets[0]);
						player.storage.jdffx_mark=result.targets[0];
						player.addTempSkill('jdffx_mark');
					}
					else{
						player.logSkill('jdffx');
						player.draw(event.num);
					}
					player.updateMarks('jdffx_mark');
				},
				subSkill:{
					mark:{
						mark:true,
						intro:{
							name:"奋迅",
							content:"到 $ 的距离为1",
						},
						onremove:function(player){
							delete player.storage.jdffx_mark;
							player.updateMarks('jdffx_mark');
						},
						sub:true,
					}
				},
			},
			sczqb:{
				audio:"ext:神怒降世:1",
                group:["sczqb_1","sczqb_2","sczqb_3","sczqb_4","sczqb_5","sczqb_6","sczqb_7"],
				mod:{
					targetEnabled:function(card,player,target){
						if(get.type(card)=='delay'){
							return false;
						}
					},
				},
				intro:{
					name:"七步",
					content:"mark",
				},
				marktext:"诗",
				trigger:{
					player:["phaseJudgeBegin","phaseDrawBegin"],
				},
				direct:true,
				forced:true,
				content:function(){
					trigger.cancel();
				},
				subSkill:{
					1:{
						audio:"ext:神怒降世:1",
						skillAnimation:true,
						animationColor:"water",
						trigger:{
							player:"phaseBegin",
						},
						forced:true,
						content:function(){
							player.draw(7);
							player.turnOver();
						},
						sub:true,
					},
					2:{
						mod:{
							cardUsableTarget:function(card,player,target){
								if(player.isTurnedOver()) return true;
							},
						},
						sub:true,
					},
					3:{
						audio:"ext:神怒降世:2",
						trigger:{
							player:"useCard2",
						},
						filter:function(event,player){
							return !player.isDying()&&_status.currentPhase==player&&player.countMark('sczqb')<7;
						},
						forced:true,
						content:function(){
							player.addMark('sczqb',1);
						},
						sub:true,
					},
					4:{
						audio:"ext:神怒降世:1",
						trigger:{
							player:"useCard",
						},
						forced:true,
						filter:function(event,player){
							return get.suit(event.card)=='club'&&player.countMark('sczqb')>0;
						},
						content:function(){
							if(player.countMark('sczqb')<7) player.removeMark('sczqb',1);
							player.draw();
						},
						sub:true,
					},
					5:{
						audio:"ext:神怒降世:1",
						trigger:{
							player:"phaseDiscardEnd",
						},
						forced:true,
						filter:function(event,player){
							return player.countMark('sczqb')>=7;
						},
						content:function(){
							player.turnOver();
						},
						sub:true,
					},
					6:{
						audio:"ext:神怒降世:1",
						trigger:{
							player:"phaseEnd",
						},
						direct:true,
						forced:true,
						content:function(){
							if(player.countMark('sczqb')<7){
								player.logSkill('sczqb_6');
								var num=7-player.countMark('sczqb');
								player.loseHp(num);
							}
							player.removeMark('sczqb',player.countMark('sczqb'));
						},
						sub:true,
					},
					7:{
						enable:"chooseToUse",
						viewAsFilter:function(player){
							return player.hp<1&&player.countCards('hes',{type:'equip'})>0;
						},
						filterCard:function(card){
							return get.type(card)=='equip';
						},
						position:"hes",
						viewAs:{
							name:"jiu",
						},
						prompt:"〖七步〗：将一张装备牌当【酒】使用",
						check:function(card){return 15-get.value(card)},
						ai:{
							threaten:1.5,
							tag:{
								recover:1,
							},
						},
						sub:true,
					},
				},
			},
			sczlj:{
				mod:{
					targetInRange:function(card,player,target){
						if(player.isTurnedOver()&&player.getHistory('useCard').length>=7){
						   if(card.name=='sha'&&player.inRange(target)&&get.distance(player,target)==player.getAttackRange()) return false;
						}
					},
					globalTo:function(from,to,distance){
						if(to.isTurnedOver()) return distance-1;
					},
				},
			},
			bxgy:{
				audio:"ext:神怒降世:1",
				trigger:{
					global:"damageBegin",
				},
				filter:function(event,player){
					return event.source!=undefined&&event.num>0&&event.player!=player&&event.source!=player&&event.source.inRange(player);
				},
				check:function(event,player){
					return (get.attitude(player,event.player)>0&&player.hp>=event.player);
				},
				logTarget:"player",
				content:function(){
					"step 0"
					event.num=trigger.num;
					"step 1"
					trigger.player=player;
					"step 2"
					if(trigger.source.countCards('he')) player.discardPlayerCard(event.num,trigger.source,'he');
					else{
						player.draw(event.num);
						event.goto(4);
					}
					"step 3"
					if(!result.bool){
						player.draw(event.num);
					}
					"step 4"
				},
			},
			bxym:{
				audio:"ext:神怒降世:1",
				trigger:{
					player:"die",
				},
				skillAnimation:true,
				animationColor:"fire",
				forceDie:true,
				direct:true,
				content:function(){
					"step 0"
					event.num=0;
					player.getAllHistory('damage',function(evt){
						event.num+=evt.num;
					});
					event.toequip=[];
					"step 1"
					player.chooseTarget(get.prompt2('bxym'),'<center>令一名角色体力回复至'+get.cnNumber(event.num)+'、手牌摸至'+get.cnNumber(event.num)+'、并装备'+get.cnNumber(event.num)+'张装备</center>',function(card,player,target){
						return player!=target;
					}).set('forceDie',true).set('ai',function(target){
						return get.attitude(player,target);
					});
					"step 2"
					if(result.bool){
						event.mubiao=result.targets[0];
						player.logSkill('bxym',event.mubiao);
						if(event.mubiao.isDamaged()&&event.mubiao.hp<event.num) event.mubiao.recover(event.num-event.mubiao.hp);
						if(event.mubiao.countCards('h')<event.num) event.mubiao.draw(event.num-event.mubiao.countCards('h'));
					}
					"step 3"
					if(!event.mubiao) event.finish();
					var equip=get.cardPile(function(card){
						var bool1=true;
						for(var i=0;i<event.toequip.length;i++){
							if(get.type(card)=='equip'&&get.subtype(card)==get.subtype(event.toequip[i])) bool1=false;
						}
						return (get.type(card)=='equip'&&!event.toequip.contains(card)&&event.mubiao.isEmpty(get.subtype(card))&&bool1);
					});
					if(equip) event.toequip.push(equip);
					else event.num=0;
					event.num--;
					"step 4"
					if(event.num>0) event.goto(3);
					"step 5"
					for (var i=0;i<event.toequip.length;i++){
						event.mubiao.chooseUseTarget(event.toequip[i],true).set('animate',false).set('nopopup',true);
					}
				},
				ai:{
					expose:0.5,
				},
			},
            czdr:{
                audio:"ext:神怒降世:1",
                trigger:{
                    source:"damageBegin",
                },
                filter:function(event,player){
					if(event.player==player) return false;
					return event.cards.filterInD().length>0&&event.card.name=='sha'&&event.player.countCards('h')>0;
				},
                content:function(){
					"step 0"
					player.choosePlayerCard(trigger.player,'h',1,true);
					"step 1"
					if(result.bool){
						event.card=result.cards[0];
						trigger.player.showCards(event.card);
					}
					else event.goto(3);
					"step 2"
					if(get.color(trigger.cards)==get.color(event.card)){
						player.gain(event.card,'log','gain2');
						trigger.player.update();
						trigger.num++;
					}
					"step 3"
				},
            },
            czkb:{
				global:"czkb_guanghuan",
				audio:"ext:神怒降世:1",
				group:"czkb_hongtao",
				trigger:{
					global:"useCard1",
				},
				forced:true,
				filter:function (event,player){
					if(event.player==player) return false;
					return event.targets.contains(player)&&get.color(event.card)=='red'&&get.distance(event.player,player)==1;
				},
				content:function(){},
				unique:true,
				gainable:true,
				subSkill:{
					hongtao:{
						trigger:{
							player:"damageBegin",
						},
						direct:true,
						forced:true,
						filter:function (event,player){
							return event.card&&event.card.name=='sha'&&get.suit(event.card)=='heart';
						},
						content:function(){
							trigger.num++;
						},
						sub:true,
					},
					guanghuan:{
						mod:{
							targetEnabled:function(card,player,target){
								if(get.color(card)=='red'){
									if(game.hasPlayer(function(current){
										if(player.hasSkill('czkb')) return;
										if(target.hasSkill('czkb')) return;
										return current.hasSkill('czkb')&&get.distance(player,current)==1;
									})){
										return false;
									}
								}
							},
						},
						sub:true,
					},
				},
			},
            chdk:{
                audio:"ext:神怒降世:1",
                trigger:{
                    player:"damageBegin",
                },
				forced:true,
                filter:function(event,player){
					return event.source!=undefined&&event.num>0&&event.source.hp>player.hp;
				},
                content:function(){
					trigger.num--;
				},
				ai:{
					threaten:function(player,target){
						if(player.hp>target.hp) return 0;
						return 2;
					},
					maixie:true,
					"maixie_hp":true,
					effect:{
						target:function(card,player,target){
							if(!target.hasFriend()) return;
							if(get.tag(card,'damage')<2&&player.hp>target.hp) return 0;
							else return 2;
						},
					},
				},
            },
            chrh:{
                audio:"ext:神怒降世:1",
				group:["chrh_geipai","chrh_use"],
				init:function(player){
					if(!player.storage.chrh) player.storage.chrh=[];
				},
				locked:false,
                derivation:"chrh2",
				mark:true,
				intro:{
					content:"cards",
					onunmark:function(storage,player){
						if(storage&&storage.length){
							player.$throw(storage,1000);
							game.cardsDiscard(storage);
							game.log(storage,'被置入了弃牌堆');
							storage.length=0;
						}
					},
				},
                trigger:{
                    player:["phaseZhunbeiBegin","die"],
                },
				filter:function(event,player,name){
					if(name=="die"){
						return player.storage.chrh.length>0;
					}
					else return true;
				},
				forced:true,
				direct:true,
                content:function(){
					"step 0"
					if(event.triggername=="die"){
						var qipaile=player.storage.chrh;
						player.$throw(qipaile,1000);
						game.delayx();
						game.cardsDiscard(qipaile);
						game.log(qipaile,'被置入了弃牌堆');
						player.storage.chrh=[];
						event.finish();
					}
					else{
						if(player.maxHp>=3&&!player.storage.chrh1) event.goto(3);
					}
					"step 1"
					player.logSkill('chrh');
					var cards=get.cards(player.maxHp);
					player.$gain2(cards);
					player.markAuto('chrh',cards);
					game.cardsGotoSpecial(cards);
					player.markSkill('chrh');
					game.log(player,'将',cards,'置于了','#g「容华」上');
					"step 2"
					if(!player.storage.chrh1) player.gainMaxHp();
					event.finish();
					"step 3"
					player.storage.chrh1=true;
					player.logSkill('chrh_xiugai');
					if(!player.hasSkill('chrh1')) player.addTempSkill('chrh1');
					var cards=get.cards(player.maxHp);
					player.$gain2(cards);
					player.markAuto('chrh',cards);
					game.cardsGotoSpecial(cards);
					player.markSkill('chrh');
					game.log(player,'将',cards,'置于了','#g「容华」上');
					"step 4"
					if(player.isDamaged()) player.recover(player.maxHp-player.hp);
					"step 5"
					player.chooseCardButton(player.storage.chrh,'将所有「容华」交给一名角色',player.storage.chrh.length,true);
					"step 6"
					event.cards=result.links;
					for(var i=0;i<result.links.length;i++){
						player.storage.chrh.remove(result.links[i]);
					}
					player.syncStorage('chrh');
					"step 7"
					player.chooseTarget(true,'〖容华〗：令一名角色获得这些牌').set('ai',function(target){
						if(game.hasPlayer(function(current){
							return get.attitude(player,current)>0;
						})) return target!=player&&get.attitude(player,target)>0;
						else return player;
					});
					"step 8"
					if(result.bool&&result.targets&&result.targets.length){
						event.mubiao=result.targets[0];
						player.line(result.targets);
						result.targets[0].gain(event.cards,'fromStorage','gain2');
					}
					"step 9"
					if(event.mubiao==player) player.removeSkill('chrh');
					if(player.hasSkill('chdk')){
						player.removeSkill('chdk');
						game.log(player,'失去了技能','#g〖豆蔻〗');
					}
					if(event.mubiao!=player) game.log(player,'修改了','#g〖容华〗');
					else game.log(player,'失去了技能','#g〖容华〗');
				},
				subSkill:{
					geipai:{
						audio:"ext:神怒降世:1",
						trigger:{
							player:"phaseUseEnd",
						},
						filter:function(event,player){
							return player.countCards('h')>player.hp&&!player.storage.chrh1;
						},
						direct:true,
						content:function(){
							"step 0"
							var next=player.chooseCardTarget({
								position:'h',
								filterCard:true,
								selectCard:function(){
									return player.countCards('h')-player.hp;
								},
								filterTarget:function(card,player,target){
									return target!=player;
								},
								ai1:function(card){
									return get.value(card);
								},
								ai2:function(target){
									return get.attitude(target,player);
								},
								prompt:get.prompt('chrh'),
								prompt2:'<center>将'+get.cnNumber(player.countCards('h')-player.hp)+'张牌交给一名其他角色</center>',
							});
							"step 1"
							if(result.bool){
								player.logSkill('chrh_geipai',result.targets[0]);
								player.give(result.cards,result.targets[0]);
							}
						},
						sub:true,
					},
					xiugai:{
						audio:"ext:神怒降世:1",
						sub:true,
					},
                    use:{
						audio:"chrh_geipai",
						enable:"phaseUse",
						usable:1,
						filterTarget:function(card,player,target){
							return target!=player;
						},
                        filter:function(event,player){
							return player.storage.chrh.length>0&&player.storage.chrh1&&!player.hasSkill('chrh1');
						},
                        content:function(){
							"step 0"
							if(!player.isDamaged()) event.num=1;
							else event.num=player.getDamagedHp();
							player.chooseCardButton([1,event.num],player.storage.chrh,'获得至多'+get.cnNumber(event.num)+'张「容华」',true).set('ai',function(button){
								return get.value(button.link);
							});
							"step 1"
							player.gain(result.links,'fromStorage','gain2');
							for(var i=0;i<result.links.length;i++){
								player.storage.chrh.remove(result.links[i]);
							}
							player.updateMarks('chrh');
							"step 2"
							if(player.storage.chrh.length<1) event.goto(6);
							player.chooseCardButton([1,player.storage.chrh.length],player.storage.chrh,'将任意张「容华」交给'+get.translation(target),true).set('ai',function(button){
								if(get.attitude(player,target)>0) return get.value(button.link);
								else return -get.value(button.link);
							});
							"step 3"
							event.cards=result.links;
							"step 4"
							target.gain(event.cards,'fromStorage','gain2');
							"step 5"
							player.storage.chrh.remove(event.cards);
							if(player.storage.chrh.length<1) player.unmarkSkill('chrh');
							player.updateMarks('chrh');
							"step 6"
						},
						ai:{
							threaten:1.5,
							result:{
								target:function(player,target){
									if(target!=player&&get.attitude(player,target)>0) return 10;
									else return -1;
								},
							},
							order:20,
							expose:0.4,
						},
                        sub:true,
                    },
				},
            },
			chrh1:{},
            chrh2:{},
            cxzy:{
                audio:"ext:神怒降世:1",
                trigger:{
					global:["equipAfter","addJudgeAfter","loseAfter","gainAfter"],
                },
				init:function(player){
					if(!player.storage.cxzy) player.storage.cxzy=[];
				},
				direct:true,
                filter:function(event,player){
					if(player.storage.chzy==false) return false;
					return game.hasPlayer(function(current){
						var evt=event.getl(current);
						return evt&&evt.hs&&evt.hs.length&&current.countCards('h')==0;
					});
				},
                content:function(){
					"step 0"
					if(!player.hasSkill('cxzy_qingchu')) player.addTempSkill('cxzy_qingchu');
					event.list=game.filterPlayer(function(current){
						var evt=trigger.getl(current);
						return evt&&evt.hs&&evt.hs.length;
					}).sortBySeat(_status.currentPhase);
					"step 1"
					var target=event.list.shift();
					event.target=target;
					if(target.isAlive()&&target.countCards('h')==0&&!player.storage.cxzy.contains(target)){
						player.chooseBool(get.prompt2('cxzy',target)).set('ai',function(){
							return get.attitude(_status.event.player,_status.event.getParent().target)>0;
						});
					}
					else event.goto(3);
					"step 2"
					if(result.bool){
						player.storage.cxzy.push(event.target);
						player.logSkill(event.name,target);
						target.draw(2);
					}
					"step 3"
				},
				subSkill:{
                    qingchu:{
						silent:true,
						unique:true,
						forced:true,
						onremove:function(player){
							player.storage.cxzy=[];
						},
                        sub:true,
                    },
				},
            },
            cxym:{
                audio:"ext:神怒降世:1",
				enable:"phaseUse",
				usable:1,
				filterTarget:function(card,player,target){
					return player!=target&&target.countCards('h')>0;
				},
                content:function(){
					"step 0"
					event.num=target.countCards('h');
					player.gain(target.getCards('h'),target,'giveAuto');
					"step 1"
					player.chooseCard(true,event.num,'h','〖玉貌〗：交给'+get.translation(target)+''+get.cnNumber(event.num)+'张牌').set('ai',function(card){
						if(get.attitude(player,target)>=0) return get.value(card);
						if(get.attitude(player,target)<0) return -get.value(card);
					});
					"step 2"
					if(result.bool&&result.cards.length>0){
						player.line(target);
						player.give(result.cards,target);
					}
				},
				ai:{
					threaten:1.5,
					result:{
						target:function(player,target){
							if(target!=player&&get.attitude(player,target)>0) return 10;
							else return -1;
						},
					},
					order:20,
					expose:0.4,
				},
            },
            szggyh:{
                audio:"ext:神怒降世:1",
				group:"szggyh_qipai",
				mod:{
					ignoredHandcard:function(card,player){
						if(get.type(card)!='basic'){
							return true;
						}
					},
					cardDiscardable:function(card,player,name){
						if(name=='phaseDiscard'&&get.type(card)!='basic') return false;
					},
				},
                trigger:{
					player:"phaseDrawBegin",
                },
                filter:function(event,player){
					return event.player.isAlive();
				},
				forced:true,
                content:function(){
					player.gain(get.cardPile(function(card){
						return get.type(card,'trick')=='trick';
					}),'gain2');
				},
				subSkill:{
					qipai:{
						audio:"ext:神怒降世:1",
						trigger:{
							player:"phaseDiscardEnd",
						},
						forced:true,
						filter:function(event,player){
							return player.countCards('h')>player.getHandcardLimit();
						},
						content:function(){},
						sub:true,
					},
				},
            },
            szggqr:{
                audio:"ext:神怒降世:2",
				group:"szggqr_jilu",
				locked:true,
				zhuanhuanji:true,
                trigger:{
					player:"phaseBegin",
                },
				forced:true,
                content:function(){
					if(player.storage.szggqr==true){
						player.storage.szggqr=false;
						player.addTempSkill('szggqr_oushu',{player:'phaseAfter'});
					}else{
						player.storage.szggqr=true;
						player.addTempSkill('szggqr_jishu',{player:'phaseAfter'});
					};
				},
				subSkill:{
					jishu:{
						audio:"szggqr",
						mark:true,
						marktext:"奇",
						intro:{
							name:"祈禳",
							content:"奇数",
						},
						trigger:{
							player:"useCard2",
						},
						filter:function(event,player){
							return event.card.number%2==player.storage.szggqr1&&event.card.number%2==1;
						},
						frequent:true,
						content:function(){
							var card2=get.cardPile2(function(card){
								return get.color(card)=='black'&&(get.type(card)=='trick'||get.type(card)=='delay');
							});
							if(card2) player.gain(card2,'gain2');
						},
						mod:{
							aiOrder:function(player,card,num){
								if(typeof card=='object'&&player==_status.currentPhase){
									if(card.number%2==1){
										return num+10;
									}
									else if(card.name!='sha'&&card.name!='tao') return num=0;
								}
							},
						},
						sub:true,
					},
					oushu:{
						audio:"szggqr",
						mark:true,
						marktext:"偶",
						intro:{
							name:"祈禳",
							content:"偶数",
						},
						trigger:{
							player:"useCard2",
						},
						filter:function(event,player){
							return event.card.number%2==player.storage.szggqr1&&event.card.number%2==0;
						},
						frequent:true,
						content:function(){
							var card1=get.cardPile2(function(card){
								return get.color(card)=='red'&&(get.type(card)=='trick'||get.type(card)=='delay');
							});
							if(card1) player.gain(card1,'gain2');
						},
						mod:{
							aiOrder:function(player,card,num){
								if(typeof card=='object'&&player==_status.currentPhase){
									if(card.number%2==0){
										return num+10;
									}
									else if(card.name!='sha'&&card.name!='tao') return num=0;
								}
							},
						},
						sub:true,
					},
					jilu:{
						trigger:{
							player:"useCard",
						},
						filter:function(event,player){
							return player.isPhaseUsing();
						},
						silent:true,
						unique:true,
						forced:true,
						content:function(){
							if(!player.hasSkill('szggqr_qingchu')) player.addTempSkill('szggqr_qingchu');
							player.storage.szggqr1=trigger.card.number%2;
						},
						sub:true,
					},
					qingchu:{
						silent:true,
						unique:true,
						forced:true,
						onremove:function(player){
							delete player.storage.szggqr1;
						},
						sub:true,
					},
				},
            },
            szggsx:{
                audio:"ext:神怒降世:1",
                trigger:{
					player:"phaseEnd",
                },
				forced:true,
                filter:function(event,player){
					return ui.cardPile.childElementCount>0;
				},
                content:function(){
					event.cards=get.cards(ui.cardPile.childElementCount);
					game.cardsDiscard(event.cards);
					game.updateRoundNumber();
				},
            },
            szggxc:{
				audio:"ext:神怒降世:1",
				unique:true,
				enable:"phaseUse",
				mark:true,
				skillAnimation:true,
				animationColor:"water",
				limited:true,
				init:function(player){
					player.storage.szggxc=false;
				},
				intro:{
					name:"仙辰",
					content:"limited",
				},
				filter:function(event,player){
					if(player.storage.szggxc) return false;
					return true;
				},
                content:function(){
					"step 0"
					player.storage.szggxc==true;
					player.awakenSkill('szggxc');
					event.suoyoupai=[];
					event.targets=game.filterPlayer();
					event.targets.sort(lib.sort.seat);
					"step 1"
					game.countPlayer(function(current){
						if(current.countCards('hej')>0){
							var pai=current.getCards('hej');
							while(pai.length>0){
								event.suoyoupai.push(pai[0]);
								current.lose(pai[0]);
								pai.remove(pai[0]);
							}
						}
					});
					"step 2"
					for(var i=0;i<event.targets.length;i++){
						if(event.suoyoupai.length>0){
							var huode=event.suoyoupai.randomGet();
							if(get.type(huode)=='equip'&&event.targets[i].isEmpty(get.subtype(huode))) event.targets[i].equip(huode);
							else event.targets[i].gain(huode);
							event.suoyoupai.remove(huode);
						}
					}
					"step 3"
					if(event.suoyoupai.length>0) event.goto(2);
				},
				ai:{
					order:1,
					result:{
						player:function(player){
							var dysp=0;
							var drsp=0;
							game.countPlayer(function(current){
								if(get.attitude(player,current)>0) dysp+=current.countCards('he');
								else drsp+=current.countCards('he');
							});
							return dysp<drsp;
						},
					},
				},
            },
            gxdp:{
                audio:"ext:神怒降世:1",
                trigger:{
					source:"damageEnd",
                },
                filter:function(event,player){
					return !event.player.hasSkill('gxdp_xiaoguo')&&event.player!=player&&event.player.isAlive();
				},
				check:function(event,player){
					return get.attitude(player,event.player)<0;
				},
				logTarget:"player",
                content:function(){
					trigger.player.addTempSkill('gxdp_xiaoguo');
					trigger.player.storage.gxdp_xiaoguo=player;
				},
				subSkill:{
					xiaoguo:{
						mark:true,
						unique:true,
						intro:{
							name:"胆破",
							content:"本回合结束弃置手牌中的所有红色基本牌",
						},
						onremove:function(player){
							if(player.storage.gxdp_xiaoguo&&player.storage.gxdp_xiaoguo.isAlive()&&player.storage.gxdp_xiaoguo.hasSkill('gxdp')&&player.isAlive()) player.storage.gxdp_xiaoguo.logSkill('gxdp',player);
							player.discard(player.getCards('h',{color:'red',type:'basic'}));
							delete player.storage.gxdp_xiaoguo;
						},
						sub:true,
					},
				},
            },
            gxqd:{
                audio:"ext:神怒降世:1",
                trigger:{
					player:"useCardToTargeted",
                },
                filter:function(event,player){
					return event.card.name=='sha';
				},
				direct:true,
                content:function(){
					"step 0"
					player.chooseToDiscard(get.prompt('gxqd'),'<center>弃置一张基本牌令此【杀】不能被响应(若弃置红牌，则摸一张牌)</center>','h',{type:'basic'}).set('ai',function(card){
						if(card.name!='tao'&&get.color(card)=='red'){
							if(trigger.target.getEquip('bagua')&&get.attitude(trigger.target,player)<0) return 1;
							if(get.attitude(trigger.target,player)>=0||trigger.target.countCards('h')<1) return false;
							if(get.attitude(trigger.target,player)<0&&trigger.target.countCards('h')>0) return 1;
						}
						else{
							if(trigger.target.getEquip('bagua')&&get.attitude(trigger.target,player)<0) return -get.value(card);
							if(get.attitude(trigger.target,player)>=0||trigger.target.countCards('h')<1) return false;
							if(get.attitude(trigger.target,player)<0&&trigger.target.countCards('h')>0) return -get.value(card);
						}
					});
					"step 1"
					if(result.bool){
						player.logSkill('gxqd',trigger.target);
						if(get.color(result.cards[0])=='red') player.draw();
						trigger.getParent().directHit.add(trigger.target);
					}
				},
            },
            llqfp:{
                audio:"ext:神怒降世:1",
				group:["llqfp_juedou","llqfp_brjdw"],
                trigger:{
					player:"useCardToTargeted",
                },
				forced:true,
                filter:function(event,player){
					return event.card.name=='sha'||event.card.name=='juedou';
				},
				logTarget:"target",
                content:function(){
					"step 0"
					trigger.target.storage.llqfp_xiaoguo1=player;
					trigger.target.storage.llqfp_xiaoguo=0;
					"step 1"
					for (var i=0;i<trigger.cards.length;i++) {
						trigger.target.storage.llqfp_xiaoguo+=trigger.cards[i].number;
					}
					if(!trigger.target.hasSkill('llqfp_xiaoguo')) trigger.target.addTempSkill('llqfp_xiaoguo');
				},
				subSkill:{
					juedou:{
						audio:"llqfp",
						trigger:{
							player:"respond",
						},
						forced:true,
						filter:function(event,player){
							return game.hasPlayer(function(current){
								return current!=player&&current.hasSkill('llqfp_xiaoguo');
							});
						},
						content:function(){
							"step 0"
							event.num=0;
							"step 1"
							for (var i=0;i<trigger.cards.length;i++) {
								event.num+=trigger.cards[i].number;
							}
							"step 2"
							game.countPlayer(function(current){
								if(current!=player&&current.hasSkill('llqfp_xiaoguo')) current.storage.llqfp_xiaoguo=event.num;
							});
						},
						sub:true,
					},
					brjdw:{
						audio:"llqfp",
						trigger:{
							target:"useCardToTargeted",
						},
						filter:function(event,player){
							return player==event.target&&event.card.name=='juedou';
						},
						forced:true,
						logTarget:"player",
						content:function(){
							trigger.player.storage.llqfp_xiaoguo1=player;
							if(!trigger.player.hasSkill('llqfp_xiaoguo')) trigger.player.addTempSkill('llqfp_xiaoguo');
						},
						sub:true,
					},
					xiaoguo:{
						mod:{
							"cardEnabled2":function(card,player){
								if(card.number<=player.storage.llqfp_xiaoguo) return false;
							},
						},
						onremove:function(player){
							if(player.storage.llqfp_xiaoguo) delete player.storage.llqfp_xiaoguo;
							if(player.storage.llqfp_xiaoguo1) delete player.storage.llqfp_xiaoguo1;
						},
						unique:true,
						silent:true,
						forced:true,
						trigger:{
							global:"useCardEnd",
						},
						filter:function(event,player){
							if(event.player==player&&event.card.name=='juedou'&&event.targets.contains(player.storage.llqfp_xiaoguo1)) return true;
							return event.player==player.storage.llqfp_xiaoguo1&&(event.card.name=='sha'||event.card.name=='juedou');
						},
						content:function (){
							delete player.storage.llqfp_xiaoguo;
							delete player.storage.llqfp_xiaoguo1;
							player.removeSkill('llqfp_xiaoguo');
						},
						sub:true,
					},
				},
            },
            llqfj:{
                audio:"ext:神怒降世:1",
				group:["llqfj_spade","llqfj_heart","llqfj_club","llqfj_diamond"],
                trigger:{
					player:"useCard",
                },
				forced:true,
                filter:function(event,player){
					return event.card.name=='sha';
				},
                content:function(){},
				subSkill:{
					spade:{
						trigger:{
							player:"useCardToTargeted",
						},
						silent:true,
						forced:true,
						filter:function(event,player){
							return event.card.name=='sha'&&get.suit(event.card)=='spade';
						},
						content:function(){
							var id=trigger.target.playerid;
							var map=trigger.getParent().customArgs;
							if(!map[id]) map[id]={};
							if(typeof map[id].extraDamage!='number'){
								map[id].extraDamage=0;
							}
							map[id].extraDamage++;
						},
						sub:true,
					},
					heart:{
						trigger:{
							source:"damageSource",
						},
						silent:true,
						forced:true,
						filter:function(event,player){
							return event.card.name=='sha'&&get.suit(event.card)=='heart';
						},
						content:function(){
							if(player.isDamaged()) player.recover();
						},
						sub:true,
					},
					club:{
						mod:{
							selectTarget:function(card,player,range){
								if(range[1]==-1) return;
								if((card.name=='sha')&&get.suit(card)=='club') range[1]+=2;
							},
						},
						sub:true,
					},
					diamond:{
						mod:{
							cardUsable:function (card,player,num){
								if(card.name=='sha'&&get.suit(card)=='diamond') return Infinity;
							},
							targetInRange:function (card){
								if(get.suit(card)=='diamond'&&card.name=='sha') return true;
							},
						},
						sub:true,
					},
					llq:{
						audio:"ext:神怒降世:1",
						sub:true,
					},
				},
            },
			llqjw:{
				group:"llqjw_jilu",
				skillAnimation:true,
				animationColor:"gray",
				audio:"ext:神怒降世:1",
                init:function(player){
					if(!player.storage.llqjw1) player.storage.llqjw1=false;
				},
				trigger:{
					player:"phaseJieshuBegin",
				},
                derivation:"llqfj",
				forced:true,
				unique:true,
				juexingji:true,
				filter:function(event,player){
					return player.storage.llqjw1==true&&!player.storage.llqjw;
				},
				content:function(){
					player.storage.llqjw=true;
					player.awakenSkill('llqjw');
					if(player.isDamaged()) player.recover();
					if(!player.hasSkill('llqfj')) player.addSkill('llqfj');
					var card=get.cardPile('fangtian','field');
					if(card){
						player.gain(card,'gain2','log');
					}
				},
				subSkill:{
					jilu:{
						trigger:{
							source:"damageSource",
						},
						silent:true,
						forced:true,
						filter:function(event,player){
							return (event.card.name=='sha'||event.card.name=='juedou')&&player.storage.llqjw1==false;
						},
						content:function(){
							player.storage.llqjw1=true;
						},
						sub:true,
					},
				},
			},
			swykg:{
				audio:"ext:神怒降世:1",
				trigger:{
					source:"damageSource",
				},
				filter:function(event,player){
					return get.distance(player,event.player)<=1&&event.num>0;
				},
				frequent:true,
				content:function(){
					"step 0"
					player.draw(trigger.num);
					if(player.maxHp-player.hp>trigger.num) event.num=trigger.num;
					else event.num=player.maxHp-player.hp;
					"step 1"
					var res=get.recoverEffect(player,player,player);
					if(player.isDamaged()) player.chooseToDiscard('〖狂骨〗：是否弃置至多'+get.cnNumber(event.num)+'张牌回复至多'+get.cnNumber(event.num)+'点体力？',[1,event.num],'he').set('ai',function(card){
						if(get.tag(card,'damage')) return -1;
						return 1;
					}).set('res',res);
					"step 2"
					if(result.bool){
						player.recover(result.cards.length);
					}
				},
			},
			swybx:{
				audio:"ext:神怒降世:1",
				trigger:{
					player:"useCard2",
				},
				direct:true,
				filter:function(trigger,player){
					return _status.currentPhase==player&&trigger.targets&&trigger.targets.length==1&&(get.name(trigger.card)=='sha'||get.type(trigger.card)=='trick')&&!game.hasPlayer(function(current){
						return get.distance(player,current)>1;
					});
				},
				content:function(){
					'step 0'
					player.chooseTarget(get.prompt('swybx'),'<center>为'+get.translation(trigger.card)+'增加一个目标</center>',function(card,player,target){
						var player=_status.event.player;
						if(_status.event.targets.contains(target)) return false;
						return lib.filter.targetEnabled2(_status.event.card,player,target)&&get.distance(player,target)<=1&&player!=target;
					}).set('ai',function(target){
						var trigger=_status.event.getTrigger();
						var player=_status.event.player;
						return get.effect(target,trigger.card,player,player);
					}).set('targets',trigger.targets).set('card',trigger.card);
					'step 1'
					if(result.bool){
						if(!event.isMine()) game.delayx();
						event.target=result.targets[0];
					}
					else{
						event.finish();
					}
					'step 2'
					if(event.target){
						player.logSkill('swybx',event.target);
						trigger.targets.push(event.target);
						game.log(event.target,'成为了',trigger.card,'的额外目标');
					}
				},
				mod:{
					globalFrom:function(from,to,distance){
						if(_status.currentPhase==from){
							return distance-from.countUsed();
						}
					},
				},
			},
			swyca:{
				audio:"ext:神怒降世:1",
				group:"swyca_lose",
				mod:{
					aiOrder:function(player,card,num){
						if(typeof card=='object'&&player==_status.currentPhase){
							if(!player.storage.swyca1.contains(get.suit(card))){
								return num+10;
							}
						}
					},
				},
				init:function(player){
					if(!player.storage.swyca) player.storage.swyca=[];
					if(!player.storage.swyca1) player.storage.swyca1=[];
				},
				mark:true,
				intro:{
					name:"持傲",
					content:"$",
				},
				trigger:{
					player:"useCard",
				},
				filter:function(event,player){
					return event.card&&(get.type(event.card)=='trick'||get.type(event.card)=='basic'&&!['shan','tao','jiu','du'].contains(event.card.name))&&player==_status.currentPhase&&game.hasPlayer(function(current){return current!=player&&current.hasSkill('swyca_xiaoguo');});
				},
				forced:true,
				content:function(){
					trigger.directHit.addArray(game.filterPlayer(function(current){
						return current!=player&&current.hasSkill('swyca_xiaoguo');
					}));
				},
				subSkill:{
                    lose:{
                        trigger:{
                            player:"loseEnd",
                        },
						filter:function(event,player){
							return player==_status.currentPhase;
						},
						silent:true,
						unique:true,
						forced:true,
						charlotte:true,
                        content:function(){
							"step 0"
							if(!player.hasSkill('swyca_qingchu')) player.addTempSkill('swyca_qingchu');
							for(var i=0;i<trigger.cards2.length;i++){
								if(!player.storage.swyca1.contains(get.suit(trigger.cards2[i]))){
									player.storage.swyca1.push(get.suit(trigger.cards2[i]));
									if(get.suit(trigger.cards2[i])=='spade') player.storage.swyca.push('♠');
									if(get.suit(trigger.cards2[i])=='heart') player.storage.swyca.push('♥');
									if(get.suit(trigger.cards2[i])=='club') player.storage.swyca.push('♣');
									if(get.suit(trigger.cards2[i])=='diamond') player.storage.swyca.push('♦');
								}
							}
							player.updateMarks('swyca');
							"step 1"
							if(player.storage.swyca1.length>=4&&game.hasPlayer(function(current){return current!=player&&!current.hasSkill('swyca_xiaoguo');})) player.chooseTarget(true,'〖持傲〗：令一名角色本回合不能使用或打出牌响应你使用的牌',function(card,player,target){
								return target!=player&&!target.hasSkill('swyca_xiaoguo');
							}).set('ai',function(target){
								var player=_status.event.player;
								return get.damageEffect(target,player,player);
							});
							"step 2"
							if(result.bool&&result.targets&&result.targets.length){
								player.line(result.targets);
								player.storage.swyca=[];
								player.storage.swyca1=[];
								player.updateMarks('swyca');
								if(!result.targets[0].hasSkill('swyca_xiaoguo')){
									result.targets[0].storage.swyca_xiaoguo=player;
									result.targets[0].addTempSkill('swyca_xiaoguo');
								}
							}
						},
                        sub:true,
                    },
                    qingchu:{
						silent:true,
						unique:true,
						forced:true,
						onremove:function(player){
							player.storage.swyca=[];
							player.storage.swyca1=[];
							player.updateMarks('swyca');
						},
                        sub:true,
                    },
                    xiaoguo:{
						mark:true,
						unique:true,
						intro:{
							name:"持傲",
							content:"本回合不能使用或打出牌响应 $ 使用的牌",
						},
						onremove:function(player){
							if(player.storage.swyca_xiaoguo) delete player.storage.swyca_xiaoguo;
						},
                        sub:true,
                    },
				},
			},
			swyqm:{
				audio:"ext:神怒降世:1",
				skillAnimation:true,
				animationColor:"orange",
				init:function(player){
					if(!player.storage.swyqm) player.storage.swyqm=0;
				},
				mark:true,
				intro:{
					name:"奇谋",
					content:"本回合可多出#张【杀】",
				},
				mod:{
					cardUsable:function(card,player,num){
						if(typeof player.storage.swyqm=='number'&&card.name=='sha'){
							return num+player.storage.swyqm;
						}
					},
				},
				trigger:{
					player:"phaseUseBegin",
				},
				filter:function(event,player){
					return player.countCards('he')>0;
				},
				direct:true,
				content:function(){
					"step 0"
					var res=get.recoverEffect(player,player,player);
					player.chooseToDiscard(get.prompt('swyqm'),'<center>弃置至多'+get.cnNumber(player.hp)+'张牌，然后摸等量的牌，且本回合可以多使用X张【杀】(X为你弃置的牌中的花色数)</center>',[1,player.hp],'he').set('ai',function(card){
						if(get.tag(card,'damage')) return -1;
						if(card.name=='tao'||card.name=='jiu') return -1;
						return 1;
					}).set('res',res);
					"step 1"
					if(result.bool&&result.cards.length>0){
						if(!player.hasSkill('swyqm_qingchu')) player.addTempSkill('swyqm_qingchu');
						event.huase=[];
						for(var i=0;i<result.cards.length;i++){
							if(!event.huase.contains(get.suit(result.cards[i]))){
								event.huase.push(get.suit(result.cards[i]));
								player.storage.swyqm+=1;
							}
						}
						player.updateMarks('swyqm');
						player.logSkill('swyqm');
						player.loseHp(result.cards.length);
						player.draw(result.cards.length);
					}
				},
				subSkill:{
                    qingchu:{
						silent:true,
						unique:true,
						forced:true,
						onremove:function(player){
							player.storage.swyqm=0;
							player.updateMarks('swyqm');
						},
                        sub:true,
                    },
				},
			},
			szxnj:{
				group:["szxnj_remove"],
                derivation:"szxws",
				usable:1,
				trigger:{
					global:"dying",
				},
				filter:function(event,player){
					return _status.currentPhase==player&&event.player!=player;
				},
				check:function(event,player){
					return (get.attitude(player,event.player)<=0)&&player.maxHp>1;
				},
				content:function(){
					player.loseMaxHp();
					player.storage.szxnj=trigger.player;
					player.addTempSkill('szxws');
					game.log(player,'获得了技能','#g〖完杀〗');
				},
				subSkill:{
					remove:{
						trigger:{
							global:["dyingAfter","die"],
						},
						filter:function(event,player){
							if(!player.storage.szxnj) return false;
							return event.player==player.storage.szxnj;
						},
						direct:true,
                        forced:true,
						content:function(){
							if(player.hasSkill('szxws')) player.removeSkill('szxws');
						},
						sub:true,
					},
				},
			},
			ssqwk:{
				audio:"ext:神怒降世:1",
				group:["ssqwk_geipai"],
                skillAnimation:true,
                animationColor:"wood",
				mod:{
					maxHandcardBase:function(player,num){
						return 10;
					},
					cardUsable:function(card,player,num){
						if(player.countUsed()<game.countPlayer()-1) return Infinity;
					},
				},
				trigger:{
					player:"phaseDrawBegin2",
				},
				filter:function(event,player){
					return !event.numFixed;
				},
				forced:true,
				content:function(){
					trigger.cancel();
					if(player.countCards('h')<10) player.draw(10-player.countCards('h'));
					player.addTempSkill('ssqwk_yongpai');
				},
				subSkill:{
					geipai:{
						audio:"ext:神怒降世:1",
						trigger:{
							source:"damageSource",
						},
						filter:function(event,player){
							return player.countCards('h')>0&&event.player.isAlive();
						},
                        forced:true,
						content:function(){
							"step 0"
							event.count=trigger.num;
							"step 1"
							event.count--;
							trigger.player.gainPlayerCard('获得'+get.translation(trigger.source)+'的一张牌',trigger.source,get.buttonValue,'h');
							"step 2"
							if(result.bool&&event.count>0&&trigger.source.countGainableCards(trigger.player,'h')>0) event.goto(1);
						},
						sub:true,
					},
					yongpai:{
						unique:true,
						mod:{
							cardEnabled:function(card,player){
								if(player.countUsed()>=game.countPlayer()-1) return false;
							},
						},
						sub:true,
					},
				},
			},
			szthq:{
				audio:"ext:神怒降世:1",
				trigger:{
					player:"damageBegin4",
				},
				forced:true,
				filter:function(event,player){
					if(event.num<=1) return false;
					return true;
				},
				content:function(){
					trigger.num=1;
				},
				ai:{
					filterDamage:true,
				},
			},
			sztsz:{
				audio:"ext:神怒降世:1",
				global:"sztsz_xiaoguo",
				trigger:{
					player:"recoverBegin",
				},
				forced:true,
				content:function(){
					trigger.cancel();
				},
				mod:{
					cardEnabled:function(card,player){
						if(card.name=='tao') return false;
					},
					globalTo:function(from,to){
						return -Infinity;
					},
				},
				subSkill:{
					xiaoguo:{
						mod:{
							cardSavable:function(card,player,target){
								if(card.name=='tao'&&target.hasSkill('sztsz')) return false;
							},
						},
						sub:true,
					},
				},
			},
			sztfq:{
				audio:"ext:神怒降世:1",
				group:"sztfq_draw",
				mark:true,
				locked:false,
				zhuanhuanji:true,
				init:function(player){
					if(!player.storage.sztfq) player.storage.sztfq=true;
				},
				intro:{
					content:function(storage,player,skill){
						if(player.storage.sztfq==true) return '当一名其他角色受到伤害时，若其到你的距离为1，你可以代替成为受伤目标';
						return '当一名角色的手牌被其他角色弃置或获得后，你可以失去1点体力，然后令该角色摸两张牌';
					},
				},
				trigger:{
					global:"damageBegin",
				},
				filter:function(event,player){
					if(player.storage.sztfq==false) return false;
					if(event.player==player||get.distance(event.player,player)>1) return false;
					return event.num>0;
				},
				check:function(event,player){
					return (get.attitude(player,event.player)>0);
				},
				logTarget:"player",
				content:function(){
					"step 0"
					player.storage.sztfq=false;
					event.num=trigger.num;
					"step 1"
					trigger.player=player;
				},
				ai:{
					threaten:2,
				},
				subSkill:{
					draw:{
						audio:"ext:神怒降世:1",
						trigger:{
							global:["gainAfter","loseAfter"],
						},
						filter:function(event,player){
							if(player.storage.sztfq==true) return false;
							var evt=event;
							if(event.name=='lose'){
								if(event.type!='discard') return false;
								evt=event.getParent();
							}
							var player=evt[event.name=='gain'?'source':'player'];
							if(!player||player.isDead()) return false;
							if(evt[event.name=='gain'?'bySelf':'notBySelf']!=true) return false;
							if(event.name=='lose') return event.hs.length>0;
							return event.relatedLose&&event.relatedLose.hs&&event.relatedLose.hs.length>0;
						},
						check:function(event,player){
							return get.attitude(player,event[event.name=='gain'?'source':'player'])>2;
						},
						logTarget:function(event){
							return event[event.name=='gain'?'source':'player'];
						},
						content:function(){
							"step 0"
							player.storage.sztfq=true;
							player.loseHp();
							"step 1"
							trigger[trigger.name=='gain'?'source':'player'].draw(2);
						},
						sub:true,
					},
				},
			},
			sxcly:{
				audio:"ext:神怒降世:1",
				group:"sxcly_damage",
				mod:{
					maxHandcardBase:function(player,num){
						return 0;
					},
				},
                animationColor:"water",
                skillAnimation:"legend",
				trigger:{
					player:"enterGame",
					global:"gameDrawAfter",
				},
				forced:true,
				content:function(){
					player.disableEquip('equip2');
					player.disableEquip('equip3');
					player.discard(player.getCards('h'));
				},
				subSkill:{
					damage:{
						audio:"ext:神怒降世:2",
						trigger:{
							source:"damageBegin1",
						},
						filter:function(event){
							return event.card&&(event.card.name=='sha'||event.card.name=='juedou')&&event.notLink();
						},
						forced:true,
						content:function(){
							trigger.num++;
						},
						ai:{
							damageBonus:true,
						},
						sub:true,
					},
				},
			},
			sxccb:{
				audio:"ext:神怒降世:1",
				init:function(player){
					if(!player.storage.sxccb1) player.storage.sxccb1=0;
					if(!player.storage.sxccb2) player.storage.sxccb2=0;
				},
				trigger:{
					player:["drawBegin","gainBegin"],
				},
				forced:true,
				content:function(){
					"step 0"
					if(!player.hasSkill('sxccb_qingchu')) player.addTempSkill('sxccb_qingchu');
					if(event.triggername=='gainBegin') event.goto(1);
					if(trigger.num<3&&player.storage.sxccb1<2) event.goto(3);
					if(trigger.num>=3&&player.storage.sxccb2<2) event.goto(5);
					"step 1"
					if(trigger.cards.length<3&&player.storage.sxccb1<2) event.goto(3);
					if(trigger.cards.length>=3&&player.storage.sxccb2<2) event.goto(5);
					"step 2"
					event.goto(7);
					"step 3"
					player.chooseTarget(get.prompt('sxccb'),'<center>视为使用一张【杀】</center>',function(card,player,target){
						return player.inRange(target)&&target!=player;
					}).set('ai',function(target){
						var player=_status.event.player;
						return get.damageEffect(target,player,player);
					});
					"step 4"
					if(result.bool){
						player.useCard({name:'sha',isCard:true},false,result.targets[0]);
						player.storage.sxccb1++;
					}
					event.goto(7);
					"step 5"
					player.chooseTarget(get.prompt('sxccb'),'<center>使用一张【决斗】</center>',function(card,player,target){
						return target!=player;
					}).set('ai',function(target){
						var player=_status.event.player;
						return get.damageEffect(target,player,player);
					});
					"step 6"
					if(result.bool){
						player.useCard({name:'juedou',isCard:true},false,result.targets[0]);
						player.storage.sxccb2++;
					}
					"step 7"
					trigger.cancel();
				},
				subSkill:{
					qingchu:{
						silent:true,
						unique:true,
						forced:true,
						onremove:function(player){
							player.storage.sxccb1=0;
							player.storage.sxccb2=0;
						},
						sub:true,
					},
				},
			},
			sxchc:{
				audio:"ext:神怒降世:2",
				enable:["chooseToUse","chooseToRespond"],
				locked:false,
				intro:{
					name:"虎痴",
					content:"本回合已发动#次",
				},
				hiddenCard:function(player,name){
					if(lib.inpile.contains(name)&&get.type(name)=='basic') return true;
				},
				filter:function(event,player){
					if(player==_status.currentPhase&&player.storage.sxchc>=4) return false;
					if(event.triggername=='chooseToRespond'&&get.type(event.card)=='trick') return false;
					if(player!=_status.currentPhase&&(event.responded||event.sxchc)) return false;
					for(var i of lib.inpile){
						if(event.filterCard({name:i},player,event)) return true;
					}
					return false;
				},
				delay:false,
				content:function(){
					'step 0'
					if(player==_status.currentPhase){
						if(!player.hasSkill('sxchc_qingchu')) player.addTempSkill('sxchc_qingchu');
						player.addMark('sxchc',1);
					}
					var evt=event.getParent(2);
					evt.set('sxchc',true);
					var cards=get.bottomCards(3+player.getDamagedHp());
					for(var i=cards.length-1;i>=0;i--){
						ui.cardPile.appendChild(cards[i].fix(),ui.cardPile.firstChild);
					}
					player.chooseButton(['〖虎痴〗：选择要'+(evt.name=='chooseToUse'?'使用':'打出')+'的牌',cards]).set('filterButton',function(button){
						return _status.event.cards.contains(button.link);
					}).set('cards',cards.filter(function(card){
						return evt.filterCard(card,evt.player,evt)
					})).set('ai',function(button){
						var evt=_status.event.getParent(3);
						if(evt&&evt.ai){
							var tmp=_status.event;
							_status.event=evt;
							var result=(evt.ai||event.ai1)(button.link,_status.event.player,evt);
							_status.event=tmp;
							return result;
						}
						return 1;
					});
					'step 1'
					var evt=event.getParent(2);
					if(result.bool&&result.links&&result.links.length){
						if(evt.name=='chooseToUse'){
							game.broadcastAll(function(result){
								lib.skill.sxchc_backup.viewAs={name:result.name,cards:[result],isCard:true};
								lib.skill.sxchc_backup.prompt='选择'+get.translation(result)+'的目标';
							},result.links[0]);
							evt.set('_backupevent','sxchc_backup');
							evt.backup('sxchc_backup');
						}
						else{
							delete evt.result.skill;
							delete evt.result.used;
							evt.result.card=get.autoViewAs(result.links[0]);
							evt.result.cards=[result.links[0]];
							evt.redo();
							return;
						}
					}
					evt.goto(0);
				},
				ai:{
					effect:{
						target:function(card,player,target,effect){
							if(get.tag(card,'respondShan')) return 0.7;
							if(get.tag(card,'respondSha')) return 0.7;
						},
					},
					order:11,
					respondShan:true,
					respondSha:true,
					result:{
						player:function(player){
							if(_status.event.dying) return get.attitude(player,_status.event.dying);
							return 1;
						},
					},
				},
				subSkill:{
					qingchu:{
						silent:true,
						unique:true,
						forced:true,
						onremove:function(player){
							player.removeMark('sxchc',player.countMark('sxchc'));
						},
						sub:true,
					},
				},
			},
			sxchc_backup:{
				sourceSkill:'sxchc',
				precontent:function(){
					delete event.result.skill;
					event.result.cards=event.result.card.cards;
					event.result.card=get.autoViewAs(event.result.cards[0])
				},
				filterCard:function(){return false},
				selectCard:-1,
			},
			sxchh:{
				audio:"ext:神怒降世:1",
				trigger:{
					player:"damageEnd",
				},
				direct:true,
				content:function(){
					"step 0"
					event.cards=get.bottomCards(3+player.getDamagedHp());
					for(var i=event.cards.length-1;i>=0;i--){
						ui.cardPile.appendChild(event.cards[i].fix(),ui.cardPile.firstChild);
					}
					"step 1"
					var next=player.chooseButton([1,trigger.num],['〖虎侯〗：选择要弃置的牌',event.cards]);
					next.set('ai',function(button,player){
						if(get.subtype(button.link)=='equip2') return 1;
						if(get.subtype(button.link)=='equip3') return 1;
						if(button.link.name=='wuxie') return 1;
						if(button.link.name=='huogong') return 1;
						return -get.value(button.link);
					});
					"step 2"
					if(result.bool&&result.links&&result.links.length){
						player.logSkill('sxchh');
						player.showCards(result.links);
						game.cardsDiscard(result.links);
						game.log(result.links,'被置入了弃牌堆');
					}
				},
			},
			sdwqx:{
				audio:"ext:神怒降世:2",
				group:"sdwqx_damage",
				enable:"phaseUse",
				usable:1,
				filterCard:function(card){
					return get.subtype(card)=='equip1';
				},
				check:function(card){
					return 6-get.value(card)
				},
				complexCard:true,
				selectCard:[0,1],
				position:"he",
				discard:false,
				toStorage:function(card){
					if(ui.selected.cards.length>0) return true;
					return false;
				},
				prepare:function(card){
					if(ui.selected.cards.length>0) return "give";
					return false;
				},
				filterTarget:function(card,player,target){
					return player!=target;
				},
				mod:{
					globalFrom:function(from,to){
						if(to.hasSkill('sdwqx_mark')){
							return -Infinity;
						}
					},
				},
				content:function (){
					"step 0"
					if(cards.length>0){
						if(!target.hasSkill('sdwqx_mark')) target.addTempSkill('sdwqx_mark');
						player.$give(cards[0],target,false);
						target.markAuto('sdwqx_mark',cards);
						game.cardsGotoSpecial(cards);
						game.log(player,'将',cards,'置于了',target,'的武将牌上');
						event.goto(3);
					}
					"step 1"
					player.chooseControl('体力','上限').set('prompt','〖强袭〗：选择一项').set('ai',function(target){
						if(player.getDamagedHp()>1) return '上限';
						return '体力';
					});
					"step 2"
					if(result.control=='体力'){
						player.loseHp();
					}
					else{
						player.loseMaxHp();
					}
					"step 3"
					if(target.hasSkill('sdwqx_mark')) target.damage(2,'nocard');
					else target.damage('nocard');
				},
				subSkill:{
					mark:{
						init:function(player){
							if(!player.storage.sdwqx_mark) player.storage.sdwqx_mark=[];
						},
						marktext:"袭",
						intro:{
							content:"cards",
							onunmark:function(storage,player){
								if(storage&&storage.length){
									player.$throw(storage,1000);
									game.cardsDiscard(storage);
									game.log(storage,'被置入了弃牌堆');
									storage.length=0;
								}
							},
						},
						trigger:{
							global:'phaseEnd',
							player:'die',
						},
						forced:true,
						silent:true,
						unique:true,
						forceDie:true,
						filter:function(event,player){
							return player.storage.sdwqx_mark&&player.storage.sdwqx_mark.length>0;
						},
						content:function(){
							if(event.triggername=="phaseEnd"){
								player.gain(player.storage.sdwqx_mark,player,'giveAuto','bySelf','log','fromStorage');
							}
							else player.unmarkSkill('sdwqx_mark');
							delete player.storage.sdwqx_mark;
						},
						sub:true,
					},
					damage:{
						audio:"sdwqx",
						trigger:{
							source:"damageBegin1",
						},
						filter:function(event,player){
							return event.player.hasSkill('sdwqx_mark')&&event.card;
						},
						content:function(){
							player.gain(trigger.player.storage.sdwqx_mark,'gain2','log','fromStorage');
							delete trigger.player.storage.sdwqx_mark;
							trigger.player.unmarkSkill('sdwqx_mark');
							trigger.player.removeSkill('sdwqx_mark');
						},
						sub:true,
					},
				},
				ai:{
					order:20,
					result:{
						target:function(player,target){
							if(player.maxHp==1||(player.hp==1&&(player.countCards('h',{name:'tao'})<1||player.countCards('h',{name:'jiu'})<1))) return 0;
							return -1;
						},
					},
				},
			},
			sdwlk:{
				audio:"ext:神怒降世:2",
				group:"sdwlk_die",
				trigger:{
					source:"damageSource",
				},
				filter:function(event,player){
					return event.num>1&&event.player.isAlive();
				},
				forced:true,
				content:function(){
					if(player.isDamaged()) player.recover();
					else player.gainMaxHp();
				},
				subSkill:{
					die:{
						audio:"sdwlk",
						trigger:{
							global:"dieAfter",
						},
						filter:function(event,player){
							return event.source==player;
						},
						forced:true,
						content:function(){
							player.gainMaxHp();
							player.recover();
						},
						sub:true,
					},
				},
			},
			sdwpn:{
				audio:"ext:神怒降世:2",
				init:function(player){
					if(!player.storage.sdwpn) player.storage.sdwpn=10;
				},
				mark:true,
				unique:true,
				intro:{
					name:"睥睨",
					content:"当前概率$0%",
				},
				skillAnimation:true,
				animationColor:"metal",
				usable:1,
				trigger:{
					player:"damageEnd",
				},
				filter:function(event,player){
					var gailv1=[];
					for(var i=1;i<=10;i++){
						gailv1.push(i);
					}
					var gailv2=gailv1.randomGet();
					return _status.currentPhase!=player&&player.storage.sdwpn>=gailv2;
				},
				forced:true,
				content:function(){
					player.storage.sdwpn--;
					player.insertPhase();
					player.updateMarks('sdwpn');
				},
				ai:{
					maixie:true,
					"maixie_hp":true,
					effect:{
						target:function (card,player,target){
							if(player.hasSkillTag('jueqing',false,target)) return [1,-1];
							if(get.tag(card,'damage')&&player!=target) return [1,0.6];
						},
					},
				},
			},
			gdyq:{
				audio:"ext:神怒降世:1",
				enable:"phaseUse",
				usable:1,
				filterTarget:function(card,player,target){
					return target.countCards('e')>0;
				},
				content:function(){
					player.discardPlayerCard(target,'e',true);
				},
				ai:{
					order:20,
					expose:0.4,
					threaten:2,
					result:{
						target:function(player,target){
							return -1;
						},
					},
				},
			},
			gdyh:{
				audio:"ext:神怒降世:1",
				trigger:{
					target:"useCardToTarget",
				},
				filter:function(event,player){
					return event.card.name=='sha';
				},
				frequent:true,
				content:function(){
					player.draw();
				},
				ai:{
					threaten:0.5,
				},
			},
			scrtb:{
				audio:"ext:神怒降世:2",
				group:"scrtb_zhuangbei",
				trigger:{
					player:"damageBegin4",
				},
				forced:true,
				filter:function(event,player){
					return _status.currentPhase!=event.source;
				},
				content:function(){
					trigger.cancel();
				},
				subSkill:{
					zhuangbei:{
						audio:"scrtb",
						trigger:{
							player:"enterGame",
							global:"gameDrawAfter",
							target:"useCardToTargeted",
						},
						filter:function(event,player){
							return player.isMinEquip();
						},
						forced:true,
						content:function (){
							"step 0"
							event.num=[1,2,3,4,5];
							"step 1"
							if(player.getEquip(1)) event.num.remove(1);
							if(player.getEquip(2)) event.num.remove(2);
							if(player.getEquip(3)) event.num.remove(3);
							if(player.getEquip(4)) event.num.remove(4);
							if(player.getEquip(5)) event.num.remove(5);
							"step 2"
							if(event.num.length<1) event.finish();
							"step 3"
							event.lx=event.num.randomGet();
							"step 4"
							if(event.lx==1) event.lx2='equip1';
							if(event.lx==2) event.lx2='equip2';
							if(event.lx==3) event.lx2='equip3';
							if(event.lx==4) event.lx2='equip4';
							if(event.lx==5) event.lx2='equip5';
							"step 5"
							var card=get.cardPile2(function(card){
								return get.subtype(card)==event.lx2;
							});
							if(card){
								player.equip(card);
							}
							else{
								if(event.lx==5){
									event.num.remove(5);
									event.goto(2);
								}
							}
						},
						sub:true,
					},
				},
				ai:{
					filterDamage:true,
				},
			},
			scrhd:{
				audio:"ext:神怒降世:2",
				trigger:{
					player:"phaseDrawBegin2",
				},
				filter:function(event,player){
					return player.canMoveCard();
				},
				check:function(event,player){
					return player.canMoveCard(true);
				},
				content:function(){
					"step 0"
					player.chooseToDiscard('he','〖撼敌〗:弃置一张牌或少摸一张牌，然后移动场上的一张牌',lib.filter.cardDiscardable).set('ai',function(card){
						if(!_status.event.check) return 0;
						return 7-get.value(card);
					});
					"step 1"
					if(!result.bool){
						trigger.num--;
					}
					player.moveCard(true);
				},
				ai:{
					threaten:2,
				},
			},
			scrjt:{
				audio:"ext:神怒降世:2",
				intro:{
					name:"金汤",
					content:"mark",
				},
				trigger:{
					player:"phaseJieshuBegin",
				},
				filter:function(event,player){
					return player.countCards('e')>0;
				},
				animationColor:"water",
				skillAnimation:"legend",
				forced:true,
				content:function(){
					"step 0"
					player.draw(player.countCards('e'));
					player.chooseTarget('〖金汤〗:令至多'+get.cnNumber(player.countCards('e'))+'名角色各获得一枚「金汤」',[1,player.countCards('e')]).ai=function(target){
						var player=_status.event.player;
						if(player==target) return get.attitude(player,target)+10;
						return get.attitude(player,target);
					}
					"step 1"
					if(result.bool){
						player.line(result.targets);
						event.targets=result.targets;
						for(var i=0;i<result.targets.length;i++){
							if(result.targets[i].countMark('scrjt')<4) result.targets[i].addMark('scrjt',1);
							if(!result.targets[i].hasSkill('scrgs2')&&result.targets[i]!=player) result.targets[i].addSkill('scrgs2');
						}
						if(event.targets.length==1&&event.targets.contains(player)) event.finish();
						else event.goto(2);
					}
					else{
						event.finish();
					}
					"step 2"
					event.given=0;
					"step 3"
					player.chooseCardTarget({
						filterCard:true,
						selectCard:[1,player.countCards('e')-event.given],
						filterTarget:function(card,player,target){
							return player!=target&&event.targets.contains(target)/*&&target!=event.temp*/;
						},
						ai1:function(card){
							if(ui.selected.cards.length>0) return -1;
							if(card.name=='du') return 20;
							return (_status.event.player.countCards('h')-_status.event.player.hp);
						},
						ai2:function(target){
							var att=get.attitude(_status.event.player,target);
							if(ui.selected.cards.length&&ui.selected.cards[0].name=='du'){
								if(target.hasSkillTag('nodu')) return 0;
								return 1-att;
							}
							return att-4;
						},
						prompt:'〖金汤〗:将至多'+get.cnNumber(player.countCards('e')-event.given)+'张手牌分配给这些角色'
					});
					"step 4"
					if(result.bool){
						result.targets[0].gain(result.cards,player,'giveAuto');
						event.given+=result.cards.length;
						if(event.given<player.countCards('e')){
							//event.temp=result.targets[0];
							event.goto(3);
						}
						else event.finish();
					}
					else event.finish();
				},
				ai:{
					threaten:2,
				},
			},
			scrgs:{
				audio:"ext:神怒降世:2",
				enable:['chooseToUse','chooseToRespond'],
				filter:function(event,player){
					if(!player.countMark('scrjt')||!player.countCards('hse')) return false;
					for(var i of lib.inpile){
						var name=i;
						if(((name=='sha'&&!player.hasSkill('scrgs_sha'))||(name=='shan'&&!player.hasSkill('scrgs_shan'))||(name=='tao'&&!player.hasSkill('scrgs_tao'))||(name=='wuxie'&&!player.hasSkill('scrgs_wuxie')))&&lib.filter.filterCard({name:i},player,event)) return true;
					}
					return false;
				},
				chooseButton:{
					dialog:function(event,player){
						var list=[];
						for(var i=0;i<lib.inpile.length;i++){
							var name=lib.inpile[i];
							if(name=='sha'&&!player.hasSkill('scrgs_sha')){
								if(event.filterCard({name:name},player,event)) list.push(['基本','','sha']);
								if(event.filterCard({name:name,nature:'fire'},player,event)) list.push(['基本','','sha','fire']);
								if(event.filterCard({name:name,nature:'thunder'},player,event)) list.push(['基本','','sha','thunder']);
								if(event.filterCard({name:name,nature:'ice'},player,event)) list.push(['基本','','sha','ice']);
							}
							if(name=='shan'&&!player.hasSkill('scrgs_shan')){
								if(event.filterCard({name:name},player,event)) list.push(['基本','','shan']);
							}
							if(name=='tao'&&!player.hasSkill('scrgs_tao')){
								if(event.filterCard({name:name},player,event)) list.push(['基本','','tao']);
							}
							if(name=='wuxie'&&!player.hasSkill('scrgs_wuxie')){
								if(event.filterCard({name:name},player,event)) list.push(['锦囊','','wuxie']);
							}
						}
						return ui.create.dialog('固守',[list,'vcard']);
					},
					filter:function(button,player){
						return _status.event.getParent().filterCard({name:button.link[2]},player,_status.event.getParent());
					},
					check:function(button){
						var player=_status.event.player;
						if(player.countCards('hs',button.link[2])>0) return 0;
						if(['wugu','zhulu_card'].contains(button.link[2])) return 0;
						var effect=player.getUseValue(button.link[2]);
						if(effect>0) return effect;
						return 0;
					},
					check:function(button){
						if(_status.event.getParent().type!='phase') return 1;
						var player=_status.event.player;
						if(['wugu','zhulu_card','yiyi','lulitongxin','lianjunshengyan','diaohulishan'].contains(button.link[2])) return 0;
						return player.getUseValue({
							name:button.link[2],
							nature:button.link[3],
						});
					},
					backup:function(links,player){
						return {
							filterCard:true,
							audio:'scrgs',
							popname:true,
							check:function(card){
								return 8-get.value(card);
							},
							position:'hse',
							viewAs:{name:links[0][2],nature:links[0][3]},
							precontent:function(){
								player.removeMark('scrjt',1);
								player.addTempSkill('scrgs_jilu');
							},
						}
					},
					prompt:function(links,player){
						return '〖固守〗：将一张牌当做'+(get.translation(links[0][3])||'')+get.translation(links[0][2])+'使用或打出';
					}
				},
				hiddenCard:function(player,name){
					if(player.countMark('scrjt')<1) return false;
					if(player.countCards('hes')<1) return false;
					return true;
				},
				subSkill:{
					jilu:{
						trigger:{
							player:['useCardAfter','respondAfter'],
						},
						autodelay:function(event){
							return event.name=='respond'?0.5:false;
						},
						filter:function(evt,player){
							return ['sha','shan','tao','wuxie'].contains(evt.card.name)&&evt.cards;
						},
						forced:true,
						popup:false,
						content:function(){
							if(trigger.card.name=='sha'){
								player.addTempSkill('scrgs_sha','roundStart');
								player.removeSkill('scrgs_jilu');
							}
							if(trigger.card.name=='shan'){
								player.addTempSkill('scrgs_shan','roundStart');
								player.removeSkill('scrgs_jilu');
							}
							if(trigger.card.name=='tao'){
								player.addTempSkill('scrgs_tao','roundStart');
								player.removeSkill('scrgs_jilu');
							}
							if(trigger.card.name=='wuxie'){
								player.addTempSkill('scrgs_wuxie','roundStart');
								player.removeSkill('scrgs_jilu');
							}
						},
						sub:true,
					},
					sha:{
						sub:true,
					},
					shan:{
						sub:true,
					},
					tao:{
						sub:true,
					},
					wuxie:{
						sub:true,
					},
				},
				ai:{
					combo:'scrjt',
					fireAttack:true,
					respondSha:true,
					respondShan:true,
					skillTagFilter:function(player){
						if(!player.countMark('scrjt')||!player.countCards('hse')) return false;
					},
					order:1,
					result:{
						player:1,
					},
				},
			},
			scrgs2:{
				audio:"scrgs",
				enable:['chooseToUse','chooseToRespond'],
				filter:function(event,player){
					if(!player.countMark('scrjt')||!player.countCards('hse')) return false;
					for(var i of lib.inpile){
						var name=i;
						if(((name=='sha'&&!player.hasSkill('scrgs2_sha'))||(name=='shan'&&!player.hasSkill('scrgs2_shan'))||(name=='tao'&&!player.hasSkill('scrgs2_tao'))||(name=='wuxie'&&!player.hasSkill('scrgs2_wuxie')))&&lib.filter.filterCard({name:i},player,event)) return true;
					}
					return false;
				},
				chooseButton:{
					dialog:function(event,player){
						var list=[];
						for(var i=0;i<lib.inpile.length;i++){
							var name=lib.inpile[i];
							if(name=='sha'&&!player.hasSkill('scrgs2_sha')){
								if(event.filterCard({name:name},player,event)) list.push(['基本','','sha']);
								if(event.filterCard({name:name,nature:'fire'},player,event)) list.push(['基本','','sha','fire']);
								if(event.filterCard({name:name,nature:'thunder'},player,event)) list.push(['基本','','sha','thunder']);
								if(event.filterCard({name:name,nature:'ice'},player,event)) list.push(['基本','','sha','ice']);
							}
							if(name=='shan'&&!player.hasSkill('scrgs2_shan')){
								if(event.filterCard({name:name},player,event)) list.push(['基本','','shan']);
							}
							if(name=='tao'&&!player.hasSkill('scrgs2_tao')){
								if(event.filterCard({name:name},player,event)) list.push(['基本','','tao']);
							}
							if(name=='wuxie'&&!player.hasSkill('scrgs2_wuxie')){
								if(event.filterCard({name:name},player,event)) list.push(['锦囊','','wuxie']);
							}
						}
						return ui.create.dialog('固守',[list,'vcard']);
					},
					filter:function(button,player){
						return _status.event.getParent().filterCard({name:button.link[2]},player,_status.event.getParent());
					},
					check:function(button){
						var player=_status.event.player;
						if(player.countCards('hs',button.link[2])>0) return 0;
						if(['wugu','zhulu_card'].contains(button.link[2])) return 0;
						var effect=player.getUseValue(button.link[2]);
						if(effect>0) return effect;
						return 0;
					},
					check:function(button){
						if(_status.event.getParent().type!='phase') return 1;
						var player=_status.event.player;
						if(['wugu','zhulu_card','yiyi','lulitongxin','lianjunshengyan','diaohulishan'].contains(button.link[2])) return 0;
						return player.getUseValue({
							name:button.link[2],
							nature:button.link[3],
						});
					},
					backup:function(links,player){
						return {
							filterCard:true,
							audio:'scrgs',
							popname:true,
							check:function(card){
								return 8-get.value(card);
							},
							position:'hse',
							viewAs:{name:links[0][2],nature:links[0][3]},
							precontent:function(){
								player.removeMark('scrjt',1);
								player.addTempSkill('scrgs2_jilu');
								if(player.countMark('scrjt')<1) player.removeSkill('scrgs2');
							},
						}
					},
					prompt:function(links,player){
						return '〖固守〗：将一张牌当做'+(get.translation(links[0][3])||'')+get.translation(links[0][2])+'使用或打出';
					}
				},
				hiddenCard:function(player,name){
					if(player.countMark('scrjt')<1) return false;
					if(player.countCards('hes')<1) return false;
					return true;
				},
				subSkill:{
					jilu:{
						trigger:{
							player:['useCardAfter','respondAfter'],
						},
						autodelay:function(event){
							return event.name=='respond'?0.5:false;
						},
						filter:function(evt,player){
							return ['sha','shan','tao','wuxie'].contains(evt.card.name)&&evt.cards;
						},
						forced:true,
						popup:false,
						content:function(){
							if(trigger.card.name=='sha'){
								player.addTempSkill('scrgs2_sha','roundStart');
								player.removeSkill('scrgs2_jilu');
							}
							if(trigger.card.name=='shan'){
								player.addTempSkill('scrgs2_shan','roundStart');
								player.removeSkill('scrgs2_jilu');
							}
							if(trigger.card.name=='tao'){
								player.addTempSkill('scrgs2_tao','roundStart');
								player.removeSkill('scrgs2_jilu');
							}
							if(trigger.card.name=='wuxie'){
								player.addTempSkill('scrgs2_wuxie','roundStart');
								player.removeSkill('scrgs2_jilu');
							}
						},
						sub:true,
					},
					sha:{
						sub:true,
					},
					shan:{
						sub:true,
					},
					tao:{
						sub:true,
					},
					wuxie:{
						sub:true,
					},
				},
				ai:{
					fireAttack:true,
					respondSha:true,
					respondShan:true,
					skillTagFilter:function(player){
						if(!player.countMark('scrjt')||!player.countCards('hse')) return false;
					},
					order:1,
					result:{
						player:1,
					},
				},
			},
			scrgs_backup:{audio:'scrgs'},
			scrgs2_backup:{audio:'scrgs'},
			spdbxh:{
				audio:"ext:神怒降世:2",
				enable:"phaseUse",
				group:["spdbxh_useend","spdbxh_dyingafter","spdbxh_die"],
				init:function(player){
					if(!player.storage.spdbxh) player.storage.spdbxh=false;
					if(!player.storage.spdbxh2) player.storage.spdbxh2=false;
				},
				filterTarget:function(card,player,target){
					return player!=target&&player.inRange(target);
				},
				filter:function(event,player){
					return player.storage.spdbxh==false&&player.storage.spdbxh2==false;
				},
				content:function(){
					player.storage.spdbxh=true;
					target.damage('nocard');
				},
				subSkill:{
					useend:{
						trigger:{
							player:["useCardEnd","phaseBegin"],
						},
						forced:true,
						direct:true,
						content:function(){
							player.storage.spdbxh=false;
							if(event.triggername=='phaseBegin') player.storage.spdbxh2=false;
						},
						sub:true,
					},
					dyingafter:{
						trigger:{
							global:"dyingAfter",
						},
						filter:function(event,player){
							return event.player.isAlive()&&event.reason&&event.reason.getParent().name=='spdbxh';
						},
						forced:true,
						direct:true,
						content:function(){
							trigger.player.recover();
							player.addTempSkill('spdbxh_mark');
							player.storage.spdbxh2=true;
						},
						sub:true,
					},
					die:{
						trigger:{
							global:"die",
						},
						filter:function(event,player){
							return event.reason&&event.reason.getParent().name=='spdbxh';
						},
						forced:true,
						direct:true,
						content:function(){
							player.loseHp();
							player.addTempSkill('spdbxh_mark');
							player.storage.spdbxh2=true;
						},
						sub:true,
					},
					mark:{
						mark:true,
						unique:true,
						intro:{
							name:"黠慧",
							content:"本回合无法复原",
						},
						sub:true,
					},
				},
				ai:{
					order:100,
					result:{
						expose:0.6,
						threaten:1.5,
						target:function(player,target){
							return get.damageEffect(target,player);
						},
					},
				},
			},
			spdblz:{
				audio:"ext:神怒降世:1",
				trigger:{
					player:"damageBegin3",
				},
				filter:function(event,player){
					return event.card&&event.card.name=='sha';
				},
				forced:true,
				content:function(){
					trigger.cancel();
					player.loseMaxHp(trigger.num);
				},
			},
			algyws:{
				audio:"ext:神怒降世:2",
				group:"algyws_damage",
				mod:{
					targetInRange:function (card){
						if(get.suit(card)=='diamond'&&card.name=='sha') return true;
					},
				},
				subSkill:{
					damage:{
						trigger:{
							player:"useCardToTargeted",
						},
						filter:function(event){
							return event.card&&event.card.name=='sha'&&get.suit(event.card)=='heart';
						},
						silent:true,
						forced:true,
						content:function(){
							var id=trigger.target.playerid;
							var map=trigger.getParent().customArgs;
							if(!map[id]) map[id]={};
							if(typeof map[id].extraDamage!='number'){
								map[id].extraDamage=0;
							}
							map[id].extraDamage++;
						},
						sub:true,
					},
				},
				enable:["chooseToRespond","chooseToUse"],
				filterCard:function(card,player){
					if(get.zhu(player,'shouyue')) return true;
					return get.color(card)=='red';
				},
				position:"hes",
				viewAs:{
					name:"sha",
				},
				viewAsFilter:function(player){
					if(get.zhu(player,'shouyue')){
						if(!player.countCards('hes')) return false;
					}
					else{
						if(!player.countCards('hes',{color:'red'})) return false;
					}
				},
				prompt:"将一张红牌当作【杀】使用或打出",
				check:function(card){return 4-get.value(card)},
				ai:{
					respondSha:true,
					skillTagFilter:function(player){
						if(get.zhu(player,'shouyue')){
							if(!player.countCards('hes')) return false;
						}
						else{
							if(!player.countCards('hes',{color:'red'})) return false;
						}
					},
					canLink:function(player,target,card){
						if(!target.isLinked()&&!player.hasSkill('wutiesuolian_skill')) return false;
						if(target.mayHaveShan()&&!player.hasSkillTag('directHit_ai',true,{
							target:target,
							card:card,
						},true)) return false;
						if(player.hasSkill('jueqing')||target.hasSkill('gangzhi')||target.hasSkill('gangzhi')) return false;
						return true;
					},
					basic:{
						useful:[5,1],
						value:[5,1],
					},
					order:function(item,player){
						if(player.hasSkillTag('presha',true,null,true)) return 10;
						if(lib.linked.contains(get.nature(item))){
							if(game.hasPlayer(function(current){
								return current!=player&&current.isLinked()&&player.canUse(item,current,null,true)&&get.effect(current,item,player,player)>0&&lib.card.sha.ai.canLink(player,current,item);
							})&&game.countPlayer(function(current){
								return current.isLinked()&&get.damageEffect(current,player,player,get.nature(item))>0;
							})>1) return 3.1;
							return 3;
						}
						return 3.05;
					},
					result:{
						target:function(player,target,card,isLink){
							var eff=function(){
								if(!isLink&&player.hasSkill('jiu')){
									if(!target.hasSkillTag('filterDamage',null,{
										player:player,
										card:card,
										jiu:true,
									})){
										if(get.attitude(player,target)>0){
											return -7;
										}
										else{
											return -4;
										}
									}
									return -0.5;
								}
								return -1.5;
							}();
							if(!isLink&&target.mayHaveShan()&&!player.hasSkillTag('directHit_ai',true,{
								target:target,
								card:card,
							},true)) return eff/1.2;
							return eff;
						},
					},
					tag:{
						respond:1,
						respondShan:1,
						damage:function(card){
							if(card.nature=='poison') return;
							return 1;
						},
						natureDamage:function(card){
							if(card.nature) return 1;
						},
						fireDamage:function(card,nature){
							if(card.nature=='fire') return 1;
						},
						thunderDamage:function(card,nature){
							if(card.nature=='thunder') return 1;
						},
						poisonDamage:function(card,nature){
							if(card.nature=='poison') return 1;
						},
					},
				},
			},
			algyyj:{
				audio:"ext:神怒降世:2",
				enable:"phaseUse",
				usable:1,
				filterTarget:function (card,player,target){
					return player!=target&&target.countCards('h');
				},
				content:function(){
					"step 0"
					player.choosePlayerCard(target,'h',true);
					"step 1"
					event.card=result.cards[0];
					player.showCards(event.card);
					if(get.color(event.card)=='black'){
						if(!target.hasSkill('fengyin')){
							target.addTempSkill('fengyin');
						}
						target.addTempSkill('algyyj_mark');
						event.finish();
					}
					else{
						player.gain(event.card,target,'give','bySelf');
						player.chooseBool('〖义绝〗：是否令目标摸一张牌并回复1点体力？').ai=function(event,player){
							return get.recoverEffect(target,player,player)>0;
						};
					}
					"step 2"
					if(result.bool){
						target.draw();
						if(target.isDamaged()) target.recover();
					}
				},
				ai:{
					result:{
						target:function(player,target){
							if(target.countCards('h')>target.hp+1&&get.recoverEffect(target)>0){
								return 1;
							}
							if(player.canUse('sha',target)&&(player.countCards('h','sha')||player.countCards('he',{color:'red'}))){
								return -2;
							}
							return -0.5;
						},
					},
					order:9,
					"directHit_ai":true,
					skillTagFilter:function(player,tag,arg){
						if(!arg.target.hasSkillTag('algyyj_mark')) return false;
					},
				},
				subSkill:{
					mark:{
						mark:true,
						unique:true,
						intro:{
							content:"不能使用或打出牌",
						},
						mod:{
							cardEnabled2:function(card){
								if(get.position(card)=='h') return false;
								if(get.position(card)=='s') return false;
							},
						},
						sub:true,
					},
				},
			},
			cyeym:{
				audio:"ext:神怒降世:2",
				enable:"phaseUse",
				unique:true,
				mark:true,
				limited:true,
				init:function(player){
					player.storage.cyeym=false;
				},
				intro:{
					content:"limited",
				},
				skillAnimation:true,
				animationColor:"wood",
				filterTarget:function(card,player,target){
					return player!=target;
				},
				filter:function(event,player){
					if(player.storage.cyeym) return false;
					return true;
				},
				content:function(){
					"step 0"
					player.awakenSkill('cyeym');
					player.storage.cyeym=true;
					"step 1"
					target.gain(player.getCards('hej'),player,'give');
					if(!target.hasSkill('cyehx')) target.addSkill('cyehx');
					if(!target.hasSkill('cyeym_judge')) target.addSkill('cyeym_judge');
					"step 2"
					target.insertPhase();
					player.die();
				},
				ai:{
					threaten:1,
					order:function(){
						return get.order({name:'tao'})+1;
					},
					result:{
						target:function(player,target){
							if(get.attitude(player,target)>0&&target.isMinHp()&&target.isDamaged()&&target.hp<=2&&target.countCards('h')>target.hp) return 1;
							if(player.hp==1&&player.countCards('h',{name:"tao"})<1) return 1;
							return 0;
						},
					},
				},
				subSkill:{
					judge:{
						mark:true,
						intro:{
							name:"异梦",
							content:"跳过下一个判定阶段",
						},
						trigger:{
							player:"phaseJudgeBegin",
						},
						silent:true,
						unique:true,
						forced:true,
						content:function(){
							trigger.cancel();
							player.removeSkill('cyeym_judge');
						},
						sub:true,
					},
				},
			},
			cyehx:{
				audio:"ext:神怒降世:2",
				group:"cyehx_gain",
				trigger:{
					global:"damageEnd",
				},
				filter:function(event){
					return event.source&&event.card&&event.card.name=='sha';
				},
				check:function(event,player){
					return get.attitude(player,event.source)>0;
				},
				logTarget:function(event){
					return event.source;
				},
				content:function(){
					trigger.source.gain(get.cardPile(function(card){
						return get.type(card,'trick')=='trick';
					}),'gain2');
				},
				subSkill:{
					gain:{
						audio:"cyehx",
						trigger:{
							global:"gainEnd",
						},
						filter:function(event){
							if(event.num<1) return false;
							return event.source&&event.source!=event.player;
						},
						check:function(event,player){
							return get.attitude(player,event.player)>0;
						},
						logTarget:function(event){
							return event.player;
						},
						content:function(){
							trigger.player.gain(get.cardPile(function(card){
								return get.type(card,'basic')=='basic';
							}),'gain2');
						},
						ai:{
							expose:0.3,
						},
						sub:true,
					},
				},
				ai:{
					expose:0.3,
				},
			},
			spzxpy:{
				audio:"ext:神怒降世:1",
				trigger:{
					global:"useCard",
				},
				filter:function(event,player){
					return event.targets.length>1&&event.player!=player;
				},
				check:function(event,player){
					if(player.hp==1&&event.targets.length>3) return false;
					return true;
				},
				content:function(){
					"step 0"
					player.draw(trigger.targets.length);
					"step 1"
					if(trigger.targets.length>3) player.loseMaxHp();
				},
			},
			spzxyw:{
				audio:"ext:神怒降世:1",
				trigger:{
					global:"gainEnd",
				},
				filter:function(event,player){
					return event.player.isPhaseUsing()&&_status.currentPhase==event.player&&event.player!=player&&event.player.countCards('h')>event.player.hp;
				},
				logTarget:function(event){
					return event.player;
				},
				check:function(event,player){
					return get.attitude(player,event.player)<0;
				},
				content:function(){
					"step 0"
					if(trigger.player.hasSkill('fengyin')){
						trigger.player.chooseToDiscard('〖扬武〗：弃置'+get.cnNumber(trigger.player.countCards('h')-trigger.player.hp)+'张手牌',trigger.player.countCards('h')-trigger.player.hp,true).set('ai',function(card){
							return 8-get.value(card);
						});
						event.finish();
					}
					"step 1"
					trigger.player.chooseToDiscard('〖扬武〗：弃置'+get.cnNumber(trigger.player.countCards('h')-trigger.player.hp)+'张手牌，否则本回合所有非锁定技失效',trigger.player.countCards('h')-trigger.player.hp).set('ai',function(card){
						if(![0,1].randomGet()) return false;
						return 8-get.value(card);
					});
					"step 2"
					if(!result.bool){
						if(!trigger.player.hasSkill('fengyin')) trigger.player.addTempSkill('fengyin');
					}
				},
				ai:{
					expose:0.4,
				},
			},
			alcqzm:{
				audio:"ext:神怒降世:4",
				init:function(player){
					if(!player.storage.alcqzm1) player.storage.alcqzm1=[];
					if(!player.storage.alcqzm2) player.storage.alcqzm2=[];
					if(!player.storage.alcqzm3) player.storage.alcqzm3=[];
					if(!player.storage.alcqzm4) player.storage.alcqzm4=[];
				},
				trigger:{
					global:'gameStart',
					player:'enterGame',
				},
				forced:true,
				content:function(){
					"step 0"
					event.cards1=[];
					event.cards2=[];
					event.cards3=[];
					event.cards4=[];
					"step 1"
					while(event.cards1.length<ui.cardPile.childElementCount){
						var card1=get.cardPile2(function(card){
							return !event.cards1.contains(card)&&card.name=='sha'&&get.type(card)=='basic';
						});
						if(card1){
							event.cards1.push(card1);
						}
						else break;
					}
					"step 2"
					while(event.cards2.length<ui.cardPile.childElementCount){
						var card2=get.cardPile2(function(card){
							return !event.cards2.contains(card)&&card.name=='tao'&&get.type(card)=='basic';
						});
						if(card2){
							event.cards2.push(card2);
						}
						else break;
					}
					"step 3"
					while(event.cards3.length<ui.cardPile.childElementCount){
						var card3=get.cardPile2(function(card){
							return !event.cards3.contains(card)&&get.type(card)=='equip';
						});
						if(card3){
							event.cards3.push(card3);
						}
						else break;
					}
					"step 4"
					while(event.cards4.length<ui.cardPile.childElementCount){
						var card4=get.cardPile2(function(card){
							return !event.cards4.contains(card)&&get.type(card)=='trick';
						});
						if(card4){
							event.cards4.push(card4);
						}
						else break;
					}
					"step 5"
					if(event.cards1.length){
						if(event.cards1.length%2==0) event.num1=event.cards1.length/2;
						else event.num1=(event.cards1.length-1)/2;
					}
					if(event.cards2.length){
						if(event.cards2.length%2==0) event.num2=event.cards2.length/2;
						else event.num2=(event.cards2.length-1)/2;
					}
					if(event.cards3.length){
						if(event.cards3.length%2==0) event.num3=event.cards3.length/2;
						else event.num3=(event.cards3.length-1)/2;
					}
					if(event.cards4.length){
						if(event.cards4.length%2==0) event.num4=event.cards4.length/2;
						else event.num4=(event.cards4.length-1)/2;
					}
					"step 6"
					var card5=event.cards1.randomGet();
					if(!player.storage.alcqzm1.contains(card5)){
						player.storage.alcqzm1.push(card5);
						event.cards1.remove(card5);
					}
					if(player.storage.alcqzm1.length<event.num1) event.goto(6);
					"step 7"
					var card6=event.cards2.randomGet();
					if(!player.storage.alcqzm2.contains(card6)){
						player.storage.alcqzm2.push(card6);
						event.cards2.remove(card6);
					}
					if(player.storage.alcqzm2.length<event.num2) event.goto(7);
					"step 8"
					var card7=event.cards3.randomGet();
					if(!player.storage.alcqzm3.contains(card7)){
						player.storage.alcqzm3.push(card7);
						event.cards3.remove(card7);
					}
					if(player.storage.alcqzm3.length<event.num3) event.goto(8);
					"step 9"
					var card8=event.cards4.randomGet();
					if(!player.storage.alcqzm4.contains(card8)){
						player.storage.alcqzm4.push(card8);
						event.cards4.remove(card8);
					}
					if(player.storage.alcqzm4.length<event.num4) event.goto(9);
					"step 10"
					game.countPlayer(function(current){
						current.storage.alcqzm=player;
						current.storage.alcqzm1=player.storage.alcqzm1;
						current.storage.alcqzm2=player.storage.alcqzm2;
						current.storage.alcqzm3=player.storage.alcqzm3;
						current.storage.alcqzm4=player.storage.alcqzm4;
						if(!current.hasSkill('alcqzm_xiaoguo1')) current.addSkill('alcqzm_xiaoguo1');
						if(!current.hasSkill('alcqzm_xiaoguo2')) current.addSkill('alcqzm_xiaoguo2');
					});
				},
				subSkill:{
					xiaoguo1:{
						unique:true,
						trigger:{
							player:"useCardToPlayered",
						},
						filter:function(event,player){
							for (var i=0;i<event.cards.length;i++){
								if(player.storage.alcqzm1.contains(event.cards[i])){
									return event.card.name=='sha';
								}
								if(player.storage.alcqzm2.contains(event.cards[i])){
									return event.card.name=='tao';
								}
								if(player.storage.alcqzm4.contains(event.cards[i])){
									return get.type(event.card)=='trick';
								}
							}
							return false;
						},
						forced:true,
						direct:true,
						content:function(){
							if(player.storage.alcqzm.hasSkill('alcqzm')&&player.storage.alcqzm.isAlive()) player.storage.alcqzm.logSkill('alcqzm');
							if(trigger.card.name=='sha'||trigger.card.name=='tao'){
								trigger.target.loseHp();
							}
							if(trigger.card.name!='sha') trigger.getParent().excluded.add(trigger.target);
						},
						sub:true,
					},
					xiaoguo2:{
						mod:{
							"cardEnabled2":function(card,player){
								if(player.storage.alcqzm3.contains(card)) return false;
								if(card.name=='wuxie'&&player.storage.alcqzm4.contains(card)) return false;
							},
						},
						unique:true,
						trigger:{
							player:"loseAfter",
						},
						filter:function(event,player){
							for (var i=0;i<event.cards2.length;i++){
								if(player.storage.alcqzm3.contains(event.cards2[i])){
									return true;
								}
								if(player.storage.alcqzm4.contains(event.cards2[i])&&event.cards2[i].name=='wuxie'){
									return true;
								}
							}
							return false;
						},
						forced:true,
						direct:true,
						content:function(){
							"step 0"
							if(player.storage.alcqzm.hasSkill('alcqzm')&&player.storage.alcqzm.isAlive()) player.storage.alcqzm.logSkill('alcqzm');
							event.num=0;
							for (var i=0;i<trigger.cards2.length;i++){
								if(player.storage.alcqzm3.contains(trigger.cards2[i])) event.num++;
								if(player.storage.alcqzm4.contains(trigger.cards2[i])&&trigger.cards2[i].name=='wuxie') event.num++;
							}
							"step 1"
							player.chooseToDiscard('〖佐命〗：弃置'+get.cnNumber(event.num)+'张牌','he',event.num,true);
						},
						sub:true,
					},
				},
			},
			alcqwz:{
				audio:"ext:神怒降世:2",
				trigger:{
					global:"loseHpEnd",
				},
				filter:function(event,player){
					return event.player.isDamaged();
				},
				direct:true,
				content:function(){
					"step 0"
					player.chooseTarget(get.prompt('alcqwz'),'<center>令一名角色摸一张牌<center>').set('ai',function(target){
						if(player.isMinHandcard()) return player;
						if(get.attitude(player,target)>0&&target.isMinHandcard()) return target;
						return get.attitude(player,target)>0;
					});
					"step 1"
					if(result.bool&&result.targets&&result.targets.length){
						player.logSkill('alcqwz',result.targets);
						result.targets[0].draw();
					}
				},
				ai:{
					expose:0.3,
				},
			},
			jwsc:{
				audio:"ext:神怒降世:1",
				trigger:{
					global:["equipAfter","addJudgeAfter","loseAfter","gainAfter","loseAsyncAfter"],
				},
				direct:true,
				filter:function(event,player){
					return game.hasPlayer(function(current){
						if(current==_status.currentPhase) return false;
						var evt=event.getl(current);
						return evt&&evt.hs&&evt.hs.length&&current.countCards('h')==0;
					});
				},
				content:function(){
					"step 0"
					event.list=game.filterPlayer(function(current){
						if(current==_status.currentPhase) return false;
						var evt=trigger.getl(current);
						return evt&&evt.hs&&evt.hs.length;
					}).sortBySeat(_status.currentPhase);
					"step 1"
					var target=event.list.shift();
					event.target=target;
					var cards = get.cards(player.maxHp);
					var dialog = decadeUI.content.chooseGuanXing(player, cards, cards.length, null);
					dialog.caption = '【守成】';
					game.broadcast(function(player, cards){
						if (!window.decadeUI) return;
						decadeUI.content.chooseGuanXing(player, cards, cards.length, null).caption = '【守成】';
					}, player, cards);
					event.switchToAuto = function(){
						var cheats = [];
						var cards = dialog.cards[0].concat();
						var next = event.target.getNext();
						var friend = event.target;
						var judges = friend.node.judges.childNodes;
						if (judges.length) {
							cheats = decadeUI.get.cheatJudgeCards(cards, judges, friend != null);
						}
						if (cards.length && cheats.length == judges.length) {
							for (var i = 0; i >= 0 && i < cards.length; i++) {
								if (friend) {
									if (get.value(cards[i], friend) >= 5) {
										cheats.push(cards[i]);
										cards.splice(i, 1)
									}
								} else {
									if (get.value(cards[i], next) < 4) {
										cheats.push(cards[i]);
										cards.splice(i, 1)
									}
								}
							}
						}
						var time = 500;
						for (var i = 0; i < cheats.length; i++) {
							setTimeout(function(card, index, finished){
								dialog.move(card, index, 0);
								if (finished) dialog.finishTime(1000);
							}, time, cheats[i], i, (i >= cheats.length - 1) && cards.length == 0);
							time += 500;
						}
						for (var i = 0; i < cards.length; i++) {
							setTimeout(function(card, index, finished){
								dialog.move(card, index, 1);
								if (finished) dialog.finishTime(1000);
							}, time, cards[i], i, (i >= cards.length - 1));
							time += 500;
						}
					};
					if (event.isOnline()) {
						event.player.send(function(){
							if (!window.decadeUI && decadeUI.eventDialog) _status.event.finish();
						}, event.player);
            
						event.player.wait();
						decadeUI.game.wait();
					} else if (!event.isMine()) {
						event.switchToAuto();
					}
					"step 2"
					game.updateRoundNumber();
					"step 3"
					if(event.target.isAlive()&&event.target.countCards('h')==0){
						player.chooseBool(get.prompt2('jwsc',event.target)).set('ai',function(){
							return get.attitude(_status.event.player,_status.event.getParent().target)>0;
						});
					}
					else event.goto(5);
					"step 4"
					if(result.bool){
						player.logSkill(event.name,target);
						target.draw();
					}
					"step 5"
					if(event.list.length) event.goto(1);
				},
				ai:{
					threaten:1.3,
					expose:0.2,
					noh:true,
				},
			},
			jwhc:{
				audio:"ext:神怒降世:1",
				init:function(player){
					if(!player.storage.jwhc_card) player.storage.jwhc_card=[];
				},
				trigger:{
					global:"damageBegin",
				},
				filter:function(event,player){
					if(event.player.hasSkill('jwhc_mark')) return false;
					return event.player.countCards('h');
				},
				check:function(event,player){
					return get.attitude(player,event.player)>0;
				},
				logTarget:function(event){
					return event.player;
				},
				content:function(){
					'step 0'
					trigger.player.chooseBool('〖守成〗：是否弃置所有手牌防止此伤害？').ai=function(event,player){
						if(trigger.player.hp>trigger.num){
							if(trigger.player.countCards('h')>2) return 0;
							else return 1;
						}
						if(trigger.player.hp==trigger.num){
							if(trigger.player.countCards('h')>2&&(trigger.player.countCards('h',{name:'tao'})||trigger.player.countCards('h',{name:'jiu'}))) return 0;
							else return 1;
						}
						if(trigger.player.hp<trigger.num){
							if((trigger.player.countCards('h',{name:'tao'})>trigger.num-trigger.player.hp)||(trigger.player.countCards('h',{name:'jiu'})>trigger.num-trigger.player.hp)) return 0;
							else return 1;
						}
					};
					'step 1'
					if(result.bool){
						event.goto(2);
					}
					else event.finish();
					'step 2'
					trigger.player.chooseToDiscard(trigger.player.countCards('h'),true);
					trigger.player.addTempSkill('jwhc_mark','roundStart');
					'step 3'
					if(result.cards.length>2){
						trigger.player.draw();
					}
					'step 4'
					trigger.cancel();
				},
				subSkill:{
					mark:{
						mark:true,
						unique:true,
						intro:{
							name:"划策",
							content:"已为其发动过〖划策〗",
						},
						sub:true,
					},
				},
			},
			cqzm:{
				audio:"ext:神怒降世:2",
                derivation:"cqwz",
				enable:"phaseUse",
				limited:true,
				unique:true,
				mark:true,
				skillAnimation:"epic",
				animationColor:"thunder",
				init:function(player){
					player.storage.cqzm=false;
				},
				intro:{
					content:"limited",
				},
				filter:function(event,player){
					if(player.storage.cqzm==true) return false;
					return game.countPlayer(function(current){
						return current!=player;
					})>1;
				},
				filterTarget:function(card,player,target){
					return player!=target;
				},
				targetprompt:["失去技能","获得技能"],
				selectTarget:2,
				multitarget:true,
				content:function(){
					'step 0'
					player.awakenSkill('cqzm');
					player.storage.cqzm=true;
					player.storage.cqwz1=targets[0];
					player.storage.cqwz2=targets[1];
					targets[0].addMark('cqwz');
					targets[1].addMark('cqwz');
					'step 1'
					var list=[];
					var listm=[];
					var listv=[];
					if(targets[0].name1!=undefined) listm=lib.character[targets[0].name1][3];
					else listm=lib.character[targets[0].name][3];
					if(targets[0].name2!=undefined) listv=lib.character[targets[0].name2][3];
					listm=listm.concat(listv);
					var func=function(skill){
						var info=get.info(skill);
						if(!info||(info.unique&&!info.gainable)) return false;
						return true;
					};
					for(var i=0;i<listm.length;i++){
						if(func(listm[i])) list.add(listm[i]);
					}
					event.skills=list;
					'step 2'
					if(event.skills.length>0){
						player.chooseControl(event.skills).set('prompt','〖佐命〗：选择令'+get.translation(targets[0])+'失去的技能').set('ai',function(){return event.skills.randomGet()});
					}
					'step 3'
                    targets[0].removeSkill(result.control,true);
					if(!targets[1].hasSkill(result.control)) targets[1].addSkill(result.control);
					if(!player.hasSkill('cqwz')) player.addSkill('cqwz');
					'step 4'
					if(targets[0].identity=='zhu'){
						targets[0].loseMaxHp();
						targets[1].gainMaxHp();
					}
				},
				ai:{
					order:100,
					result:{
						target:function(player,target){
							if(ui.selected.targets.length==0){
								return -1;
							}
							else{
								return 1;
							}
						},
					},
					expose:0.4,
					threaten:1.5,
				},
			},
			cqwz:{
				audio:"ext:神怒降世:2",
				intro:{
					name:"望重",
					content:"摸牌机器",
				},
				init:function(player){
					if(!player.storage.cqwz1) player.storage.cqwz1=[];
					if(!player.storage.cqwz2) player.storage.cqwz2=[];
				},
				trigger:{
					global:"damageEnd",
				},
				filter:function(event,player){
					return player.storage.cqwz1==event.player||player.storage.cqwz2==event.source;
				},
				forced:true,
				content:function(){
					if(trigger.player==player.storage.cqwz1){
						event.draw1=[player,trigger.player];
						game.asyncDraw(event.draw1,trigger.num);
					}
					if(trigger.source==player.storage.cqwz2){
						event.draw2=[player,trigger.source];
						game.asyncDraw(event.draw2,trigger.num);
					}
				},
			},
			szcxf:{
				audio:"ext:神怒降世:4",
				mod:{
					maxHandcard:function(player,num){
						return 5;
					},
				},
				forced:true,
				skillAnimation:true,
				animationColor:"orange",
				unique:true,
				trigger:{
					player:["phaseBegin","phaseAfter","enterGame"],
					global:"gameDrawAfter",
				},
				content:function(){
					'step 0'
					player.chooseControl('魏','蜀','吴','群','晋').set('prompt','〖仙法〗：选择一个势力').set('ai',function(event,player){
						if(event.triggername!='phaseBegin') return '魏';
						return ['魏','蜀','吴','群','晋'].randomGet();
					});
					'step 1'
					if(result.control=='魏'){
						event.shili='wei';
					}
					if(result.control=='蜀'){
						event.shili='shu';
					}
					if(result.control=='吴'){
						event.shili='wu';
					}
					if(result.control=='群'){
						event.shili='qun';
					}
					if(result.control=='晋'){
						event.shili='jin';
					}
					'step 2'
					var list;
					var list2;
					if(_status.characterlist){
						list=[];
						list2=[];
						for(var i=0;i<_status.characterlist.length;i++){
							var name=_status.characterlist[i];
							if(lib.character[name][1]==event.shili) list.push(name);
							if(get.mode()!='guozhan'){
							   if(lib.character[name][1]=='shen') list2.push(name);
							}
						}
					}
					else if(_status.connectMode){
						list=get.charactersOL(function(i){
							return lib.character[i][1]!=event.shili;
						});
						if(get.mode()!='guozhan'){
							list2=get.charactersOL(function(i){
								return lib.character[i][1]!='shen';
							});
						}
					}
					else{
						list=get.gainableCharacters(function(info){
							return info[1]==event.shili;
						});
						if(get.mode()!='guozhan'){
							list2=get.gainableCharacters(function(info){
								return info[1]=='shen';
							});
						}
					}
					list.remove('zuoci');
					list.remove('re_zuoci');
					list2.remove('snjs_shen_zuoci');
					list=list.randomGets(4);
					if(get.mode()!='guozhan') list.add(list2.randomGet());
					var skills=[];
					for(var i of list){
						skills.addArray((lib.character[i][3]||[]).filter(function(skill){
							var info=get.info(skill);
							return info&&!info.zhuSkill&&!info.limited&&!info.juexingji&&!info.hiddenSkill&&!info.charlotte;
						}));
					}
					if(!list.length||!skills.length){event.finish();return;}
					if(player.isUnderControl()){
						game.swapPlayerAuto(player);
					}
					var switchToAuto=function(){
						_status.imchoosing=false;
						event._result={
							bool:true,
							skills:skills.randomGets(3),
						};
						if(event.dialog) event.dialog.close();
						if(event.control) event.control.close();
					};
					var chooseButton=function(list,skills){
						var event=_status.event;
						if(!event._result) event._result={};
						event._result.skills=[];
						var rSkill=event._result.skills;
						var dialog=ui.create.dialog('请选择获得至多三个技能',[list,'character'],'hidden');
						event.dialog=dialog;
						var table=document.createElement('div');
						table.classList.add('add-setting');
						table.style.margin='0';
						table.style.width='100%';
						table.style.position='relative';
						for(var i=0;i<skills.length;i++){
							var td=ui.create.div('.shadowed.reduce_radius.pointerdiv.tdnode');
							td.link=skills[i];
							table.appendChild(td);
							td.innerHTML='<span>'+get.translation(skills[i])+'</span>';
							td.addEventListener(lib.config.touchscreen?'touchend':'click',function(){
								if(_status.dragged) return;
								if(_status.justdragged) return;
								_status.tempNoButton=true;
								setTimeout(function(){
									_status.tempNoButton=false;
								},500);
								var link=this.link;
								if(!this.classList.contains('bluebg')){
									if(rSkill.length>=3) return;
									rSkill.add(link);
									this.classList.add('bluebg');
								}
								else{
									this.classList.remove('bluebg');
									rSkill.remove(link);
								}
							});
						}
						dialog.content.appendChild(table);
						dialog.add('　　');
						dialog.open();
       	     
						event.switchToAuto=function(){
							event.dialog.close();
							event.control.close();
							game.resume();
							_status.imchoosing=false;
						};
						event.control=ui.create.control('ok',function(link){
							event.dialog.close();
							event.control.close();
							game.resume();
							_status.imchoosing=false;
						});
						for(var i=0;i<event.dialog.buttons.length;i++){
							event.dialog.buttons[i].classList.add('selectable');
						}
						game.pause();
						game.countChoose();
					};
					if(event.isMine()){
						chooseButton(list,skills);
					}
					else if(event.isOnline()){
						event.player.send(chooseButton,list,skills);
						event.player.wait();
						game.pause();
					}
					else{
						switchToAuto();
					}
					'step 3'
					var map=event.result||result;
					if(map&&map.skills&&map.skills.length){
						for(var i=0;i<map.skills.length;i++){
							if(!player.storage.szcxf_mark) player.storage.szcxf_mark=[];
							player.storage.szcxf_mark.push(map.skills[i]);
							if(event.triggername=='phaseBegin') player.addTempSkill(map.skills[i]);
							else player.addTempSkill(map.skills[i],{player:'phaseBefore'});
						}
					}
					if(!player.hasSkill('szcxf_mark')){
						if(event.triggername=='phaseBegin') player.addTempSkill('szcxf_mark');
						else player.addTempSkill('szcxf_mark',{player:'phaseBefore'});
					}
					game.broadcastAll(function(list){
						game.expandSkills(list);
						for(var i of list){
							var info=lib.skill[i];
							if(!info) continue;
							if(!info.audioname2) info.audioname2={};
							info.audioname2.old_yuanshu='weidi';
						}
					},map.skills);
					'step 4'
				},
				subSkill:{
					mark:{
						unique:true,
						mark:true,
						init:function(player){
							if(!player.storage.szcxf_mark) player.storage.szcxf_mark=[];
						},
						intro:{
							name:"仙法",
							content:"$",
						},
						onremove:function(player){
							delete player.storage.szcxf_mark;
						},
						sub:true,
					},
				},
			},
			sdzzf:{
				audio:"ext:神怒降世:4",
				group:["sdzzf_discard","sdzzf_damage","sdzzf_phasedraw","sdzzf_shoupai"],
				mod:{
					maxHandcardBase:function(player,num){
						return player.storage.sdzzf_num;
					},
				},
				unique:true,
				init:function(player){
					if(!player.storage.sdzzf_num){
						player.storage.sdzzf_num=0;
						game.countPlayer(function(current){
							if(current!=player&&current.countCards('h')>player.storage.sdzzf_num) player.storage.sdzzf_num=current.countCards('h');
						});
					}
				},
				trigger:{
					global:["useCard","respond"],
				},
				filter:function(event,player){
					if (event.player==player) return false;
					if (event.cards.filterInD().length<1) return false;
					return true;
				},
				forced:true,
				content:function(){
					player.loseHp(trigger.cards.length);
				},
				subSkill:{
					discard:{
						audio:"sdzzf",
						trigger:{
							global:"loseBegin",
						},
						forced:true,
						filter:function(event,player){
							if(event.player==player) return false;
							if(event.type=='gain') return false;
							if(event.type!='discard') return false;
							if(event.cards.length<1) return false;
							return true;
						},
						content:function(){
							player.loseHp(trigger.cards.length);
						},
						sub:true,
					},
					damage:{
						trigger:{
							source:"damageBegin1",
						},
						forced:true,
						direct:true,
						filter:function(event,player){
							return event.player.countCards('hej')>0&&player.countCards('hej')>0;
						},
						content:function(){
							"step 0"
							player.chooseToDiscard(get.prompt('sdzzf'),'<center>弃置一张牌，若此做'+get.translation(trigger.player)+'也弃置一张牌</center>','hej').set('ai',function(card){
								if(get.attitude(player,trigger.player)>=0) return false;
								return 8-get.value(card);
							});
							"step 1"
							if(result.bool){
								player.logSkill('sdzzf',trigger.player);
								trigger.player.chooseToDiscard('〖诛伐〗：弃置一张牌','hej',true);
							}
						},
						sub:true,
					},
					phasedraw:{
						trigger:{
							player:"phaseDrawBegin",
						},
						forced:true,
						direct:true,
						content:function(){
							trigger.cancel();
						},
						sub:true,
					},
					shoupai:{
						trigger:{
							player:"phaseDiscardBegin",
						},
						forced:true,
						direct:true,
						content:function(){
							player.storage.sdzzf_num=0;
							game.countPlayer(function(current){
								if(current!=player&&current.countCards('h')>player.storage.sdzzf_num) player.storage.sdzzf_num=current.countCards('h');
							});
						},
						sub:true,
					},
				},
			},
			sdzey:{
				audio:"ext:神怒降世:4",
				group:["sdzey_losecard","sdzey_usecard","sdzey_equip","sdzey_die"],
				mod:{
					cardUsable:function(card,player,num){
						if(card.name=='sha') return player.storage.sdzey_shanum;
					},
				},
				skillAnimation:true,
				animationColor:"soil",
				mark:true,
				unique:true,
				intro:{
					name:"恶业",
					content:"cards",
					onunmark:function(storage,player){
						if(storage&&storage.length){
							player.$throw(storage,1000);
							game.cardsDiscard(storage);
							game.log(storage,'被置入了弃牌堆');
							storage.length=0;
						}
					},
				},
				init:function(player){
					if(!player.storage.sdzey) player.storage.sdzey=[];
					if(!player.storage.sdzey_shanum) player.storage.sdzey_shanum=0;
				},
				trigger:{
					player:"phaseZhunbeiBegin",
				},
				forced:true,
				content:function(){
					"step 0"
					player.storage.sdzey_shanum++;
					event.cards=[];
					event.cards2=[];
					player.maxHp=player.hp;
					player.update();
					"step 1"
					if(player.storage.sdzey.length){
						player.showCards(player.storage.sdzey);
						for(var i=0;i<player.storage.sdzey.length;i++){
							var card=player.storage.sdzey[i];
							if(get.subtype(card)=='equip1'||get.tag(card,'damage')) event.cards.push(card);
							else event.cards2.push(card);
						}
					}
					"step 2"
					if(event.cards.length){
						player.gain(event.cards,'gain2','log','fromStorage');
						player.storage.sdzey.remove(event.cards);
						game.log(player,'获得了',event.cards);
					}
					"step 3"
					if(event.cards2.length){
						player.storage.sdzey.remove(event.cards2);
						player.$throw(event.cards2,1000);
						game.cardsDiscard(event.cards2);
						game.log(player,'弃置了',event.cards2);
					}
					player.updateMarks('sdzey');
				},
				subSkill:{
					usecard:{
						audio:"sdzey",
						trigger:{
							global:["useCardEnd","respondEnd"],
						},
						filter:function(event,player){
							if (event.player==player) return false;
							if (event.cards.filterInD().length<1) return false;
							return true;
						},
						forced:true,
						content:function(){
							"step 0"
							if(trigger.delay==false) game.delay();
							"step 1"
							player.$gain2(trigger.cards);
							player.markAuto('sdzey',trigger.cards,'gain2');
							game.cardsGotoSpecial(trigger.cards);
							game.log(player,'将',trigger.cards,'置于了','#g「恶业」上');
						},
						sub:true,
					},
					losecard:{
						audio:"sdzey",
						trigger:{
							global:"loseAfter",
						},
						forced:true,
						filter:function(event,player){
							if (event.player==player) return false;
							if (event.type=='gain') return false;
							if (event.type!='discard') return false;
							if(event.cards2.length<1) return false;
							return true;
						},
						content:function(){
							"step 0"
							if(trigger.delay==false) game.delay();
							"step 1"
							player.$gain2(trigger.cards2);
							player.markAuto('sdzey',trigger.cards2,'gain2');
							game.cardsGotoSpecial(trigger.cards2);
							game.log(player,'将',trigger.cards2,'置于了','#g「恶业」上');
						},
						sub:true,
					},
					equip:{
						trigger:{
							global:"useCard",
						},
						silent:true,
						forced:true,
						filter:function(event,player){
							return event.player!=player&&((get.subtype(event.card)=='equip1'&&event.player.getEquip(1))||(get.subtype(event.card)=='equip2'&&event.player.getEquip(2))||(get.subtype(event.card)=='equip3'&&event.player.getEquip(3))||(get.subtype(event.card)=='equip4'&&event.player.getEquip(4))||(get.subtype(event.card)=='equip5'&&event.player.getEquip(5)));
						},
						content:function(){
							if(get.subtype(trigger.card)=='equip1') trigger.player.discard(trigger.player.getEquip(1));
							if(get.subtype(trigger.card)=='equip2') trigger.player.discard(trigger.player.getEquip(2));
							if(get.subtype(trigger.card)=='equip3') trigger.player.discard(trigger.player.getEquip(3));
							if(get.subtype(trigger.card)=='equip4') trigger.player.discard(trigger.player.getEquip(4));
							if(get.subtype(trigger.card)=='equip5') trigger.player.discard(trigger.player.getEquip(5));
						},
						sub:true,
					},
					die:{
						trigger:{
							player:"die",
						},
						silent:true,
						forced:true,
						filter:function(event,player){
							return player.storage.sdzey&&player.storage.sdzey.length>0;
						},
						content:function(){
							event.card=player.storage.sdzey;
							player.$throw(event.card,1000);
							game.delayx();
							game.cardsDiscard(event.card);
							game.log(event.card,'被置入了弃牌堆');
							player.storage.sdzey=[];
						},
						sub:true,
					},
				},
			},
			jusqty:{
				audio:"ext:神怒降世:2",
				group:"jusqty_jilu",
				enable:"phaseUse",
				init:function(player){
					if(!player.storage.jusqty_num1) player.storage.jusqty_num1=0;
					if(!player.storage.jusqty_num2) player.storage.jusqty_num2=0;
				},
				usable:1,
				filterTarget:function(card,player,target){
					return player.canCompare(target);
				},
				filter:function(event,player){
					return player.countCards('h')>0;
				},
				content:function(){
					"step 0"
					player.chooseToCompare(target);
					"step 1"
					if(result.bool&&target.countCards('he')>0){
						if(player.storage.jusqty_num1-player.storage.jusqty_num2>3) event.num=3;
						else event.num=player.storage.jusqty_num1-player.storage.jusqty_num2;
						target.chooseCard('〖讨遗〗：交给'+get.translation(player)+get.cnNumber(event.num)+'张牌',event.num,'he',true).set('ai',function(card){
							if(get.attitude(player,target)>0) return get.value(card);
							return 100-get.value(card);
						});
						event.goto(2);
					}
					else{
						if(player.storage.jusqty_num2-player.storage.jusqty_num1>3) event.num=3;
						else event.num=player.storage.jusqty_num2-player.storage.jusqty_num1;
						if(event.num>0) player.draw(event.num);
					}
					"step 2"
					if(result.bool&&result.cards&&result.cards.length){
						player.gain(result.cards,target,'giveAuto');
					}
					"step 3"
					target.useCard({name:'sha',isCard:true},player);
				},
				ai:{
					order:7,
					expose:0.4,
					result:{
						target:function(player,target){
							return -1;
						},
					},
				},
				subSkill:{
					jilu:{
						trigger:{
							player:"compare",
							target:"compare",
						},
						silent:true,
						forced:true,
						popup:false,
						content:function(){
							if(player==trigger.player){
								player.storage.jusqty_num1=trigger.num1;
								player.storage.jusqty_num2=trigger.num2;
							}
							else{
								player.storage.jusqty_num1=trigger.num2;
								player.storage.jusqty_num2=trigger.num1;
							}
						},
						sub:true,
					},
				},
			},
			jusqcx:{
				audio:"ext:神怒降世:2",
				trigger:{
					player:"gainEnd",
				},
				filter:function(event,player){
					if(_status.currentPhase!=player) return false;
					return event.source&&event.source!=player;
				},
				direct:true,
				content:function(){
					if(!player.hasSkill('jusqcx_shangxian')) player.addTempSkill('jusqcx_shangxian');
				},
				subSkill:{
					shangxian:{
						audio:"jusqcx",
						mod:{
							maxHandcard:function(player,num){
								return 3+num;
							},
						},
						trigger:{
							player:"phaseDiscardEnd",
						},
						filter:function(event,player){
							if(player.countCards('h')>player.hp) return true;
							return false;
						},
						forced:true,
						content:function(){},
						sub:true,
					},
				},
			},
			syslj:{
				inherit:"luanji",
				audio:"ext:神怒降世:4",
				line:false,
				group:"syslj_remove",
				check:function(card){
					return 7-get.value(card);
				},
				enable:"phaseUse",
				position:"hes",
				viewAs:{
					name:"wanjian",
				},
				filterCard:function(card,player){
					if(ui.selected.cards.length){
						return get.suit(card)==get.suit(ui.selected.cards[0]);
					}
					var cards=player.getCards('hes');
					for(var i=0;i<cards.length;i++){
						if(card!=cards[i]){
							if(get.suit(card)==get.suit(cards[i])) return true;
						}
					}
					return false;
				},
				selectCard:2,
				complexCard:true,
				subSkill:{
					remove:{
						trigger:{
							player:'useCard2'
						},
						direct:true,
						filter:function(event,player){
							return event.card.name=='wanjian'&&event.targets.length>0;
						},
						line:false,
						content:function(){
							'step 0'
							player.chooseTarget(get.prompt('syslj'),'<center>为'+get.translation(trigger.card)+'减少一个目标</center>',function(card,player,target){
								return _status.event.targets.contains(target)
							}).set('targets',trigger.targets).set('ai',function(target){
								var player=_status.event.player;
								return -get.effect(target,_status.event.getTrigger().card,player,player)
							});
							'step 1'
							if(result.bool){
								player.logSkill('syslj',result.targets);
								trigger.targets.remove(result.targets[0]);
							}
						},
						sub:true,
					},
				},
				ai:{
					basic:{
						order:8.5,
						useful:1,
						value:5,
					},
					wuxie:function(target,card,player,viewer){
						if(get.attitude(viewer,target)>0&&target.countCards('h','shan')){
							if(!target.countCards('h')||target.hp==1||Math.random()<0.7) return 0;
						}
					},
					result:{
						"target_use":function(player,target){
							if(player.hasUnknown(2)&&get.mode()!='guozhan') return 0;
							var nh=target.countCards('h');
							if(get.mode()=='identity'){
								if(target.isZhu&&nh<=2&&target.hp<=1) return -100;
							}
							if(nh==0) return -2;
							if(nh==1) return -1.7
							return -1.5;
						},
						target:function(player,target){
							var nh=target.countCards('h');
							if(get.mode()=='identity'){
								if(target.isZhu&&nh<=2&&target.hp<=1) return -100;
							}
							if(nh==0) return -2;
							if(nh==1) return -1.7
							return -1.5;
						},
					},
					tag:{
						respond:1,
						respondShan:1,
						damage:1,
						multitarget:1,
						multineg:1,
					},
				},
			},
			syssm:{
				audio:"ext:神怒降世:4",
				group:"syssm_entergame",
				mod:{
					maxHandcardBase:function(player,num){
						return num+player.storage.syssm_num;
					},
					"cardEnabled2":function(card,player){
						if(player.storage.syssm_num>=6) return false;
					},
				},
				init:function(player){
					if(!player.storage.syssm_num) player.storage.syssm_num=0;
				},
				onremove:function(player){
					if(!player.hasSkill('syssx')&&!player.hasSkill('syssm')) player.addSkill('syssx');
				},
				marktext:"盟",
				intro:{
					name:"率盟",
					content:"共有#枚标记",
				},
				trigger:{
					source:"damageSource",
				},
				filter:function(event,player){
					return player.countMark('syssm')>0&&player.storage.syssm_num<6;
				},
				check:function(event,player){
					if(player.storage.syssm_num<5) return true;
					if(player.storage.syssm_num==5&&player.countCards('h')<player.hp) return true;
					return false;
				},
				content:function(){
					if(!player.hasSkill('syssm_qingchu')) player.addTempSkill('syssm_qingchu');
					player.removeMark('syssm',1);
					player.draw();
					player.storage.syssm_num++;
					if(!player.hasSkill('syssx')&&player.countMark('syssm')<1) player.addSkill('syssx');
				},
				subSkill:{
					entergame:{
						trigger:{
							player:"enterGame",
							global:"gameDrawAfter",
						},
						forced:true,
						direct:true,
						content:function(){
							player.logSkill('syssm');
							player.addMark('syssm',18);
						},
						sub:true,
					},
					qingchu:{
						silent:true,
						unique:true,
						forced:true,
						onremove:function(player){
							player.storage.syssm_num=0;
						},
						sub:true,
					},
				},
			},
			sysmg:{
				audio:"ext:神怒降世:2",
				group:["sysmg_damage","sysmg_jilu"],
				init:function(player){
					if(!player.storage.sysmg) player.storage.sysmg=[];
					if(game.countPlayer()<=5) player.storage.sysmg1=game.countPlayer();
					else player.storage.sysmg1=5;
				},
				trigger:{
					player:"phaseJieshuBegin",
				},
				filter:function(event,player){
					if(player.countMark('syssm')<1||player.hasSkill('syssx')) return false;
					return true;
				},
				forced:true,
				direct:true,
				content:function(){
					"step 0"
					//event.num=0;
					if(player.getStat('damage')>=player.storage.sysmg1&&game.countPlayer(function(current){
						return current.hasSkill('sysmg_mark');
					})>0){
						player.logSkill('sysmg');
						game.countPlayer(function(current){
							if(current.hasSkill('sysmg_mark')&&player.storage.sysmg.contains(current)){
								current.recover();
								//event.num++;
							}
						});
					}
					else{
						if(player.getHandcardLimit()>player.countCards('h')){
							player.logSkill('sysmg');
						   player.draw(player.getHandcardLimit()-player.countCards('h'));
						}
					}
					"step 1"
					//if(event.num>3) player.loseHp();
					//"step 2"
					game.countPlayer(function(current){
						if(current.hasSkill('sysmg_mark')) current.removeSkill('sysmg_mark');
						if(player.storage.sysmg.contains(current)) player.storage.sysmg.remove(current);
					});
				},
				subSkill:{
					damage:{
						trigger:{
							source:"damageEnd",
						},
						filter:function(event,player){
							return event.player.isAlive();
						},
						silent:true,
						content:function(){
							"step 0"
							if(!trigger.player.hasSkill('sysmg_mark')&&player.storage.sysmg.contains(trigger.player)) trigger.player.addSkill('sysmg_mark');
							"step 1"
							if(!player.storage.sysmg.contains(trigger.player)) player.storage.sysmg.push(trigger.player);
						},
						sub:true,
					},
					jilu:{
						trigger:{
							player:"phaseBegin",
						},
						silent:true,
						content:function(){
							if(game.countPlayer()<=5) player.storage.sysmg1=game.countPlayer();
							else player.storage.sysmg1=5;
						},
						sub:true,
					},
					mark:{
						mark:true,
						unique:true,
						intro:{
							name:"名冠",
						},
						sub:true,
					},
				},
			},
			sysms:{
				audio:"ext:神怒降世:2",
				limited:true,
                unique:true,
                mark:true,
                animationColor:"soil",
                skillAnimation:"legend",
                init:function(player){
					player.storage.sysms=false;
				},
				trigger:{
					player:"phaseUseBegin",
				},
                intro:{
                    name:"名嗣",
                    content:"limited",
                },
				filter:function(event,player){
					if(player.storage.sysms==true) return false;
					return game.hasPlayer(function(current){
						return current.isMaxHp(true);
					});
				},
				check:function(event,player){
					var ren;
					game.countPlayer(function(current){
						if(current.isMaxHp(true)) ren=current;
					});
					return get.attitude(player,ren)<1;
				},
				logTarget:function(event,player){
					var ren2;
					game.countPlayer(function(current){
						if(current.isMaxHp(true)) ren2=current;
					});
					return ren2;
				},
				content:function(){
					"step 0"
					player.awakenSkill('sysms');
					player.storage.sysms=true;
					"step 1"
					event.num=0;
					game.countPlayer(function(current){
						if(current.isMaxHp(true)) event.dxmb=current;
					});
					game.countPlayer(function(current){
						if(current!=event.dxmb&&current.hp>event.num) event.num=current.hp;
					});
					"step 2"
					event.dxmb.loseHp(event.dxmb.hp-event.num);
				},
			},
			syssx:{
				mark:true,
				unique:true,
				intro:{
					name:"众叛亲离",
					content:"〖名冠〗失效",
				},
			},
			zhgz:{
				audio:"ext:神怒降世:2",
				trigger:{
					global:"phaseDiscardAfter",
				},
				filter:function(event,player){
					if(event.player!=player&&event.player.isIn()){
						return event.player.getHistory('lose',function(evt){
							return evt.type=='discard'&&evt.getParent('phaseDiscard')==event&&evt.hs.filterInD('d').length>0;
						}).length>0;
					}
					return false;
				},
				checkx:function(event,player,cards,cards2){
					if(cards.length>2||get.attitude(player,event.player)>0) return true;
					for(var i=0;i<cards2.length;i++){
						if(get.value(cards2[i],event.player,'raw')<0) return true;
					}
					return false;
				},
				direct:true,
				content:function(){
					"step 0"
					var cards=[];
					var cards2=[];
					game.getGlobalHistory('cardMove',function(evt){
						if(evt.name=='cardsDiscard'&&evt.getParent('phaseDiscard')==trigger) cards.addArray(evt.cards.filterInD('d'));
					});
					game.countPlayer2(function(current){
						current.getHistory('lose',function(evt){
							if(evt.type!='discard'||evt.getParent('phaseDiscard')!=trigger) return;
							cards.addArray(evt.cards.filterInD('d'));
							if(current==trigger.player) cards2.addArray(evt.hs.filterInD('d'));
						})
					});
					event.cards=cards;
					var check=lib.skill.zhgz.checkx(trigger,player,cards,cards2);
					player.chooseCardButton(cards,'〖固政〗：选择令'+get.translation(trigger.player)+'收回的牌').set('ai',function(button){
						if(_status.event.check){
							return 20-get.value(button.link,_status.event.getTrigger().player);
						}
						return 0;
					}).set('check',check).set('cards',cards2).set('filterButton',function(button){
						return _status.event.cards.contains(button.link);
					});
					"step 1"
					if(result.bool){
						game.delay(0.5);
						player.logSkill('zhgz',trigger.player);
						trigger.player.gain(result.links[0]);
						trigger.player.$gain2(result.links[0]);
						game.log(trigger.player,'收回了',result.links[0]);
						event.cards.remove(result.links[0]);
						if(event.cards.length){
							player.gain(event.cards);
							player.$gain2(event.cards);
							game.log(player,'收回了',event.cards);
						}
						game.delay();
					}
				},
				ai:{
					threaten:1.3,
					expose:0.2,
				},
			},
			zhjl:{
				audio:"ext:神怒降世:2",
				group:["zhjl_cishu","zhjl_shiyong"],
				trigger:{
					player:"gainAfter",
				},
				init:function(player){
					if(!player.storage.zhjl_cishu) player.storage.zhjl_cishu=false;
					if(!player.storage.zhjl_shiyong) player.storage.zhjl_shiyong=[];
				},
				filter:function (event,player){
					if(player.storage.zhjl_cishu==true) return false;
					var hs=player.getCards('h');
					for(var i=0;i<hs.length;i++){
						if(player.countCards('h',{name:get.name(hs[i])})>1) return true;
					}
					return false;
				},
				direct:true,
				content:function(){
					'step 0'
					var list=[];
					for(var i=0;i<lib.inpile.length;i++){
						if(get.type(lib.inpile[i])=='trick') list.push(['锦囊','',lib.inpile[i]]);
					}
					if(list.length){
						next=player.chooseButton(['〖经略〗：选择一张想要使用的锦囊牌<br>(取消则不发动〖经略〗)',[list,'vcard']]);
						next.set('filterButton',function(button){
							if(player.storage.zhjl_shiyong.contains(button.link[2])) return false;
							return lib.filter.filterCard({name:button.link[2]},player,_status.event.getParent());
						});
						next.set('ai',function(button){
							var recover=0,lose=1,players=game.filterPlayer();
							for(var i=0;i<players.length;i++){
								if(players[i].hp==1&&get.damageEffect(players[i],player,player)>0&&!players[i].hasSha()){
									return (button.link[2]=='juedou')?2:-1;
								}
								if(!players[i].isOut()){
									if(players[i].hp<players[i].maxHp){
										if(get.attitude(player,players[i])>0){
											if(players[i].hp<2){
												lose--;
												recover+=0.5;
											}
											lose--;
											recover++;
										}
										else if(get.attitude(player,players[i])<0){
											if(players[i].hp<2){
												lose++;
												recover-=0.5;
											}
											lose++;
											recover--;
										}
									}
									else{
										if(get.attitude(player,players[i])>0){
											lose--;
										}
										else if(get.attitude(player,players[i])<0){
											lose++;
										}
									}
								}
							}
							if(lose>recover&&lose>0) return (button.link[2]=='nanman')?1:-1;
							if(lose<recover&&recover>0) return (button.link[2]=='taoyuan')?1:-1;
							return (button.link[2]=='wuzhong')?1:-1;
						});
					}
					else{
						event.finish();
					}
					'step 1'
					if(result&&result.bool&&result.links[0]){
						event.card={name:result.links[0][2],nature:result.links[0][3]};
					}
					else{
						event.finish();
					}
					'step 2'
					player.chooseCard('〖经略〗：是否将两张名称相同的手牌当作【'+get.translation(event.card)+'】使用？<br>(取消可重新选择想要使用的锦囊牌)',function(card){
						if(ui.selected.cards.length){
							return get.name(card)==get.name(ui.selected.cards[0]);
						}
						var cards=player.getCards('h');
						for(var i=0;i<cards.length;i++){
							if(card!=cards[i]){
								if(get.name(card)==get.name(cards[i])) return true;
							}
						}
						return false;
					},'h').set('selectCard',2).set('ai',function(card){
						return 10-get.value(card);
					});
					'step 3'
					if(result.bool){
						player.logSkill('zhjl');
						player.chooseUseTarget(event.card,result.cards,true).viewAs=true;
						player.storage.zhjl_cishu=true;
						player.storage.zhjl_shiyong.add(get.name(event.card));
					}
					else event.goto(0);
				},
				subSkill:{
					cishu:{
						trigger:{
							global:"phaseEnd",
						},
						silent:true,
						content:function(){
							player.storage.zhjl_cishu=false;
						},
						sub:true,
					},
					shiyong:{
						trigger:{
							global:"roundStart",
						},
						silent:true,
						content:function(){
							player.storage.zhjl_shiyong=[];
						},
						sub:true,
					},
				},
			},
			exmctj:{
				audio:"ext:神怒降世:2",
				shaRelated:true,
				trigger:{
					player:"useCardToPlayered",
				},
				check:function(event,player){
					return get.attitude(player,event.target)<=0;
				},
				filter:function(event,player){
					return event.card.name=='sha';
				},
				logTarget:"target",
				content:function(){
					"step 0"
					var func=function(result){
						if(result.name=='sha') return 4;
						return 0;
					};
					player.judge(func);
					if(!trigger.target.hasSkill('fengyin')){
						trigger.target.addTempSkill('fengyin');
					}
					"step 1"
					event.cards=[];
					event.qiangmin=0;
					var str='牌，否则此【杀】伤害+1，且不能使用【闪】抵消此【杀】';
					if(result.name=='sha'){
						event.cards.push(result.card);
						trigger.getParent().directHit.add(trigger.target);
						str='牌，否则此【杀】伤害+1，判定结果为'+get.translation(result.card)+'不能使用【闪】抵消此【杀】';
						event.qiangmin++;
					}
					var suit=result.suit;
					var target=trigger.target;
					target.chooseToDiscard('〖铁骑〗：请弃置一张'+get.translation(suit)+str,'he',function(card){
						return get.suit(card)==_status.event.suit;
					}).set('ai',function(card){
						return 8-get.value(card);
					}).set('suit',suit);
					"step 2"
					if(result.bool){
						event.cards.push(result.cards[0]);
					}
					else{
						if(event.qiangmin==0) trigger.getParent().directHit.add(trigger.target);
						var id=trigger.target.playerid;
						var map=trigger.getParent().customArgs;
						if(!map[id]) map[id]={};
						if(typeof map[id].extraDamage!='number'){
							map[id].extraDamage=0;
						}
						map[id].extraDamage++;
					}
					"step 3"
					if(event.cards.length) player.gain(event.cards,'gain2');
				},
				ai:{
					ignoreSkill:true,
					skillTagFilter:function(player,tag,arg){
						if(tag=='directHit_ai'){
							return get.attitude(player,arg.target)<=0;
						}
						if(!arg||arg.isLink||!arg.card||arg.card.name!='sha') return false;
						if(!arg.target||get.attitude(player,arg.target)>=0) return false;
						if(!arg.skill||!lib.skill[arg.skill]||lib.skill[arg.skill].charlotte||get.is.locked(arg.skill)||!arg.target.getSkills(true,false).contains(arg.skill)) return false;
					},
					"directHit_ai":true,
				},
			},
			exwuhu:{
				trigger:{
					player:"phaseDiscardBegin",
				},
				filter:function(event,player){
					return player.countCards('h',{name:'sha'})>2;
				},
				unique:true,
				silent:true,
				forced:true,
				popup:false,
				content:function(){
					'step 0'
					player.chooseCard('〖五虎〗：选择不计入手牌上限的【杀】',{name:'sha'},'h',2,true);
					'step 1'
					if(result.bool&&result.cards.length){
						player.addGaintag(result.cards,'exwuhu');
						if(!player.hasSkill('exwuhu_mark')) player.addTempSkill('exwuhu_mark');
					}
				},
				mod:{
					ignoredHandcard:function(card,player){
						if(player.hasSkill('exwuhu_mark')){
							if(card.hasGaintag('exwuhu')) return true;
						}
						else{
							if(card.name=='sha') return true;
						}
					},
					cardDiscardable:function(card,player,name){
						if(player.hasSkill('exwuhu_mark')){
							if(name=='phaseDiscard'&&card.hasGaintag('exwuhu')) return false;
						}
						else{
							if(name=='phaseDiscard'&&card.name=='sha') return false;
						}
					},
				},
				subSkill:{
					mark:{
						unique:true,
						silent:true,
						forced:true,
						popup:false,
						onremove:function(player){
							player.removeGaintag('exwuhu');
						},
						sub:true,
					},
				},
			},
			exgjtd:{
				audio:"ext:神怒降世:2",
				group:"exgjtd_guji",
				trigger:{
						player:"judgeEnd",
				},
				frequent:function(event){
					if(event.result.card.name=='du') return false;
					return true;
				},
				check:function(event){
					if(event.result.card.name=='du') return false;
					return true;
				},
				filter:function(event,player){
					return get.position(event.result.card,true)=='o';
				},
				content:function(){
					player.gain(trigger.result.card,'gain2');
				},
				subSkill:{
					guji:{
						trigger:{
							player:"phaseUseBegin",
						},
						direct:true,
						content:function(){
							"step 0"
							player.chooseToDiscard(get.prompt('exgjtd'),'<center>弃置一张牌，然后进行一次判定：若结果为黑色，则对自己造成1点伤害</center>','he').set('ai',function(card){
								if(player.hp<2&&(player.countCards('h',{name:"tao"})<1||player.countCards('h',{name:"jiu"})<1)) return false;
								else return 8-get.value(card);
							});
							"step 1"
							if(result.bool){
								event.goto(2);
							}
							else{
								event.finish();
							}
							"step 2"
							player.logSkill('exgjtd');
							var func=function(result){
								if(get.color(result)=='black') return 2;
								return -1;
							};
							player.judge(func);
							"step 3"
							event.color=result.color;
							if(event.color=='black'){
								player.damage(1,'nocard','nosource');
							}
						},
						sub:true,
					},
				},
			},
			exgjyj:{
				audio:"ext:神怒降世:2",
				global:"exgjyj_add",
				subSkill:{
					add:{
						trigger:{
							player:"gainBegin",
						},
						unique:true,
						silent:true,
						forced:true,
						filter:function(event,player){
							return event.getParent(2).name=='exgjyj';
						},
						content:function(){
							trigger.gaintag.add('exgjyj');
						},
						mod:{
							ignoredHandcard:function(card,player){
								if(card.hasGaintag('exgjyj')){
									return true;
								}
							},
							cardDiscardable:function(card,player,name){
								if(name=='phaseDiscard'&&card.hasGaintag('exgjyj')){
									return false;
								}
							},
						},
						onremove:function(player){
							player.removeGaintag('exgjyj');
						},
						sub:true,
					},
				},
				trigger:{
					player:"damageBegin4",
				},
				frequent:true,
				filter:function (event){
					return (event.num>0)
				},
				content:function(){
					"step 0"
					player.draw(2*trigger.num);
					event.num=2*trigger.num;
					"step 1"
					if(player.storage.exgjyc){
						var cards=[];
						while(cards.length<trigger.num){
							var card=get.cardPile2(function(card){
								return !cards.contains(card)&&(get.type(card)=='trick'||get.type(card)=='delay');
							});
							if(card){
								cards.push(card);
							}
							else break;
						}
						if(cards.length) player.gain(cards,'gain2').gaintag.add('exgjyj');
					}
					event.given=0;
					"step 2"
					player.chooseCardTarget({
						filterCard:true,
						selectCard:[1,event.num-event.given],
						filterTarget:function(card,player,target){
							return player!=target;
						},
						position:"hes",
						ai1:function(card){
							if(ui.selected.cards.length>0) return -1;
							if(card.name=='du') return 20;
							return (_status.event.player.countCards('h')-_status.event.player.hp);
						},
						ai2:function(target){
							var att=get.attitude(_status.event.player,target);
							if(ui.selected.cards.length&&ui.selected.cards[0].name=='du'){
								if(target.hasSkillTag('nodu')) return 0;
								return 1-att;
							}
							return att-4;
						},
						prompt:'〖遗计〗:可以将至多'+get.cnNumber(event.num-event.given)+'张手牌交给任意其他角色'
					});
					"step 3"
					if(result.bool){
						result.targets[0].gain(result.cards,player,'giveAuto').gaintag.add('exgjyj');
						event.given+=result.cards.length;
						if(event.given<event.num){
							event.goto(2);
						}
						else event.finish();
					}
					else event.finish();
				},
				ai:{
					maixie:true,
					"maixie_hp":true,
					result:{
						effect:function (card,player,target){
							if(get.tag(card,'damage')){
								if(player.hasSkillTag('jueqing',false,target)) return [1,-2];
								if(!target.hasFriend()) return;
								var num=1;
								if(get.attitude(player,target)>0){
									if(player.needsToDiscard()){
										num=0.7;
									}
									else{
										num=0.5;
									}
								}
								if(player.hp>=4) return [1,num*2];
								if(target.hp==3) return [1,num*1.5];
								if(target.hp==2) return [1,num*0.5];
							}
						},
					},
					threaten:0.6,
				},
			},
			exgjyj2:{},
			exgjyc:{
				audio:"ext:神怒降世:1",
				group:"exgjyc_die",
				init:function(player){
					if(!player.storage.exgjyc) player.storage.exgjyc=false;
				},
				trigger:{
					player:"dyingAfter",
				},
				animationColor:"water",
				skillAnimation:"legend",
				filter:function(event,player){
					return !player.storage.exgjyc;
				},
				derivation:"exgjyj2",
				forced:true,
				content:function(){
					player.recover();
					player.storage.exgjyc=true;
				},
				subSkill:{
					die:{
						audio:"ext:神怒降世:1",
						trigger:{
							player:"die",
						},
						direct:true,
						skillAnimation:true,
						animationColor:"wood",
						filter:function(event,player){
							return player.storage.exgjyc;
						},
						forceDie:true,
						content:function(){
							"step 0"
							player.chooseTarget(get.prompt('exgjyc_die'),'<center>令一名角色获得〖遗计〗</center>',function(card,player,target){
								return player!=target;
							}).set('forceDie',true).set('ai',function(target){
								return get.attitude(target,player)>0;
							});
							"step 1"
							if(result.bool){
								var target=result.targets[0];
								target.storage.exgjyc=true;
								player.logSkill('exgjyc_die',target);
								target.addSkill('exgjyj');
								game.log(target,'获得了技能','#g【遗计】');
							}
						},
						sub:true,
					},
				},
			},
			exhgkr:{
				audio:"ext:神怒降世:2",
				enable:"phaseUse",
				filterCard:true,
				check:function(card){
					return 8-get.value(card);
				},
				position:"he",
				content:function(){
					player.loseHp();
				},
				ai:{
					order:8,
					result:{
						player:function(player){
							if(player.hp<=2) return player.countCards('h')==0?1:0;
							if(player.countCards('h',{name:'sha',color:'red'})) return 1;
							return player.countCards('h')<=player.hp?1:0;
						},
					},
					effect:function(card,player,target){
						if(get.tag(card,'damage')){
							if(player.hasSkillTag('jueqing',false,target)) return [1,1];
							return 1.2;
						}
						if(get.tag(card,'loseHp')){
							if(player.hp<=1) return;
							return [0,0];
						}
					},
				},
			},
			exhgzx:{
				audio:"ext:神怒降世:2",
				trigger:{
					player:"loseHpEnd",
				},
				forced:true,
				content:function(){
					var num=trigger.num;
					player.draw(3*num);
					if(_status.currentPhase==player){
						if(!player.storage.exhgzx_xiaoguo) player.storage.exhgzx_xiaoguo=0;
						player.storage.exhgzx_xiaoguo+=num;
						player.addTempSkill('exhgzx_xiaoguo',{player:'phaseAfter'});
					}
					else{
						game.trySkillAudio('exhgzx',player);
					}
				},
				ai:{
					maihp:true,
				},
				subSkill:{
					xiaoguo:{
						mod:{
							targetInRange:function(card,player,target,now){
								if(card.name=='sha'&&get.color(card)=='red') return true;
							},
							cardUsable:function(card,player,num){
								if(card.name=='sha') return num+player.storage.exhgzx_xiaoguo;
							},
						},
						onremove:true,
						trigger:{
							player:"useCard",
						},
						forced:true,
						filter:function(event,player){
							return event.card&&event.card.name=='sha'&&get.color(event.card)=='red';
						},
						content:function(){
							trigger.directHit.addArray(game.players);
						},
						ai:{
							"directHit_ai":true,
							skillTagFilter:function(player,tag,arg){
								return arg.card.name=='sha'&&get.color(arg.card)=='red';
							},
						},
						sub:true,
					},
				},
			},
			exzltx:{
				audio:"ext:神怒降世:2",
				trigger:{
					player:"drawBegin",
				},
				direct:true,
				filter:function(event,player){
					return event.num>0&&game.hasPlayer(function(target){
						return target.countCards('he')>0&&player!=target;
					});
				},
				content:function (){
					"step 0"
					var num=trigger.num;
					player.chooseTarget(get.prompt('exzltx'),'<center>获得至多'+get.translation(num)+'名角色的各一张牌，然后少摸等量的牌</center>',[1,num],function(card,player,target){
						return target.countCards('he')>0&&player!=target;
					},function(target){
						var att=get.attitude(_status.event.player,target);
						if(target.hasSkill('tuntian')) return att/10;
						return 1-att;
					});
					"step 1"
					if(result.bool){
						result.targets.sortBySeat();
						player.logSkill('exzltx',result.targets);
						player.gainMultiple(result.targets,'he');
						trigger.num-=result.targets.length;
					}
					else{
						event.finish();
					}
					"step 2"
					if(trigger.num<=0) game.delay();
				},
				ai:{
					threaten:1.6,
					expose:0.2,
				},
			},
			exzlck:{
				audio:"ext:神怒降世:2",
				group:"exzlck_discard",
				trigger:{
					global:"drawEnd",
				},
				filter:function(event,player){
					return event.player!=player&&event.num>0&&event.player.isPhaseUsing();
				},
				frequent:true,
				content:function(){
					player.draw();
				},
				subSkill:{
					discard:{
						audio:"exzlck",
						trigger:{
							player:'loseAfter',
						},
						filter:function(event,player){
							if(event.type!='discard'||!event.cards2) return false;
							if(event.cards2.length<2) return false;
							var evt=event.getParent('phaseDiscard');
							return evt&&evt.name=='phaseDiscard'&&evt.player==player;
						},
						frequent:true,
						content:function(){
							var num=trigger.cards2.length;
							if(num%2==1) num-=1;
							player.draw(num/2);
						},
					},
				},
			},
			exscja:{
				shaRelated:true,
				audio:"ext:神怒降世:2",
				trigger:{
					player:"useCardToPlayered",
					target:"useCardToTargeted",
				},
				filter:function(event,player){
					if(event.player!=player&&event.target==player&&event.card.name=='sha'&&player.isMinHp()) return true;
					if(!(event.card.name=='juedou'||(event.card.name=='sha'&&get.color(event.card)=='red'))) return false;
					return player==event.target||event.getParent().triggeredTargets3.length==1;
				},
				frequent:true,
				content:function(){
					player.draw();
				},
				ai:{
					effect:{
						target:function(card,player,target){
							if(card.name=='sha'&&get.color(card)=='red') return [1,0.6];
						},
						player:function(card,player,target){
							if(card.name=='sha'&&get.color(card)=='red') return [1,1];
						},
					},
				},
			},
			exschz:{
				audio:"ext:神怒降世:2",
				skillAnimation:true,
				animationColor:"wood",
				juexingji:true,
				derivation:["exscyz","exscyh"],
				trigger:{
					player:"changeHp",
				},
				filter:function(event,player){
					return player.hp<=2&&player.hp>0&&!player.storage.exschz;
				},
				unique:true,
				forced:true,
				content:function(){
					'step 0'
					player.draw();
					player.awakenSkill('exschz');
					player.storage.exschz=true;
					if(!player.hasSkill('exschz2')) player.addTempSkill('exschz2');
					'step 1'
					player.addSkill('exscyz');
					player.addSkill('exscyh');
					game.log(player,'获得了技能','#g【英姿】和【英魂】');
					'step 2'
					player.chooseTarget(get.prompt2('exscyh'),function(card,player,target){
						return player!=target;
					}).set('ai',function(target){
						if(player.getDamagedHp()==0&&target.countCards('he')>0){
							return -1;
						}
						if(player.getDamagedHp()==1&&target.countCards('he')==0){
							return 0;
						}
						if(get.attitude(player,target)>0){
							return 10+get.attitude(player,target);
						}
						if(player.getDamagedHp()==1){
							return -1;
						}
						return 1;
					});
					'step 3'
					if(result.bool){
						event.num=player.getDamagedHp();
						player.logSkill('exscyh',result.targets);
						event.target=result.targets[0];
						if(event.num==1){
							event.directcontrol=true;
						}
						else{
							var str1='摸'+get.cnNumber(event.num,true)+'弃一';
							var str2='摸一弃'+get.cnNumber(event.num,true);
							player.chooseControl(str1,str2,function(event,player){
								return _status.event.choice;
							}).set('prompt','〖英魂〗：选择一项').set('ai',function(target){
								if(get.attitude(player,event.target)>=0){
									if(event.num==0) return str2;
									else return str1;
								}
								else{
									if(event.num==0) return str1;
									else return str2;
								}
							});
							event.str=str1;
						}
					}
					else{
						event.finish();
					}
					'step 4'
					if(event.directcontrol||result.control==event.str){
						if(event.num>0) event.target.draw(event.num);
						event.target.chooseToDiscard(true,'he');
					}
					else{
						event.target.draw();
						if(event.num>0) event.target.chooseToDiscard(event.num,true,'he');
					}
				},
				ai:{
					threaten:function(player,target){
						if(target.hp==1) return 2;
						return 0.5;
					},
					maixie:true,
					effect:{
						target:function(card,player,target){
							if(!target.hasFriend()) return;
							if(get.tag(card,'damage')==1&&target.hp==2&&!target.isTurnedOver()&&
							   _status.currentPhase!=target&&get.distance(_status.currentPhase,target,'absolute')<=3) return [0.5,1];
						},
					},
				},
			},
			exschz2:{
				silent:true,
				charlotte:true,
				unique:true,
			},
			exsczb:{
				audio:"ext:神怒降世:2",
				unique:true,
				zhuSkill:true,
				global:"exsczb2",
			},
			exsczb2:{
				ai:{
					order:1,
					result:{
						target:function(player,target){
							if(player.hasZhuSkill('exsczb')&&!player.hasSkill('exsczb3')&&target.group=='wu'){
								if(player.countCards('h',function(card){
									var val=get.value(card);
									if(val<0) return true;
									if(val<=5){
										return card.number>=12;
									}
									if(val<=6){
										return card.number>=13;
									}
									return false;
								})>0) return -1;
								return 0;
							}
							else{
								if(player.countCards('h','du')&&get.attitude(player,target)<0) return -1;
								if(player.countCards('h')<=player.hp) return 0;
								var maxnum=0;
								var cards2=target.getCards('h');
								for(var i=0;i<cards2.length;i++){
									if(cards2[i].number>maxnum){
										maxnum=cards2[i].number;
									}
								}
								if(maxnum>10) maxnum=10;
								if(maxnum<5&&cards2.length>1) maxnum=5;
								var cards=player.getCards('h');
								for(var i=0;i<cards.length;i++){
									if(cards[i].number<maxnum) return 1;
								}
								return 0;
							}
						},
					},
				},
				enable:"phaseUse",
				prompt:"请选择〖制霸〗的目标",
				filter:function(event,player){
					if(player.hasZhuSkill('exsczb')&&!player.hasSkill('exsczb3')&&game.hasPlayer(function(current){
						return current!=player&&current.group=='wu'&&player.canCompare(current);
					})) return true;
					return (player.group=='wu'&&game.hasPlayer(function(current){
						return current!=player&&current.hasZhuSkill('exsczb',player)&&!current.hasSkill('exsczb3')&&player.canCompare(current);
					}));
				},
				filterTarget:function(card,player,target){
					if(player.hasZhuSkill('exsczb')&&!player.hasSkill('exsczb3')&&target.group=='wu'&&player.canCompare(target)) return true;
					return player.group=='wu'&&target.hasZhuSkill('exsczb',player)&&!target.hasSkill('exsczb3')&&player.canCompare(target);
				},
				prepare:function(cards,player,targets){
					if(player.hasZhuSkill('exsczb')) player.logSkill('exsczb')
					if(targets[0].hasZhuSkill('exsczb',player)) targets[0].logSkill('exsczb');
				},
				direct:true,
				clearTime:true,
				contentBefore:function(){
					'step 0'
					var list=[];
					if(player.hasZhuSkill('exsczb')&&targets[0].group=='wu'&&!player.hasSkill('exsczb3')) list.push(player);
					if(player.group=='wu'&&targets[0].hasZhuSkill('exsczb')&&!targets[0].hasSkill('exsczb3')) list.push(targets[0]);
					if(list.length==1){
						event.target=list[0];
						event.goto(2);
					}
					else player.chooseTarget(true,'请选择获得所有拼点牌的角色',function(card,player,target){
						return _status.event.list.contains(target);
					}).set('list',list);
					'step 1'
					event.target=result.targets[0];
					'step 2'
					target.addTempSkill('exsczb3','phaseUseEnd')
					if(target==targets[0]){
						target.chooseBool('是否接受来自'+get.translation(player)+'的拼点请求？').set('choice',(get.attitude(target,player)>0||target.countCards('h',function(card){
							var val=get.value(card);
							if(val<0) return true;
							if(val<=5){
								return card.number>=12;
							}
							if(val<=6){
								return card.number>=13;
							}
							return false;
						})>0)).set('ai',function(){return _status.event.choice});
					}
					else event._result={bool:true};
					'step 3'
					if(result.bool) event.getParent().zhiba_target=target;
					else{
						game.log(target,'拒绝了',player,'的拼点请求');
						target.chat('拒绝');
					}
				},
				content:function(){
					'step 0'
					event.source=event.getParent().zhiba_target;
					if(!event.source){
						event.finish();
					}
					'step 1'
					player.chooseToCompare(target).set('small',target==source&&get.attitude(player,target)>0).clear=false;
					'step 2'
					if(player==source&&result.bool||target==source&&!result.bool){
						event.cards=[result.player,result.target].filterInD('d');
						if(!event.cards.length) event.finish();
						else source.chooseControl('ok','cancel2').set('dialog',['是否获得拼点牌？',event.cards]).set('ai',function(){
							if(get.value(event.cards,source,'raw')<=0) return false;
							return true;
						});
					}
					else event.finish();
					'step 3'
					if(result.control!='cancel2') source.gain(event.cards,'gain2','log');
					else ui.clear();
				},
			},
			exsczb3:{},
			exscyz:{
				audio:"ext:神怒降世:2",
				trigger:{
					player:"phaseDrawBegin2",
				},
				forced:true,
				filter:function(event,player){
					return !event.numFixed;
				},
				content:function(){
					trigger.num++;
				},
				ai:{
					threaten:1.5,
				},
				mod:{
					maxHandcardBase:function(player,num){
						return player.maxHp;
					},
				},
			},
			exscyh:{
				audio:"ext:神怒降世:2",
				trigger:{
					player:["phaseZhunbeiBegin","damageEnd"],
				},
				direct:true,
				content:function(){
					'step 0'
					if(player.hasSkill('exschz2')){
						player.removeSkill('exschz2');
						event.finish();
					}
					'step 1'
					player.chooseTarget(get.prompt2('exscyh'),function(card,player,target){
						if(player.isMaxHandcard()) return player!=target;
						else return true;
					}).set('ai',function(target){
						if(get.attitude(player,target)>0){
							return 10+get.attitude(player,target);
						}
						if(player.getDamagedHp()==1){
							return 10+get.attitude(player,target);
						}
						if(player.getDamagedHp()==0){
							return 1;
						}
						if(player.getDamagedHp()==1){
							return -1;
						}
						return 1;
					});
					'step 2'
					if(result.bool){
						event.num=player.getDamagedHp();
						player.logSkill('exscyh',result.targets);
						event.target=result.targets[0];
						if(event.num==1){
							event.directcontrol=true;
						}
						else{
							var str1='摸'+get.cnNumber(event.num,true)+'弃一';
							var str2='摸一弃'+get.cnNumber(event.num,true);
							player.chooseControl(str1,str2,function(event,player){
								return _status.event.choice;
							}).set('prompt','〖英魂〗：选择一项').set('ai',function(target){
								if(get.attitude(player,event.target)>=0){
									if(event.num==0) return str2;
									else return str1;
								}
								else{
									if(event.num==0) return str1;
									else return str2;
								}
							});
							event.str=str1;
						}
					}
					else{
						event.finish();
					}
					'step 3'
					if(event.directcontrol||result.control==event.str){
						if(event.num>0) event.target.draw(event.num);
						event.target.chooseToDiscard(true,'he');
					}
					else{
						event.target.draw();
						if(event.num>0) event.target.chooseToDiscard(event.num,true,'he');
					}
				},
				ai:{
					threaten:function(player,target){
						if(target.hp==target.maxHp) return 1;
						if(target.hp==1) return 2;
						if(target.hp==2) return 1.5;
						return 0.5;
					},
					maixie:true,
				},
			},
			exsjyh:{
				audio:"ext:神怒降世:2",
				group:"exsjyh_spsx",
				trigger:{
					player:["phaseZhunbeiBegin","damageEnd"],
				},
				direct:true,
				content:function(){
					'step 0'
					player.chooseTarget(get.prompt2('exsjyh'),function(card,player,target){
						if(player.isMaxHandcard()) return player!=target;
						else return true;
					}).set('ai',function(target){
						if(get.attitude(player,target)>0){
							return 10+get.attitude(player,target);
						}
						if(player.getDamagedHp()==1){
							return 10+get.attitude(player,target);
						}
						if(player.getDamagedHp()==0){
							return 1;
						}
						if(player.getDamagedHp()==1){
							return -1;
						}
						return 1;
					});
					'step 1'
					if(result.bool){
						event.num=player.getDamagedHp();
						player.logSkill('exsjyh',result.targets);
						event.target=result.targets[0];
						if(event.num==1){
							event.directcontrol=true;
						}
						else{
							var str1='摸'+get.cnNumber(event.num,true)+'弃一';
							var str2='摸一弃'+get.cnNumber(event.num,true);
							player.chooseControl(str1,str2,function(event,player){
								return _status.event.choice;
							}).set('prompt','〖英魂〗：选择一项').set('ai',function(target){
								if(get.attitude(player,event.target)>=0){
									if(event.num==0) return str2;
									else return str1;
								}
								else{
									if(event.num==0) return str1;
									else return str2;
								}
							});
							event.str=str1;
						}
					}
					else{
						event.finish();
					}
					'step 2'
					if(event.directcontrol||result.control==event.str){
						if(event.num>0) event.target.draw(event.num);
						event.target.chooseToDiscard(true,'he');
					}
					else{
						event.target.draw();
						if(event.num>0) event.target.chooseToDiscard(event.num,true,'he');
					}
				},
				ai:{
					threaten:function(player,target){
						if(target.hp==target.maxHp) return 1;
						if(target.hp==1) return 2;
						if(target.hp==2) return 1.5;
						return 0.5;
					},
					maixie:true,
				},
				subSkill:{
					spsx:{
						mod:{
							maxHandcardBase:function(player,num){
								if(player.getDamagedHp()>player.hp) return player.getDamagedHp();
								else return player.hp;
							},
						},
						sub:true,
					},
				},
			},
			exsjwl:{
				audio:"ext:神怒降世:2",
				trigger:{
					player:"phaseJieshuBegin",
				},
				mark:true,
				intro:{
					content:"limited",
				},
				init:function(player,skill){
					player.storage.exsjwl=false;
				},
				limited:true,
				skillAnimation:true,
				animationColor:"wood",
				unique:true,
				filter:function(event,player){
					return player.hp>0&&player.storage.exsjwl==false;
				},
				direct:true,
				content:function(){
					'step 0'
					player.chooseTarget([1,player.hp],get.prompt2('exsjwl'),'<center>受到至多'+get.cnNumber(player.hp)+'点伤害，令等量的角色各获得一枚「武烈」标记</center>',lib.filter.noMe).set('ai',function(){return 0});
					'step 1'
					if(result.bool){
						event.targets=result.targets.sortBySeat();
						player.logSkill('exsjwl',event.targets);
						player.storage.exsjwl=true;
						player.awakenSkill('exsjwl');
						player.damage(event.targets.length,'nocard');
					}
					else event.finish();
					'step 2'
					while(event.targets.length){
						event.targets[0].addSkill('exsjwl_xiaoguo');
						event.targets.shift().addMark('exsjwl_xiaoguo');
					}
				},
				subSkill:{
					xiaoguo:{
						intro:{
							name:'武烈',
							content:'mark',
						},
						trigger:{
							player:'damageBegin3',
						},
						forced:true,
						content:function(){
							trigger.cancel();
							player.removeMark('exsjwl_xiaoguo',1);
							if(!player.storage.exsjwl_xiaoguo) player.removeSkill('exsjwl_xiaoguo');
						},
						sub:true,
					},
				},
			},
			exsjpl:{
				audio:"ext:神怒降世:2",
				trigger:{
					global:"die",
				},
				forceDie:true,
				filter:function(event,player){
					return event.player.hp!=player&&player.hasZhuSkill('exsjpl');
				},
				direct:true,
				zhuSkill:true,
				content:function(){
					'step 0'
					if(!player.storage.exsjpl) player.storage.exsjpl=0;
					event.num=player.storage.exsjpl+1;
					player.chooseTarget(1,get.prompt('exsjpl'),'<center>令一名其他角色摸'+get.cnNumber(event.num)+'张牌</center>',function(card,player,target){
						return target!=player;
					}).set('forceDie',true).ai=function(target){
						return get.attitude(player,target);
					};
					'step 1'
					if(result.bool){
						if(player.storage.exsjpl<2) player.storage.exsjpl++;
						player.logSkill('exsjpl',result.targets[0]);
						result.targets[0].draw(event.num);
					}
					else event.finish();
					'step 2'
					game.delay();
				},
			},
			exgnqx:{
				audio:"ext:神怒降世:2",
				enable:"chooseToUse",
				group:"exgnqx_draw",
				filterCard:function(card){
					return get.color(card)=='black';
				},
				position:"hes",
				viewAs:{
					name:"guohe",
				},
				viewAsFilter:function(player){
					if(!player.countCards('hes',{color:'black'})) return false;
				},
				prompt:"将一张黑色牌当【过河拆桥】使用",
				check:function(card){return 4-get.value(card)},
				ai:{
					basic:{
						order:9,
						useful:1,
						value:5,
					},
					yingbian:function(card,player,targets,viewer){
						if(get.attitude(viewer,player)<=0) return 0;
						if(game.hasPlayer(function(current){
							return !targets.contains(current)&&lib.filter.targetEnabled2(card,player,current)&&get.effect(current,card,player,player)>0;
						})) return 6;
						return 0;
					},
					result:{
						target:function(player,target){
							var att=get.attitude(player,target);
							var nh=target.countCards('h');
							if(att>0){
								var js=target.getCards('j');
								if(js.length){
									var jj=js[0].viewAs?{name:js[0].viewAs}:js[0];
									if(jj.name=='guohe'||js.length>1||get.effect(target,jj,target,player)<0){
										return 3;
									}
								}
								if(target.getEquip('baiyin')&&target.isDamaged()&&
								   get.recoverEffect(target,player,player)>0){
									if(target.hp==1&&!target.hujia) return 1.6;
									if(target.hp==2) return 0.01;
									return 0;
								}
							}
							var es=target.getCards('e');
							var noe=(es.length==0||target.hasSkillTag('noe'));
							var noe2=(es.filter(function(esx){
								return get.value(esx,target)>0;
							}).length==0);
							var noh=(nh==0||target.hasSkillTag('noh'));
							if(noh&&(noe||noe2)) return 0;
							if(att<=0&&!target.countCards('he')) return 1.5;
							return -1.5;
						},
					},
					tag:{
						loseCard:1,
						discard:1,
					},
				},
				subSkill:{
					draw:{
						audio:"exgnqx",
						trigger:{
							player:"useCardToPlayered",
						},
						filter:function(event,player){
							if(get.color(event.card)!='black') return false;
							var num=0;
							player.getHistory('useCard',function(evt){
								for(var i=0;i<evt.cards.length;i++){
									if(get.color(evt.cards[i])=='black') num++;
								}
							});
							return num%2==0&&event.targets.length<2;
						},
						content:function(){
							player.draw(player.countCards('h')<=trigger.targets[0].countCards('h')?2:1);
						},
						sub:true,
					},
				},
			},
			exgnfw:{
				audio:"ext:神怒降世:2",
				trigger:{
					global:"useCardToPlayered",
				},
				filter:function(event,player){
					if(event.getParent().triggeredTargets3.length>1) return false;
					if(get.type(event.card)!='trick') return false;
					if(get.info(event.card).multitarget) return false;
					if(event.targets.length<2) return false;
					return !player.hasSkill('exgnfw2');
				},
				direct:true,
				content:function(){
					"step 0"
					player.chooseTarget(get.prompt('exgnfw'),'<center>为'+get.translation(trigger.card.name)+'减少任意个目标</center>',[1,trigger.targets.length],function(card,player,target){
						return _status.event.targets.contains(target);
					}).set('ai',function(target){
						var trigger=_status.event.getTrigger();
						if(game.phaseNumber>game.players.length*2&&trigger.targets.length>=game.players.length-1&&!trigger.excluded.contains(target)){
							return -get.effect(target,trigger.card,trigger.player,_status.event.player);
						}
						return -1;
					}).set('targets',trigger.targets);
					"step 1"
					if(result.bool){
						player.logSkill('exgnfw',result.targets);
						player.addTempSkill('exgnfw2','roundStart');
						trigger.getParent().excluded.addArray(result.targets);
						game.delay();
					}
				},
			},
			exgnfw2:{},
			exzyyz:{
				audio:"ext:神怒降世:2",
				trigger:{
					player:"drawBegin",
				},
				filter:function(event,player){
					return event.num>0;
				},
				forced:true,
				content:function (){
					var card=get.cardPile(function(card){
						return get.type(card)=='trick'||get.type(card)=='delay';
					});
					if(!card){
						var card2=[];
						for(var i=0;i<ui.discardPile.childNodes.length;i++){
							var current=ui.discardPile.childNodes[i];
							if((get.type(current)=='trick'||get.type(current)=='delay')&&card2.length<1) card2.push(current);
						}
						if(card2.length>0) player.gain(card2,'gain2');
					}
					else player.gain(card,'gain2');
				},
				ai:{
					threaten:1.5,
				},
				mod:{
					maxHandcardBase:function(player,num){
						return player.maxHp+1;
					},
				},
			},
			exzyfj:{
				audio:"ext:神怒降世:2",
				enable:"phaseUse",
				usable:1,
				filterTarget:function(card,player,target){
					return player!=target;
				},
				content:function(){
					"step 0"
					if(target.countCards('h')>0){
						target.showHandcards();
					}
					"step 1"
					player.chooseCard('〖反间〗:是否交给'+get.translation(target)+'一张牌？','he').set('ai',function(card){
						return 7-get.value(card);
					});
					"step 2"
					if(result.bool){
						event.card=result.cards[0];
						player.give(event.card,target);
						player.draw();
					}
					else{
						event.finish();
					}
					"step 3"
					target.chooseControl('弃牌','失去体力').set('prompt','〖反间〗：选择一项').ai=function(event,player){
						var cards=player.getCards('he',{suit:get.suit(event.card)});
						if(cards.length==1) return 0;
						if(cards.length>=2){
							for(var i=0;i<cards.length;i++){
								if(get.tag(cards[i],'save')) return 1;
							}
						}
						if(player.hp==1) return 0;
						for(var i=0;i<cards.length;i++){
							if(get.value(cards[i])>=8) return 1;
						}
						if(cards.length>2&&player.hp>2) return 1;
						if(cards.length>3) return 1;
						return 0;
					}
					"step 4"
					if(result.control=='弃牌'){
						target.discard(target.getCards('he',{suit:get.suit(event.card)}));
					}
					else{
						target.loseHp();
					}
				},
				ai:{
					order:9,
					result:{
						target:function(player,target){
							return -1;
						},
					},
					threaten:2,
				},
			},
			exlxqx:{
				audio:"ext:神怒降世:2",
				init:function(player){
					if(!player.storage.exlxqx2) player.storage.exlxqx2=[];
				},
				trigger:{
					target:"useCardToBegin",
					player:"judgeBefore",
				},
				filter:function(event,player){
					if(player.countCards('h')==0) return false;
					if(event.parent.name=='phaseJudge'){
						if(lib.skill.reqianxun.trigger.player=='judgeBefore'){
							return true;
						}
						return event.result&&event.result.judge!=0;
					}
					if(event.name=='judge') return false;
					if(event.targets&&event.targets.length>1) return false;
					if(event.card&&get.type(event.card)=='trick'&&event.player!=player) return true;
				},
				content:function(){
					player.storage.exlxqx2=player.storage.exlxqx2.concat(player.getCards('h'));
					game.addVideo('storage',player,['exlxqx2',get.cardsInfo(player.storage.exlxqx2),'cards']);
					player.lose(player.getCards('h'),ui.special,'toStorage');
					player.addSkill('exlxqx2');
				},
				ai:{
					effect:function(card,player,target){
						if(!target.hasFriend()) return;
						if(player==target) return;
						var type=get.type(card);
						var nh=target.countCards();
						if(type=='trick'){
							if(!get.tag(card,'multitarget')||get.info(card).singleCard){
								if(get.tag(card,'damage')){
									if(nh<3||target.hp<=2) return 0.8;
								}
								return [1,nh];
							}
						}
						else if(type=='delay'){
							return [0.5,0.5];
						}
					},
				},
			},
			exlxqx2:{
				trigger:{
					global:"phaseEnd",
				},
				forced:true,
				audio:false,
				content:function(){
					player.gain(player.storage.exlxqx2,'fromStorage','draw');
					player.storage.exlxqx2.length=0;
					player.removeSkill('exlxqx2');
					game.addVideo('storage',player,['exlxqx2',get.cardsInfo(player.storage.exlxqx2),'cards']);
				},
				marktext:'谦逊',
				mark:true,
				intro:{
					content:"cardCount",
					onunmark:function(storage,player){
						if(storage&&storage.length){
							player.$throw(storage,1000);
							game.cardsDiscard(storage);
							game.log(storage,'被置入了弃牌堆');
							player.storage.exlxqx2.length=0;
						}
					},
				},
			},
			exlxly:{
				audio:"ext:神怒降世:2",
				trigger:{
					player:"loseAfter",
					global:["equipAfter","addJudgeAfter","gainAfter","loseAsyncAfter"],
				},
				direct:true,
				filter:function(event,player){
					if(player.countCards('h')!=player.hp&&player.countCards('h')!=0) return false;
					var evt=event.getl(player);
					return evt&&evt.hs&&evt.hs.length;
				},
				content:function(){
					"step 0"
					var num=trigger.getl(player).hs.length;
					player.chooseTarget(get.prompt('exlxly'),'<center>令至多'+get.cnNumber(num)+'名角色各摸一张牌</center>',[1,num]).ai=function(target){
						var player=_status.event.player;
						if(player==target) return get.attitude(player,target)+10;
						return get.attitude(player,target);
					}
					"step 1"
					if(result.bool){
						player.logSkill('exlxly',result.targets);
						game.asyncDraw(result.targets);
					}
					else event.finish();
					"step 2"
					game.delay();
				},
				ai:{
					threaten:0.8,
					effect:{
						target:function(card){
							if(card.name=='guohe'||card.name=='liuxinghuoyu') return 0.5;
						},
					},
					noh:true,
				},
			},
			exhzlg:{
				audio:"ext:神怒降世:2",
				mod:{
					targetInRange:function(card,player,target){
						if(card.name=='sha') return true;
					},
				},
				shaRelated:true,
				trigger:{
					player:"useCardToTargeted",
				},
				logTarget:"target",
				filter:function(event,player){
					return event.card.name=='sha';
				},
				check:function(event,player){
					return get.attitude(player,event.target)<=0;
				},
				content:function(){
					'step 0'
					event.num=0;
					trigger.getParent().directHit.push(trigger.target);
					'step 1'
					if(trigger.target.hp>=player.hp){
						var id=trigger.target.playerid;
						var map=trigger.getParent().customArgs;
						if(!map[id]) map[id]={};
						if(typeof map[id].extraDamage!='number'){
							map[id].extraDamage=0;
						}
						map[id].extraDamage++;
					}
					else event.num++;
					'step 2'
					if(trigger.target.countCards('h')>player.countCards('h')) trigger.target.chooseToDiscard('〖烈弓〗：弃置'+get.cnNumber(trigger.target.countCards('h')-player.countCards('h'))+'张手牌',trigger.target.countCards('h')-player.countCards('h'),true,'h');
					else event.num++;
					'step 3'
					if(event.num>0&&!player.hasSkill('exhzlg_jilu')){
						player.addTempSkill('exhzlg_jilu');
						player.draw(event.num);
					}
				},
				ai:{
					threaten:0.5,
					"directHit_ai":true,
				},
				subSkill:{
					jilu:{
						silent:true,
						unique:true,
						forced:true,
						sub:true,
					},
				},
			},
			exgyws:{
				audio:"ext:神怒降世:2",
				group:"exgyws_damage",
				mod:{
					targetInRange:function (card){
						if(get.suit(card)=='diamond'&&card.name=='sha') return true;
					},
				},
				subSkill:{
					damage:{
						trigger:{
							player:"useCardToTargeted",
						},
						filter:function(event){
							return event.card&&event.card.name=='sha'&&get.suit(event.card)=='heart';
						},
						silent:true,
						forced:true,
						content:function(){
							var id=trigger.target.playerid;
							var map=trigger.getParent().customArgs;
							if(!map[id]) map[id]={};
							if(typeof map[id].extraDamage!='number'){
								map[id].extraDamage=0;
							}
							map[id].extraDamage++;
						},
						sub:true,
					},
				},
				enable:["chooseToRespond","chooseToUse"],
				filterCard:function(card,player){
					if(get.zhu(player,'shouyue')) return true;
					return get.color(card)=='red';
				},
				position:"hes",
				viewAs:{
					name:"sha",
				},
				viewAsFilter:function(player){
					if(get.zhu(player,'shouyue')){
						if(!player.countCards('hes')) return false;
					}
					else{
						if(!player.countCards('hes',{color:'red'})) return false;
					}
				},
				prompt:"将一张红牌当作【杀】使用或打出",
				check:function(card){return 4-get.value(card)},
				ai:{
					respondSha:true,
					skillTagFilter:function(player){
						if(get.zhu(player,'shouyue')){
							if(!player.countCards('hes')) return false;
						}
						else{
							if(!player.countCards('hes',{color:'red'})) return false;
						}
					},
					canLink:function(player,target,card){
						if(!target.isLinked()&&!player.hasSkill('wutiesuolian_skill')) return false;
						if(target.mayHaveShan()&&!player.hasSkillTag('directHit_ai',true,{
							target:target,
							card:card,
						},true)) return false;
						if(player.hasSkill('jueqing')||target.hasSkill('gangzhi')||target.hasSkill('gangzhi')) return false;
						return true;
					},
					basic:{
						useful:[5,1],
						value:[5,1],
					},
					order:function(item,player){
						if(player.hasSkillTag('presha',true,null,true)) return 10;
						if(lib.linked.contains(get.nature(item))){
							if(game.hasPlayer(function(current){
								return current!=player&&current.isLinked()&&player.canUse(item,current,null,true)&&get.effect(current,item,player,player)>0&&lib.card.sha.ai.canLink(player,current,item);
							})&&game.countPlayer(function(current){
								return current.isLinked()&&get.damageEffect(current,player,player,get.nature(item))>0;
							})>1) return 3.1;
							return 3;
						}
						return 3.05;
					},
					result:{
						target:function(player,target,card,isLink){
							var eff=function(){
								if(!isLink&&player.hasSkill('jiu')){
									if(!target.hasSkillTag('filterDamage',null,{
										player:player,
										card:card,
										jiu:true,
									})){
										if(get.attitude(player,target)>0){
											return -7;
										}
										else{
											return -4;
										}
									}
									return -0.5;
								}
								return -1.5;
							}();
							if(!isLink&&target.mayHaveShan()&&!player.hasSkillTag('directHit_ai',true,{
								target:target,
								card:card,
							},true)) return eff/1.2;
							return eff;
						},
					},
					tag:{
						respond:1,
						respondShan:1,
						damage:function(card){
							if(card.nature=='poison') return;
							return 1;
						},
						natureDamage:function(card){
							if(card.nature) return 1;
						},
						fireDamage:function(card,nature){
							if(card.nature=='fire') return 1;
						},
						thunderDamage:function(card,nature){
							if(card.nature=='thunder') return 1;
						},
						poisonDamage:function(card,nature){
							if(card.nature=='poison') return 1;
						},
					},
				},
			},
			exgyyj:{
				audio:"ext:神怒降世:2",
				enable:"phaseUse",
				group:"exgyyj_jvli",
				usable:1,
				filterTarget:function (card,player,target){
					return player!=target&&target.countCards('he');
				},
				content:function(){
					"step 0"
					player.choosePlayerCard(target,'he',true);
					"step 1"
					event.card=result.cards[0];
					player.gain(event.card,target,'give');
					"step 2"
					player.chooseToDiscard('〖义绝〗：是否弃置一张颜色不同的牌？','he',function(card,player){
						return get.color(card)!=get.color(event.card);
					}).set('ai',function(card){
						return 7-get.value(card);
					});
					"step 3"
					if(result.bool){
						player.draw();
						if(!target.hasSkill('fengyin')){
							target.addTempSkill('fengyin');
						}
						target.addTempSkill('exgyyj_mark');
						event.finish();
					}
					else{
						player.chooseBool('〖义绝〗：是否令目标摸一张牌并回复1点体力？').ai=function(event,player){
							return get.recoverEffect(target,player,player)>0;
						};
					}
					"step 3"
					if(result.bool){
						target.draw();
						if(target.isDamaged()) target.recover();
					}
				},
				ai:{
					result:{
						target:function(player,target){
							if(get.recoverEffect(target)>0){
								return 1;
							}
							return -1;
						},
					},
					order:100,
					"directHit_ai":true,
					skillTagFilter:function(player,tag,arg){
						if(!arg.target.hasSkillTag('exgyyj_mark')) return false;
					},
				},
				subSkill:{
					mark:{
						mark:true,
						unique:true,
						intro:{
							content:"不能使用或打出牌",
						},
						mod:{
							cardEnabled2:function(card){
								if(get.position(card)=='h') return false;
								if(get.position(card)=='s') return false;
							},
						},
						sub:true,
					},
					jvli:{
						mod:{
							globalFrom:function(from,to){
								if(to.hasSkill('exgyyj_mark')){
									return -Infinity;
								}
							},
						},
						sub:true,
					},
				},
			},
			exzfpx:{
				audio:"ext:神怒降世:2",
				group:["exzfpx_mark"],
				mod:{
					cardUsable:function (card,player,num){
						if(card.name=='sha') return Infinity;
					},
					targetInRange:function (card,player){
						if(player.countUsed('sha',true)>0&&card.name=='sha') return true;
					},
				},
				firstDo:true,
				trigger:{
					player:"useCard1",
				},
				forced:true,
				filter:function(event,player){
					return !event.audioed&&event.card.name=='sha'&&player.countUsed('sha',true)>1&&event.getParent().type=='phase';
				},
				content:function(){
					trigger.audioed=true;
				},
				subSkill:{
					mark:{
						trigger:{
							player:"shaMiss",
						},
						forced:true,
						direct:true,
						content:function(){
							player.addTempSkill('exzfpx_damage');
							player.addMark('exzfpx_damage',1,false);
						},
						sub:true,
					},
					damage:{
						trigger:{
							source:"damageBegin1",
						},
						intro:{
							name:"咆哮",
							content:"本回合内下一次使用【杀】造成伤害时令伤害值+#",
						},
						filter:function(event,player){
							return event.card&&event.card.name=='sha'&&player.countMark('exzfpx_damage')>0;
						},
						forced:true,
						direct:true,
						onremove:true,
						content:function(){
							trigger.num+=player.countMark('exzfpx_damage');
							player.removeSkill('exzfpx_damage');
						},
						sub:true,
					},
				},
			},
			exzfts:{
				audio:"ext:神怒降世:2",
				trigger:{
					global:"useCardAfter",
				},
				filter:function(event,player){
					if(event.card.name!='sha') return false;
					if(event.targets.contains(player)){
						if(player.countCards('h',{name:'sha'})<1) return true;
						return event.player.getHistory('sourceDamage',function(evt){
							return evt.card==event.card;
						}).length&&event.cards.filterInD().length>0;
					}
					if(event.player==player&&!player.hasSkill('exzfts2')){
						return !event.player.getHistory('sourceDamage',function(evt){
							return evt.card==event.card;
						}).length&&event.cards.filterInD().length>0;
					}
				},
				content:function(){
					if(trigger.player==player&&!player.hasSkill('exzfts2')) player.addTempSkill('exzfts2');
					player.gain(trigger.cards.filterInD(),'gain2');
				},
			},
			exzfts2:{},
			exzyld:{
				audio:"ext:神怒降世:2",
				hiddenCard:function(player,name){
					if(name=='tao') return player.countCards('hs','jiu')>0;
					if(name=='jiu') return player.countCards('hs','tao')>0;
					return false;
				},
				enable:["chooseToUse","chooseToRespond"],
				position:"hs",
				prompt:"将【杀】当做【闪】，或将【闪】当做【杀】，或将【桃】当做【酒】，或将【酒】当做【桃】使用或打出",
				viewAs:function(cards,player){
					var name=false;
					switch(get.name(cards[0],player)){
						case 'sha':name='shan';break;
						case 'shan':name='sha';break;
						case 'tao':name='jiu';break;
						case 'jiu':name='tao';break;
					}
					if(name) return {name:name};
					return null;
				},
				check:function(card){
					var player=_status.event.player;
					if(_status.event.type=='phase'){
						var max=0;
						var name2;
						var list=['sha','tao','jiu'];
						var map={sha:'shan',tao:'jiu',jiu:'tao'}
						for(var i=0;i<list.length;i++){
							var name=list[i];
							if(player.countCards('hs',map[name])>(name=='jiu'?1:0)&&player.getUseValue({name:name})>0){
								var temp=get.order({name:name});
								if(temp>max){
									max=temp;
									name2=map[name];
								}
							}
						}
						if(name2==get.name(card,player)) return 1;
						return 0;
					}
					return 1;
				},
				filterCard:function(card,player,event){
					event=event||_status.event;
					var filter=event._backup.filterCard;
					var name=get.name(card,player);
					if(name=='sha'&&filter({name:'shan',cards:[card]},player,event)) return true;
					if(name=='shan'&&filter({name:'sha',cards:[card]},player,event)) return true;
					if(name=='tao'&&filter({name:'jiu',cards:[card]},player,event)) return true;
					if(name=='jiu'&&filter({name:'tao',cards:[card]},player,event)) return true;
					return false;
				},
				filter:function(event,player){
					var filter=event.filterCard;
					if(filter({name:'sha'},player,event)&&player.countCards('hs','shan')) return true;
					if(filter({name:'shan'},player,event)&&player.countCards('hs','sha')) return true;
					if(filter({name:'tao'},player,event)&&player.countCards('hs','jiu')) return true;
					if(filter({name:'jiu'},player,event)&&player.countCards('hs','tao')) return true;
					return false;
				},
				ai:{
					respondSha:true,
					respondShan:true,
					skillTagFilter:function(player,tag){
						var name;
						switch(tag){
							case 'respondSha':name='shan';break;
							case 'respondShan':name='sha';break;
						}
						if(!player.countCards('hs',name)) return false;
					},
					order:function(item,player){
						if(player&&_status.event.type=='phase'){
							var max=0;
							var list=['sha','tao','jiu'];
							var map={sha:'shan',tao:'jiu',jiu:'tao'}
							for(var i=0;i<list.length;i++){
								var name=list[i];
								if(player.countCards('hs',map[name])>(name=='jiu'?1:0)&&player.getUseValue({name:name})>0){
									var temp=get.order({name:name});
									if(temp>max) max=temp;
								}
							}
							if(max>0) max+=0.3;
							return max;
						}
						return 4;
					},
				},
			},
			exzyyj:{
				audio:"ext:神怒降世:2",
				trigger:{
					player:['useCard','respond'],
				},
				filter:function(event,player){
					if(event.skill!='longdan_shan'&&event.skill!='longdan_sha'&&
					event.skill!='fanghun_shan'&&event.skill!='fanghun_sha'&&event.skill!='ollongdan'&&event.skill!='exzyld'){
						return _status.currentPhase!=player;
					}
					return event.card.name=='sha'||event.card.name=='shan';
				},
				direct:true,
				content:function(){
					'step 0'
					event.qipai=0;
					event.meimodao=0;
					if(event.triggername=='useCard'){
						if((trigger.card.name=='sha'||trigger.card.name=='shan')&&(trigger.skill=='longdan_shan'||trigger.skill=='longdan_sha'||trigger.skill=='fanghun_shan'||trigger.skill=='fanghun_sha'||trigger.skill=='ollongdan')||trigger.skill=='exzyld'){
							if(trigger.card.name=='sha') event.target=trigger.targets;
							if(trigger.card.name=='shan'){
								event.target=trigger.respondTo[0];
								player.gainPlayerCard(event.target,'h').logSkill=['exzyyj',event.target];
								event.goto(1);
							}
							if(event.target.length>0){
								for(var i=0;i<event.target.length;i++){
									if(event.target[i].countGainableCards(player,'h')>0){
										player.gainPlayerCard(event.target[i],'h').logSkill=['exzyyj',event.target];
									}
								}
								event.goto(1);
							}
							else event.goto(1);
						}
					}
					if(event.triggername=='respond'){
						if(trigger.skill=='longdan_shan'||trigger.skill=='longdan_sha'||trigger.skill=='fanghun_shan'||trigger.skill=='fanghun_sha'||trigger.skill=='ollongdan'||trigger.skill=='exzyld'){
							event.target=trigger.source;
							if(trigger.source&&trigger.source.countGainableCards(player,'h')>0){
								player.gainPlayerCard(event.target,'h').logSkill=['exzyyj',event.target];
								event.goto(1);
							}
							else event.goto(1);
						}
					}
					'step 1'
					if(result.bool){
						event.qipai++;
					}
					else event.meimodao++;
					if(_status.currentPhase!=player){
						player.chooseBool('〖涯角〗：是否摸一张牌？').ai=function(event,player){
							return true;
						};
					}
					else{
						if(event.meimodao>0) event.finish();
						else event.goto(3);
					}
					'step 2'
					if(result.bool){
						if(event.qipai<1) player.logSkill('exzyyj');
						player.draw();
						event.qipai++;
					}
					else{
						if(event.meimodao>0&&event.qipai<1) event.finish();
					}
					'step 3'
					player.chooseCardTarget({
						filterCard:true,
						selectCard:1,
						filterTarget:function(card,player,target){
							return player!=target;
						},
						position:"hes",
						ai1:function(card){
							if(ui.selected.cards.length>0) return -1;
							if(card.name=='du') return 20;
							return (_status.event.player.countCards('h')-_status.event.player.hp);
						},
						ai2:function(target){
							var att=get.attitude(_status.event.player,target);
							if(ui.selected.cards.length&&ui.selected.cards[0].name=='du'){
								if(target.hasSkillTag('nodu')) return 0;
								return 1-att;
							}
							return att-4;
						},
						prompt:'〖涯角〗：可以将一张牌交给一名其他角色'
					});
					'step 4'
					if(result.bool){
						player.line(result.targets[0]);
						result.targets[0].gain(result.cards,player,'giveAuto');
					}
					else{
						if(player.isMaxHandcard()&&event.qipai>1) player.chooseToDiscard('〖涯角〗：弃置一张手牌','h',true);
					}
				},
				ai:{
					combo:"exzyld",
					mingzhi:false,
				},
			},
			exlbrd:{
				audio:"ext:神怒降世:2",
				enable:"phaseUse",
				init:function(player){
					if(!player.storage.exlbrd1) player.storage.exlbrd1=0;
				},
				filterCard:true,
				selectCard:[1,Infinity],
				discard:false,
				lose:false,
				delay:false,
				filterTarget:function(card,player,target){
					return player!=target;
				},
				check:function(card){
					if(ui.selected.cards.length&&ui.selected.cards[0].name=='du') return 0;
					if(!ui.selected.cards.length&&card.name=='du') return 20;
					var player=get.owner(card);
					if(ui.selected.cards.length>=Math.max(2,player.countCards('h')-player.hp)) return 0;
					if(player.hp==player.maxHp||player.storage.exlbrd1<=0||player.countCards('h')<=1){
						var players=game.filterPlayer();
						for(var i=0;i<players.length;i++){
							if(players[i].hasSkill('haoshi')&&
							   !players[i].isTurnedOver()&&
							   !players[i].hasJudge('lebu')&&
							   get.attitude(player,players[i])>=3&&
							   get.attitude(players[i],player)>=3){
								return 11-get.value(card);
							}
						}
						if(player.countCards('h')>player.hp) return 10-get.value(card);
						if(player.countCards('h')>2) return 6-get.value(card);
						return -1;
					}
					return 10-get.value(card);
				},
				content:function(){
					'step 0'
					if(!player.hasSkill('exlbrd_qingchu')) player.addTempSkill('exlbrd_qingchu');
					player.storage.exlbrd1+=cards.length;
					target.gain(cards,player,'giveAuto');
					if(player.storage.exlbrd1>=2){
						var list=[];
						if(lib.filter.cardUsable({name:'sha'},player,event.getParent('chooseToUse'))&&game.hasPlayer(function(current){
							return player.canUse('sha',current);
						})){
							if(!player.hasSkill('exlbrd_sha')) list.push(['基本','','sha']);
							if(!player.hasSkill('exlbrd_sha1')) list.push(['基本','','sha','fire']);
							if(!player.hasSkill('exlbrd_sha2')) list.push(['基本','','sha','thunder']);
							if(!player.hasSkill('exlbrd_sha3')) list.push(['基本','','sha','ice']);
						}
						if(lib.filter.cardUsable({name:'tao'},player,event.getParent('chooseToUse'))&&game.hasPlayer(function(current){
							return player.canUse('tao',current);
						})&&!player.hasSkill('exlbrd_tao')){
							list.push(['基本','','tao']);
						}
						if(lib.filter.cardUsable({name:'jiu'},player,event.getParent('chooseToUse'))&&game.hasPlayer(function(current){
							return player.canUse('jiu',current);
						})){
							list.push(['基本','','jiu']);
						}
						if(list.length){
							player.chooseButton(['是否视为使用一张基本牌？',[list,'vcard']]).set('ai',function(button){
								var player=_status.event.player;
								var card={name:button.link[2],nature:button.link[3]};
								if(card.name=='tao'){
									if(player.hp==1||(player.hp==2&&!player.hasShan())||player.needsToDiscard()){
										return 5;
									}
									return 1;
								}
								if(card.name=='sha'){
									if(game.hasPlayer(function(current){
										return player.canUse(card,current)&&get.effect(current,card,player,player)>0
									})){
										if(card.nature=='fire') return 2.95;
										if(card.nature=='thunder'||card.nature=='ice') return 2.92;
										return 2.9;
									}
									return 0;
								}
								if(card.name=='jiu'){
									return 0.5;
								}
								return 0;
							});
						}
						else{
							event.finish();
						}
						player.storage.exlbrd1-=2;
					}
					else{
						event.finish();
					}
					'step 1'
					if(result&&result.bool&&result.links[0]){
						var card={name:result.links[0][2],nature:result.links[0][3]};
						if(card.name=='sha'){
							var x=0;
							if(card.nature=='fire'){
								player.addTempSkill('exlbrd_sha1');
								x++;
							}
							if(card.nature=='thunder'){
								player.addTempSkill('exlbrd_sha2');
								x++;
							}
							if(card.nature=='ice'){
								player.addTempSkill('exlbrd_sha3');
								x++;
							}
							if(x==0) player.addTempSkill('exlbrd_sha');
							player.chooseUseTarget(card,true,false);
						}
						else player.chooseUseTarget(card,true);
						if(card.name=='tao'&&!player.hasSkill('exlbrd_tao')) player.addTempSkill('exlbrd_tao');
					}
				},
				subSkill:{
					qingchu:{
						silent:true,
						unique:true,
						forced:true,
						onremove:function(player){
							player.storage.exlbrd1=0;
						},
						sub:true,
					},
					sha:{
						silent:true,
						unique:true,
						forced:true,
						sub:true,
					},
					sha1:{
						silent:true,
						unique:true,
						forced:true,
						sub:true,
					},
					sha2:{
						silent:true,
						unique:true,
						forced:true,
						sub:true,
					},
					sha3:{
						silent:true,
						unique:true,
						forced:true,
						sub:true,
					},
					tao:{
						silent:true,
						unique:true,
						forced:true,
						sub:true,
					},
				},
				ai:{
					fireAttack:true,
					order:function(skill,player){
						if(player.hp<player.maxHp&&player.storage.exlbrd<2&&player.countCards('h')>1){
							return 10;
						}
						return 4;
					},
					result:{
						target:function(player,target){
							if(target.hasSkillTag('nogain')) return 0;
							if(ui.selected.cards.length&&ui.selected.cards[0].name=='du'){
								if(target.hasSkillTag('nodu')) return 0;
								return -10;
							}
							if(target.hasJudge('lebu')) return 0;
							var nh=target.countCards('h');
							var np=player.countCards('h');
							if(player.hp==player.maxHp||player.storage.exlbrd<0||player.countCards('h')<=1){
								if(nh>=np-1&&np<=player.hp&&!target.hasSkill('haoshi')) return 0;
							}
							return Math.max(1,5-nh);
						},
					},
					effect:{
						target:function(card,player,target){
							if(player==target&&get.type(card)=='equip'){
								if(player.countCards('e',{subtype:get.subtype(card)})){
									if(game.hasPlayer(function(current){
										return current!=player&&get.attitude(player,current)>0;
									})){
										return 0;
									}
								}
							}
						},
					},
					threaten:0.8,
				},
			},
			exlbrw:{
				audio:"ext:神怒降世:2",
				trigger:{
					target:'useCardToTargeted',
				},
				filter:function(event,player){
					return event.player!=player&&event.player.isPhaseUsing()&&(event.card.name=='sha'||get.type(event.card)=='trick');
				},
				direct:true,
				content:function(){
					if(trigger.player.countCards('h')>player.countCards('h')){
						player.logSkill('exlbrw');
						player.draw();
					}
					if(!player.hasSkill('exlbrw_xiaoguo')) player.addTempSkill('exlbrw_xiaoguo');
					else if(trigger.player.countDiscardableCards(player,'he')){
						player.discardPlayerCard(trigger.player,'he',get.prompt('exlbrw_xiaoguo')).logSkill=['exlbrw',trigger.player];
					}
				},
				subSkill:{
					xiaoguo:{
						sub:true,
					},
				},
			},
			exlbjj:{
				audio:"ext:神怒降世:2",
				enable:"phaseUse",
				unique:true,
				zhuSkill:true,
				usable:1,
				filter:function(event,player){
					return game.hasPlayer(function(current){
						return current!=player;
					})&&player.hasZhuSkill('exlbjj');
				},
				filterTarget:function(card,player,target){
					return player!=target;
				},
				content:function(){
					"step 0"
					event.target=target;
					event.i=0;
					event.juese=game.filterPlayer();
					event.juese.remove(player);
					event.juese.sort(lib.sort.seat);
					if(event.juese.length<1) event.finish();
					"step 1"
					if(!(event.i<event.juese.length)) event.finish();
					"step 2"
					event.juese[event.i].chooseToUse('〖激将〗：是否对'+get.translation(event.target)+'使用一张杀？',function(card,player){
						return get.name(card)=='sha';
					}).set('targetRequired',true).set('complexSelect',true).set('filterTarget',function(card,player,target){
						return target==event.target;
					}).set('sourcex',target).set('addCount',false).set('respondTo',[player,card]);
					"step 3"
					if(result.bool==true){
						event.finish();
					}
					else{
						event.i++;
						event.goto(1);
					}
				},
				ai:{
					expose:0.4,
					threaten:0.4,
					order:function(){
						return get.order({name:'sha'})+0.3;
					},
					result:{
						target:function(player,target){
							return -1;
						},
					},
				},
			},
			exsmyfk:{
				audio:"ext:神怒降世:2",
				trigger:{
					player:"damageBegin4",
				},
				filter:function(event,player){
					return event.num>0&&event.source!=player;
				},
				direct:true,
				content:function(){
					"step 0"
					event.count=trigger.num;
					"step 1"
					event.fadong=0;
					event.count--;
					if(trigger.source.countGainableCards(player,'he')>0){
						player.gainPlayerCard(get.prompt('exsmyfk',trigger.source),trigger.source,get.buttonValue,'he').set('logSkill',[event.name,trigger.source]);
					}
					"step 2"
					if(result.bool){
						event.fadong++;
						player.chooseBool('〖反馈〗：是否摸一张牌？').ai=function(event,player){
							return true;
						};
					}
					else{
						player.chooseBool('〖反馈〗：是否摸两张牌？').ai=function(event,player){
							return true;
						};
					}
					"step 3"
					if(result.bool){
						if(event.fadong==0){
							player.logSkill('exsmyfk');
							player.draw(2);
						}
						else player.draw();
					}
					"step 4"
					if(event.count>0) event.goto(1);
				},
				ai:{
					"maixie_defend":true,
					effect:{
						target:function(card,player,target){
							if(player.countCards('he')>1&&get.tag(card,'damage')){
								if(player.hasSkillTag('jueqing',false,target)) return [1,-1.5];
								if(get.attitude(target,player)<0) return [1,1];
							}
						},
					},
				},
			},
			exsmygc:{
				audio:"ext:神怒降世:2",
				trigger:{
					global:"judge",
				},
				direct:true,
				filter:function(event,player){
					return player.countCards('hes')>0;
				},
				content:function(){
					"step 0"
					player.chooseCard(get.translation(trigger.player)+'的'+(trigger.judgestr||'')+'判定为'+
									  get.translation(trigger.player.judging[0])+'，'+get.prompt('exsmygc'),'hes',function(card){
						var player=_status.event.player;
						var mod2=game.checkMod(card,player,'unchanged','cardEnabled2',player);
						if(mod2!='unchanged') return mod2;
						var mod=game.checkMod(card,player,'unchanged','cardRespondable',player);
						if(mod!='unchanged') return mod;
						return true;
					}).set('ai',function(card){
						var trigger=_status.event.getTrigger();
						var player=_status.event.player;
						var judging=_status.event.judging;
						var result=trigger.judge(card)-trigger.judge(judging);
						var attitude=get.attitude(player,trigger.player);
						if(attitude==0||result==0) return 0;
						if(attitude>0){
							return result-get.value(card)/2;
						}
						else{
							return -result-get.value(card)/2;
						}
					}).set('judging',trigger.player.judging[0]);
					"step 1"
					if(result.bool){
						player.respond(result.cards,'exsmygc','highlight','noOrdering');
					}
					else{
						event.finish();
					}
					"step 2"
					if(result.bool){
						if(trigger.player.judging[0].clone){
							trigger.player.judging[0].clone.classList.remove('thrownhighlight');
							game.broadcast(function(card){
								if(card.clone){
									card.clone.classList.remove('thrownhighlight');
								}
							},trigger.player.judging[0]);
							game.addVideo('deletenode',player,get.cardsInfo([trigger.player.judging[0].clone]));
						}
						player.gain(trigger.player.judging[0],'gain2');
						trigger.player.judging[0]=result.cards[0];
						trigger.orderingCards.addArray(result.cards);
						game.log(trigger.player,'的判定牌改为',result.cards[0]);
						game.delay(2);
					}
				},
				ai:{
					rejudge:true,
					tag:{
						rejudge:1,
					},
				},
			},
			exsmyqm:{
				audio:"ext:神怒降世:2",
				enable:"phaseUse",
				usable:1,
				filter:function(event,player){
					return game.hasPlayer(function(current){
						return current!=player&&current.hp>=player.hp;
					});
				},
				filterTarget:function(card,player,target){
					return player!=target&&target.hp>=player.hp;
				},
				content:function(){
					"step 0"
					var func=function(result){
						if(result.name=='sha') return -10;
						return 10;
					};
					target.judge(func);
					"step 1"
					if(result.name=='sha'){
						target.damage(1,'nocard');
					}
					else target.draw(2);
				},
				ai:{
					expose:0.4,
					threaten:0.4,
					order:function(){
						return get.order({name:'jiu'})+1;
					},
					result:{
						target:function(player,target){
							if(target.hp>=player.hp&&target!=player&&get.attitude(player,target)<0&&player.countCards('hes',{name:'sha'})>0) return -1;
							if(target.hp>=player.hp&&target!=player&&get.attitude(player,target)>0&&player.countCards('hes',{name:'sha'})<player.countCards('hes')) return 1;
							return 0;
						},
					},
				},
			},
			exxcly:{
				audio:"ext:神怒降世:2",
				group:"exxcly_damage",
				trigger:{
					player:"phaseDrawBegin1",
				},
				forced:true,
				content:function (){
					"step 0"
					var cards=get.cards(3);
					game.cardsGotoOrdering(cards);
					player.showCards(cards,'裸衣');
					event.cards=[];
					event.qizhi=[];
					for(var i=0;i<cards.length;i++){
						if(get.type(cards[i])=='basic'||cards[i].name=='juedou'||
							(get.type(cards[i])=='equip'&&get.subtype(cards[i])=='equip1')){
							event.cards.push(cards[i]);
						}
						else event.qizhi.push(cards[i]);
					}
					"step 1"
					if(event.cards.length){
						player.gain(event.cards,'gain2');
						if(!trigger.numFixed) trigger.num--;
					}
					player.$throw(event.qizhi,1000,'exxcly','highlight');
				},
				subSkill:{
					damage:{
						audio:"exxcly",
						trigger:{
							source:'damageBegin1',
						},
						filter:function(event){
							return event.card&&(event.card.name=='sha'||event.card.name=='juedou')&&event.notLink();
						},
						forced:true,
						content:function(){
							trigger.num++;
						},
						ai:{
							damageBonus:true
						},
						sub:true,
					},
				},
			},
			exxcxc:{
				audio:"ext:神怒降世:2",
				enable:"phaseUse",
				usable:1,
				filter:function(event,player){
					return game.hasPlayer(function(current){
						return current!=player;
					})&&player.countCards('hes',function(card){
						return get.type(card)!='basic';
					})>0;
				},
				filterCard:function(card,player){
					return get.type(card)!='basic';
				},
				position:"hes",
				discard:false,
				lose:false,
				delay:false,
				filterTarget:function(card,player,target){
					return player!=target&&player.canUse({name:'juedou'},target);
				},
				check:function(card){
					return 8-get.value(card);
				},
				content:function(){
					player.useCard({name:'juedou'},cards,target).viewAs=true;
				},
				ai:{
					expose:0.4,
					threaten:0.4,
					order:function(){
						return get.order({name:'juedou'})-1;
					},
					result:{
						target:function(player,target){
							return -1;
						},
					},
				},
			},
			exxhdgl:{
				audio:"ext:神怒降世:2",
				trigger:{
					global:"damageEnd",
				},
				filter:function(event,player){
					return (event.source!=undefined&&event.num>0&&event.source!=player);
				},
				check:function(event,player){
					return (get.attitude(player,event.source)<=0);
				},
				logTarget:function(event,player){
					if(event.player==player) return event.source;
					else return false;
				},
				content:function(){
					"step 0"
					event.num=trigger.num;
					if(trigger.player==player) trigger.source.damage(trigger.num);
					"step 1"
					player.judge(function(card){
						if(get.color(card)=='black'&&trigger.source.countCards('he')<1) return -1;
						return 1;
					});
					"step 2"
					if(result.color=='black'){
						if(trigger.source.countCards('he')){
							player.line(trigger.source);
							player.discardPlayerCard(trigger.source,'he',true);
						}
					}
					else{
						player.draw();
					}
					event.num--;
					"step 3"
					if(event.num>0){
						event.goto(1);
					}
				},
				ai:{
					"maixie_defend":true,
					expose:0.4,
				},
			},
			exxhdqj:{
				audio:"ext:神怒降世:2",
				trigger:{
					player:"gainAfter",
				},
				direct:true,
				filter:function (event,player){
					if(event.parent.parent.name=='phaseDraw') return false;
					return event.cards&&event.cards.length>0
				},
				content:function (){
					"step 0"
					player.chooseCardTarget({
						position:'he',
						filterCard:true,
						selectCard:[1,Infinity],
						filterTarget:function(card,player,target){
							return player!=target;
						},
						ai1:function(card){
							if(get.attitude(_status.event.player,_status.currentPhase)<0&&_status.currentPhase.needsToDiscard()&&card.name!='du') return -1;
							for(var i=0;i<ui.selected.cards.length;i++){
								if(get.type(ui.selected.cards[i])==get.type(card)||(ui.selected.cards[i].name=='du'&&card.name!='du')) return -1;
							};
							if(card.name=='du') return 20;
							return (_status.event.player.countCards('h')-_status.event.player.hp);
						},
						ai2:function(target){
							if(get.attitude(_status.event.player,_status.currentPhase)<0) return -1;
							var att=get.attitude(_status.event.player,target);
							if(ui.selected.cards.length&&ui.selected.cards[0].name=='du'){
								if(target.hasSkillTag('nodu')) return 0;
								return 1-att;
							}
							if(target.countCards('h')>_status.event.player.countCards('h')) return 0;
							return att-4;
						},
						prompt:get.prompt2('exxhdqj'),
					});
					"step 1"
					if(result.bool){
						var target=result.targets[0];
						var cards=result.cards;
						var type=[];
						for(var i=0;i<cards.length;i++){
							type.add(get.type(cards[i],'trick',cards[i].original=='h'?player:false));
						}
						player.storage.exxhdqj++;
						player.logSkill('exxhdqj',target);
						target.gain(cards,player,'give');
						if(!target.hasSkill('exxhdqj_add')) target.addTempSkill('exxhdqj_add',{player:'phaseAfter'});
						if(target.storage.exxhdqj_add) target.storage.exxhdqj_add+=type.length;
						else target.storage.exxhdqj_add=type.length;
					}
				},
				subSkill:{
					add:{
						mark:true,
						intro:{
							content:function (storage,player){
								return '手牌上限+'+player.storage.exxhdqj_add;
							},
						},
						mod:{
							maxHandcard:function (player,num){
								return num+player.storage.exxhdqj_add;
							},
						},
						onremove:function (player){
							delete player.storage.exxhdqj_add;
						},
						sub:true,
					},
				},
				ai:{
					expose:0.3,
				},
			},
			exdwqx:{
				audio:"ext:神怒降世:1",
				enable:"phaseUse",
				intro:{
					name:"强袭",
					content:"本回合已发动#次",
				},
				filter:function(event,player){
					if(player.countCards('he',{subtype:'equip1'})>0) return !player.hasSkill('exdwqx2');
					if(player.countMark('exdwqx')<1) return !player.hasSkill('exdwqx2');
					else return !player.hasSkill('exdwqx2')&&player.countMark('exdwqx')<=player.getDamagedHp();
				},
				filterCard:function(card){
					return get.subtype(card)=='equip1';
				},
				check:function(card){
					var player=get.owner(card);
					if(player.getDamagedHp()>1&&player.countCards('he',{subtype:'equip1'})>0) return 0;
					else return 6-get.value(card);
				},
				complexCard:true,
				selectCard:[0,1],
				position:"he",
				filterTarget:function (card,player,target){
					if(player.storage.exdwqx>player.getDamagedHp()&&ui.selected.cards.length<1) return false;
					if(ui.selected.cards.length>0) return player!=target;
					else return player!=target&&player.inRange(target);
				},
				content:function (){
					"step 0"
					player.addMark('exdwqx',1);
					if(!player.hasSkill('exdwqx1')) player.addTempSkill('exdwqx1');
					if(cards.length>0){
						player.removeMark('exdwqx',1);
						event.goto(3);
					}
					"step 1"
					player.chooseControl('体力','上限').set('prompt','〖强袭〗：选择一项').set('ai',function(target){
						if(player.getDamagedHp()>1) return '上限';
						return '体力';
					});
					"step 2"
					if(result.control=='体力'){
						if(!player.hasSkill('exdwqx2')) player.addTempSkill('exdwqx2');
						player.loseHp();
					}
					else{
						player.loseMaxHp();
					}
					"step 3"
					target.damage('nocard');
				},
				ai:{
					order:1,
					result:{
						target:function(player,target){
							if(player.maxHp==1||(player.hp==1&&(player.countCards('h',{name:'tao'})<1||player.countCards('h',{name:'jiu'})<1))) return 0;
							return -1;
						},
					},
				},
			},
			exdwqx1:{
				silent:true,
				unique:true,
				forced:true,
				onremove:function(player){
					if(player.countMark('exdwqx')>0) player.removeMark('exdwqx',player.countMark('exdwqx'));
				},
			},
			exdwqx2:{},
			exdwpn:{
				audio:"ext:神怒降世:1",
				trigger:{
					player:["damageEnd","loseHpEnd"],
				},
				forced:true,
				content:function(){
					"step 0"
					event.huode=[];
					event.num=2;
					player.gainMaxHp();
					if(player.countCards('h',{name:'sha'})>0){
						event.num--;
					}
					if(player.countCards('he',{subtype:'equip1'})>0){
						event.num--;
						if(event.num>0) event.goto(2);
						else event.finish();
					}
					"step 1"
					var card=get.cardPile2(function(card){
						return !event.huode.contains(card)&&get.type(card)=='equip'&&get.subtype(card)=='equip1';
					});
					if(card){
						event.huode.push(card);
					}
					else{
						for(var i=0;i<ui.discardPile.childNodes.length;i++){
							var current=ui.discardPile.childNodes[i];
							if(!event.huode.contains(current)&&get.type(current)=='equip'&&get.subtype(current)=='equip1'&&event.huode.length<1){
								event.huode.push(current);
							}
						}
					}
					if(event.huode.length<1) event.num--;
					"step 2"
					var card=get.cardPile2(function(card){
						return !event.huode.contains(card)&&get.type(card)=='basic'&&card.name=='sha';
					});
					if(card){
						event.huode.push(card);
					}
					else{
						for(var i=0;i<ui.discardPile.childNodes.length;i++){
							var current=ui.discardPile.childNodes[i];
							if(!event.huode.contains(current)&&get.type(current)=='basic'&&current.name=='sha'&&event.huode.length<event.num){
								event.huode.push(current);
							}
						}
					}
					"step 3"
					if(event.huode.length>0) player.gain(event.huode,'gain2');
				},
			},
			exgsxz:{
				audio:"ext:神怒降世:2",
				enable:"phaseUse",
				usable:1,
				filterTarget:function(card,player,target){
					return player.canCompare(target);
				},
				filter:function(event,player){
					return player.countCards('h')>0;
				},
				content:function(){
					"step 0"
					player.chooseToCompare(target);
					"step 1"
					if(result.player&&get.name(result.player,player)=='sha') player.gain(result.player,'gain2');
					if(result.bool){
						player.storage.exgsxz=target;
						player.addTempSkill('exgsxz_xiaoguo1');
						player.addTempSkill('exgsxz_xiaoguo2');
						if(player.countCards('h',{name:'sha'})<1){
							var cards=[];
							for(var i=0;i<ui.discardPile.childNodes.length;i++){
								var current=ui.discardPile.childNodes[i];
								if(current.name=='sha'&&cards.length<1) cards.push(current);
							}
							if(cards.length) player.gain(cards,'gain2','log');
						}
					}
					else{
						player.addTempSkill('exgsxz_xiaoguo3');
					}
				},
				subSkill:{
					xiaoguo1:{
						charlotte:true,
						mod:{
							targetInRange:function(card,player,target){
								if(target==player.storage.exgsxz) return true;
							},
							cardUsableTarget:function(card,player,target){
								if(target==player.storage.exgsxz) return true;
							}
						},
						ai:{
							unequip:true,
							skillTagFilter:function(player,tag,arg){
								if(arg.target!=player.storage.exgsxz) return false;
							},
						},
						sub:true,
					},
					xiaoguo2:{
						audio:"exgsxz",
						usable:1,
						trigger:{
							player:"useCardToTargeted",
						},
						filter:function(event,player){
							if(event.card.name!='sha') return false;
							return event.target==player.storage.exgsxz;
						},
						forced:true,
						logTarget:"target",
						content:function(){
							var id=trigger.target.playerid;
							var map=trigger.getParent().customArgs;
							if(!map[id]) map[id]={};
							if(typeof map[id].extraDamage!='number'){
								map[id].extraDamage=0;
							}
							map[id].extraDamage++;
						},
						sub:true,
					},
					xiaoguo3:{
						charlotte:true,
						mod:{
							cardEnabled:function(card){
								if(card.name=='sha') return false
							},
							ignoredHandcard:function(card,player){
								if(get.name(card)=='sha'){
									return true;
								}
							},
							cardDiscardable:function(card,player,name){
								if(name=='phaseDiscard'&&get.name(card)=='sha'){
									return false;
								}
							},
						},
						sub:true,
					},
				},
				ai:{
					order:function(name,player){
						var cards=player.getCards('h');
						if(player.countCards('h','sha')==0){
							return 1;
						}
						for(var i=0;i<cards.length;i++){
							if(cards[i].name!='sha'&&cards[i].number>11&&get.value(cards[i])<7){
								return 9;
							}
						}
						return get.order({name:'sha'})-1;
					},
					result:{
						player:function(player){
							if(player.countCards('h','sha')>0) return 0;
							var num=player.countCards('h');
							if(num>player.hp) return 0;
							if(num==1) return -2;
							if(num==2) return -1;
							return -0.7;
						},
						target:function(player,target){
							var num=target.countCards('h');
							if(num==1) return -1;
							if(num==2) return -0.7;
							return -0.5
						},
					},
					threaten:1.3,
				},
			},
			exgsjj:{
				audio:"ext:神怒降世:2",
				group:"exgsjj_damage",
				mod:{
					cardname:function(card,player){
						if(card.name=='jiu') return 'sha';
					},
				},
				global:"exgsjj_xiaoguo",
				trigger:{
					player:"phaseBegin",
					global:"dying",
				},
				filter:function(event,player){
					return event.card&&event.card.name=='sha';
				},
				priority:15,
				forced:true,
				filter:function(event,player,name){
					return _status.currentPhase==player;
				},
				content:function(){},
				subSkill:{
					damage:{
						audio:'exgsjj',
						forced:true,
						trigger:{player:'damageBegin3'},
						filter:function(event,player){
							return event.getParent(2).jiu==true;
						},
						content:function(){
							trigger.num-=trigger.getParent(2).jiu_add;
						},
						ai:{
							filterDamage:true,
							skillTagFilter:function(player,tag,arg){
								return arg&&arg.jiu==true;
							},
						},
					},
					xiaoguo:{
						mod:{
							"cardEnabled2":function(card,player){
								if(_status.currentPhase.isAlive()&&_status.currentPhase&&_status.currentPhase!=player&&_status.currentPhase.hasSkill('exgsjj')&&card.name=='jiu') return false;
							},
						},
						sub:true,
					},
				},
				ai:{
					skillTagFilter:function(player){
						if(!player.countCards('h','jiu')) return false;
					},
					respondSha:true,
				},
			},
			exhxsy:{
				audio:"ext:神怒降世:1",
				trigger:{
					player:'damageBegin3',
				},
				forced:true,
				filter:function(event){
					return event.card&&(get.color(event.card)!='red'||event.source&&event.source.isAlive());
				},
				content:function(){
					if(get.color(trigger.card)=='red') trigger.source.draw();
					else player.draw(trigger.num);
				},
			},
			exhxyw:{
				audio:"ext:神怒降世:1",
				trigger:{
					global:"phaseJieshuBegin",
				},
				filter:function(event,player){
					var num=player.hp;
					if(player.hp>5) num=5;
					if(event.player==player) return player.countCards('h')<player.getDamagedHp();
					else return event.player.countCards('h')<player.getDamagedHp()||event.player.countCards('h')<num;
				},
				check:function(event,player){
					return get.attitude(player,event.player)>0;
				},
				logTarget:function(event){
					return event.player;
				},
				content:function(){
					"step 0"
					if(trigger.player==player){
						player.draw(player.getDamagedHp()-player.countCards('h'));
						event.finish();
					}
					"step 1"
					if(player.getDamagedHp()>player.hp) event.num=player.getDamagedHp();
					else event.num=player.hp;
					"step 2"
					if(event.num>5) event.num=5;
					event.mo=event.num-trigger.player.countCards('h');
					trigger.player.draw(event.mo);
					if(event.mo>2) player.loseHp();
				},
				ai:{
					expose:0.5,
					threaten:function(player,target){
						if(target.hp==target.getDamagedHp()) return 0.3;
						if(target.hp>target.getDamagedHp()&&(target.hp-target.getDamagedHp()==1)) return 0.5;
						if(target.getDamagedHp()>target.hp&&(target.getDamagedHp()-target.hp==1)) return 0.5;
						if(target.getDamagedHp()>4) return 2;
						if(target.getDamagedHp()>3) return 1.5;
						if(target.hp>4) return 2;
						if(target.hp>3) return 1.5;
						return 0.5;
					},
				},
			},
			jcgmc:{
				audio:"ext:神怒降世:2",
				trigger:{
					global:"phaseUseBegin",
				},
				check:function(event,player){
					return get.attitude(player,event.player)>0;
				},
				logTarget:function(event){
					return event.player;
				},
				content:function(){
					'step 0'
					event.cards=[];
					for(var i=0;i<ui.discardPile.childNodes.length;i++){
						var current=ui.discardPile.childNodes[i];
						if(current.name=='sha'&&event.cards.length<1) event.cards.push(current);
					}
					'step 1'
					if(event.cards.length) trigger.player.gain(event.cards,'gain2','log');
					if(!trigger.player.hasSkill('jcgmc_xiaoguo')) trigger.player.addTempSkill('jcgmc_xiaoguo');
				},
				ai:{
					expose:0.5,
				},
				subSkill:{
					xiaoguo:{
						mod:{
							targetInRange:function(card,player,target,now){
								if(game.online){
									if(!player.countUsed()) return true;
								}
								else{
									var evt=_status.event.getParent('phaseUse');
									if(evt&&evt.name=='phaseUse'&&player.getHistory('useCard',function(evt2){
										return evt2.getParent('phaseUse')==evt;
									}).length==0) return true;
								}
							},
							cardUsable:function(card,player,num){
								if(card.name=='sha') return num+1;
							},
						},
						sub:true,
					},
				},
			},
			jcgzc:{
				audio:"ext:神怒降世:2",
				trigger:{
					player:"damageBegin4",
				},
				usable:1,
				filter:function(event,player){
					return _status.currentPhase!=player;
				},
				forced:true,
				content:function(){
					"step 0"
					player.addTempSkill('jcgzc_xiaoguo',['phaseAfter','phaseBefore']);
					"step 1"
					player.chooseBool('〖智迟〗：是否令'+get.translation(trigger.source)+'弃置两张牌？').set('ai',function(target){
						if(get.attitude(player,trigger.source)<=0) return true;
						else return false;
					});
					"step 2"
					if(result.bool) trigger.source.chooseToDiscard('〖智迟〗：弃置两张牌','he',2,true);
				},
				subSkill:{
					xiaoguo:{
						audio:"jcgzc",
						trigger:{
							target:'useCardToBefore',
						},
						forced:true,
						priority:15,
						filter:function(event,player){
							return !(get.tag(event.card,'recover')||get.tag(event.card,'draw'));
						},
						content:function(){
							game.log(player,'发动了智迟，',trigger.card,'对',trigger.target,'失效')
							trigger.cancel();
						},
						mark:true,
						intro:{
							name:"智迟",
							content:'不具备“摸牌”或“回复”标签的牌对你无效',
						},
						ai:{
							effect:{
								target:function(card,player,target,current){
									if(!(get.tag(card,'recover')||get.tag(card,'draw'))) return 'zeroplayertarget';
								}
							}
						},
						sub:true,
					},
				},
			},
			exlbws:{
				audio:"ext:神怒降世:2",
				group:['exlbws_ws1','exlbws_ws2','exlbws_damage'],
				shaRelated:true,
				trigger:{
					player:"useCard1",
				},
				filter:function(event,player){
					return event.card.name=='sha';
				},
				forced:true,
				locked:true,
				content:function(){},
				subSkill:{
					ws1:{
						trigger:{player:'useCardToPlayered'},
						forced:true,
						direct:true,
						filter:function(event,player){
							return event.card.name=='sha';
						},
						logTarget:'target',
						content:function(){
							if(!trigger.getParent().directHit.contains(trigger.target)){
								var id=trigger.target.playerid;
								var map=trigger.getParent().customArgs;
								if(!map[id]) map[id]={};
								if(typeof map[id].shanRequired=='number'){
									map[id].shanRequired++;
								}
								else{
									map[id].shanRequired=2;
								}
							}
						},
						ai:{
							directHit_ai:true,
							skillTagFilter:function(player,tag,arg){
								if(arg.card.name!='sha'||arg.target.countCards('h','shan')>1) return false;
							},
						},
						sub:true,
					},
					ws2:{
						audio:"exlbws",
						trigger:{player:'useCardToPlayered',target:'useCardToTargeted'},
						forced:true,
						logTarget:function(trigger,player){
							return player==trigger.player?trigger.target:trigger.player
						},
						filter:function(event,player){
							return event.card.name=='juedou';
						},
						content:function(){
							var id=(player==trigger.player?trigger.target:trigger.player)['playerid'];
							var idt=trigger.target.playerid;
							var map=trigger.getParent().customArgs;
							if(!map[idt]) map[idt]={};
							if(!map[idt].shaReq) map[idt].shaReq={};
							if(!map[idt].shaReq[id]) map[idt].shaReq[id]=1;
							map[idt].shaReq[id]++;
						},
						ai:{
							directHit_ai:true,
							skillTagFilter:function(player,tag,arg){
								if(arg.card.name!='juedou'||Math.floor(arg.target.countCards('h','sha')/2)>player.countCards('h','sha')) return false;
							}
						},
						sub:true,
					},
					damage:{
						trigger:{
							source:"damageBegin",
						},
						unique:true,
						silent:true,
						forced:true,
						filter:function(event,player){
							if(!event.card||event.card.name!='sha'||event.player==player) return false;
							var chufa=0;
							event.player.getHistory('useCard',function(evt){
								if(evt.card.name=='shan'&&evt.respondTo&&evt.respondTo[1]==event.card) chufa++;
							});
							return chufa==0;
						},
						content:function(){
							trigger.num++;
						},
						sub:true,
					},
				},
			},
			exlbly:{
				audio:"ext:神怒降世:2",
				group:'exlbly_add',
				mod:{
					cardUsable:function(card,player,num){
						if(card.name=='sha') return num+player.storage.exlbly;
					},
				},
				init:function(player){
					if(!player.storage.exlbly) player.storage.exlbly=0;
				},
				trigger:{
					source:"damageSource",
				},
				filter:function (event,player){
					if(event._notrigger.contains(event.player)) return false;
					return event.card&&event.card.name=='sha'&&event.player!=player&&event.player.isAlive()&&event.player.countGainableCards(player,'hej')>0;
				},
				direct:true,
				content:function(){
					'step 0'
					player.gainPlayerCard(get.prompt('exlbly',trigger.player),trigger.player,'hej','visibleMove').set('ai',function(card){
						var player=_status.event.player;
						var evt=_status.event.target;
						if(get.attitude(player,evt)>0&&get.position(card)=='j') return 4+get.value(card);
						if(get.type(card)=='equip'){
							if(get.attitude(player,evt)>0&&game.hasPlayer(function(current){
								return (player.canUse({name:'juedou'},current)&&current!=evt.target&&get.effect(current,{name:'juedou'},player,player)>2);
							})){
								return 5;
							}
							else if(game.hasPlayer(function(current){
								return (player.canUse({name:'juedou'},current)&&current!=evt&&current!=player&&get.effect(current,{name:'juedou'},player,player)<0);
							})){
								return 1;
							}
							else return 4;
						};
						return 3;
					}).set('logSkill',['exlbly',trigger.player]);
					'step 1'
					if(result.bool){
						if(get.type(result.cards[0])!='equip'){
							if(result.cards[0].name=='sha'){
								if(!player.hasSkill('exlbly_qingchu')) player.addTempSkill('exlbly_qingchu');
								player.storage.exlbly++;
							}
							trigger.player.draw();
							event.finish();
						}
						else{
							if(!game.hasPlayer(function(current){
								return current!=player&&current!=trigger.player&&player.canUse('juedou',current);
							})){
								event.finish();
								return;
							}
							trigger.player.chooseTarget(true,function(card,player,target){
								var evt=_status.event.getParent();
								return evt.player.canUse({name:'juedou'},target)&&target!=_status.event.player;
							},'〖利驭〗：请选择一名角色，视为'+get.translation(player)+'对其使用【决斗】').set('ai',function(target){
								var evt=_status.event.getParent();
								return get.effect(target,{name:'juedou'},evt.player,_status.event.player)-2;
							});
						}
					}
					else event.finish();
					'step 2'
					if(result.targets){
						player.useCard({name:'juedou',isCard:true},result.targets[0],'noai');
					}
				},
				subSkill:{
					add:{
						trigger:{
							player:"gainBegin",
						},
						unique:true,
						silent:true,
						forced:true,
						filter:function(event,player){
							return event.getParent(2).name=='exlbly';
						},
						content:function(){
							trigger.gaintag.add('exlbly');
						},
						mod:{
							ignoredHandcard:function(card,player){
								if(card.hasGaintag('exlbly')){
									return true;
								}
							},
							cardDiscardable:function(card,player,name){
								if(name=='phaseDiscard'&&card.hasGaintag('exlbly')){
									return false;
								}
							},
						},
						onremove:function(player){
							player.removeGaintag('exlbly');
						},
						sub:true,
					},
                    qingchu:{
						silent:true,
						unique:true,
						forced:true,
						onremove:function(player){
							player.storage.exlbly=0;
						},
                        sub:true,
                    },
				},
				ai:{
					halfneg:true,
				},
			},
			exlbxl:{
				audio:"ext:神怒降世:2",
				trigger:{
					player:"phaseJieshuBegin",
				},
				forced:true,
				filter:function(event,player){
					if(player.getStat('damage')>0) return false;
					return true;
				},
				content:function(){
					"step 0"
					event.cards=[];
					event.names=[];
					event.type=[];
					"step 1"
					while(event.cards.length<2){
						var card=get.cardPile2(function(card){
							return !event.cards.contains(card)&&!event.names.contains(card.name)&&!event.type.contains(get.type(card))&&((get.type(card)=='basic'&&card.name=='sha')||(get.type(card)=='trick'&&card.name=='juedou'));
						});
						if(card){
							event.cards.push(card);
							event.names.push(card.name);
							event.type.push(get.type(card));
						}
						else break;
					}
					"step 2"
					if(event.cards.length<2){
						for(var i=0;i<ui.discardPile.childNodes.length;i++){
							var current=ui.discardPile.childNodes[i];
							if(!event.cards.contains(current)&&!event.names.contains(current.name)&&!event.type.contains(get.type(current))&&((get.type(current)=='basic'&&current.name=='sha')||(get.type(current)=='trick'&&current.name=='juedou'))&&event.cards.length<2){
								event.cards.push(current);
								event.names.push(current.name);
								event.type.push(get.type(current));
							}
						}
					}
					"step 3"
					if(event.cards.length>0) player.gain(event.cards,'gain2');
				},
			},
			spsgyws:{
				audio:"ext:神怒降世:2",
				group:["spsgyws_damage","spsgyws_draw","spsgyws_shamiss"],
				mod:{
					targetInRange:function (card){
						if(get.suit(card)=='diamond'&&card.name=='sha') return true;
					},
				},
				subSkill:{
					damage:{
						trigger:{
							player:"useCardToTargeted",
						},
						filter:function(event){
							return event.card&&event.card.name=='sha'&&get.suit(event.card)=='heart';
						},
						silent:true,
						forced:true,
						content:function(){
							var id=trigger.target.playerid;
							var map=trigger.getParent().customArgs;
							if(!map[id]) map[id]={};
							if(typeof map[id].extraDamage!='number'){
								map[id].extraDamage=0;
							}
							map[id].extraDamage++;
						},
						sub:true,
					},
					draw:{
						audio:"spsgyws",
						trigger:{
							source:"damageSource",
						},
						filter:function(event,player){
							return player.storage.spsgycb&&event.card&&event.card.name=='sha'&&event.nature=='fire';
						},
						silent:true,
						forced:true,
						content:function(){
							player.draw();
						},
						sub:true,
					},
					shamiss:{
						audio:"spsgyws",
						trigger:{
							player:"shaMiss",
						},
						usable:1,
						forced:true,
						filter:function(event,player){
							if(player.storage.spsgycb) return false;
							return player.canUse('sha',event.target,false);
						},
						content:function(){
							'step 0'
							player.draw();
							'step 1'
							player.chooseToUse('〖武神〗：是否对'+get.translation(trigger.target)+'使用一张【杀】',function(card,player,event){
								if(get.name(card)!='sha') return false;
								return lib.filter.filterCard.apply(this,arguments);
							},trigger.target,-1).set('addCount',false);
						},
						sub:true,
					},
				},
				enable:["chooseToRespond","chooseToUse"],
				filterCard:function(card,player){
					if(get.zhu(player,'shouyue')) return true;
					return get.color(card)=='red';
				},
				position:"hes",
				viewAs:{
					name:"sha",
					nature:"fire",
				},
				viewAsFilter:function(player){
					if(get.zhu(player,'shouyue')){
						if(!player.countCards('hes')) return false;
					}
					else{
						if(!player.countCards('hes',{color:'red'})) return false;
					}
				},
				prompt:"将一张红牌当作火【杀】使用或打出",
				check:function(card){return 4-get.value(card)},
				ai:{
					respondSha:true,
					fireAttack:true,
					skillTagFilter:function(player){
						if(get.zhu(player,'shouyue')){
							if(!player.countCards('hes')) return false;
						}
						else{
							if(!player.countCards('hes',{color:'red'})) return false;
						}
					},
					canLink:function(player,target,card){
						if(!target.isLinked()&&!player.hasSkill('wutiesuolian_skill')) return false;
						if(target.mayHaveShan()&&!player.hasSkillTag('directHit_ai',true,{
							target:target,
							card:card,
						},true)) return false;
						if(player.hasSkill('jueqing')||target.hasSkill('gangzhi')||target.hasSkill('gangzhi')) return false;
						return true;
					},
					basic:{
						useful:[5,1],
						value:[5,1],
					},
					order:function(item,player){
						if(player.hasSkillTag('presha',true,null,true)) return 10;
						if(lib.linked.contains(get.nature(item))){
							if(game.hasPlayer(function(current){
								return current!=player&&current.isLinked()&&player.canUse(item,current,null,true)&&get.effect(current,item,player,player)>0&&lib.card.sha.ai.canLink(player,current,item);
							})&&game.countPlayer(function(current){
								return current.isLinked()&&get.damageEffect(current,player,player,get.nature(item))>0;
							})>1) return 3.1;
							return 3;
						}
						return 3.05;
					},
					result:{
						target:function(player,target,card,isLink){
							var eff=function(){
								if(!isLink&&player.hasSkill('jiu')){
									if(!target.hasSkillTag('filterDamage',null,{
										player:player,
										card:card,
										jiu:true,
									})){
										if(get.attitude(player,target)>0){
											return -7;
										}
										else{
											return -4;
										}
									}
									return -0.5;
								}
								return -1.5;
							}();
							if(!isLink&&target.mayHaveShan()&&!player.hasSkillTag('directHit_ai',true,{
								target:target,
								card:card,
							},true)) return eff/1.2;
							return eff;
						},
					},
					tag:{
						respond:1,
						respondShan:1,
						damage:function(card){
							if(card.nature=='poison') return;
							return 1;
						},
						natureDamage:function(card){
							if(card.nature) return 1;
						},
						fireDamage:function(card,nature){
							if(card.nature=='fire') return 1;
						},
						thunderDamage:function(card,nature){
							if(card.nature=='thunder') return 1;
						},
						poisonDamage:function(card,nature){
							if(card.nature=='poison') return 1;
						},
					},
					yingbian:function(card,player,targets,viewer){
						if(get.attitude(viewer,player)<=0) return 0;
						var base=0,hit=false;
						if(get.cardtag(card,'yingbian_hit')){
							hit=true;
							if(targets.filter(function(target){
								return target.hasShan()&&get.attitude(viewer,target)<0&&get.damageEffect(target,player,viewer,get.nature(card))>0;
							})) base+=5;
						}
						if(get.cardtag(card,'yingbian_all')){
							if(game.hasPlayer(function(current){
								return !targets.contains(current)&&lib.filter.targetEnabled2(card,player,current)&&get.effect(current,card,player,player)>0;
							})) base+=5;
						}
						if(get.cardtag(card,'yingbian_damage')){
							if(targets.filter(function(target){
								return get.attitude(player,target)<0&&(hit||!target.mayHaveShan()||player.hasSkillTag('directHit_ai',true,{
									target:target,
									card:card,
								},true))&&!target.hasSkillTag('filterDamage',null,{
									player:player,
									card:card,
									jiu:true,
								})
							})) base+=5;
						}
						return base;
					},
				},
			},
			spsgyws2:{},
			spsgyzy:{
				audio:"ext:神怒降世:2",
				group:'spsgyzy_shiyong',
				trigger:{
					global:"gainAfter",
				},
				filter:function(event,player){
					var shuliang=player.maxHp;
					if(shuliang>5) shuliang=5;
					if(event.player!=player&&shuliang>player.countCards('h')){
						var evt=event.getl(player);
						return evt&&evt.hs&&evt.hs.length>0;
					}
					return false;
				},
				forced:true,
				content:function(){
					'step 0'
					if(player.storage.spsgycb){
						var mopai=player.hp;
						if(mopai>5) mopai=5;
						player.draw(mopai-player.countCards('h'));
						if(!trigger.player.hasSkill('fengyin')){
							trigger.player.addTempSkill('fengyin');
						}
						if(!trigger.player.hasSkill('spsgyzy_mark')){
							trigger.player.addTempSkill('spsgyzy_mark');
						}
						event.finish();
					}
					else trigger.player.chooseBool('〖忠义〗：令'+get.translation(player.name)+'将手牌摸至体力上限，否则本回合不能使用或打出任何牌且所有非锁定技失效').set('ai',function(){
						return true;
					});
					'step 1'
					if(result.bool){
						var mopai=player.hp;
						if(mopai>5) mopai=5;
						player.draw(mopai-player.countCards('h'));
					}
					else{
						if(!trigger.player.hasSkill('fengyin')){
							trigger.player.addTempSkill('fengyin');
						}
						if(!trigger.player.hasSkill('spsgyzy_mark')){
							trigger.player.addTempSkill('spsgyzy_mark');
						}
					}
				},
				subSkill:{
					shiyong:{
						audio:"spsgyzy",
						enable:"phaseUse",
						filter:function(evetn,player){
							return !player.hasSkill('spsgyzy_jilu');
						},
						filterCard:true,
						check:function(card){
							return 9-get.value(card);
						},
						filterTarget:function(card,player,target){
							return player!=target;
						},
						discard:false,
						lose:false,
						delay:false,
						content:function(){
							if(!player.hasSkill('spsgyzy_jilu')) player.addTempSkill('spsgyzy_jilu');
							target.gain(cards,player,'giveAuto');
							event.finish();
						},
						ai:{
							result:{
								target:function(player,target){
									return -1;
								},
							},
							order:function(){
								return get.order({name:'sha'})+0.2;
							},
						},
						sub:true,
					},
					jilu:{
						silent:true,
						unique:true,
						forced:true,
						sub:true,
					},
					mark:{
						mark:true,
						unique:true,
						intro:{
							content:"不能使用或打出牌",
						},
						mod:{
							"cardEnabled2":function(card){
								if(get.position(card)=='h') return false;
								if(get.position(card)=='s') return false;
							},
						},
						sub:true,
					},
				},
			},
			spsgyzy2:{},
			spsgyzj:{
				audio:"ext:神怒降世:1",
				init:function(player){
					if(!player.storage.spsgyzj) player.storage.spsgyzj=0;
				},
				mod:{
					cardUsable:function(card,player,num){
						if(card.name=='sha') return num+player.storage.spsgyzj;
					},
				},
				trigger:{
					global:"die",
				},
				filter:function(event,player){
					return event.source&&event.source==player;
				},
				forced:true,
				content:function(){
					if(player.hasSkill('spsgyzy_jilu')) player.removeSkill('spsgyzy_jilu');
					player.storage.spsgyzj++;
					if(!player.hasSkill('spsgyzj_qingchu')) player.addTempSkill('spsgyzj_qingchu');
				},
				subSkill:{
					qingchu:{
						silent:true,
						unique:true,
						forced:true,
						onremove:function(player){
							player.storage.spsgyzj=0;
						},
						sub:true,
					},
				},
			},
			spsgycb:{
				audio:"ext:神怒降世:2",
				group:['spsgycb_achieve','spsgycb_fail'],
				derivation:['spsgyws2','spsgyzy2','spsgyqj'],
				dutySkill:true,
				trigger:{
					global:"gainAfter",
				},
				filter:function(event,player){
					var evt=event.getl(player);
					return evt&&evt.hs&&evt.hs.length>0&&!event.player.hasSkill('spsgycb_mark')&&event.player!=player;
				},
				priority:99,
				firstDo:true,
				silent:true,
				forced:true,
				unique:true,
				content:function(){
					trigger.player.addSkill('spsgycb_mark');
				},
				subSkill:{
					achieve:{
						audio:"ext:神怒降世:1",
						trigger:{
							global:["gainAfter","dieBegin","die"],
						},
						priority:90,
						silent:true,
						forced:true,
						filter:function(event,player){
							return !player.storage.spsgycb;
						},
						skillAnimation:true,
						animationColor:'metal',
						content:function(){
							'step 0'
							event.wancheng=false;
							if((event.triggername=='gainAfter'||event.triggername=='die')&&!game.hasPlayer(function(current){
								return !current.hasSkill('spsgycb_mark')&&current!=player;
							})) event.wancheng=true;
							if(event.triggername=='dieBegin'&&trigger.source&&trigger.source==player&&trigger.player.hasSkill('spsgycb_mark')) event.wancheng=true;
							'step 1'
							if(event.wancheng==false) event.finish();
							'step 2'
							player.logSkill('spsgycb_achieve');
							game.log(player,'成功完成使命');
							game.countPlayer(function(current){
								if(current.hasSkill('spsgycb_mark')){
									current.removeSkill('spsgycb_mark');
								}
							});
							if(!player.hasSkill('spsgyqj')) player.addSkill('spsgyqj');
							game.log(player,'修改了技能','#g〖武神〗','与','#g〖忠义〗');
							game.log(player,'获得了技能','#g〖七军〗');
							player.awakenSkill('spsgycb');
							player.storage.spsgycb=true;
						},
						sub:true,
					},
					fail:{
						audio:"ext:神怒降世:1",
						trigger:{
							global:"dieBegin",
						},
						skillAnimation:true,
						animationColor:"metal",
						filter:function(event,player){
							if(event.player==player) return true;
							else return !player.storage.spsgycb&&event.player!=player&&event.player.hasSkill('spsgycb_mark')&&(!event.source||event.source!=player);
						},
						forced:true,
						content:function(){
							'step 0'
							if(trigger.player==player) trigger.cancel();
							game.log(player,'使命失败');
							player.awakenSkill('spsgycb');
							game.countPlayer(function(current){
								if(current.hasSkill('spsgycb_mark')){
									current.removeSkill('spsgycb_mark');
								}
							});
							'step 1'
							player.reinit('snjs_sp_shen_guanyu','snjs_re_shen_guanyu');
							'step 2'
							player.loseMaxHp();
							player.recover(player.maxHp-player.hp);
							'step 3'
							player.discard(player.getCards('hej'));
							player.draw(2);
						},
						sub:true,
					},
					mark:{
						mark:true,
						intro:{
							name:'成败',
						},
						unique:true,
						sub:true,
					},
				},
			},
			spsgyqj:{
				audio:"ext:神怒降世:2",
				global:"spsgyqj_xiaoguo",
				trigger:{
					global:"loseEnd",
				},
				filter:function(event,player){
					if(event.player==player||!event.player.isAlive()||event.player.countCards('h')<1) return false;
					for (var i=0;i<event.cards2.length;i++){
						if (get.type(event.cards2[i],event.player)=='equip'){
							return true;
						}
					}
					return false;
				},
				forced:true,
				logTarget:function(event){
					return event.player;
				},
				content:function(){
					var x=0;
					for(var i=0;i<trigger.cards2.length;i++){
						if(get.type(trigger.cards2[i])=='equip') x++;
					}
					trigger.player.chooseToDiscard('〖七军〗：弃置'+get.cnNumber(x)+'张手牌','h',x,true);
				},
				subSkill:{
					xiaoguo:{
						unique:true,
						mod:{
							maxHandcard:function(player,num){
								if(game.countPlayer(function(current){
									if(current.hasSkill('spsgyqj')&&current!=player) return player.countCards('e')>0;
								})) return num-player.countCards('e');
							},
						},
						sub:true,
					},
				},
			},
			szjfz:{
				audio:"ext:神怒降世:2",
				group:"szjfz_respond",
				mod:{
					cardEnabled:function(card){
						if(get.tag(card,'damage')) return false;
					},
				},
				enable:"phaseUse",
				filter:function(event,player){
					return game.countPlayer(function(current){
						return current!=player&&!current.hasSkill('szjfz2');
					})>0&&player.countCards('hs',function(card){
						return get.tag(card,'damage');
					})>0;
				},
				filterCard:function(card){
					return get.tag(card,'damage');
				},
				check:function(card){
					return true;
				},
				complexCard:true,
				position:"hs",
				filterTarget:function (card,player,target){
					return player!=target&&!target.hasSkill('szjfz2');
				},
				discard:false,
				toStorage:true,
				prepare:"give",
				content:function(){
					if(!target.hasSkill('szjfz_mark')) target.addSkill('szjfz_mark');
					if(!target.hasSkill('szjfz2')) target.addTempSkill('szjfz2');
					target.markAuto('szjfz_mark',cards);
					game.cardsGotoSpecial(cards);
					game.log(player,'将',cards,'置于了',target,'的武将牌上');
				},
				ai:{
					order:9,
					result:{
						target:function(player,target){
							if(get.attitude(player,target)<0) return -1;
							if(get.attitude(player,target)>0) return 1;
						},
					},
				},
				subSkill:{
					respond:{
						audio:"szjfz",
						trigger:{
							player:["useCard","respond"],
						},
						filter:function(event,player){
							if(event.cards.filterInD().length<=0) return false;
							return event.card.name=='shan';
						},
						direct:true,
						content:function(){
							"step 0"
							player.chooseTarget(get.prompt2('szjfz'),function(card,player,target){
								return target!=player&&!target.hasSkill('szjfz2');
							}).ai=function(target){
								return true;
							};
							"step 1"
							if(result.bool){
								player.logSkill('szjfz',result.targets);
								if(!result.targets[0].hasSkill('szjfz_mark')) result.targets[0].addSkill('szjfz_mark');
								if(!result.targets[0].hasSkill('szjfz2')) result.targets[0].addTempSkill('szjfz2');
								result.targets[0].$gain2(trigger.cards);
								result.targets[0].markAuto('szjfz_mark',trigger.cards);
								game.cardsGotoSpecial(trigger.cards);
								game.log(player,'将',trigger.cards,'置于了',result.targets[0],'的武将牌上');
							}
						},
						ai:{
							useShan:true,
							effect:{
								target:function(card,player,target,current){
									if(get.tag(card,'respondShan')){
										var hastarget=game.hasPlayer(function(current){
											return get.attitude(target,current)<0;
										});
										var be=target.countCards('e',{color:'black'});
										if(target.countCards('h','shan')&&be){
											if(!target.hasSkill('szjcl')) return 0;
											return [0,hastarget?target.countCards('he')/2:0];
										}
										if(target.countCards('h','shan')&&target.countCards('h')>2){
											if(!target.hasSkill('szjcl')) return 0;
											return [0,hastarget?target.countCards('h')/4:0];
										}
										if(target.countCards('h')>3||(be&&target.countCards('h')>=2)){
											return [0,0];
										}
										if(target.countCards('h')==0){
											return [1.5,0];
										}
										if(target.countCards('h')==1&&!be){
											return [1.2,0];
										}
										if(!target.hasSkill('szjcl')) return [1,0.05];
										return [1,Math.min(0.5,(target.countCards('h')+be)/4)];
									}
								},
							},
						},
						sub:true,
					},
					mark:{
						onremove:function(player){
							if(player.storage.szjfz_mark){
								game.cardsDiscard(player.storage.szjfz_mark);
								game.log(player,'将',player.storage.szjfz_mark,'置入了弃牌堆');
							}
							delete player.storage.szjfz_mark;
						},
						init:function(player){
							if(!player.storage.szjfz_mark) player.storage.szjfz_mark=[];
						},
						marktext:"符",
						intro:{
							content:'cards',
							onunmark:function(storage,player){
								if(storage&&storage.length){
									player.$throw(storage,1000);
									game.cardsDiscard(storage);
									game.log(storage,'被置入了弃牌堆');
									storage.length=0;
								}
							},
						},
						trigger:{
							player:"die",
						},
						forced:true,
						silent:true,
						unique:true,
						forceDie:true,
						filter:function(event,player){
							return player.storage.szjfz_mark&&player.storage.szjfz_mark.length>0;
						},
						content:function(){
							player.unmarkSkill('szjfz_mark');
							player.storage.szjfz_mark=[];
						},
						sub:true,
						popup:false,
					},
				},
			},
			szjfz2:{},
			szjtf:{
				audio:"ext:神怒降世:2",
				trigger:{
					global:"phaseUseBegin",
				},
				filter:function(event,player){
					return event.player!=player&&event.player.hasSkill('szjfz_mark')&&event.player.storage.szjfz_mark&&event.player.countCards('h')>0;
				},
				direct:true,
				content:function(){
					'step 0'
					var chooseButton=player.chooseButton(Math.min(trigger.player.countCards('h')*2,trigger.player.storage.szjfz_mark.length*2),[get.translation(trigger.player.name)+'的手牌',trigger.player.getCards('h'),get.translation(trigger.player.name)+'的「符」',trigger.player.storage.szjfz_mark]);
					chooseButton.set('filterButton',function(button){
						if(ui.selected.buttons.length%2==0) return trigger.player.getCards('h').contains(button.link);
						return !trigger.player.getCards('h').contains(button.link);
					});
					chooseButton.set('ai',function(button){
						if(get.attitude(player,trigger.player)>0){
							return true;
						}
						else{
							if(ui.selected.buttons.length%2==0){
								if(ui.selected.buttons.length+1>=trigger.player.storage.szjfz_mark.length) return 0;
								if(ui.selected.buttons.length+2>=trigger.player.storage.szjfz_mark.length*2) return 0;
								return get.value(button.link);
							}
							else return -get.value(button.link);
						}
					});
					'step 1'
					if(result.bool){
						player.logSkill('szjtf',trigger.player);
						event.cards1=[];
						event.cards2=[];
						for(var i=0;i<result.links.length;i++){
							if(trigger.player.getCards('h').contains(result.links[i])){
								event.cards1.push(result.links[i]);
							}else{
								event.cards2.push(result.links[i]);
							}
						}
						player.gain(event.cards1,trigger.player,'giveAuto');
                        trigger.player.gain(event.cards2,trigger.player,'giveAuto','bySelf','log','fromStorage');
						if(event.cards2.length>1) trigger.player.recover();
						trigger.player.storage.szjfz_mark.remove(event.cards2);
						if(trigger.player.storage.szjfz_mark.length==0){
							trigger.player.removeSkill('szjfz_mark');
						}
					}
				},
			},
			szjcl:{
				audio:"ext:神怒降世:4",
				group:["szjcl_recover","szjcl_damage"],
				trigger:{
					global:"phaseBegin",
				},
				filter:function(event,player){
					return event.player!=player&&event.player.hasSkill('szjfz_mark')&&event.player.storage.szjfz_mark;
				},
				check:function(event,player){
					return get.attitude(player,event.player)<0;
				},
				logTarget:"player",
				content:function(){
					"step 0"
					event.shanghai=trigger.player.storage.szjfz_mark.length;
					"step 1"
					var func=function(result){
						if(get.suit(result)=='spade'){
							if(event.shanghai==1) return -1;
							if(event.shanghai==2) return -5;
							if(event.shanghai>=2) return -10;
						}
						if(get.suit(result)=='club') return -2;
						return 0;
					}
					trigger.player.judge(func);
					"step 2"
					if(result.suit=='club'){
						trigger.player.damage('thunder');
					}
					else if(result.suit=='spade'){
						trigger.player.damage(event.shanghai,'thunder');
						trigger.player.removeSkill('szjfz_mark');
					}
				},
				ai:{
					expose:0.4,
				},
				subSkill:{
					recover:{
						audio:"szjcl",
						trigger:{
							player:'damageBegin4',
						},
						filter:function(event,player){
							return event.nature=='thunder';
						},
						forced:true,
						content:function(){
							player.recover(trigger.num);
							trigger.cancel();
						},
						ai:{
							nothunder:true,
							effect:{
								target:function(card,player,target,current){
									if(get.tag(card,'thunderDamage')) return 'zerotarget';
								},
							},
						},
						sub:true,
					},
					damage:{
						trigger:{
							source:"damageEnd",
						},
						filter:function(event,player){
							return event.nature=='thunder';
						},
						direct:true,
						content:function(){
							"step 0"
							event.cishu=trigger.num;
							"step 1"
							if(trigger.player.countCards('he')<1||!trigger.player.isAlive()) event.goto(4);
							"step 2"
							player.chooseBool('〖掣雷〗：是否令'+get.translation(trigger.player)+'弃置一张牌？').set('ai',function(card){
								if(!player.isMaxHandcard()) return false;
								return get.attitude(player,trigger.player)<0;
							});
							"step 3"
							if(result.bool){
								player.logSkill('szjcl',trigger.player);
								trigger.player.chooseToDiscard('he',true);
								event.cishu--;
								event.goto(6);
							}
							"step 4"
							player.chooseBool('〖掣雷〗：是否摸一张牌？').set('ai',function(card){
								return true;
							});
							"step 5"
							if(result.bool){
								player.logSkill('szjcl');
								player.draw();
								event.cishu--;
							}
							"step 6"
							if(event.cishu>0) event.goto(1);
							else event.finish();
						},
						sub:true,
					},
				},
			},
			szjgd:{
				audio:"ext:神怒降世:2",
				trigger:{
					global:"judge",
				},
				filter:function(event,player){
					return player.countCards('hes')>0||(event.player.hasSkill('szjfz_mark')&&event.player.storage.szjfz_mark.length>0);
				},
				direct:true,
				content:function(){
					"step 0"
					player.chooseCard(get.translation(trigger.player)+'的'+(trigger.judgestr||'')+'判定为'+get.translation(trigger.player.judging[0])+'，'+get.prompt('szjgd'),'hes',function(card){
						return get.color(card)=='black';
					}).set('ai',function(card){
						var trigger=_status.event.getTrigger();
						var player=_status.event.player;
						var judging=_status.event.judging;
						var result=trigger.judge(card)-trigger.judge(judging);
						var attitude=get.attitude(player,trigger.player);
						if(attitude==0||result==0) return 0;
						if(attitude>0){
							return result;
						}
						else{
							return -result;
						}
					}).set('judging',trigger.player.judging[0]);
					"step 1"
					if(result.bool){
						player.respond(result.cards,'szjgd','highlight','noOrdering');
						event.goto(3);
					}
					else{
						if(trigger.player.hasSkill('szjfz_mark')&&trigger.player.storage.szjfz_mark.length>0){
							player.chooseButton(1,[get.translation(trigger.player)+'的'+(trigger.judgestr||'')+'判定为'+get.translation(trigger.player.judging[0])+'，是否用'+get.translation(trigger.player.name)+'的「符」发动〖诡道〗？',trigger.player.storage.szjfz_mark]).set('ai',function(button){
								var trigger=_status.event.getTrigger();
								var player=_status.event.player;
								var judging=_status.event.judging;
								var result=trigger.judge(button.link)-trigger.judge(judging);
								var attitude=get.attitude(player,trigger.player);
								if(attitude==0||result==0) return 0;
								if(attitude>0){
									return result;
								}
								else{
									return -result;
								}
							}).set('judging',trigger.player.judging[0]);
						}
						else event.finish();
					}
					"step 2"
					if(result.bool){
						event.card=result.links[0];
						player.logSkill('szjgd');
						trigger.player.$throw(event.card,1000);
						game.delayx();
						game.cardsDiscard(event.card);
						trigger.player.storage.szjfz_mark.remove(event.card);
						if(trigger.player.storage.szjfz_mark.length<1) trigger.player.removeSkill('szjfz_mark');
						event.goto(4);
					}
					else event.finish();
					"step 3"
					if(result.bool){
						event.card=result.cards[0];
					}
					else event.finish();
					"step 4"
					if(trigger.player.judging[0].clone){
						trigger.player.judging[0].clone.classList.remove('thrownhighlight');
						game.broadcast(function(card){
							if(card.clone){
								card.clone.classList.remove('thrownhighlight');
							}
						},trigger.player.judging[0]);
						game.addVideo('deletenode',player,get.cardsInfo([trigger.player.judging[0].clone]));
					}
					player.gain(trigger.player.judging[0],'gain2');
					trigger.player.judging[0]=event.card;
					trigger.orderingCards.addArray(event.card);
					game.log(trigger.player,'的判定牌改为',event.card);
					game.delay(2);
				},
				ai:{
					rejudge:true,
					tag:{
						rejudge:1,
					},
				},
			},
			sjxqb:{
				audio:"ext:神怒降世:2",
				init:function(player){
					if(!player.storage.sjxqb) player.storage.sjxqb=[];
					if(!player.storage.sjxqb2) player.storage.sjxqb2=[];
				},
				trigger:{
					player:"drawBegin",
				},
				direct:true,
				content:function(){
					"step 0"
					player.chooseTarget(get.prompt2('sjxqb'),function(card,player,target){
						return player!=target;
					}).set('ai',function(target){
						return get.attitude(player,target);
					});
					"step 1"
					if(result.bool){
						player.logSkill('sjxqb');
						if(!player.hasSkill('sjxqb2')) player.addSkill('sjxqb2');
						if(!player.hasSkill('sjxqb3')) player.addTempSkill('sjxqb3');
						player.line(result.targets[0]);
						result.targets[0].draw(trigger.num);
					}
					else event.finish();
					"step 2"
					var list=[];
					for(var i=0;i<lib.inpile.length;i++){
						if(get.type(lib.inpile[i])=='basic'){
							if(lib.inpile[i]=='sha'){
								list.push(['基本','','sha']);
								list.push(['基本','','sha','fire']);
								list.push(['基本','','sha','thunder']);
								list.push(['基本','','sha','ice']);
							}
							else list.push(['基本','',lib.inpile[i]]);
						}
						if(get.type(lib.inpile[i])=='trick'||get.type(lib.inpile[i])=='delay') list.push(['锦囊','',lib.inpile[i]]);
						if(get.type(lib.inpile[i])=='equip') list.push(['装备','',lib.inpile[i]]);
					}
					if(list.length){
						var shuliang=trigger.num;
						if(shuliang>list.length-player.storage.sjxqb2.length) shuliang=list.length-player.storage.sjxqb2.length;
						player.chooseButton(true,shuliang,['〖权变〗：选择你要生成的牌',[list,'vcard']]).set('filterButton',function(button){
							return !player.storage.sjxqb2.contains(button.link[2]);
						}).set('ai',function(button){
							if(button.link[2]=='wuzhong') return true;
							var recover=0,lose=1,players=game.filterPlayer();
							for(var i=0;i<players.length;i++){
								if(players[i].hp==1&&get.damageEffect(players[i],player,player)>0&&!players[i].hasSha()){
									return (button.link[2]=='juedou')?2:-1;
								}
								if(!players[i].isOut()){
									if(players[i].hp<players[i].maxHp){
										if(get.attitude(player,players[i])>0){
											if(players[i].hp<2){
												lose--;
												recover+=0.5;
											}
											lose--;
											recover++;
										}
										else if(get.attitude(player,players[i])<0){
											if(players[i].hp<2){
												lose++;
												recover-=0.5;
											}
											lose++;
											recover--;
										}
									}
									else{
										if(get.attitude(player,players[i])>0){
											lose--;
										}
										else if(get.attitude(player,players[i])<0){
											lose++;
										}
									}
								}
							}
							if(lose>recover&&lose>0) return (button.link[2]=='nanman')?1:-1;
							if(lose<recover&&recover>0) return (button.link[2]=='taoyuan')?1:-1;
							return (button.link[2]=='wuzhong')?1:-1;
						});
					}
					else event.finish();
					"step 3"
					if(result&&result.bool&&result.links){
						event.cards=[];
						for(var i=0;i<result.links.length;i++){
							var card=game.createCard({name:result.links[i][2],nature:result.links[i][3]});
							event.cards.push(card);
							player.storage.sjxqb.push(card);
							player.storage.sjxqb2.add(get.name(card));
						}
					}
					"step 4"
					player.gain(event.cards,'gain2');
					"step 5"
					trigger.cancel();
				},
				ai:{
					threaten:2,
					expose:0.4,
				},
			},
			sjxqb2:{
				group:"sjxqb2_qingchu",
				subSkill:{
					qingchu:{
						trigger:{
							global:"phaseBegin",
						},
						silent:true,
						content:function(){
							player.storage.sjxqb2=[];
						},
						sub:true,
						forced:true,
						popup:false,
					},
				},
				trigger:{
					global:["loseEnd","cardsDiscardEnd"],
				},
				unique:true,
				silent:true,
				forced:true,
				forceDie:true,
				charlotte:true,
				filter:function(event,player){
					var cs=event.cards;
					for(var i=0;i<cs.length;i++){
						if(player.storage.sjxqb.contains(cs[i])&&get.position(cs[i],true)=='d') return true;
					}
					return false;
				},
				content:function(){
					var list=[];
					var cs=trigger.cards;
					for(var i=0;i<cs.length;i++){
						if(player.storage.sjxqb.contains(cs[i])&&get.position(cs[i],true)=='d'){
							player.storage.sjxqb.remove(cs[i]);
							list.push(cs[i]);
						}
					}
					game.log(list,'已被移出游戏');
					game.cardsGotoSpecial(list);
				},
			},
			sjxqb3:{},
			sjxlw:{
				audio:"ext:神怒降世:2",
				skillAnimation:true,
				animationColor:"soil",
				trigger:{
					player:"phaseJieshuBegin",
				},
				filter:function(event,player){
					return !player.hasSkill('sjxqb3');
				},
				check:function(event,player){
					return game.countPlayer(function(current){return get.attitude(player,current)>0})<=game.countPlayer(function(current){return get.attitude(player,current)<=0});
				},
				content:function(){
					player.addTempSkill('sjxlw_xiaoguo',{player:'phaseBegin'});
				},
				ai:{
					expose:0.4,
				},
				subSkill:{
					xiaoguo:{
						audio:"ext:神怒降世:4",
						mark:true,
						intro:{
							name:"乱武",
							content:"所有角色使用有目标的牌时改为随机指定目标",
						},
						trigger:{
							global:"useCard",
						},
						filter:function(event,player){
							return event.targets.length>0;
						},
						unique:true,
						forced:true,
						content:function(){
							"step 0"
							var num=0;
							event.ren=game.filterPlayer();
							for(var i=0;i<trigger.targets.length;i++){
								num++;
								trigger.targets.remove(trigger.targets[i]);
							}
							for(var j=0;j<num;j++){
								var daomeidan=event.ren.randomGet();
								trigger.targets.push(daomeidan);
								event.ren.remove(daomeidan);
							}
							"step 1"
							trigger.player.line(trigger.targets);
							game.log(trigger.card,'的目标改为',trigger.targets);
						},
						sub:true,
					},
				},
			},
			jbmhzk:{
				audio:"ext:神怒降世:2",
				trigger:{
					player:"phaseBefore",
					global:"roundStart",
				},
                filter:function(event,player,name){
					return game.hasPlayer(function(current){return !current.hasSkill('jbmhzk_mark')});
				},
				direct:true,
				forced:true,
				content:function(){
					"step 0"
					if(event.triggername=='roundStart'&&game.roundNumber<=1){
						if(game.countPlayer()%2==1) event.num=(game.countPlayer()-1)/2;
						else event.num=game.countPlayer()/2;
						if(event.num>game.countPlayer(function(current){return !current.hasSkill('jbmhzk_mark')})){
							event.num=game.countPlayer(function(current){return !current.hasSkill('jbmhzk_mark')});
						}
					}
					else event.num=1;
					"step 1"
					player.chooseTarget('〖纵傀〗：令'+get.cnNumber(event.num)+'名角色获得「傀」标记',event.num,true,function(card,player,target){
						return !target.hasSkill('jbmhzk_mark');
					});
					"step 2"
					if(result.bool){
						player.logSkill('jbmhzk',result.targets);
						for(var i=0;i<result.targets.length;i++){
							result.targets[i].addSkill('jbmhzk_mark');
						}
					}
				},
				subSkill:{
					mark:{
						mark:true,
						marktext:'傀',
						silent:true,
						unique:true,
						forced:true,
						intro:{
							name:'纵傀',
							content:'傀儡',
						}
					}
				},
				ai:{
					combo:'jbmhgj',
					threaten:0.8,
				}
			},
			jbmhgj:{
				audio:"ext:神怒降世:2",
				intro:{
					name:'骨疽',
					content:'已因此技能获得#张牌',
				},
				trigger:{
					global:'damageEnd',
				},
				forced:true,
				filter:function(event,player){
					return event.player.hasSkill('jbmhzk_mark');
				},
				content:function(){
					"step 0"
					if(!player.storage.jbmhbj) player.addMark('jbmhgj',1);
					"step 1"
					player.draw();
				},
				ai:{
					combo:'jbmhzk',
				}
			},
			jbmhbj:{
				audio:"ext:神怒降世:2",
				unique:true,
				derivation:'jbmhcs',
				juexingji:true,
				ai:{
					combo:'jbmhgj',
				},
				trigger:{
					player:'phaseZhunbeiBegin',
				},
				forced:true,
				skillAnimation:true,
				animationColor:'thunder',
				filter:function(event,player){
					return player.countMark('jbmhgj')>=7&&!player.storage.jbmhbj;
				},
				content:function(){
					player.awakenSkill('jbmhbj');
					player.storage.jbmhbj=true;
					player.addSkill('jbmhcs');
					player.removeMark('jbmhgj',player.countMark('jbmhgj'));
				}
			},
			jbmhcs:{
				audio:"ext:神怒降世:2",
				group:['jbmhcs_add','jbmhcs_remove'],
				subSkill:{
					add:{
						audio:'jbmhcs',
						trigger:{player:'useCard2'},
						filter:function(event,player){
							if(!event.targets||event.targets.length!=1) return false;
							var info=get.info(event.card);
							if(info.multitarget) return false;
							if(info.allowMultiple==false) return false;
							if(info.type=='equip') return false;
							if(info.type=='delay') return false;
							return game.hasPlayer(function(current){
								if(!current.hasSkill('jbmhzk_mark')) return false;
								return !event.targets.contains(current)&&lib.filter.targetEnabled2(event.card,player,current);
							});
						},
						direct:true,
						content:function(){
							'step 0'
							player.chooseTarget(get.prompt2('jbmhcs'),[1,Infinity],function(card,player,target){
								if(!target.hasSkill('jbmhzk_mark')) return false;
								var trigger=_status.event.getTrigger();
								return !trigger.targets.contains(target)&&lib.filter.targetEnabled2(trigger.card,player,target);
							}).set('ai',function(target){
								var player=_status.event.player;
								return get.effect(target,_status.event.getTrigger().card,player,player);
							});
							'step 1'
							if(result.bool){
								if(!event.isMine()&&!event.isOnline()) game.delayx();
								event.targets=result.targets.sortBySeat();
							}
							else{
								event.finish();
							}
							'step 2'
							player.logSkill('jbmhcs',event.targets);
							for(var i=0;i<event.targets.length;i++){
								event.targets[i].removeSkill('jbmhzk_mark');
							}
							trigger.targets.addArray(event.targets);
						}
					},
					remove:{
						audio:'jbmhcs',
						trigger:{
							target:'useCardToTarget',
						},
						check:function(event,player){
							return get.attitude(event.player,player)<0&&get.effect(player,event.card,event.player,player)<0;
						},
						logTarget:'player',
						filter:function(event,player){
							if(!['basic','trick'].contains(get.type(event.card))) return false;
							if(!event.targets||event.targets.length!=1) return false;
							return event.player.hasSkill('jbmhzk_mark');
						},
						content:function(){
							trigger.targets.remove(player);
							trigger.getParent().triggeredTargets2.remove(player);
							game.delay();
							trigger.player.removeSkill('jbmhzk_mark');
						}
					}
				}
			},
			
			csts:{
				audio:"ext:神怒降世:2",
				enable:"phaseUse",
				usable:1,
				filterTarget:true,
				content:function(){
					"step 0"
					event.count=0;
					event.wenti1=['(   )邀请董卓于(   )年入洛阳。','刘备和袁术相持不下时，(   )趁其后防空虚袭击了下邳。','七星宝刀原为(   )所有。','汉献帝的皇后是(   )。','因迎奉汉灵帝之功，被封为长安乡侯的宦官是(   )。','汉灵帝继位后，宦官(   )肆意弄权。','南蛮第一智者是(   )。','《三国志》的作者是(   )。','《洛神赋》中的洛神意指(   )的妻子甄宓。','天公将军是(   )，地公将军是(   )，人公将军是(   )。','《太平清领道》第一发现者是(   )。','汉灵帝末年，在西州与边章、韩遂等共同举兵起事的是(   )。','马腾曾被朝廷授予(   )之职。','(   )不是《三国演义》提过的特殊兵种。','董卓字(   )。','汉献帝是指(   )。','最终(   )统一了三国。','《太平要术》是(   )送给张角的三卷天书。','最早预言曹操“将来能安天下”的是(   )。','苏双、张世平两人从事的职业是(   )。','程畿字(   )。','公元(   )年三国归晋。','孙权出生于(   )年。','孙策出生于(   )年。','公元(   )年孙权封吴王。','孙权女儿孙鲁班，先嫁(   )，再嫁(   )。','(   )是孙权、孙策的父亲，出生于公元(   )年。','羽扇纶巾，谈笑间，樯橹灰飞烟灭，指的是(   )。','孙策借兵走扬州，周瑜向其推荐“二张”分别为(   )和(   )。','《三国演义》之初众诸侯中违约藏匿玉玺的是(   )。','“百骑劫魏营”的(   )杀了(   )的父亲(   )。','曹仁布八门金锁阵被(   )识破。','白衣渡江典故中的主角是(   )。','桃园三结义,在桃园中痛饮有(   )。','桃园三结义，除了用马做祭祀物品，还用了(   )。','桃园三英中，最早逝世的是(   )。','刘关张出道后杀死的第一个副将是(   )。','刘备家住楼桑村，死于(   )，享年(   )岁。','刘备入蜀后娶了(   )的妹妹(   )。','刘焉发榜招军时，刘备(   )岁。','张宝被刘备射中(   )。','刘备十五岁外出游学，曾拜在(   )门下。','张飞被(   )所杀。','历史上，赵云最初从事于(   )之手。','刘禅是(   )之子。','关羽的美髯有(   )。','“冷艳锯”是(   )的兵器。','关羽是(   )。','关羽原来的字叫(   )。','建年二十四年，(   )战败，向关羽投降。','姜维和钟会密谋反叛被告发,最终被(   )率兵剿灭。','蜀国五虎将中，(   )最后拜入刘备麾下。','马超的坐骑是(   )。','《三国演义》中有云“一览无遗世所稀，谁知书信泄天机。未观玄德兴王业，先向成都血染衣。”这段话说的是(   )。','诸葛亮和(   )是叔侄关系。','刘禅的皇后是(   )。','曹操生于(   )年,在(   )年著《观沧海》。','曹操的祖父是(   )。','被曹操称为“吾家千里驹”的人是(   )。','爪黄飞电是(   )的坐骑，武器是(   )。','曹操运用(   )打败了马超。','“煮豆燃豆茸,豆在釜中泣。”此诗是(   )所作。','(   )不是曹操的儿子。','直言曹操是“治世之能臣，乱世之奸雄”的是(   )。','宛城之战，曹操长子(   )、侄子(   )、大将(   )被杀。','曹操于南皮之战中击败了(   )，曹操在(   )中击败了尹楷。','曹操曾带刀闯入(   )的府氐。','向曹操献“二虎竞食”及“驱虎吞狼”之计的人是(   )。','五子良将是(   )。','魏国的末代皇帝是(   )。','威震逍遥津的是(   )。','三国中，在战场上拔矢啖睛的是(   )。','(   )被曹操赞誉有周亚夫之风。','长板桥被张飞下到跌落下马的是(   )。','三国演义中十胜十败论是(   )提出的。'];
					event.daan1=['袁绍，188','吕布','董卓','曹节','郭胜','侯览','木鹿大王','陈骞','曹丕','张角，张梁，张宝','于吉','张晟','征东将军','连弩兵','仲康','刘协','司马炎','左慈','许劭','打猎','季然','279','182','173','220','全琮，周循','孙羌，154','司马懿','张纮，张昭','孙坚','甘宁，凌操，凌统','周瑜','庞德','三十余人','黑牛','刘备','管亥','白帝城，61','吴懿，吴苋','二十七','膝盖','王朗','张达、范强','公孙瓒','糜氏','二尺二','关羽','河北涿郡人','云飞','于禁','司马伷','马超','燎原火','法正','诸葛谨','张星彩','156，205','曹德','曹均','孙权，白虹剑','水计','曹操','曹真','陈宫','曹安民，曹昂，典韦','袁尚，官渡之战','赵忠','荀彧','张辽、乐进、于禁、张郃、徐晃','曹奂','乐进','夏侯渊','徐晃','夏侯杰','郭嘉'];
					event.daan2=['袁绍，189','曹仁','曹操','曹华','封谞','曹节','金环三结','陈寿','曹植','张宝，张梁，张角','华佗','王国','征西将军','藤甲兵','仲颖','刘辩','司马师','于吉','何颙','屠户','季章','280','183','174','221','周循，全琮','孙坚，155','诸葛亮','张肱，张昭','袁术','甘宁，凌统，凌操','诸葛亮','吕蒙','三百多人','猪','关羽','波才','襄阳城，62','吴懿，吴班','二十八','左臂','许劭','傅士仁、糜芳','韩馥','吴式','一尺七','潘凤','河东郡解县人','云长','庞德','卫灌','黄忠','里飞沙','张松','诸葛瞻','关银屏','155，206','曹嵩','曹休','曹操，倚天剑','火计','曹丕','曹均','许劭','曹昂，曹安民，典韦','袁熙，赤壁之战','郭胜','程昱','张辽、李典、于禁、张郃、徐晃','曹芳','李典','夏侯惇','于禁','夏侯恩','荀彧'];
					event.daan3=['袁术，190','吕蒙','王允','曹宪','曹节','段珪','朵思大王','陈震','曹洪','张角，张宝，张梁','张角','马腾','征南将军','虎豹骑','仲达','刘宏','司马昭','南华老仙','曹嵩','贩马','季真','281','184','175','222','周处，全琮','孙坚，145','周瑜','张纮，张邵','袁绍','凌统，甘瑰，甘宁','徐庶','关羽','刘关张三人','鸡','张飞','邓茂','白帝城，63','吴懿，吴笕','二十九','右臂','卢植','王甫、赵累','公孙渊','甘氏','二尺长','许褚','山东琅琊阳都人','长生','曹仁','石苞','魏延','惊帆','张肃','诸葛恪','赵襄','157，204','曹腾','曹昂','刘备，鸳鸯剑','离间计','曹植','曹林','许靖','曹均，曹安民，典韦','袁谭，毛城之战','张让','郭嘉','张辽、曹仁、于禁、张郃、徐晃','曹髦','张辽','夏侯霸','张郃','刑道荣','程昱'];
					"step 1"
					event.wenti2=event.wenti1.randomGet();
					for(var i=0;i<event.wenti1.length;i++){
						if(event.wenti2==event.wenti1[i]){
							event.i=i;
							if(event.wenti2=='(   )邀请董卓于(   )年入洛阳。') event.zhengque=1;
							if(event.wenti2=='刘备和袁术相持不下时，(   )趁其后防空虚袭击了下邳。') event.zhengque=0;
							if(event.wenti2=='七星宝刀原为(   )所有。') event.zhengque=2;
							if(event.wenti2=='汉献帝的皇后是(   )。') event.zhengque=0;
							if(event.wenti2=='因迎奉汉灵帝之功，被封为长安乡侯的宦官是(   )。') event.zhengque=2;
							if(event.wenti2=='汉灵帝继位后，宦官(   )肆意弄权。') event.zhengque=1;
							if(event.wenti2=='南蛮第一智者是(   )。') event.zhengque=2;
							if(event.wenti2=='《三国志》的作者是(   )。') event.zhengque=1;
							if(event.wenti2=='《洛神赋》中的洛神意指(   )的妻子甄宓。') event.zhengque=0;
							if(event.wenti2=='天公将军是(   )，地公将军是(   )，人公将军是(   )。') event.zhengque=2;
							if(event.wenti2=='《太平清领道》第一发现者是(   )。') event.zhengque=0;
							if(event.wenti2=='汉灵帝末年，在西州与边章、韩遂等共同举兵起事的是(   )。') event.zhengque=2;
							if(event.wenti2=='马腾曾被朝廷授予(   )之职。') event.zhengque=1;
							if(event.wenti2=='(   )不是《三国演义》提过的特殊兵种。') event.zhengque=2;
							if(event.wenti2=='董卓字(   )。') event.zhengque=1;
							if(event.wenti2=='汉献帝是指(   )。') event.zhengque=0;
							if(event.wenti2=='最终(   )统一了三国。') event.zhengque=0;
							if(event.wenti2=='《太平要术》是(   )送给张角的三卷天书。') event.zhengque=2;
							if(event.wenti2=='最早预言曹操“将来能安天下”的是(   )。') event.zhengque=1;
							if(event.wenti2=='苏双、张世平两人从事的职业是(   )。') event.zhengque=2;
							if(event.wenti2=='程畿字(   )。') event.zhengque=0;
							if(event.wenti2=='公元(   )年三国归晋。') event.zhengque=1;
							if(event.wenti2=='孙权出生于(   )年。') event.zhengque=0;
							if(event.wenti2=='孙策出生于(   )年。') event.zhengque=2;
							if(event.wenti2=='公元(   )年孙权封吴王。') event.zhengque=1;
							if(event.wenti2=='孙权女儿孙鲁班，先嫁(   )，再嫁(   )。') event.zhengque=1;
							if(event.wenti2=='(   )是孙权、孙策的父亲，出生于公元(   )年。') event.zhengque=1;
							if(event.wenti2=='羽扇纶巾，谈笑间，樯橹灰飞烟灭，指的是(   )。') event.zhengque=2;
							if(event.wenti2=='孙策借兵走扬州，周瑜向其推荐“二张”分别为(   )和(   )。') event.zhengque=0;
							if(event.wenti2=='《三国演义》之初众诸侯中违约藏匿玉玺的是(   )。') event.zhengque=0;
							if(event.wenti2=='“百骑劫魏营”的(   )杀了(   )的父亲(   )。') event.zhengque=1;
							if(event.wenti2=='曹仁布八门金锁阵被(   )识破。') event.zhengque=2;
							if(event.wenti2=='白衣渡江典故中的主角是(   )。') event.zhengque=1;
							if(event.wenti2=='桃园三结义,在桃园中痛饮有(   )。') event.zhengque=1;
							if(event.wenti2=='桃园三结义，除了用马做祭祀物品，还用了(   )。') event.zhengque=0;
							if(event.wenti2=='桃园三英中，最早逝世的是(   )。') event.zhengque=1;
							if(event.wenti2=='刘关张出道后杀死的第一个副将是(   )。') event.zhengque=2;
							if(event.wenti2=='刘备家住楼桑村，死于(   )，享年(   )岁。') event.zhengque=2;
							if(event.wenti2=='刘备入蜀后娶了(   )的妹妹(   )。') event.zhengque=0;
							if(event.wenti2=='刘焉发榜招军时，刘备(   )岁。') event.zhengque=1;
							if(event.wenti2=='张宝被刘备射中(   )。') event.zhengque=1;
							if(event.wenti2=='刘备十五岁外出游学，曾拜在(   )门下。') event.zhengque=2;
							if(event.wenti2=='张飞被(   )所杀。') event.zhengque=0;
							if(event.wenti2=='历史上，赵云最初从事于(   )之手。') event.zhengque=0;
							if(event.wenti2=='刘禅是(   )之子。') event.zhengque=2;
							if(event.wenti2=='关羽的美髯有(   )。') event.zhengque=2;
							if(event.wenti2=='“冷艳锯”是(   )的兵器。') event.zhengque=0;
							if(event.wenti2=='关羽是(   )。') event.zhengque=1;
							if(event.wenti2=='关羽原来的字叫(   )。') event.zhengque=2;
							if(event.wenti2=='建年二十四年，(   )战败，向关羽投降。') event.zhengque=0;
							if(event.wenti2=='姜维和钟会密谋反叛被告发,最终被(   )率兵剿灭。') event.zhengque=1;
							if(event.wenti2=='蜀国五虎将中，(   )最后拜入刘备麾下。') event.zhengque=0;
							if(event.wenti2=='马超的坐骑是(   )。') event.zhengque=1;
							if(event.wenti2=='《三国演义》中有云“一览无遗世所稀，谁知书信泄天机。未观玄德兴王业，先向成都血染衣。”这段话说的是(   )。') event.zhengque=1;
							if(event.wenti2=='诸葛亮和(   )是叔侄关系。') event.zhengque=2;
							if(event.wenti2=='刘禅的皇后是(   )。') event.zhengque=0;
							if(event.wenti2=='曹操生于(   )年,在(   )年著《观沧海》。') event.zhengque=1;
							if(event.wenti2=='曹操的祖父是(   )。') event.zhengque=2;
							if(event.wenti2=='被曹操称为“吾家千里驹”的人是(   )。') event.zhengque=1;
							if(event.wenti2=='爪黄飞电是(   )的坐骑，武器是(   )。') event.zhengque=1;
							if(event.wenti2=='曹操运用(   )打败了马超。') event.zhengque=2;
							if(event.wenti2=='“煮豆燃豆茸,豆在釜中泣。”此诗是(   )所作。') event.zhengque=2;
							if(event.wenti2=='(   )不是曹操的儿子。') event.zhengque=0;
							if(event.wenti2=='直言曹操是“治世之能臣，乱世之奸雄”的是(   )。') event.zhengque=1;
							if(event.wenti2=='宛城之战，曹操长子(   )、侄子(   )、大将(   )被杀。') event.zhengque=1;
							if(event.wenti2=='曹操于南皮之战中击败了(   )，曹操在(   )中击败了尹楷。') event.zhengque=2;
							if(event.wenti2=='曹操曾带刀闯入(   )的府氐。') event.zhengque=2;
							if(event.wenti2=='向曹操献“二虎竞食”及“驱虎吞狼”之计的人是(   )。') event.zhengque=0;
							if(event.wenti2=='五子良将是(   )。') event.zhengque=0;
							if(event.wenti2=='魏国的末代皇帝是(   )。') event.zhengque=0;
							if(event.wenti2=='威震逍遥津的是(   )。') event.zhengque=2;
							if(event.wenti2=='三国中，在战场上拔矢啖睛的是(   )。') event.zhengque=1;
							if(event.wenti2=='(   )被曹操赞誉有周亚夫之风。') event.zhengque=0;
							if(event.wenti2=='长板桥被张飞下到跌落下马的是(   )。') event.zhengque=0;
							if(event.wenti2=='三国演义中十胜十败论是(   )提出的。') event.zhengque=0;
							break;
						}
					}
					target.chooseControl().set('choiceList',[event.daan1[event.i],event.daan2[event.i],event.daan3[event.i]]).set('prompt',event.wenti2).set('ai',function(){
						return event.zhengque;
					});
					"step 2"
					if(result.index==event.zhengque){
						if(target!=player) game.asyncDraw([player,target]);
						else player.draw();
					}
					else{
						if(target.countCards('he')>0){
							var daan;
							if(event.zhengque==0) daan=event.daan1[event.i];
							if(event.zhengque==1) daan=event.daan2[event.i];
							if(event.zhengque==2) daan=event.daan3[event.i];
							target.chooseToDiscard('〖通史〗：正确答案：“<span style="color: #00FF00">'+daan+'</span>”，弃置一张牌',true,'he');
						}
						if(player.countCards('he')>0) player.chooseToDiscard('〖通史〗：弃置一张牌',true,'he');
					}
					"step 3"
					event.count++;
					event.wenti1.remove(event.wenti1[event.i]);
					event.daan1.remove(event.daan1[event.i]);
					event.daan2.remove(event.daan2[event.i]);
					event.daan3.remove(event.daan3[event.i]);
					"step 4"
					if(event.count<5&&player.countCards('he')>0) player.chooseToDiscard('〖通史〗：是否弃置一张牌令'+get.translation(target)+'继续答题？(可重复'+get.cnNumber(5-event.count)+'次)','he').set('ai',function(card){
						if(get.attitude(target,player)<0) return -1;
						return 8-get.value(card);
					});
					else event.finish();
					"step 5"
					if(result.bool) event.goto(1);
					else event.finish();
				},
				ai:{
					threaten:1.5,
					order:20,
					result:{
						target:function(player,target){
							if(target!=player&&get.attitude(player,target)>0) return 10;
							else return 1;
						},
					},
					expose:0.4,
				},
			},
			
			spyhbl:{
				audio:"ext:神怒降世:4",
				group:['spyhbl_xiaoguo1','spyhbl_xiaoguo2'],
				trigger:{
					global:['gameStart','gameDrawAfter'],
					player:'enterGame',
				},
				filter:function(event,player,name){
					if(name=='gameDrawAfter') return !lib.inpile.contains('snjs_card_fubing');
					return !lib.inpile.contains('snjs_card_fangong')&&!lib.inpile.contains('snjs_card_yexi')&&!lib.inpile.contains('snjs_card_weicheng');
				},
				forced:true,
				locked:false,
				content:function(){
					if(event.triggername!='gameDrawAfter'){
						for(var i=2;i<11;i++){
							var card=game.createCard2(i%2?'snjs_card_yexi':'snjs_card_weicheng',i%2?'club':'diamond',i);
							ui.cardPile.insertBefore(card,ui.cardPile.childNodes[get.rand(0,ui.cardPile.childNodes.length)]);
						}
						for(var i=2;i<11;i++){
							if(i%2==1){
								var card=game.createCard2('snjs_card_yexi','club',i);
								ui.cardPile.insertBefore(card,ui.cardPile.childNodes[get.rand(0,ui.cardPile.childNodes.length)]);
							}
						}
						for(var i=2;i<11;i++){
							var card=game.createCard2(i==10?'snjs_card_weicheng':'snjs_card_fangong',i==10?'diamond':'heart',i);
							ui.cardPile.insertBefore(card,ui.cardPile.childNodes[get.rand(0,ui.cardPile.childNodes.length)]);
						}
						game.broadcastAll(function(){lib.inpile.add('snjs_card_fangong')});
						game.broadcastAll(function(){lib.inpile.add('snjs_card_yexi')});
						game.broadcastAll(function(){lib.inpile.add('snjs_card_weicheng')});
					}
					else{
						for(var i=0;i<8;i++){
							if(i<2) var card=game.createCard2('snjs_card_fubing','spade',1);
							if(i>=2&&i<4) var card=game.createCard2('snjs_card_fubing','spade',11);
							if(i>=4&&i<6) var card=game.createCard2('snjs_card_fubing','spade',12);
							if(i>=6&&i<8) var card=game.createCard2('snjs_card_fubing','spade',13);
							ui.cardPile.insertBefore(card,ui.cardPile.childNodes[get.rand(0,ui.cardPile.childNodes.length)]);
						}
						game.broadcastAll(function(){lib.inpile.add('snjs_card_fubing')});
					}
					game.updateRoundNumber();
				},
				subSkill:{
					xiaoguo1:{
						audio:'spyhbl',
						trigger:{
							global:["loseAfter","turnOverEnd","useCard"],
						},
						filter:function(event,player,name){
							if(name=='useCard') return (event.card.name=='snjs_card_fangong'&&event.player.countCards('he')>0&&!player.hasSkill('spyhbl_jilu2'))||(event.card.name=='snjs_card_fubing'&&!player.hasSkill('spyhbl_jilu1'));
							if(name=='turnOverEnd'){
								if(event.player!=player) return event.player.isTurnedOver()&&event.player.countCards('h')!=player.countCards('h')&&!player.hasSkill('spyhbl_jilu4');
								return event.player.isTurnedOver()&&!player.hasSkill('spyhbl_jilu4');
							}
							if(name=='loseAfter'&&event.type=='discard'&&event.cards2.length>1&&event.player.isAlive()){
								for(var i=1;i<event.cards2.length;i++){
									if(get.color(event.cards2[i],event.player)!=get.color(event.cards2[0],event.player)||get.position(event.cards2[i],true)!='d'){
										return false;
									}
								}
								if(event.player!=player) return player.countCards('h')>=event.cards2.length&&!player.hasSkill('spyhbl_jilu3');
								return !player.hasSkill('spyhbl_jilu3');
							}
						},
						direct:true,
						content:function(){
							"step 0"
							if(event.triggername=='useCard'){
								if(trigger.card.name=='snjs_card_fangong'){
									player.chooseControl('令'+get.translation(trigger.player)+'摸一张牌','令'+get.translation(trigger.player)+'弃一张牌','取消').set('prompt','是否发动〖兵略〗').set('ai',function(target){
										if(get.attitude(player,trigger.player)>0) return '令'+get.translation(trigger.player)+'摸一张牌';
										return '令'+get.translation(trigger.player)+'弃一张牌';
									});
								}
								else{
									player.chooseTarget('是否发动〖兵略〗：修改'+get.translation(trigger.card)+'的使用者',function(card,player,target){
										return target!=trigger.player;
									}).set('ai',function(target){
										if(get.attitude(player,trigger.player)<0) return false;
										if(get.attitude(player,trigger.player)>0) return get.damageEffect(target,player,player);
									});
								}
							}
							if(event.triggername=='turnOverEnd'){
								var stry=player.countCards('h')<trigger.player.countCards('h')?'弃置':'摸至(至多摸四张)';
								var strx;
								if(trigger.player!=player) strx='是否发动〖兵略〗：令'+get.translation(trigger.player)+'将手牌'+stry+'与你相等';
								else strx='是否发动〖兵略〗：摸一张牌';
								player.chooseBool(strx).set('ai',function(){
									if(trigger.player==player) return true;
									if(get.attitude(player,trigger.player)<=0) return player.countCards('h')<trigger.player.countCards('h');
									else return player.countCards('h')>trigger.player.countCards('h');
								});
							}
							if(event.triggername=='loseAfter'){
								if(trigger.player!=player){
									player.chooseCard('是否发动〖兵略〗：交给'+get.translation(trigger.player)+get.cnNumber(trigger.cards2.length)+'张手牌，获得其弃置的牌，然后弃置'+get.cnNumber(trigger.cards2.length)+'张牌','h',trigger.cards2.length).set('ai',function(card){
										if(get.attitude(player,trigger.player)<0) return false;
										if(get.attitude(player,trigger.player)>0) return get.value(card);
									});
								}
								else{
									player.chooseBool('是否发动〖兵略〗：摸一张牌').set('ai',function(){
										return true;
									});
								}
							}
							"step 1"
							if(result.bool||result.control){
								if(event.triggername=='useCard'){
									if(trigger.card.name=='snjs_card_fangong'){
										if(result.control=='令'+get.translation(trigger.player)+'摸一张牌'){
											if(!player.hasSkill('spyhbl_jilu2')) player.addTempSkill('spyhbl_jilu2');
											player.logSkill('spyhbl',trigger.player);
											trigger.player.draw();
										}
										else if(result.control!='取消'){
											if(!player.hasSkill('spyhbl_jilu2')) player.addTempSkill('spyhbl_jilu2');
											player.logSkill('spyhbl',trigger.player);
											trigger.player.chooseToDiscard('〖兵略〗：弃置一张牌','he',true);
										}
									}
									else{
										player.logSkill('spyhbl',result.targets[0]);
										if(!player.hasSkill('spyhbl_jilu1')) player.addTempSkill('spyhbl_jilu1');
										trigger.cancel();
										result.targets[0].useCard(trigger.card);
									}
								}
								if(event.triggername=='turnOverEnd'){
									player.logSkill('spyhbl',trigger.player);
									if(!player.hasSkill('spyhbl_jilu4')) player.addTempSkill('spyhbl_jilu4');
									if(trigger.player==player) trigger.player.draw();
									else{
										if(trigger.player.countCards('h')<player.countCards('h')){
											var shuliang=Math.min(4,player.countCards('h')-trigger.player.countCards('h'));
											trigger.player.draw(shuliang);
										}
										else trigger.player.chooseToDiscard(trigger.player.countCards('h')-player.countCards('h'),'h',true);
									}
								}
								if(event.triggername=='loseAfter'){
									player.logSkill('spyhbl',trigger.player);
									if(!player.hasSkill('spyhbl_jilu3')) player.addTempSkill('spyhbl_jilu3');
									if(trigger.player==player) trigger.player.draw();
									else{
										trigger.player.gain(result.cards,player,'giveAuto');
										player.gain(trigger.cards2,'gain2');
										player.chooseToDiscard(trigger.cards2.length,'he',true);
									}
								}
							}
						},
						ai:{
							threaten:2,
							expose:0.6,
						},
						sub:true,
					},
					xiaoguo2:{
						audio:'spyhbl',
						trigger:{
							global:"useCardEnd",
						},
						filter:function(event,player,name){
							return ['snjs_card_fubing','snjs_card_fangong','snjs_card_yexi','snjs_card_weicheng'].contains(event.card.name)&&event.player!=player;
						},
						check:function(event,player){
							return true;
						},
						prompt:"是否发动〖兵略〗：进行一次判定",
						content:function(){
							"step 0"
							var func=function(result){
								if(get.suit(result)==get.suit(trigger.cards)) return 5;
								return 0;
							};
							player.judge(func);
							"step 1"
							if(result.suit==get.suit(trigger.cards)){
								player.gain(trigger.cards,'gain2','log');
							}
							else{
								event.card=result.card;
								player.gain(event.card,'gain2','log');
							}
						},
						sub:true,
					},
					jilu1:{
						silent:true,
						unique:true,
						forced:true,
					},
					jilu2:{
						silent:true,
						unique:true,
						forced:true,
					},
					jilu3:{
						silent:true,
						unique:true,
						forced:true,
					},
					jilu4:{
						silent:true,
						unique:true,
						forced:true,
					},
				},
			},
			splslm:{
				audio:"ext:神怒降世:2",
				trigger:{
					player:["phaseBegin","enterGame"],
					global:"gameDrawAfter",
				},
				filter:function(event,player,name){
					if(name=='phaseBegin'){
						if(game.roundNumber%2) return game.hasPlayer(function(current){return current.hasSkill('splslm_mark')})&&game.hasPlayer(function(current){return !current.hasSkill('splslm_mark')});
						else return game.hasPlayer(function(current){return !current.hasSkill('splslm_mark')})&&player.countCards('he')>0;
					}
					else return game.hasPlayer(function(current){return !current.hasSkill('splslm_mark')});
				},
				direct:true,
				forced:true,
				content:function(){
					"step 0"
					if(event.triggername!='phaseBegin'){
						var num;
						if(game.countPlayer(function(current){return !current.hasSkill('splslm_mark')})<2) num=game.countPlayer(function(current){return !current.hasSkill('splslm_mark')});
						else num=2;
						player.chooseTarget('〖联盟〗：令至多'+get.cnNumber(num)+'名角色获得「盟」标记',[1,num],true,function(card,player,target){
							return !target.hasSkill('splslm_mark');
						}).set('ai',function(target){
							var player=_status.event.player;
							return get.attitude(player,target)>0;
						});
					}
					else{
						if(game.roundNumber%2){
							player.chooseCardTarget({
								filterCard:false,
								selectTarget:2,
								filterTarget:function(card,player,target){
									if(ui.selected.targets.length){
										return !target.hasSkill('splslm_mark');
									}
									else return target.hasSkill('splslm_mark');
								},
								ai1:function(card){
									return false;
								},
								ai2:function(target){
									var player=_status.event.player;
									return get.attitude(player,target)>=0;
								},
								prompt:get.prompt('splslm'),
								prompt2:'<center>摸一张牌并移动一枚「盟」标记</center>',
							});
						}
						else{
							player.chooseCardTarget({
								position:'he',
								filterCard:lib.filter.cardDiscardable,
								filterTarget:function(card,player,target){
									return !target.hasSkill('splslm_mark');
								},
								ai1:function(card){
									return 7-get.value(card);
								},
								ai2:function(target){
									var player=_status.event.player;
									return get.attitude(player,target)>0;
								},
								prompt:get.prompt('splslm'),
								prompt2:'<center>弃置一张牌令一名角色获得「盟」标记</center>',
							});
						}
					}
					"step 1"
					if(result.bool){
						player.logSkill('splslm');
						if(event.triggername!='phaseBegin'){
							player.line(result.targets);
							for(var i=0;i<result.targets.length;i++){
								result.targets[i].addSkill('splslm_mark');
							}
						}
						else{
							if(game.roundNumber%2){
								player.draw();
								player.line2(game.filterPlayer(function(current){
									return current==result.targets[0];
								}).concat(result.targets[1]));
								result.targets[0].removeSkill('splslm_mark');
								result.targets[1].addSkill('splslm_mark');
							}
							else{
								player.discard(result.cards);
								player.line(result.targets[0]);
								result.targets[0].addSkill('splslm_mark');
							}
						}
					}
				},
				subSkill:{
					mark:{
						mark:true,
						marktext:"盟",
						intro:{
							name:"联盟",
							content:"<li>摸牌阶段多摸一张牌<br><li>手牌上限+1",
						},
						mod:{
							maxHandcardBase:function(player,num){
								return num+1;
							},
						},
						trigger:{
							player:"phaseDrawBegin2",
						},
						filter:function(event,player,name){
							return !event.numFixed;
						},
						silent:true,
						unique:true,
						forced:true,
						popup:false,
						content:function(){
							trigger.num++;
						},
						sub:true,
						ai:{
							threaten:0.6,
						},
					},
				},
				ai:{
					combo:"splstx",
					expose:0.5,
					threaten:0.8,
				},
			},
			splstx:{
				audio:"ext:神怒降世:2",
				trigger:{
					global:["useCardToTargeted","die"],
				},
				filter:function(event,player,name){
					if(name=='die') return event.player.hasSkill('splslm_mark')&&game.hasPlayer(function(current){return current.hasSkill('splslm_mark')&&current!=event.player});
					else return event.card&&get.tag(event.card,'damage')&&event.target.hasSkill('splslm_mark')&&game.hasPlayer(function(current){return current.hasSkill('splslm_mark')&&current!=event.target&&current.countCards('he')>0})&&!event.target.hasSkill('splstx_jilu');
				},
				forced:true,
				content:function(){
					"step 0"
					event.ren=[];
					event.pai=[];
					event.i=0;
					if(event.triggername!='die'){
						if(!trigger.target.hasSkill('splstx_jilu')) trigger.target.addTempSkill('splstx_jilu');
					}
					var mubiao=event.triggername=='die'?trigger.player:trigger.target;
					game.countPlayer(function(current){
						if(current.hasSkill('splslm_mark')&&current!=mubiao) event.ren.push(current);
					});
					"step 1"
					if(event.i<event.ren.length){
						if(event.triggername=='die'){
							var func=function(result){
								if(get.color(result)=='black'&&!trigger.source) return 5;
								if(get.color(result)=='red'&&event.ren[event.i].countCards('he')<1) return 0;
								return -4;
							};
							event.ren[event.i].judge(func);
						}
						else{
							if(event.ren[event.i].countCards('he')>0) event.ren[event.i].chooseCard('〖同心〗：'+get.translation(trigger.player)+'使用'+get.translation(trigger.card)+'指定了'+get.translation(trigger.target)+'，展示一张牌','he',true).set('ai',function(card){
								return get.value(card);
							});
						}
					}
					"step 2"
					if(event.triggername=='die'){
						event.color=result.color;
						if(event.color=='red'){
							if(event.ren[event.i].countCards('he')>0) event.ren[event.i].chooseToDiscard('〖同心〗：弃置两张牌',2,'he',true);
						}
						else{
							if(trigger.source&&trigger.source.isIn()) event.ren[event.i].damage(trigger.source,'nocard');
						}
					}
					else{
						if(result.bool){
							event.pai.push(result.cards[0]);
						}
					}
					event.i++;
					"step 3"
					if(event.i<event.ren.length) event.goto(1);
					"step 4"
					if(event.triggername=='die'||event.pai.length<1) event.finish();
					else{
						player.showCards('〖同心〗',event.pai);
						trigger.target.chooseButton(1,['〖同心〗：获得一张牌',event.pai],true).set('ai',function(button){
							return get.value(button.link);
						});
					}
					"step 5"
					if(result.bool){
						var ren2;
						for(var i=0;i<event.ren.length;i++){
							var pai2=event.ren[i].getCards('he');
							if(pai2.contains(result.links[0])){
								ren2=event.ren[i];
								break;
							}
						}
						trigger.target.gain(result.links[0],ren2,'give');
						ren2.draw();
					}
				},
				ai:{
					threaten:1,
				},
				subSkill:{
					jilu:{
						trigger:{
							player:"damageEnd",
						},
						silent:true,
						unique:true,
						forced:true,
						popup:false,
						content:function(){
							player.removeSkill('splstx_jilu');
						},
						sub:true,
					},
				},
			},
			zshq:{
				audio:"ext:神怒降世:2",
				trigger:{
					global:"loseHpBegin",
				},
				filter:function(event,player){
					return event.player!=_status.currentPhase;
				},
				check:function(event,player){
					return get.attitude(player,event.player)<=0;
				},
				logTarget:function(event,player){
					return event.player;
				},
				content:function(){
					trigger.num++;
				},
				ai:{
					expose:0.6,
				},
			},
			zsdr:{
				audio:"ext:神怒降世:1",
				global:"zsdr2",
				trigger:{
					global:"roundStart",
				},
				filter:function(event,player){
					if(player.storage.zsdr) return false;
					return game.roundNumber>1&&!game.hasPlayer(function(current){return current.storage.zsdr2!=0});
				},
				priority:99,
				firstDo:true,
				unique:true,
				forced:true,
				juexingji:true,
				skillAnimation:"epic",
				animationColor:"orange",
				derivation:"zsrh",
				content:function(){
					player.storage[event.name]=true;
					player.awakenSkill('zsdr');
					player.loseMaxHp();
					player.addSkill('zsrh');
					game.log(player,'获得了技能','#g〖荣华〗')
				},
				ai:{
					expose:0.6,
				},
			},
			zsdr2:{
				trigger:{
					global:["loseHpEnd","roundStart","gameStart"],
				},
				silent:true,
				unique:true,
				forced:true,
				charlotte:true,
				content:function(){
					if(event.triggername=='gameStart'){
						game.countPlayer(function(current){
							if(!current.storage.zsdr2) current.storage.zsdr2=0;
						});
					}
					if(event.triggername=='roundStart'){
						game.countPlayer(function(current){
							current.storage.zsdr2=0;
						});
					}
					if(event.triggername=='loseHpEnd'){
						game.countPlayer(function(current){
							current.storage.zsdr2++;
						});
					}
				},
			},
			zsrh:{
				audio:"ext:神怒降世:1",
				trigger:{
					global:"drawBegin",
				},
				filter:function(event,player){
					return event.num<=2;
				},
				check:function(event,player){
					return get.attitude(player,event.player)>0;
				},
				logTarget:function(event,player){
					return event.player;
				},
				content:function(){
					trigger.num++;
				},
				ai:{
					expose:0.6,
				},
			},
			szsrj:{
				audio:"ext:神怒降世:2",
				group:"szsrj_yichu",
				trigger:{
					player:"phaseDiscardEnd",
				},
				filter:function(event,player){
					return player.countCards('he')>=2&&game.hasPlayer(function(current){return current!=player&&!current.hasSkill('szsmark')});
				},
				direct:true,
				content:function(){
					"step 0"
					var next=player.chooseCardTarget({
						position:'he',
						selectCard:2,
						filterCard:lib.filter.cardDiscardable,
						filterTarget:function(card,player,target){
							return target!=trigger.player&&!target.hasSkill('szsmark');
						},
						ai1:function(card){
							return true;
						},
						ai2:function(target){
							var player=_status.event.player;
							return get.attitude(player,target)<=0;
						},
						prompt:get.prompt('szsrj'),
						prompt2:'<center>弃置两张牌，令一名其他角色获得「骄」标记</center>',
					});
					"step 1"
					if(result.bool){
						player.logSkill('szsrj',result.targets[0]);
						result.targets[0].storage.szsmark=player;
						result.targets[0].addSkill('szsmark');
						player.discard(result.cards);
					}
				},
				subSkill:{
					yichu:{
						trigger:{
							player:["phaseUseBegin","dieBegin"],
						},
						silent:true,
						content:function(){
							for(var i=0;i<game.players.length;i++){
								if(game.players[i].hasSkill('szsmark')){
									game.players[i].removeSkill('szsmark');
								}
							}
						},
						sub:true,
						forced:true,
						popup:false,
					},
				},
				ai:{
					expose:0.6,
				},
			},
			szsmark:{
				usable:1,
				mod:{
					globalTo:function(from,to,distance){
						return distance-2;
					},
				},
				mark:true,
				marktext:"骄",
				intro:{
					name:"辱骄",
					content:"来源：$",
				},
				trigger:{
					player:"damageEnd",
				},
				filter:function(event,player){
					var num=0;
					player.getHistory('damage',function(evt){
						num+=evt.num;
					});
					return player.storage.szsmark.isAlive()&&num>=2&&player.countCards('he')>0&&_status.currentPhase!=player;
				},
				direct:true,
				unique:true,
				forced:true,
				content:function(){
					"step 0"
					event.mubiao=player.storage.szsmark;
					"step 1"
					if(player.countCards('e')>0){
						player.chooseControl('将装备区中的所有牌交给'+get.translation(event.mubiao),'交给'+get.translation(event.mubiao)+'一张手牌','弃置两张牌').set('prompt','〖辱骄〗：选择一项').set('ai',function(target){
							if(get.attitude(player,event.mubiao)<=0){
								if(player.countCards('e')<2) return '将装备区中的所有牌交给'+get.translation(event.mubiao);
								else return '弃置两张牌';
							}
							else return '交给'+get.translation(event.mubiao)+'一张手牌';
						});
					}
					else{
						player.chooseControl('交给'+get.translation(event.mubiao)+'一张手牌','弃置两张牌').set('prompt','〖辱骄〗：选择一项').set('ai',function(target){
							if(get.attitude(player,event.mubiao)<=0) return '弃置两张牌';
							else return '交给'+get.translation(event.mubiao)+'一张手牌';
						});
					}
					"step 2"
					if(result.control=='将装备区中的所有牌交给'+get.translation(event.mubiao)){
						event.mubiao.gain(player.getCards('e'),player,'give');
						event.finish();
					}
					if(result.control=='交给'+get.translation(event.mubiao)+'一张手牌'){
						player.chooseCard('〖辱骄〗：交给'+get.translation(event.mubiao)+'一张手牌','h',true).set('ai',function(card,player){
							return true;
						});
					}
					if(result.control=='弃置两张牌'){
						player.chooseToDiscard('〖辱骄〗：弃置两张牌',2,true);
						event.finish();
					}
					"step 3"
					if(result.bool){
						event.mubiao.gain(result.cards,player,'give');
					}
				},
			},
			szscs:{
				audio:"ext:神怒降世:2",
				trigger:{
					player:"phaseBegin",
				},
				filter:function(event,player){
					if(game.hasPlayer(function(current){return current.hasSkill('szsmark')})) return player.countCards('he')>=2;
					else return player.isDamaged()&&player.isDamaged();
				},
				direct:true,
				content:function(){
					"step 0"
					if(game.hasPlayer(function(current){return current.hasSkill('szsmark')})){
						var next=player.chooseCardTarget({
							position:'he',
							filterCard:lib.filter.cardDiscardable,
							filterTarget:function(card,player,target){
								return target!=player&&!target.hasSkill('szsmark');
							},
							ai1:function(card){
								return 8-get.value(card);
							},
							ai2:function(target){
								var player=_status.event.player;
								return get.attitude(player,target)<=0;
							},
							prompt:get.prompt('szscs'),
							prompt2:'<center>失去1点体力弃置一张牌并令一名角色获得「骄」标记</center>',
						});
					}
					else{
						player.chooseToDiscard(get.prompt('szscs'),'<center>弃置'+get.cnNumber(Math.min(player.getDamagedHp(),player.countCards('he')))+'张牌并摸'+get.cnNumber(player.getDamagedHp()+2)+'张牌</center>',Math.min(player.getDamagedHp(),player.countCards('he')),'he');
					}
					"step 1"
					if(result.bool){
						if(game.hasPlayer(function(current){return current.hasSkill('szsmark')})){
							player.logSkill('szscs',result.targets[0]);
							player.loseHp();
							result.targets[0].addSkill('szsmark');
							result.targets[0].storage.szsmark=player;
							player.discard(result.cards);
						}
						else{
							player.logSkill('szscs');
							player.discard(result.cards);
							player.draw(result.cards.length+2);
						}
					}
				},
				ai:{
					expose:0.6,
				},
			},
			szsxz:{
				audio:"ext:神怒降世:1",
				mod:{},
				group:["szsxz_achieve","szsxz_fail"],
				trigger:{
					global:"loseEnd",
				},
				derivation:"szsny",
				dutySkill:true,
				filter:function(event,player){
					return (!player.storage.szsxz&&game.countPlayer(function(current){return current.hasSkill('szsmark')})>1)||(!player.storage.szsxz&&game.countPlayer(function(current){return current.hasSkill('szsmark')&&current.countCards('h')<1})>0&&player.countCards('h')<1);
				},
				forced:true,
				unique:true,
				skillAnimation:true,
				animationColor:"metal",
				priority:99,
				content:function(){},
				subSkill:{
					achieve:{
						trigger:{
							global:"loseEnd",
						},
						filter:function(event,player){
							return !player.storage.szsxz&&game.countPlayer(function(current){return current.hasSkill('szsmark')})>1;
						},
						priority:90,
						direct:true,
						forced:true,
						content:function(){
							game.playAudio('..','extension','神怒降世','szsxz_achieve.mp3');
							game.log(player,'使命成功');
							player.loseMaxHp();
							player.recover();
							if(!player.hasSkill('szsny')) player.addSkill('szsny');
							if(player.hasSkill('szsrj')) player.removeSkill('szsrj');
							if(player.hasSkill('szscs')) player.removeSkill('szscs');
							game.log(player,'获得了技能','#g〖内应〗');
							game.log(player,'失去了技能','#g〖辱骄〗','与','#g〖畅诵〗');
							player.awakenSkill('szsxz');
							player.storage.szsxz=true;
						},
						sub:true,
					},
					fail:{
						trigger:{
							global:"loseEnd",
						},
						skillAnimation:true,
						animationColor:"metal",
						filter:function(event,player){
							return !player.storage.szsxz&&game.countPlayer(function(current){return current.hasSkill('szsmark')&&current.countCards('h')<1})>0&&player.countCards('h')<1;
							
						},
						direct:true,
						forced:true,
						content:function(){
							game.playAudio('..','extension','神怒降世','szsxz_fail.mp3');
							game.log(player,'使命失败');
							player.loseHp();
							if(!player.hasSkill('szsshibai')) player.addSkill('szsshibai');
							player.awakenSkill('szsxz');
							player.storage.szsxz=true;
						},
						sub:true,
					},
				},
			},
			szsshibai:{
				trigger:{
					player:"damageBegin",
				},
				filter:function(event,player){
					return event.card&&(get.suit(event.card)=='spade'||get.suit(event.card)=='club');
				},
				silent:true,
				unique:true,
				forced:true,
				charlotte:true,
				content:function(){
					if(get.suit(trigger.card)=='spade') trigger.num++;
					if(get.suit(trigger.card)=='club') player.chooseToDiscard('弃置一张牌',true,'he');
				},
			},
			szsny:{
				audio:"ext:神怒降世:1",
				group:"szsny_geipai",
				trigger:{
					global:"phaseBegin",
				},
				filter:function(event,player){
					return event.player!=player;
				},
				check:function(event,player){
					return get.attitude(player,event.player)>0;
				},
				logTarget:function(event){
					return event.player;
				},
				content:function(){
					'step 0'
					var num=player.hp-1;
					if(player.countCards('hs',{name:['tao','jiu']})){
						num=player.hp;
					}
					var map={};
					var list=[];
					for(var i=1;i<=player.hp;i++){
						var cn=get.cnNumber(i,true);
						map[cn]=i;
						list.push(cn);
					}
					event.map=map;
					player.chooseControl(list,function(){
						return get.cnNumber(_status.event.goon,true);
					}).set('prompt',get.prompt('szsny')).set('goon',num);
					'step 1'
					var num=event.map[result.control]||1;
					player.loseHp(num);
					'step 2'
					trigger.player.draw(player.getDamagedHp());
					'step 3'
					player.chooseCard('〖内应〗：是否交给'+get.translation(trigger.player)+'一张牌令其本回合使用【杀】的次数+1？','he').set('ai',function(card,player){
						return get.value(card);
					});
					'step 4'
					if(result.bool){
						trigger.player.gain(result.cards,player,'giveAuto');
						trigger.player.addTempSkill('szsny_xiaoguo');
					}
				},
				subSkill:{
					geipai:{
						trigger:{
							player:"phaseUseBegin",
						},
						filter:function(event,player){
							return player.countCards('he')>0;
						},
						direct:true,
						content:function(){
							'step 0'
							var next=player.chooseCardTarget({
								position:'he',
								selectCard:[1,2],
								filterCard:true,
								filterTarget:function(card,player,target){
									return target!=player;
								},
								ai1:function(card){
									return 8-get.value(card);
								},
								ai2:function(target){
									var player=_status.event.player;
									return get.attitude(player,target)>0;
								},
								prompt:get.prompt('szsny'),
								prompt2:'<center>将至多两张牌交给一名其他角色，然后本回合内你使用这些牌中所包含类型的牌时摸一张牌</center>',
							});
							'step 1'
							if(result.bool){
								player.logSkill('szsny');
								player.line(result.targets[0]);
								result.targets[0].gain(result.cards,player,'give');
								if(!player.hasSkill('szsny_draw')) player.addTempSkill('szsny_draw');
								player.storage.szsny_draw=[];
								for(var i=0;i<result.cards.length;i++){
									player.storage.szsny_draw.push(get.type(result.cards[i]));
								}
							}
						},
					},
					draw:{
						audio:"ext:神怒降世:1",
						onremove:function(player){
							delete player.storage.szsny_draw;
						},
						trigger:{
							player:"useCard",
						},
						filter:function(event,player){
							return player.storage.szsny_draw.contains(get.type(event.card));
						},
						forced:true,
						content:function(){
							player.draw();
						},
					},
					xiaoguo:{
						mark:true,
						marktext:"内应",
						intro:{
							name:"内应",
							content:"本回合可多出1张【杀】",
						},
						mod:{
							cardUsable:function(card,player,num){
								if(card.name=='sha') return num+1;
							},
						},
						sub:true,
					},
				},
				ai:{
					expose:0.6,
				},
			},
			sfzbd:{
				audio:"ext:神怒降世:2",
				group:"sfzbd_geipai",
				trigger:{
					player:'gainEnd',
				},
				filter:function(event,player){
					if(!event.source||event.source==player||!event.source.isIn()) return false;
					var evt=event.getl(event.source);
					return evt&&evt.cards2&&evt.cards2.length>0;
				},
				check:function(event,player){
					return get.attitude(player,event.source)>0;
				},
				logTarget:'source',
				content:function(){
					"step 0"
					var evt=trigger.getl(trigger.source);
					event.num=evt.cards2.length;
					if(event.num>3) event.num=3;
					"step 1"
					trigger.source.chooseControl('摸'+get.cnNumber(event.num)+'张牌并弃置'+get.cnNumber(event.num-1)+'张牌','获得一张装备牌或锦囊牌').set('prompt','〖报德〗：选择一项').set('ai',function(target){
						if(event.num<=2) return ['摸'+get.cnNumber(event.num)+'张牌并弃置'+get.cnNumber(event.num-1)+'张牌','获得一张装备牌或锦囊牌'].randomGet();
						else return '摸'+get.cnNumber(event.num)+'张牌并弃置'+get.cnNumber(event.num-1)+'张牌';
					});
					"step 2"
					if(result.control=='摸'+get.cnNumber(event.num)+'张牌并弃置'+get.cnNumber(event.num-1)+'张牌'){
						trigger.source.draw(event.num);
						if(event.num>1) trigger.source.chooseToDiscard('〖报德〗：弃置'+get.cnNumber(event.num-1)+'张牌',event.num-1,'he',true);
					}
					else{
						var leixing=['equip','trick'].randomGet();
						var card=get.cardPile2(function(card){return get.type(card)==leixing});
						if(card){
							trigger.source.gain(card,'gain2','log');
						}
					}
				},
				subSkill:{
					geipai:{
						usable:1,
						trigger:{
							global:'gainEnd',
						},
						filter:function(event,player){
							return player!=event.player&&_status.currentPhase!=event.player&&event.player.countCards('he');
						},
						direct:true,
						content:function(){
							"step 0"
							trigger.player.chooseCard('〖报德〗：是否交给'+get.translation(player)+get.cnNumber(Math.min(2,trigger.player.countCards('he')))+'张牌？',Math.min(2,trigger.player.countCards('he')),'he').set('ai',function(card){
								if(get.attitude(trigger.player,player)>0) return get.value(card);
								return false;
							});
							"step 1"
							if(result.bool){
								player.logSkill('sfzbd',trigger.player);
								player.gain(result.cards,trigger.player,'giveAuto');
							}
						},
						ai:{
							expose:0.4,
						},
						sub:true,
					},
				},
				ai:{
					expose:0.6,
				},
			},
			sfzjs:{
				audio:"ext:神怒降世:2",
				trigger:{
					player:"damageEnd",
					global:"gainAfter",
				},
				filter:function(event,player,name){
					if(name=='damageEnd') return event.source!=undefined&&event.num>0&&player!=event.source;
					else{
						var evt=event.getl(player);
						return evt&&evt.cards2&&evt.cards2.length>0&&player!=event.player;
					}
				},
				forced:true,
				logTarget:function(event){
					return event[event.name=='gain'?'player':'source'];
				},
				content:function(){
					"step 0"
					if(event.triggername=='damageEnd'){
						event.mubiao=trigger.source;
						event.num=trigger.num;
					}
					else{
						if(event.triggername=='gainAfter') event.mubiao=trigger.player;
						var evt=trigger.getl(player);
						event.num=evt.cards2.length;
					}
					if(event.num>4) event.num=4;
					"step 1"
					event.mubiao.chooseControl('失去'+get.cnNumber(event.num)+'点体力并令'+get.translation(player)+'摸'+get.cnNumber(event.num)+'张牌','摸'+get.cnNumber(event.num)+'张牌并将一半的手牌交给'+get.translation(player)).set('prompt','〖较失〗：选择一项').set('ai',function(target,player){
						if(get.attitude(player,event.mubiao)>0) return '摸'+get.cnNumber(event.num)+'张牌并将一半的手牌交给'+get.translation(player);
						else return '失去'+get.cnNumber(event.num)+'点体力并令'+get.translation(player)+'摸'+get.cnNumber(event.num)+'张牌';
					});
					"step 2"
					if(result.control=='失去'+get.cnNumber(event.num)+'点体力并令'+get.translation(player)+'摸'+get.cnNumber(event.num)+'张牌'){
						event.mubiao.loseHp(event.num);
						player.draw(event.num);
						event.finish();
					}
					else event.mubiao.draw(event.num);
					"step 3"
					if(event.mubiao.countCards('h')%2==0) event.shuliang=event.mubiao.countCards('h')/2;
					else event.shuliang=(event.mubiao.countCards('h')-1)/2;
					if(event.shuliang<1) event.shuliang=1;
					"step 4"
					event.mubiao.chooseCard('〖较失〗：交给'+get.translation(player)+get.cnNumber(event.shuliang)+'张牌',event.shuliang,'h',true);
					"step 5"
					if(result.bool){
						player.gain(result.cards,event.mubiao,'giveAuto');
					}
				},
			},
			sfzdc:{
				audio:"ext:神怒降世:2",
				trigger:{
					player:"phaseBegin",
				},
				filter:function(event,player,name){
					return player.countCards('h')>0;
				},
				direct:true,
				content:function(){
					"step 0"
					player.chooseTarget(get.prompt('sfzdc'),function(card,player,target){
						return target!=player;
					}).set('ai',function(target){
						return get.attitude(player,target)>0;
					});
					"step 1"
					if(result.bool){
						player.logSkill('sfzdc',result.targets[0]);
						result.targets[0].gain(player.getCards('h'),player,'giveAuto');
					}
				},
			},
			zhcx:{
				audio:"ext:神怒降世:2",
				init:function(player){
					if(!player.storage.zhcx1) player.storage.zhcx1=[];
					if(!player.storage.zhcx2) player.storage.zhcx2=[];
				},
				enable:"phaseUse",
				filter:function(event,player){
					if(player.countCards('he')<1) return false;
					var pai=player.getCards('he');
					var num=0;
					for(var i=0;i<pai.length;i++){
						if(!player.storage.zhcx1.contains(get.suit(pai[i]))) num++;
					}
					return num!=0&&game.hasPlayer(function(current){return !player.storage.zhcx2.contains(current)});
				},
				position:"he",
				filterCard:function(card,player){
					return !player.storage.zhcx1.contains(get.suit(card));
				},
				filterTarget:function(card,player,target){
					return !player.storage.zhcx2.contains(target);
				},
				check:function(card){
					return 8-get.value(card);
				},
				discard:false,
				lose:false,
				delay:false,
				content:function(){
					if(!player.hasSkill('zhcx_qingchu')) player.addTempSkill('zhcx_qingchu');
					player.storage.zhcx1.push(get.suit(cards[0]));
					player.storage.zhcx2.push(target);
					if(target!=player) target.gain(cards[0],player,'giveAuto');
					else player.discard(cards[0]);
					target.chooseUseTarget('sha',false,'nodistance').set('prompt','〖才行〗：是否使用一张无距离限制的【杀】？');
				},
				ai:{
					expose:0.4,
					threaten:0.4,
					order:function(){
						return get.order({name:'jiu'})+1;
					},
					result:{
						target:function(player,target){
							return 1;
						},
					},
				},
				subSkill:{
					qingchu:{
						silent:true,
						unique:true,
						forced:true,
						onremove:function(player){
							player.storage.zhcx1=[];
							player.storage.zhcx2=[];
						},
						sub:true,
						popup:false,
					},
				},
			},
			zhtc:{
				audio:"ext:神怒降世:1",
				trigger:{
					global:"gainEnd",
				},
				forced:true,
				logTarget:function(event){
					return event.player;
				},
				filter:function(event,player){
					if(player==event.player) return false;
					var evt=event.getl(player);
					return evt&&evt.cards2&&evt.cards2.length>0;
				},
				content:function(){
					var cards=trigger.getl(player).cards2;
					trigger.player.addGaintag(cards,'zhtc');
					if(!trigger.player.storage.zhtc_xiaoguo) trigger.player.storage.zhtc_xiaoguo=[];
					trigger.player.storage.zhtc_xiaoguo.push(player);
					if(!trigger.player.hasSkill('zhtc_xiaoguo')) trigger.player.addTempSkill('zhtc_xiaoguo',{player:'phaseAfter'});
					trigger.player.updateMarks('zhtc_xiaoguo');
				},
				subSkill:{
					xiaoguo:{
						mark:true,
						marktext:"推诚",
						intro:{
							name:"推诚",
							content:"对$造成的伤害+1",
						},
						mod:{
							aiOrder:function(player,card,num){
								if(card.hasGaintag('zhtc')) return num+2;
							},
						},
						trigger:{
							source:"damageBegin",
							player:"useCard1",
						},
						filter:function(event,player,name){
							if(name=='damageBegin') return player.storage.zhtc_xiaoguo.contains(event.player);
							else{
								return ['sha','jiu'].contains(event.card.name)&&event.player.hasHistory('lose',function(evt){
									if(evt.getParent()!=event) return false;
									for(var i in evt.gaintag_map){
										if(evt.gaintag_map[i].contains('zhtc')) return true;
									}
									return false;
								});
							}
						},
						firstDo:true,
						silent:true,
						unique:true,
						forced:true,
						content:function(){
							if(event.triggername=='damageBegin') trigger.num++;
							else{
								trigger.addCount=false;
								if(trigger.card.name=='sha'){
									if(player.stat[player.stat.length-1].card.sha>0){
										player.stat[player.stat.length-1].card.sha--;
									}
								}
								if(trigger.card.name=='jiu'){
									if(player.stat[player.stat.length-1].card.jiu>0){
										player.stat[player.stat.length-1].card.jiu--;
									}
								}
							}
						},
						onremove:function(player){
							player.removeGaintag('zhtc');
							delete player.storage.zhtc_xiaoguo;
						},
						sub:true,
					},
				},
			},
			spzmjd:{
				audio:"ext:神怒降世:2",
				group:"spzmjd_mark",
				init:function(player){
					if(!player.storage.spzmjd) player.storage.spzmjd=0;
				},
				mark:true,
				marktext:"绝斗",
				intro:{
					name:"绝斗",
					content:"以通过〖绝斗〗摸了#张牌",
				},
				trigger:{
					player:"useCard",
				},
				filter:function(event,player,name){
					if(_status.currentPhase!=player) return false;
					if(event.cards.filterInD().length<=0) return false;
					var history=player.getHistory('useCard');
					var evt=name=='useCard'?event:event.getParent();
					var num=0;
					var chufa1=[];
					var chufa2=[];
					for(var i=0;i<history.length;i++){
						if(history[i]!=evt){
							chufa1.push(get.suit(history[i].card));
							chufa2.push(history[i].card.name);
						}
					}
					if(!chufa1.contains(get.suit(event.card))) num+=2;
					if(!chufa2.contains(event.card.name)) num++;
					return num>0;
				},
				check:function(event,player){
					return true;
				},
				content:function(){
					var history=player.getHistory('useCard');
					var evt=event.triggername=='useCard'?trigger:trigger.getParent();
					var num=0;
					var chufa1=[];
					var chufa2=[];
					for(var i=0;i<history.length;i++){
						if(history[i]!=evt){
							chufa1.push(get.suit(history[i].card));
							chufa2.push(history[i].card.name);
						}
					}
					if(!chufa1.contains(get.suit(trigger.card))) num+=2;
					if(!chufa2.contains(trigger.card.name)) num++;
					player.draw(Math.min(2,num));
				},
				subSkill:{
					mark:{
						trigger:{
							player:["drawBegin","gainAfter","phaseUseEnd"],
						},
						filter:function(event,player,name){
							if(name=='drawBegin') return event.num>0&&player.storage.spzmjd%2==1;
							if(name=='gainAfter') return event.getParent(2).name=='spzmjd'&&event.cards&&event.cards.length>0;
							if(name=='phaseUseEnd') return player.storage.spzmjd%2==0;
						},
						charlotte:true,
						silent:true,
						unique:true,
						forced:true,
						content:function(){
							if(event.triggername=='drawBegin'){
								trigger.num--;
								player.popup('摸牌减一');
								game.log(player,'因技能','#g〖绝斗〗','摸牌数-1');
							}
							if(event.triggername=='gainAfter'){
								player.storage.spzmjd+=trigger.cards.length;
								player.updateMarks('spzmjd');
							}
							if(event.triggername=='phaseUseEnd'){
								player.skip('phaseUse');
								player.popup('跳过阶段');
								game.log(player,'因技能','#g〖绝斗〗','跳过下个出牌阶段');
							}
						},
						sub:true,
					},
				},
			},
			jmylfp:{
				audio:"ext:神怒降世:2",
				shaRelated:true,
				trigger:{
					player:"useCard",
				},
				filter:function(event,player){
					if(!['sha','juedou'].contains(event.card.name)) return false;
					if(!event.targets) return false;
					if(event.card.name=='sha') return !player.hasSkill('jmylfp_sha');
					else return !player.hasSkill('jmylfp_juedou');
				},
				direct:true,
				content:function(){
					'step 0'
					player.chooseTarget(get.prompt('jmylfp'),'选择发动目标',function(card,player,target){
						return _status.event.targets.contains(target);
					}).set('ai',function(target){
						return 2-get.attitude(_status.event.player,target);
					}).set('targets',trigger.targets);
					'step 1'
					if(result.bool){
						player.addTempSkill('jmylfp_'+trigger.card.name);
						event.mubiao=result.targets[0];
						event.num=event.mubiao.countCards('h',{suit:'diamond'});
						player.logSkill('jmylfp',event.mubiao);
					}
					else event.finish();
					'step 2'
					if(event.num>0){
						player.chooseToDiscard('〖凤魄〗：①弃置'+get.cnNumber(event.num)+'张牌令'+get.translation(trigger.card)+'对'+get.translation(event.mubiao)+'造成的伤害+1且不能被'+get.translation(event.mubiao)+'响应；②摸'+get.cnNumber(event.num)+'张牌本回合使用【杀】的次数+1',event.num,'he').set('ai',function(card){
							if(player.countCards('hs',{name:'sha'})>0){
								if(event.num<3) return false;
								else return 8-get.value(card);
							}
							else{
								if(event.num<2) return 8-get.value(card);
								else return event.mubiao.hp<=event.num;
							}
						});
					}
					else{
						event.mubiao.popup('没有♦牌','red');
						player.chooseControl('本回合使用【杀】的次数+1','令'+get.translation(trigger.card)+'不能被'+get.translation(event.mubiao)+'响应').set('prompt','〖凤魄〗：'+get.translation(event.mubiao)+'手牌中没有♦牌，选择一项').set('ai',function(target){
							if(player.countCards('hs',{name:'sha'})>0) return '本回合使用【杀】的次数+1';
							else return '令'+get.translation(trigger.card)+'不能被'+get.translation(event.mubiao)+'响应';
						});
					}
					'step 3'
					if(event.num==0) event.goto(5);
					'step 4'
					if(result.bool){
						event.mubiao.addTempSkill('jmylfp_damage');
						event.mubiao.storage.jmylfp_damage=trigger.card;
						event.mubiao.storage.jmylfp_damage2=event.num;
						trigger.directHit.addArray(game.filterPlayer(function(current){
							return current==event.mubiao;
						}));
					}
					else{
						player.draw(event.num);
						player.addTempSkill('jmylfp_'+trigger.card.name+'2');
					}
					event.finish();
					'step 5'
					if(result.control=='令'+get.translation(trigger.card)+'不能被'+get.translation(event.mubiao)+'响应'){
						trigger.directHit.addArray(game.filterPlayer(function(current){
							return current==event.mubiao;
						}));
					}
					else player.addTempSkill('jmylfp_'+trigger.card.name+'2');
				},
				ai:{
					"directHit_ai":true,
				},
				subSkill:{
					damage:{
						trigger:{
							player:"damageBegin",
						},
						filter:function(event,player){
							if(!event.card) return false;
							return event.card==player.storage.jmylfp_damage;
						},
						silent:true,
						unique:true,
						forced:true,
						content:function (){
							trigger.num+=player.storage.jmylfp_damage2;
							player.removeSkill('jmylfp_damage');
						},
						onremove:function(player){
							delete player.storage.jmylfp_damage;
							delete player.storage.jmylfp_damage2;
						},
						sub:true,
						popup:false,
					},
					sha:{
						silent:true,
						unique:true,
						forced:true,
						sub:true,
						popup:false,
					},
					"sha2":{
						mod:{
							cardUsable:function(card,player,num){
								if(card.name=='sha') return num+1;
							},
						},
						silent:true,
						unique:true,
						forced:true,
						sub:true,
						popup:false,
					},
					juedou:{
						silent:true,
						unique:true,
						forced:true,
						sub:true,
						popup:false,
					},
					"juedou2":{
						mod:{
							cardUsable:function(card,player,num){
								if(card.name=='sha') return num+1;
							},
						},
						silent:true,
						unique:true,
						forced:true,
						sub:true,
						popup:false,
					},
				},
			},
			exmdqx:{
				audio:"ext:神怒降世:2",
				trigger:{
					player:"phaseZhunbeiBegin",
				},
				content:function(){
					"step 0"
					event.cards=get.cards(2);
					var chooseButton=player.chooseButton(true,1,['〖潜袭〗：获得一张牌，然后将另一张牌置于牌堆顶或弃牌堆',event.cards]);
					chooseButton.set('ai',function(button){
						return get.value(button.link);
					});
					"step 1"
					event.huode=result.links[0];
					event.cards.remove(event.huode);
					player.chooseControl('牌堆顶','弃牌堆').set('prompt','〖潜袭〗：'+get.translation(event.cards)+'置于').set('ai',function(target){
						if(8-get.value(event.cards)>0) return '牌堆顶';
						else return '弃牌堆';
					});
					"step 2"
					if(result.control=='牌堆顶'){
						var card=event.cards.pop();
						card.fix();
						ui.cardPile.insertBefore(card,ui.cardPile.firstChild);
						game.updateRoundNumber();
					}
					else{
						game.cardsDiscard(event.cards);
						game.log(event.cards,'被置入了弃牌堆');
					}
					"step 3"
					player.gain(event.huode,'draw');
					player.chooseToDiscard('he',true);
					"step 4"
					if(!result.bool){
						event.finish();
						return;
					}
					player.draw('bottom');
					event.color=get.color(result.cards[0],result.cards[0].original=='h'?player:false);
					player.chooseTarget('〖潜袭〗：另一名角色本回合不能使用或打出'+get.translation(event.color)+'的手牌',function(card,player,target){
						return player!=target;
					},true).set('ai',function(target){
						return -get.attitude(_status.event.player,target);
					});
					"step 5"
					if(result.bool&&result.targets.length){
						result.targets[0].storage.exmdqx_xiaoguo=event.color;
						result.targets[0].addTempSkill('exmdqx_xiaoguo');
						player.line(result.targets[0]);
						game.addVideo('storage',result.targets[0],['exmdqx_xiaoguo',event.color]);
					}
				},
				subSkill:{
					xiaoguo:{
						mark:true,
						onremove:function(player){
							delete player.storage.exmdqx_xiaoguo;
						},
						mod:{
							"cardEnabled2":function(card,player){
								if(get.color(card)==player.storage.exmdqx_xiaoguo&&get.position(card)=='h') return false;
							},
						},
						intro:{
							content:function(color){
								return '不能使用或打出'+get.translation(color)+'的手牌';
							},
						},
						silent:true,
						unique:true,
						forced:true,
						sub:true,
						popup:false,
					},
				},
				ai:{
					"directHit_ai":true,
					skillTagFilter:function(player,tag,arg){
						if(!arg.target.hasSkill('exmdqx_xiaoguo')) return false;
						if(arg.card.name=='sha') return arg.target.storage.exmdqx_xiaoguo=='red'&&(!arg.target.getEquip('bagua')||player.hasSkillTag('unequip',false,{
							name:arg.card?arg.card.name:null,
							target:arg.target,
							card:arg.card
						})||player.hasSkillTag('unequip_ai',false,{
							name:arg.card?arg.card.name:null,
							target:arg.target,
							card:arg.card
						}));
						return arg.target.storage.exmdqx_xiaoguo=='black';
					},
				},
			},
			exmddz:{
				audio:"ext:神怒降世:2",
				trigger:{
					source:"damageBegin2",
				},
				filter:function(event,player){
					return event.card&&event.card.name=='sha';
				},
				check:function(event,player){
					var att=get.attitude(player,event.player);
					if(event.player.hp==event.player.maxHp) return att<0;
					if(event.player.hp==event.player.maxHp-event.num&&(event.player.maxHp<=3||event.player.hasSkillTag('maixie'))) return att<0;
					return att>0;
				},
				logTarget:"player",
				content:function(){
					trigger.player.loseMaxHp(trigger.num);
					trigger.cancel();
				},
			},
			spmzfs:{
				audio:"ext:神怒降世:5",
				mod:{
					maxHandcard:function(player,num){
						return num+3;
					},
				},
				enable:"phaseUse",
				usable:1,
				filterCard:true,
				discard:false,
				lose:false,
				delay:false,
				position:"h",
				check:function(card){
					return 8-get.value(card);
				},
				content:function(){
					"step 0"
					event.huode=[];
					event.card=cards[0];
					event.num=cards[0].number;
					event.wanjia=[];
					game.countPlayer(function(current){
						if(!current.hasSkill('spmzfs2')){
							current.addTempSkill('spmzfs2');
							event.wanjia.push(current);
						}
					});
					event.wanjia.sort(lib.sort.seat);
					event.count=0;
					event.zijimopai=0;
					var yuyin=event.card.number;
					if(event.card.name=='shandian'){
						event.num+=get.color(event.card)=='black'?15:16;
						yuyin=get.color(event.card);
					}
					if(event.num==1||event.num==2) event.num+=13;
					player.respond(event.card,'highlight','noOrdering');
					game.playAudio('..','extension','神怒降世','spmzfs_ddz_'+player.sex+'_'+yuyin+'.mp3');
					game.cardsDiscard(event.card);
					if(event.zijimopai<3) event.zijimopai++;
					if(!event.huode.contains(event.card)) event.huode.push(event.card);
					"step 1"
					if(player.countCards('h')==1) game.playAudio('..','extension','神怒降世','spmzfs_ddz_'+player.sex+'_yzp.mp3');
					if(player.countCards('h')==2) game.playAudio('..','extension','神怒降世','spmzfs_ddz_'+player.sex+'_lzp.mp3');
					event.count++;
					game.delay(2);
					"step 2"
					if(event.count<event.wanjia.length&&event.wanjia[event.count].isAlive()&&event.wanjia[event.count].hasSkill('spmzfs2')){
						event.wanjia[event.count].chooseCard('〖富商〗：是否打出一张比'+get.translation(event.card)+'大的手牌？','h',function(card){
							if(card.name=='shandian') return (card.number+(get.color(card)=='black'?15:16))>event.num;
							if(card.number==1||card.number==2) return card.number+13>event.num;
							return card.number>event.num;
						}).set('ai',function(card){
							return 20-get.value(card);
						});
					}
					else event.goto(4);
					"step 3"
					if(result.bool){
						event.card=result.cards[0];
						event.num=result.cards[0].number;
						var x=event.card.number;
						var yuyin=[x,'d1','d2','d3'].randomGet();
						if(event.card.name=='shandian'){
							event.num+=get.color(event.card)=='black'?15:16;
							yuyin=get.color(event.card);
						}
						if(event.num==1||event.num==2) event.num+=13;
						event.wanjia[event.count].respond(event.card,'highlight','noOrdering');
						game.playAudio('..','extension','神怒降世','spmzfs_ddz_'+event.wanjia[event.count].sex+'_'+yuyin+'.mp3');
						game.cardsDiscard(event.card);
						if(event.zijimopai<3&&event.wanjia[event.count]==player) event.zijimopai++;
						if(!event.huode.contains(event.card)) event.huode.push(event.card);
					}
					else{
						var str=['不要','过','要不起'].randomGet();
						var yuyin;
						if(str=='不要') yuyin='by';
						if(str=='过') yuyin=['g1','g2'].randomGet();
						if(str=='要不起') yuyin='ybq';
						game.playAudio('..','extension','神怒降世','spmzfs_ddz_'+event.wanjia[event.count].sex+'_'+yuyin+'.mp3');
						event.wanjia[event.count].popup(str);
						event.wanjia[event.count].removeSkill('spmzfs2');
					}
					"step 4"
					if(event.wanjia[event.count].isAlive()&&event.wanjia[event.count].hasSkill('spmzfs2')){
						if(event.wanjia[event.count].countCards('h')==1) game.playAudio('..','extension','神怒降世','spmzfs_ddz_'+event.wanjia[event.count].sex+'_yzp.mp3');
						if(event.wanjia[event.count].countCards('h')==2) game.playAudio('..','extension','神怒降世','spmzfs_ddz_'+event.wanjia[event.count].sex+'_lzp.mp3');
					}
					event.count++;
					game.delay(2);
					"step 5"
					if(game.countPlayer(function(current){
						return current.hasSkill('spmzfs2');
					})==1){
						event.wanjia=game.filterPlayer(function(current){
							return current.hasSkill('spmzfs2');
						});
					}
					else{
						if(event.count<event.wanjia.length) event.goto(2);
					}
					"step 6"
					event.count=0;
					if(event.wanjia.length>1) event.goto(2);
					game.delay(2);
					"step 7"
					event.huode2=[];
					for(var i=0;i<ui.discardPile.childNodes.length;i++){
						var current=ui.discardPile.childNodes[i];
						if(event.huode.contains(current)&&!event.huode2.contains(current)&&event.huode2.length<event.huode.length) event.huode2.push(current);
					}
					"step 8"
					if(event.huode2.length>0){
						event.wanjia[0].chooseControl("获得所有玩家于本次〖富商〗打出的所有牌","摸三张牌").set("prompt","〖富商〗：选择一项").set('ai',function(target){
							if(event.huode2.length>3) return "获得所有玩家于本次〖富商〗打出的所有牌";
							else return "摸三张牌";
						});
					}
					else{
						event.wanjia[0].draw(3);
						if(event.wanjia[0]!=player){
							player.logSkill("spmzfs");
							player.draw(event.zijimopai);
						}
						event.finish();
					}
					"step 9"
					if(result.control=="获得所有玩家于本次〖富商〗打出的所有牌") event.wanjia[0].gain(event.huode2,'gain2','log');
					else event.wanjia[0].draw(3);
					if(event.wanjia[0]!=player){
						player.logSkill("spmzfs");
						player.draw(event.zijimopai);
					}
				},
				ai:{
					order:function(){
						return get.order({name:'sha'})-1;
					},
					result:{
						player:1,
					},
				},
			},
			spmzfs2:{
				silent:true,
				unique:true,
				forced:true,
				popup:false,
			},
			jcccx:{
				audio:"ext:神怒降世:2",
				frequent:true,
				trigger:{
					player:"damageEnd",
				},
				content:function() {
					'step 0'
					var cards = get.cards(4);
					var guanXing = decadeUI.content.chooseGuanXing(player, cards, cards.length, null, 4, false);
					guanXing.doubleSwitch = true;
					guanXing.caption = '〖称象〗';
					guanXing.header2 = '获得的牌';
					guanXing.callback = function(){
						var num = 0;
						for (var i = 0; i < this.cards[1].length; i++) {
							num += get.number(this.cards[1][i]);
						}
            
						return num > 0 && num <= 13;
					};
        
					game.broadcast(function(player, cards, callback){
						if (!window.decadeUI) return;
						var guanXing = decadeUI.content.chooseGuanXing(player, cards, cards.length, null, 4, false);
						guanXing.caption = '〖称象〗';
						guanXing.header2 = '获得的牌';
						guanXing.callback = callback;
					}, player, cards, guanXing.callback);
        
					var player = event.player;
					event.switchToAuto = function(){
						var cards = guanXing.cards[0];
						var num, sum, next;
						var index = 0;
						var results = [];
            
						for (var i = 0; i < cards.length; i++) {
							num = 0;
							sum = 0;
							next = i + 1;
							for (var j = i; j < cards.length; j++) {
								if (j != i && j < next)
									continue;
                    
								num = sum + get.number(cards[j]);
								if (num <= 13) {
									sum = num;
									if (!results[index]) results[index] = [];
									results[index].push(cards[j]);
								}
            	 	       
								if (j >= cards.length - 1) index++;
							}
                
							if (results[index] && results[index].length == cards.length) break;
						}
            
						var costs = [];
						for (var i = 0; i < results.length; i++) {
							costs[i] = {
								value: 0,
								index: i,
							};
							for (var j = 0; j < results[i].length; j++) {
								costs[i].value += get.value(results[i][j], player);
								// 如果有队友且有【仁心】且血量不低，优先选择装备牌
								if (player.hasFriend() && player.hasSkill('renxin') && get.type(results[i][j]) == 'equip' && player.hp > 1) {
									costs[i].value += 5;
								}
              		      
								// 如果自己有延时牌且没有无懈可击，优先选择无懈可击
								if (player.node.judges.childNodes.length > 0 && !player.hasWuxie() && results[i][j] == 'wuxie') {
									costs[i].value += 5;
								}
							}
						}
            
						costs.sort(function(a, b) {
							return b.value - a.value;
						});
            
						var time = 500;
						var result = results[costs[0].index];
            
						for (var i = 0; i < result.length; i++) {
							setTimeout(function(move, finished){
								guanXing.move(move, guanXing.cards[1].length, 1);
								if (finished) guanXing.finishTime(1000);
							}, time, result[i], (i >= result.length - 1));
							time += 500;
						}
					};
        
					if (event.isOnline()) {
						event.player.send(function(){
							if (!window.decadeUI && decadeUI.eventDialog) _status.event.finish();
						}, event.player);
            
						event.player.wait();
						decadeUI.game.wait();
					} else if (!event.isMine()) {
						event.switchToAuto();
					}
					'step 1'
					if (event.result && event.result.bool) {
						player.gain(event.cards2, 'log', 'gain2');
						if(event.cards1.length>0){
							player.chooseTarget('〖称象〗：是否令一名其他角色获得'+get.translation(event.cards1)+'？',function(card,player,target){
								return target!=player;
							}).set('ai',function(target){
								if(target.hasJudge('lebu')) return 0;
								var att=get.attitude(_status.event.player,target);
								if(att<3) return 0;
								if(target.hasSkillTag('nogain')) att/=10;
								if(target.hasSha()&&_status.event.sha){
									att/=5;
								}
								if(event.wuxie&&target.needsToDiscard(1)){
									att/=5;
								}
								return att/(1+get.distance(player,target,'absolute'));
							});
						}
					}
					'step 2'
					if(result.bool){
						event.mubiao=result.targets[0];
						player.line(event.mubiao);
						event.mubiao.gain(event.cards1,'gain2','log');
					}
					else{
						game.cardsDiscard(event.cards1);
						event.finish();
					}
					'step 3'
					if(event.cards1&&event.mubiao.countCards('he')>event.cards1.length){
						var num=Math.min(event.mubiao.countCards('he')-event.cards1.length,event.cards1.length);
						event.mubiao.chooseToDiscard("〖称象〗：弃置"+get.cnNumber(num)+"张牌",'he',num,true);
					} 
					
				},
				ai:{
					maixie:true,
					"maixie_hp":true,
					effect:{
						target:function(card, player, target) {
							if (get.tag(card, 'damage')) {
								if (player.hasSkillTag('jueqing', false, target)) return [1, -2];
								if (!target.hasFriend()) return;
								if (target.hp >= 4) return [1, 2];
								if (target.hp == 3) return [1, 1.5];
								if (target.hp == 2) return [1, 0.5];
							}
						},
					},
				},
			},
			jccrx:{
				audio:"ext:神怒降世:2",
				trigger:{
					global:"dying",
				},
				filter:function(event,player){
					return event.player!=player&&event.player.hp<=0&&player.countCards('h')>0;
				},
				check:function(event,player){
					if(get.attitude(player,event.player)<0) return false;
					if(player.countCards('h',{name:['tao','jiu']})+event.player.hp<0) return false;
					return true;
				},
				logTarget:"player",
				content:function(){
					'step 0'
					player.turnOver();
					'step 1'
					trigger.player.gain(player.getCards('h'),'give',player);
					'step 2'
					trigger.player.recover();
				},
			},
			jcakk:{
				audio:"ext:神怒降世:2",
				trigger:{
					global:"useCardToTargeted",
				},
				filter:function(event,player){
					return event.card.name=='sha'&&(get.distance(player,event.target)<=1||get.distance(event.target,player)<=1)&&event.target.isIn();
				},
				check:function(event,player){
					if(!player.hasSkill('jcakk_jilu')) return true;
					else return get.attitude(player,event.target)>=0;
				},
				content:function(){
					"step 0"
					event.diyici=false;
					if(!player.hasSkill('jcakk_jilu')){
						event.diyici=true;
						player.addTempSkill('jcakk_jilu');
					}
					player.draw();
					if(trigger.target!=player){
						if(event.diyici==true){
							var panduan=get.attitude(player,trigger.target)<=0?0:1;
							player.chooseCard('he','〖慷忾〗：是否交给'+get.translation(trigger.target)+'一张牌？').set('ai',function(card){
								if(panduan==0) return false;
								if(get.position(card)=='e') return -1;
								if(card.name=='shan') return 20;
								if(get.type(card)=='equip') return 15;
								return 8-get.value(card);
							});
						}
						else{
							player.chooseCard(true,'he','〖慷忾〗：交给'+get.translation(trigger.target)+'一张牌').set('ai',function(card){
								if(get.position(card)=='e') return -1;
								if(card.name=='shan') return 20;
								if(get.type(card)=='equip') return 15;
								return 8-get.value(card);
							});
						}
					}
					else event.finish();
					"step 1"
					if(result.bool){
						player.line(trigger.target);
						trigger.target.gain(result.cards,player,'give');
						event.card=result.cards[0];
					}
					else event.finish();
					"step 2"
					if(trigger.target.getCards('h').contains(card)&&get.type(card)=='equip') trigger.target.chooseUseTarget(card);
				},
				subSkill:{
					jilu:{
						silent:true,
						unique:true,
						forced:true,
						popup:false,
						sub:true,
					},
				},
				ai:{
					threaten:1.1,
				},
			},
			spxspj:{
				audio:"ext:神怒降世:2",
				characterList:["caocao","simayi","xiahoudun","zhangliao","xuzhu","guojia","zhenji","liubei","guanyu","zhangfei","zhugeliang","zhaoyun","machao","huangyueying","sunquan","ganning","lvmeng","huanggai","zhouyu","daqiao","luxun","sunshangxiang","huatuo","lvbu","diaochan","huaxiong","re_yuanshu","gongsunzan","xf_yiji","zhangjiao","yuji","snjs_old_zhoutai","snjs_old_caoren","xiahouyuan","xiaoqiao","huangzhong","weiyan","dianwei","xunyu","pangtong","sp_zhugeliang","taishici","yanwen","re_yuanshao","pangde","caopi","xuhuang","menghuo","zhurong","re_lusu","sunjian","dongzhuo","jiaxu","dengai","zhanghe","liushan","jiangwei","zhangzhang","sunce","caiwenji","zuoci"],
				wei:["caocao","simayi","xiahoudun","zhangliao","xuzhu","guojia","zhenji","snjs_old_caoren","xiahouyuan","dianwei","xunyu","caopi","xuhuang","dengai","zhanghe"],
				shu:["liubei","guanyu","zhangfei","zhugeliang","zhaoyun","machao","huangyueying","xf_yiji","huangzhong","weiyan","pangtong","sp_zhugeliang","menghuo","zhurong","liushan","jiangwei"],
				wu:["sunquan","ganning","lvmeng","huanggai","zhouyu","daqiao","luxun","sunshangxiang","snjs_old_zhoutai","xiaoqiao","taishici","re_lusu","sunjian","zhangzhang","sunce"],
				qun:["huatuo","lvbu","diaochan","huaxiong","re_yuanshu","gongsunzan","zhangjiao","yuji","yanwen","re_yuanshao","pangde","dongzhuo","jiaxu","caiwenji","zuoci"],
				init:function(player){
					player.addSkill('snjs_xingtai_skill');
					if(!player.storage.spxspj_biao) player.storage.spxspj_biao=[];
					else{
						if(player.storage.spxspj_biao.length>0&&!player.hasSkill(player.storage.spxspj_biao[0])) player.addSkill(player.storage.spxspj_biao[0]);
						if(player.storage.spxspj_li.length>0&&player.hasSkill(player.storage.spxspj_li[0])) player.removeSkill(player.storage.spxspj_li[0]);
					}
					if(!player.storage.spxspj_li) player.storage.spxspj_li=[];
					else{
						if(player.storage.spxspj_li.length>0&&!player.hasSkill(player.storage.spxspj_li[0])) player.addSkill(player.storage.spxspj_li[0]);
						if(player.storage.spxspj_biao.length>0&&player.hasSkill(player.storage.spxspj_biao[0])) player.removeSkill(player.storage.spxspj_biao[0]);
					}
				},
				trigger:{
					global:["gameStart","die"],
					player:["enterGame","useCardAfter"],
				},
				filter:function(event,player,name){
					if(name=="die") return event.player!=player;
					else return true;
				},
				unique:true,
				forced:true,
				content:function(){
					"step 0"
					if(event.triggername!="useCardAfter"){
						event.wujiangpai=[];
						for(var i=0;i<lib.skill.spxspj.characterList.length;i++){
							event.wujiangpai.push(lib.skill.spxspj.characterList[i]);
						}
						event.mubiao=game.filterPlayer(function(current){
							return current!=player;
						});
						player.line(event.mubiao);
						event.count=0;
						if(player.storage.spxspj_biao.length>0&&player.hasSkill(player.storage.spxspj_biao[0])) player.removeSkill(player.storage.spxspj_biao[0]);
						if(player.storage.spxspj_li.length>0&&player.hasSkill(player.storage.spxspj_li[0])) player.removeSkill(player.storage.spxspj_li[0]);
						player.storage.spxspj_biao=[];
						player.storage.spxspj_li=[];
					}
					else{
						if(player.hasSkill('snjs_xingtai_skill_biao')){
							player.removeSkill('snjs_xingtai_skill_biao');
							if(player.storage.spxspj_li.length>0&&!player.hasSkill(player.storage.spxspj_li[0])) player.addSkill(player.storage.spxspj_li[0]);
							if(player.storage.spxspj_biao.length>0&&player.hasSkill(player.storage.spxspj_biao[0])) player.removeSkill(player.storage.spxspj_biao[0]);
						}
						else{
							player.removeSkill('snjs_xingtai_skill_li');
							if(player.storage.spxspj_biao.length>0&&!player.hasSkill(player.storage.spxspj_biao[0])) player.addSkill(player.storage.spxspj_biao[0]);
							if(player.storage.spxspj_li.length>0&&player.hasSkill(player.storage.spxspj_li[0])) player.removeSkill(player.storage.spxspj_li[0]);
						}
						event.finish();
					}
					"step 1"
					if(event.wujiangpai.length>0){
						var tihuan=event.wujiangpai.randomGet();
						if(event.mubiao[event.count].name2!=undefined) event.mubiao[event.count].reinit(event.mubiao[event.count].name2,tihuan);
						if(event.wujiangpai.contains(tihuan)) event.wujiangpai.remove(tihuan);
					}
					"step 2"
					if(event.wujiangpai.length>0){
						var tihuan=event.wujiangpai.randomGet();
						if(event.mubiao[event.count].name!=undefined) event.mubiao[event.count].reinit(event.mubiao[event.count].name,tihuan);
						if(event.wujiangpai.contains(tihuan)) event.wujiangpai.remove(tihuan);
					}
					"step 3"
					if(event.triggername!="die") event.mubiao[event.count].hp=event.mubiao[event.count].maxHp;
					if(lib.skill.spxspj.wei.contains(event.mubiao[event.count].name)) event.mubiao[event.count].group='wei';
					if(lib.skill.spxspj.shu.contains(event.mubiao[event.count].name)) event.mubiao[event.count].group='shu';
					if(lib.skill.spxspj.wu.contains(event.mubiao[event.count].name)) event.mubiao[event.count].group='wu';
					if(lib.skill.spxspj.qun.contains(event.mubiao[event.count].name)) event.mubiao[event.count].group='qun';
					"step 4"
					event.count++;
					"step 5"
					if(event.count<event.mubiao.length) event.goto(1);
					else event.xxxxx=0;
					"step 6"
					event.list=[];
					game.log(event.wujiangpai,event.wujiangpai.length);
					if(event.wujiangpai.length>0){
						for(var i=0;i<event.wujiangpai.length;i++){
							event.list.push(event.wujiangpai[i]);
						}
					}
					else event.finish();
					"step 7"
					var list=event.list.randomGets(Math.min(3,event.list.length));
					for(var i=0;i<list.length;i++){
						if(event.wujiangpai.contains(list[i])) event.wujiangpai.remove(list[i]);
					}
					var skills=[];
					for(var i of list){
						skills.addArray((lib.character[i][3]||[]).filter(function(skill){
							var info=get.info(skill);
							return info&&!info.zhuSkill&&!info.limited&&!info.juexingji&&!info.hiddenSkill&&!info.charlotte&&!info.dutySkill;
						}));
					}
					if(skills.length>0){
						var str=event.xxxxx==0?"为表形态选择一个技能":"为里形态选择一个技能";
						player.chooseControl(skills).set('prompt','〖评鉴〗：'+str+'<br><center>武将牌：'+get.translation(list)+'</center>').set('ai',function(){return skills.randomGet()});
					}
					"step 8"
					if(event.xxxxx==0) player.storage.spxspj_biao.push(result.control);
					else player.storage.spxspj_li.push(result.control);
					if(player.hasSkill('snjs_xingtai_skill_biao')){
						if(player.storage.spxspj_biao.length>0&&!player.hasSkill(player.storage.spxspj_biao[0])) player.addSkill(player.storage.spxspj_biao[0]);
						if(player.storage.spxspj_li.length>0&&player.hasSkill(player.storage.spxspj_li[0])) player.removeSkill(player.storage.spxspj_li[0]);
					}
					else{
						if(player.storage.spxspj_li.length>0&&!player.hasSkill(player.storage.spxspj_li[0])) player.addSkill(player.storage.spxspj_li[0]);
						if(player.storage.spxspj_biao.length>0&&player.hasSkill(player.storage.spxspj_biao[0])) player.removeSkill(player.storage.spxspj_biao[0]);
					}
					"step 9"
					event.xxxxx++;
					"step 10"
					if(event.xxxxx<2) event.goto(6);
				},
			},
			exsqzh:{
				audio:"ext:神怒降世:2",
				enable:"phaseUse",
				usable:2,
				filter:function(event,player){
					return !player.hasSkill('exsqzh_jilu');
				},
				position:"he",
				filterCard:function(card,player,event){
					event=event||_status.event;
					if(typeof event!='string') event=event.getParent().name;
					var mod=game.checkMod(card,player,event,'unchanged','cardDiscardable',player);
					if(mod!='unchanged') return mod;
					return true;
				},
				discard:false,
				lose:false,
				delay:false,
				selectCard:[1,Infinity],
				check:function(card){
					var player=_status.event.player;
					if(get.position(card)=='h'&&!player.countCards('h','du')&&(player.hp>2||!player.countCards('h',function(card){
						return get.value(card)>=8;
					}))){
						return 1;
					}
					return 6-get.value(card)
				},
				content:function(){
					'step 0'
					player.discard(cards);
					event.num=1;
					var hs=player.getCards('h');
					if(!hs.length) event.num=0;
					for(var i=0;i<hs.length;i++){
						if(!cards.contains(hs[i])){
							event.num=0;break;
						}
					}
					if(event.num==0) player.addTempSkill('exsqzh_jilu');
					'step 1'
					if(!player.hasSkill('exsqzh_jilu2')){
						player.draw(event.num+cards.length);
						player.addTempSkill('exsqzh_jilu2')
					}
					else player.draw(cards.length);
				},
				subSkill:{
					jilu:{
						silent:true,
						unique:true,
						forced:true,
						sub:true,
						popup:false,
					},
					jilu2:{
						silent:true,
						unique:true,
						forced:true,
						sub:true,
						popup:false,
					},
				},
				ai:{
					order:function(item,player){
						if(!player.getStat('skill').exsqzh) return get.order({name:'tao'})-1;
						return 1;
					},
					result:{
						player:1,
					},
					threaten:1.55,
				},
			},
			exsqjy:{
				audio:"ext:神怒降世:2",
				global:"exsqjy2",
				unique:true,
				trigger:{
					target:"taoBegin",
				},
				zhuSkill:true,
				forced:true,
				filter:function(event,player){
					if(event.player==player) return false;
					if(!player.hasZhuSkill('jiuyuan')) return false;
					if(event.player.group!='wu') return false;
					return true;
				},
				content:function(){
					trigger.baseDamage++;
				},
			},
			exsqjy2:{
				audio:'jiuyuan',
				forceaudio:true,
				trigger:{player:'useCardToPlayer'},
				filter:function(event,player){
					if(event.card.name!='tao') return false;
					if(player.group!='wu') return false;
					if(event.target!=player) return false;
					return game.hasPlayer(function(target){
						return player!=target&&!event.targets.contains(target)&&target.isDamaged()&&target.hp<player.hp&&target.hasZhuSkill('exsqjy',player);
					});
				},
				direct:true,
				content:function(){
					'step 0'
					player.chooseTarget(get.prompt2('exsqjy'),function(card,player,target){
						return player!=target&&!_status.event.targets.contains(target)&&target.isDamaged()&&target.hp<player.hp&&target.hasZhuSkill('exsqjy',player);
					}).set('ai',function(target){
						return get.attitude(_status.event.player,target);
					}).set('targets',trigger.targets);
					'step 1'
					if(result.bool){
						var target=result.targets[0];
						target.logSkill('exsqjy');
						player.line('exsqjy2',target,'green');
						trigger.getParent().targets.remove(player);
						trigger.getParent().targets.push(target);
						player.draw();
					}
				}
			},
			exccjx:{
				audio:"ext:神怒降世:2",
				group:"exccjx_add",
				trigger:{
					player:"damageBegin4",
				},
				check:function(event,player){
					return true;
				},
				content:function(){
					"step 0"
					if(get.itemtype(trigger.cards)=='cards'&&get.position(trigger.cards[0],true)=='o'){
						player.chooseControl("摸牌","获得"+get.translation(trigger.cards)).set('prompt','〖奸雄〗：选择一项').set('ai',function(target){
							if(get.attitude(player,trigger.player)>=0) return '令'+get.translation(trigger.player)+'摸一张牌';
							return '令'+get.translation(trigger.cards)+'无效并摸一张牌';
						});
					}
					else{
						player.draw(trigger.num*2);
						event.finish();
					}
					"step 1"
					if(result.control=="获得"+get.translation(trigger.cards)){
						player.gain(trigger.cards,"gain2").gaintag.add('exccjx');
						player.draw((trigger.num*2)-trigger.cards.length,'nodelay');
					}
					else player.draw(trigger.num*2,'nodelay');
				},
				subSkill:{
					add:{
						unique:true,
						silent:true,
						forced:true,
						mod:{
							ignoredHandcard:function(card,player){
								if(card.hasGaintag('exccjx')){
									return true;
								}
							},
							cardDiscardable:function(card,player,name){
								if(name=='phaseDiscard'&&card.hasGaintag('exccjx')){
									return false;
								}
							},
						},
						onremove:function(player){
							player.removeGaintag('exccjx');
						},
						sub:true,
						popup:false,
					},
				},
				ai:{
					maixie:true,
					"maixie_hp":true,
					effect:{
						target:function (card,player,target){
							if(player.hasSkillTag('jueqing',false,target)) return [1,-1];
							if(get.tag(card,'damage')&&player!=target) return [1,0.6];
						},
					},
				},
			},
			exccxc:{
				audio:"ext:神怒降世:2",
				trigger:{
					source:"damageSource",
				},
				usable:1,
				filter:function(event,player){
					return event.card;
				},
				check:function(event,player){
					return true;
				},
				content:function(){
					if(get.itemtype(trigger.cards)=='cards'&&get.position(trigger.cards[0],true)=='o') player.gain(trigger.cards,'gain2','log');
					player.draw();
					if(!player.hasSkill('exccxc_xiaoguo')) player.addTempSkill('exccxc_xiaoguo');
				},
				subSkill:{
					xiaoguo:{
						mod:{
							cardUsable:function(card,player,num){
								if(card.name=='sha') return num+1;
							},
						},
						sub:true,
					},
				},
			},
			excchj:{
				audio:"ext:神怒降世:2",
				unique:true,
				zhuSkill:true,
				trigger:{
					player:"damageBegin2",
				},
				filter:function(event,player){
					if(!player.hasZhuSkill('excchj')) return false;
					return game.hasPlayer(function(current){
						return current!=player&&current.group=='wei';
					});
				},
				check:function(event,player){
					return true;
				},
				content:function(){
					"step 0"
					event.i=0;
					event.juese=game.filterPlayer();
					event.juese.remove(player);
					event.juese.sort(lib.sort.seat);
					if(event.juese.length<1) event.finish();
					"step 1"
					if(!(event.i<event.juese.length)) event.finish();
					"step 2"
					var ren=player;
					var ren2=event.juese[event.i];
					event.juese[event.i].chooseBool('〖护驾〗：是否替'+get.translation(player)+'承受此伤害？').ai=function(event,player){
						if(get.attitude(ren,ren2)<0) return false;
						else{
							if(ren.hp<=trigger.num) return true;
							if(ren2.hasSkillTag('maihp')&&ren.hp<ren2.hp) return true;
							return false;
						}
					};
					"step 3"
					if(result.bool){
						event.juese[event.i].line(player);
						trigger.player=event.juese[event.i];
						event.finish();
					}
					else{
						event.i++;
						event.goto(1);
					}
				},
				ai:{
					skillTagFilter:function(player){
						if(player.storage.hujiaing) return false;
						if(!player.hasZhuSkill('hujia')) return false;
						return game.hasPlayer(function(current){
							return current!=player&&current.group=='wei';
						});
					},
				},
			},
			
			snjs_oldjushou:{
				audio:"ext:神怒降世:2",
				trigger:{
					player:"phaseJieshuBegin",
				},
				check:function(event,player){
					return true;
				},
				content:function(){
					player.draw(3);
					player.turnOver();
				},
			},
			snjs_oldbuqu:{
				audio:"ext:神怒降世:2",
				init:function(player){
					if(!player.storage.snjs_oldbuqu) player.storage.snjs_oldbuqu=[];
					if(!player.storage.snjs_oldbuqu1) player.storage.snjs_oldbuqu1=[];
					player.addSkill('snjs_oldbuqu2');
				},
				trigger:{
					player:"dieBegin",
				},
				forced:true,
				priority:99,
				firstDo:true,
				filter:function(event,player){
					return player.hp<=0;
				},
				content:function(){
					"step 0"
					event.card=get.cards(Math.max(1,player.storage.snjs_oldbuqu22-player.storage.snjs_oldbuqu2));
					player.$gain2(event.card);
					player.markAuto('snjs_oldbuqu',event.card);
					game.cardsGotoSpecial(event.card).cards;
					player.markSkill('snjs_oldbuqu');
					event.count=0;
					"step 1"
					for(var i=0;i<event.card.length;i++){
						if(!player.storage.snjs_oldbuqu1.contains(get.number(event.card[i]))) player.storage.snjs_oldbuqu1.push(get.number(event.card[i]));
						else player.addSkill('snjs_oldbuqu3');
					}
					"step 2"
					if(!player.hasSkill('snjs_oldbuqu3')) trigger.cancel();
					else player.showCards(player.storage.snjs_oldbuqu,'不屈');
				},
				intro:{
					content:"cards",
					onunmark:function(storage,player){
						if(storage&&storage.length){
							player.$throw(storage,1000);
							game.cardsDiscard(storage);
							delete player.storage.snjs_oldbuqu;
						}
					},
				},
			},
			snjs_oldbuqu2:{
				trigger:{
					player:"changeHp",
				},
				init:function(player){
					if(!player.storage.snjs_oldbuqu22) player.storage.snjs_oldbuqu22=0;
					player.storage.snjs_oldbuqu2=player.hp;
				},
				content:function(){
					"step 0"
					if(player.storage.snjs_oldbuqu2<0) player.storage.snjs_oldbuqu22=player.storage.snjs_oldbuqu2;
					else player.storage.snjs_oldbuqu22=0;
					"step 1"
					player.storage.snjs_oldbuqu2=player.hp;
				},
				forced:true,
				popup:false,
				unique:true,
				silent:true,
				forceDie:true,
				charlotte:true,
			},
			snjs_oldbuqu3:{
				trigger:{
					player:"die",
				},
				filter:function(event,player,name){
					return player.storage.snjs_oldbuqu&&player.storage.snjs_oldbuqu.length>0;
				},
				content:function(){
					event.card=player.storage.snjs_oldbuqu;
					for(var i=0;i<event.card.length;i++){
						player.storage.snjs_oldbuqu.remove(event.card[i]);
					}
					player.$throw(event.card,1000);
					game.delayx();
					game.addVideo('storage',player,['snjs_oldbuqu',get.cardsInfo(player.storage.snjs_oldbuqu),'cards']);
					game.cardsDiscard(event.card);
					game.log(event.card,'被置入了弃牌堆');
					player.unmarkSkill('snjs_oldbuqu');
					delete player.storage.snjs_oldbuqu;
				},
				forced:true,
				unique:true,
				silent:true,
				charlotte:true,
			},
			jbdx:{
				audio:"ext:神怒降世:2",
				shaRelated:true,
				trigger:{
					player:"useCard",
				},
				filter:function(event,player){
					if(!event.targets) return false;
					return get.tag(event.card,'damage')&&game.hasPlayer(function(current){
						return current!=player&&get.distance(current,player)>1&&event.targets.contains(current);
					});
				},
				check:function(event,player){
					return game.filterPlayer(function(current){
						return current!=player&&get.distance(current,player)>1&&event.targets.contains(current);
					});
				},
				logTarget:function(event,player){
					return game.filterPlayer(function(current){
						return current!=player&&get.distance(current,player)>1&&event.targets.contains(current);
					});
				},
				content:function(){
					"step 0"
					event.mubiao=game.filterPlayer(function(current){
						return current!=player&&get.distance(current,player)>1&&trigger.targets.contains(current);
					});
					event.i=0;
					"step 1"
					var ziji=player;
					var duixiang=event.mubiao[event.i];
					event.mubiao[event.i].chooseToDiscard('〖独行〗：弃置一张牌，并令'+get.translation(trigger.card)+'对你造成的伤害+1，取消则令'+get.translation(player)+'摸一张牌','he').set('ai',function(card){
						if(get.attitude(ziji,duixiang)>0) return false;
						else return 8-get.value(card);
					});
					"step 2"
					if(result.bool){
						if(!event.mubiao[event.i].hasSkill('jbdx_damage')) event.mubiao[event.i].addTempSkill('jbdx_damage');
						event.mubiao[event.i].storage.jbdx_damage=trigger.card;
					}
					else player.draw();
					"step 3"
					event.i++;
					"step 4"
					if(event.i<event.mubiao.length) event.goto(1);
				},
				subSkill:{
					damage:{
						trigger:{
							player:"damageBegin",
							global:"useCardEnd",
						},
						filter:function(event,player){
							if(!event.card) return false;
							return event.card==player.storage.jbdx_damage;
						},
						silent:true,
						unique:true,
						forced:true,
						content:function (){
							if(event.triggername=="damageBegin") trigger.num++;
							player.removeSkill('jbdx_damage');
						},
						onremove:function(player){
							delete player.storage.jbdx_damage;
						},
						sub:true,
						popup:false,
					},
				},
				ai:{
					expose:0.4,
					threaten:0.4,
				},
			},
			xhlmt:{
				audio:"ext:神怒降世:2",
				init:function(player){
					if(!player.storage.xhlmt_wei) player.storage.xhlmt_wei=false;
					if(!player.storage.xhlmt_shu) player.storage.xhlmt_shu=false;
				},
				trigger:{
					global:["damageEnd","gameDrawAfter"],
					player:"enterGame",
				},
				filter:function(event,player,name){
					if(name=="damageEnd") return player.storage.xhlmt_shu==false&&event.source!=undefined&&event.source.group=="shu";
					else return player.storage.xhlmt_wei==false;
				},
				intro:{
					name:"命途",
					content:function(storage,player,skill){
						var str1=player.storage.xhlmt_wei==false?"未发动</center><br>":"已发动</center><br>";
						var str2=player.storage.xhlmt_shu==false?"未发动</center><br>":"已发动</center>";
						return "<center>『魏』："+str1+"<center>『蜀』："+str2;
					},
				},
				mark:true,
				unique:true,
				forced:true,
				direct:true,
				juexingji:true,
				content:function(){
					"step 0"
					if(event.triggername=="damageEnd"){
						player.logSkill('xhlmt_shu');
						player.storage.xhlmt_shu=true;
						player.group='shu';
					}
					else{
						player.logSkill('xhlmt_wei');
						player.storage.xhlmt_wei=true;
						player.group='wei';
					}
					"step 1"
					player.updateMarks('xhlmt');
					if(player.storage.xhlmt_shu==true&&player.storage.xhlmt_wei==true) player.awakenSkill('xhlmt');
				},
				subSkill:{
					wei:{
						audio:"xhlmt",
						skillAnimation:true,
						animationColor:"water",
						sub:true,
					},
					shu:{
						audio:"xhlmt",
						skillAnimation:true,
						animationColor:"orange",
						sub:true,
					},
				},
			},
			xhljr:{
				audio:"ext:神怒降世:2",
                group:"xhljr_shu",
				trigger:{
					player:["damageEnd","phaseDiscardEnd"],
				},
				filter:function(event,player,name){
					if(name=="phaseDiscardEnd"){
						var cards=[];
						player.getHistory('lose',function(evt){
							if(evt&&evt.type=='discard'&&evt.getParent('phaseDiscard')==event&&evt.hs) cards.addArray(evt.hs);
						});
						return cards.length>1;
					}
					else return true;
				},
				check:function(event,player){
					return true;
				},
				content:function(){
					"step 0"
					event.huodepai=[];
					"step 1"
					var card1=get.cardPile2(function(card){
						return !event.huodepai.contains(card)&&get.type(card)=='equip';
					});
					if(card1&&player.group=="wei") event.huodepai.push(card1);
					var card2=get.cardPile2(function(card){
						return !event.huodepai.contains(card)&&get.type(card)=='basic';
					});
					if(card2) event.huodepai.push(card2);
					var card3=get.cardPile2(function(card){
						return !event.huodepai.contains(card)&&get.type(card)=='trick';
					});
					if(card3) event.huodepai.push(card3);
					"step 2"
					if(event.huodepai.length>0) player.gain(event.huodepai,'gain2','log');
				},
				ai:{
					maixie:true,
					"maixie_hp":true,
					effect:{
						target:function(card, player, target) {
							if (get.tag(card, 'damage')) {
								if (player.hasSkillTag('jueqing', false, target)) return [1, -2];
								if (!target.hasFriend()) return;
								if (target.hp >= 4) return [1, 2];
								if (target.hp == 3) return [1, 1.5];
								if (target.hp == 2) return [1, 0.5];
							}
						},
					},
				},
				subSkill:{
					shu:{
						trigger:{
							player:"useCard",
						},
						filter:function(event,player){
							return event.card.name=='sha'&&player.countCards('he')>0;
						},
						filterx:function(event,player){
							var info=get.info(event.card);
							if(info.allowMultiple==false) return false;
							return true;
						},
						direct:true,
						content:function(){
							"step 0"
							if(player.group=="shu") var x=3;
							else var x=1;
							player.chooseToDiscard(get.prompt('xhljr'),'he',[1,x]).set('ai',function(card){
								return 8-get.value(card)&&card.name!='sha';
							});
							"step 1"
							if(result.bool){
								player.logSkill('xhljr');
								event.shuliang=result.cards.length;
								event.shuliang2=1;
								if(event.shuliang==1) event.shuliang2=0;
								event.mopaiqipai=0;
								event.hengzhi=0;
							}
							else event.finish();
							"step 2"
							event.videoId = lib.status.videoId++;
							var func = function(card, id, bool) {
								var list = ["令XXX不计入使用次数","摸YYY张牌并弃置ZZZ张牌","横置至多YYY名角色", ];
								if(event.shuliang>1) var jieshi='〖巾戎〗：请选择一至'+get.cnNumber(event.shuliang)+'项';
								else var jieshi='〖巾戎〗：请选择一项';
								var choiceList = ui.create.dialog(jieshi, 'forcebutton');
								choiceList.videoId = id;
								for (var i = 0; i < list.length; i++) {
									list[i] = list[i].replace(/XXX/g, card);
									list[i] = list[i].replace(/YYY/g, get.cnNumber(event.shuliang));
									list[i] = list[i].replace(/ZZZ/g, get.cnNumber(event.shuliang2));
									var str = '<div class="popup text" style="width:calc(100% - 10px);display:inline-block">';
									str += list[i];
									str += '</div>';
									var next = choiceList.add(str);
									next.firstChild.addEventListener(lib.config.touchscreen ? 'touchend': 'click', ui.click.button);
									next.firstChild.link = i;
									for (var j in lib.element.button) {
										next[j] = lib.element.button[j];
									}
									choiceList.buttons.add(next.firstChild);
								}
								return choiceList;
							};
							if (player.isOnline2()) {
								player.send(func, get.translation(trigger.card), event.videoId, lib.skill.xhljr_shu.filterx(trigger, player));
							}
							event.dialog = func(get.translation(trigger.card), event.videoId, lib.skill.xhljr_shu.filterx(trigger, player));
							if (player != game.me || _status.auto) {
								event.dialog.style.display = 'none';
							}
							var next = player.chooseButton();
							next.set('dialog', event.videoId);
							next.set('forced', true);
							next.set('selectButton', [1, event.shuliang]);
							next.set('filterButton',function(button) {
								return true;
							});
							next.set('bool1', lib.skill.xhljr_shu.filterx(trigger, player));
							next.set('ai',function(button) {
								var player = _status.event.player;
								switch (button.link) {
									case 0:{
										if (player.countCards('hes',{name:'sha'})>0) return true;
										else return 0;
									}
									case 1:{
										return true;
									}
									case 2:{
										return true;
									}
								}
							});
							"step 3"
							if (player.isOnline2()) {
								player.send('closeDialog', event.videoId);
							}
							event.dialog.close();
							for (var i = 0; i < result.links.length; i++) {
								game.log(player, '选择了', '#g〖巾戎〗', '的', '#y选项' + get.cnNumber(result.links[i] + 1, true));
								if(result.links[i]==0){
									if(trigger.addCount!==false){
										trigger.addCount=false;
										trigger.player.getStat().card.sha--;
									}
								}
								if(result.links[i]==1) event.mopaiqipai++;
								if(result.links[i]==2) event.hengzhi++;
							}
							"step 4"
							if(event.mopaiqipai!=0){
								player.draw(event.shuliang);
								if(event.shuliang2>0) player.chooseToDiscard("〖巾戎〗：弃置"+get.cnNumber(event.shuliang2)+"张牌","he",true);
							}
							if(event.hengzhi!=0){
								player.chooseTarget("〖巾戎〗：横置至多"+get.cnNumber(event.shuliang)+"名角色",[1,event.shuliang],true).set('ai',function(target){
									var player = _status.event.player;
									return get.attitude(player,target)<0;
								});
							}
							else event.finish();
							"step 5"
							if(result.bool){
								var hengzhimubiao=result.targets;
								player.line(hengzhimubiao);
								for(var i=0;i<hengzhimubiao.length;i++){
									hengzhimubiao[i].link(true);
								}
							};
						},
						sub:true,
					},
				},
			},
			shct:{
				audio:"ext:神怒降世:2",
				trigger:{
					global:"damageEnd",
				},
				filter:function(event,player){
					if(player.countCards('hes')<1) return false;
					if(!event.player.isAlive()) return false;
					if(event.source==undefined) return true;
					else return event.source!=undefined&&event.source!=player;
				},
				direct:true,
				content:function(){
					"step 0"
					event.pai=player.getCards('he');
					event.keyiyong=[];
					for(var i=0;i<event.pai.length;i++){
						var name=get.name(event.pai[i]);
						if(get.type(event.pai[i])=='equip') event.keyiyong.push(event.pai[i]);
						if(['shunshou','bingliang','sha'].contains(name)&&trigger.player!=player) event.keyiyong.push(event.pai[i]);
						else{
							if(lib.filter.cardUsable({name:name},player,event.getParent())&&player.canUse({name:name,cards:event.pai[i]},trigger.player)) event.keyiyong.push(event.pai[i]);
							else if(lib.filter.cardUsable({name:name},trigger.player,event.getParent())&&trigger.player.canUse({name:name,cards:event.pai[i]},trigger.player)) event.keyiyong.push(event.pai[i]);
						}
					}
					"step 1"
					var ziji=player;
					var mubiao=trigger.player;
					player.chooseCard(get.prompt('shct'),'<center>对'+get.translation(trigger.player)+'使用一张牌</center>','hes',function(card){
						return event.keyiyong.contains(card);
					}).set('ai',function(card){
						if(get.attitude(ziji,mubiao)>0) return get.effect(mubiao,{name:get.name(card)},ziji,mubiao);
						else return -get.effect(mubiao,{name:get.name(card)},ziji,mubiao);
					});
					"step 2"
					if(result.bool){
						player.logSkill('shct',trigger.player);
						player.useCard(result.cards[0],trigger.player,true);
					}
					else event.finish();
					"step 3"
					var ziji=player;
					var mubiao=trigger.player;
					if(trigger.player.isAlive()) trigger.player.chooseBool('〖从讨〗：是否令'+get.translation(player)+'摸一张牌').set('ai',function(){
						return get.attitude(ziji,mubiao)>=0;
					});
					else event.finish();
					"step 4"
					if(result.bool){
						trigger.player.line(player);
						player.draw();
					}
				},
			},
			spxywz:{
				audio:"ext:神怒降世:2",
				trigger:{
					global:"gameDrawAfter",
					player:"enterGame",
				},
				filter:function(event,player){
					return game.hasPlayer(function(current){
						return current!=player&&!current.hasSkill('spxyzh_mark');
					});
				},
				direct:true,
				forced:true,
				content:function(){
					'step 0'
					player.chooseTarget(true,"〖王佐〗：令一名其他角色获得「王佐」标记",lib.translate.spxywz_info,function(card,player,target){
						return target!=player&&!target.hasSkill('spxyzh_mark');
					}).ai=function(target){
						var player=_status.event.player;
						return get.attitude(player,target);
					};
					'step 1'
					if(result.bool){
						var target=result.targets[0];
						player.logSkill('spxywz',target);
						if(!target.hasSkill('spxywz_mark')) target.addSkill('spxywz_mark');
						if(!target.storage.spxywz_mark) target.storage.spxywz_mark=[];
						target.storage.spxywz_mark.push(player);
						target.updateMarks('spxywz');
					}
				},
				subSkill:{
					mark:{
						trigger:{
							global:"drawAfter",
						},
						mark:true,
						intro:{
							name:"王佐",
							content:"$",
						},
						init:function(player){
							if(!player.storage.spxywz_mark) player.storage.spxywz_mark=[];
						},
						filter:function(event,player){
							return player.storage.spxywz_mark.contains(event.player);
						},
						content:function(){
							trigger.player.logSkill("spxywz",player);
							player.draw(trigger.num);
						},
						silent:true,
						unique:true,
						forced:true,
						sub:true,
						popup:false,
						sub:true,
					},
				},
			},
			spxyzh:{
				audio:"ext:神怒降世:2",
				trigger:{
					global:"phaseBegin",
				},
				filter:function(event,player){
					return game.hasPlayer(function(current){
						return !current.hasSkill('spxyzh_mark')&&!current.hasSkill('spxywz_mark');
					})&&game.countPlayer(function(current){
						return current.hasSkill('spxyzh_mark');
					})<1;
				},
				direct:true,
				forced:true,
				content:function(){
					'step 0'
					player.chooseTarget(true,"〖忠汉〗：令一名其他角色获得「忠汉」标记",lib.translate.spxyzh_info,function(card,player,target){
						return !target.hasSkill('spxyzh_mark')&&!target.hasSkill('spxywz_mark');
					}).ai=function(target){
						var player=_status.event.player;
						return get.attitude(player,target);
					};
					'step 1'
					if(result.bool){
						var target=result.targets[0];
						player.logSkill('spxyzh',target);
						target.addSkill('spxyzh_mark');
					}
				},
				subSkill:{
					mark:{
						trigger:{
							player:"damageBegin4",
						},
						mark:true,
						intro:{
							name:"忠汉",
							content:"拥有「王佐」标记的角色无法对你造成伤害",
						},
						filter:function(event,player){
							return event.source!=undefined&&event.source.hasSkill("spxywz_mark");
						},
						content:function(){
							player.logSkill("spxyzh",trigger.source);
							trigger.cancel();
						},
						ai:{
							effect:{
								target:function(card,player,target,current){
									if(get.tag(card,'damage')&&player.hasSkill('spxywz_mark')) return 'zeroplayertarget';
								},
							},
						},
						silent:true,
						unique:true,
						forced:true,
						sub:true,
						popup:false,
						sub:true,
					},
				},
			},
			exzjls:{
				audio:"ext:神怒降世:2",
				locked:false,
				trigger:{
					player:["phaseZhunbeiBegin","phaseJieshuBegin"],
				},
				frequent:true,
				content:function(){
					"step 0"
					if(!player.hasSkill('exzjls_add')) player.addTempSkill('exzjls_add');
					"step 1"
					player.judge(function(card){
						if(get.color(card)=='black') return 1.5;
						else return -1.5;
					});
					"step 2"
					event.color=result.color;
					event.card=result.card;
					player.gain(event.card,'gain2','log').gaintag.add('exzjls');
					"step 3"
					if(event.color=='black'){
						if(event.triggername=="phaseJieshuBegin"){
							player.chooseToDiscard(get.prompt2('exzjls'),'h',function(card){
								return !card.hasGaintag('exzjls');
							}).set('ai',function(card){
								return 8-get.value(card);
							});
						}
						else player.chooseBool(get.prompt2('exzjls')).ai=function(event,player){
							return true;
						};
					}
					else event.finish();
					"step 4"
					if(result.bool){
						player.logSkill('exzjls');
						event.goto(1);
					}
				},
				subSkill:{
					add:{
						mod:{
							ignoredHandcard:function(card,player){
								if(card.hasGaintag('exzjls')){
									return true;
								}
							},
							cardDiscardable:function(card,player,name){
								if(name=='phaseDiscard'&&card.hasGaintag('exzjls')){
									return false;
								}
							},
						},
						onremove:function(player){
							player.removeGaintag('exzjls');
						},
						sub:true,
					},
				},
			},
			exzjqg:{
				audio:"ext:神怒降世:2",
				mod:{
					aiValue:function(player,card,num){
						if(get.name(card)!='shan'&&get.color(card)!='black') return;
						var cards=player.getCards('hs',function(card){
							return get.name(card)=='shan'||get.color(card)=='black';
						});
						cards.sort(function(a,b){
							return (get.name(b)=='shan'?1:2)-(get.name(a)=='shan'?1:2);
						});
						var geti=function(){
							if(cards.contains(card)){
								return cards.indexOf(card);
							}
							return cards.length;
						};
						if(get.name(card)=='shan') return Math.min(num,[6,4,3][Math.min(geti(),2)])*0.6;
						return Math.max(num,[6.5,4,3][Math.min(geti(),2)]);
					},
					aiUseful:function(){
						return lib.skill.exzjqg.mod.aiValue.apply(this,arguments);
					},
				},
				locked:false,
				enable:["chooseToRespond","chooseToUse"],
				filterCard:function(card){
					return get.color(card)=='black';
				},
				position:"hes",
				viewAs:{
					name:"shan",
				},
				viewAsFilter:function(player){
					if(!player.countCards('hes',{color:'black'})) return false;
				},
				prompt:"将一张黑色牌当作【闪】使用或打出",
				check:function(){return 1},
				ai:{
					order:2,
					respondShan:true,
					skillTagFilter:function(player){
						if(!player.countCards('hes',{color:'black'})) return false;
					},
					effect:{
						target:function(card,player,target,current){
							if(get.tag(card,'respondShan')&&current<0) return 0.6;
						},
					},
					basic:{
						useful:[7,5.1,2],
						value:[7,5.1,2],
					},
					result:{
						player:1,
					},
				},
			},
			exzglgx:{
				audio:"ext:神怒降世:2",
				group:"exzglgx_add",
				init:function(player){
					if(!player.storage.exzglgx) player.storage.exzglgx=0;
				},
				frequent:true,
				trigger:{
					player:["phaseZhunbeiBegin","phaseJieshuBegin"],
				},
				content:function(){
					'step 0'
					player.storage.exzglgx++;
					if(!player.hasSkill('exzglgx_jilu')) player.addTempSkill('exzglgx_jilu');
					var player = event.player;
					if(player.isUnderControl()) game.modeSwapPlayer(player);
        
					var cards = get.cards(5);
					var guanXing = decadeUI.content.chooseGuanXing(player, cards, cards.length, null, cards.length);
					game.broadcast(function(player, cards){
						if (!window.decadeUI) return;
						decadeUI.content.chooseGuanXing(player, cards, cards.length, null, cards.length);
					}, player, cards);
        
					event.switchToAuto = function(){
						var cheats = [];
						var cards = guanXing.cards[0].concat();
						var judges;
            
						var next = player.getNext();
						var friend = player;
						if (event.triggername == 'phaseJieshuBegin') {
							friend = next;
							judges = friend.node.judges.childNodes;
							if (get.attitude(player, friend) < 0) friend = null;
						} else {
							judges = player.node.judges.childNodes;
						}
            
						if (judges.length) {
							cheats = decadeUI.get.cheatJudgeCards(cards, judges, friend != null);
						}
                
						if (cards.length && cheats.length == judges.length) {
							for (var i = 0; i >= 0 && i < cards.length; i++) {
								if (friend) {
									if (get.value(cards[i], friend) >= 5) {
										cheats.push(cards[i]);
										cards.splice(i, 1)
									}
								} else {
									if (get.value(cards[i], next) < 4) {
										cheats.push(cards[i]);
										cards.splice(i, 1)
									}
								}
							}
						}
            
						var time = 500;
						for (var i = 0; i < cheats.length; i++) {
							setTimeout(function(card, index, finished){
								guanXing.move(card, index, 0);
								if (finished) guanXing.finishTime(1000);
							}, time, cheats[i], i, (i >= cheats.length - 1) && cards.length == 0);
							time += 500;
						}
            
						for (var i = 0; i < cards.length; i++) {
							setTimeout(function(card, index, finished){
								guanXing.move(card, index, 1);
								if (finished) guanXing.finishTime(1000);
							}, time, cards[i], i, (i >= cards.length - 1));
							time += 500;
						}
					};
        
					if (event.isOnline()) {
						// 判断其他玩家是否有十周年UI，否则直接给他结束，不知道有没有效果
						event.player.send(function(){
							if (!window.decadeUI && decadeUI.eventDialog) _status.event.finish();
						}, event.player);
            
						// 等待其他玩家操作
						event.player.wait();
						// 暂停主机端游戏
						decadeUI.game.wait();
					} else if (!event.isMine()) {
						event.switchToAuto();
						/*
						注释说明
						var guanXing = decadeUI.content.chooseGuanXing(
						控制观星的玩家,                      // 必选
						[顶部初始化的牌],                // 必选，可为null，但底部不能为null
						顶部允许控制的牌数范围,            // 可选，不填根据初始化的牌数量
						[底部初始化的牌],                // 必选，可为null，但顶部不能为null
						底部允许控制的牌数范围,            // 可选，不填根据初始化的牌数量
						第一个参数的玩家是否可见);          // 可选，不设置则根据控制观星的玩家来显示
            
			            // undefined 均为可设置，其他为只读或调用
						var properties = {
						caption: undefined,            // 设置标题
						header1: undefined,            // 牌堆顶的文字
						header2: undefined,            // 牌堆底的文字
						cards: [[],[]],                // 获取当前观星的牌，不要瞎改
						callback: undefined,        // 回调函数，返回 true 表示可以点击【确认】按钮，例：guanXing.callback = function(){ return guanXing.cards[1].length == 1; }
						// 注意：此值一旦设置，观星finish后不会自己置顶牌堆顶和牌堆底，需要自行实现
						infohide: undefined,        // 设置上面第1个参数的玩家是否可见观星的牌
						confirmed: undefined,        // 是否按下确认按钮
						doubleSwitch: undefined,    // 双击切换牌
						finishTime:function(time),    // 指定的毫秒数后完成观星
						finish:function(),            // 观星完成，在下一个step 中，可以通过 event.cards1 与 event.cards2 访问观星后的牌
						swap:function(s, t),        // 交换观星中的两个牌
						switch:function(card),       // 将观星中的牌切换到另一方
						move:function(card, index, moveDown)    // 移动观星的牌到指定的一方位置
						}
						*/
					}
					'step 1'
					player.popup(get.cnNumber(event.num1) + '上' + get.cnNumber(event.num2) + '下');
					game.log(player, '将' + get.cnNumber(event.num1) + '张牌置于牌堆顶，' + get.cnNumber(event.num2) +'张牌置于牌堆底');
					game.updateRoundNumber();
					'step 2'
					var num=player.countCards('h',function(card){
						return card.hasGaintag('exzglgx');
					});
					if(player.storage.exzglgx!=0&&player.storage.exzglgx>num) player.draw(player.storage.exzglgx-num,'bottom');
				},
				subSkill:{
					add:{
						trigger:{
							player:"gainBegin",
						},
						unique:true,
						silent:true,
						forced:true,
						filter:function(event,player){
							return event.getParent(2).name=='exzglgx';
						},
						content:function(){
							trigger.gaintag.add('exzglgx');
						},
						onremove:function(player){
							player.removeGaintag('exzglgx');
						},
						sub:true,
						popup:false,
					},
					jilu:{
						silent:true,
						unique:true,
						forced:true,
						onremove:function(player){
							player.storage.exzglgx=0;
						},
						sub:true,
						popup:false,
					},
				},
			},
			exzglkc:{
				audio:"ext:神怒降世:2",
				trigger:{
					player:["damageBegin4","loseHpBegin"],
				},
				filter:function(event,player){
					return player.countCards('h',function(card){
						return !card.hasGaintag('exzglgx');
					})<1;
				},
				forced:true,
				content:function(){
					trigger.cancel();
				},
				ai:{
					effect:{
						target:function(card,player,target){
							if(!target.hasFriend()) return;
							if(target.hasSkill('exzglgx')){
								if(get.tag(card,'damage')&&target.countCards('h')<=2) return 'zeroplayertarget';
							}
							else{
								if(get.tag(card,'damage')&&target.countCards('h')<1) return 'zeroplayertarget';
							}
						},
					},
				},
			},
			exssxxj:{
				audio:"ext:神怒降世:2",
				trigger:{
					player:"loseAfter",
					global:["equipAfter","addJudgeAfter","gainAfter","loseAsyncAfter"],
				},
				frequent:true,
				filter:function(event,player){
					var evt=event.getl(player);
					return evt&&evt.player==player&&evt.es&&evt.es.length>0;
				},
				content:function(){
					"step 0"
					event.count=trigger.getl(player).es.length;
					"step 1"
					event.count--;
					player.draw(2);
					"step 2"
					if(event.count>0){
						player.chooseBool(get.prompt2('exssxxj')).set('frequentSkill','exssxxj').ai=lib.filter.all;
					}
					"step 3"
					if(result.bool){
						player.logSkill('exssxxj');
						event.goto(1);
					}
				},
				ai:{
					noe:true,
					reverseEquip:true,
					effect:{
						target:function(card,player,target,current){
							if(get.type(card)=='equip'&&!get.cardtag(card,'gifts')) return [1,3];
						},
					},
				},
			},
			exssxjy:{
				audio:"ext:神怒降世:2",
				enable:"phaseUse",
				filterCard:true,
				usable:1,
				position:"he",
				filter:function(event,player){
					return player.countCards('he')>0;
				},
				check:function(card){
					var player=_status.event.player;
					if(get.position(card)=='e'){
						var subtype=get.subtype(card);
						if(!game.hasPlayer(function(current){
							return current!=player&&current.hp!=player.hp&&get.attitude(player,current)>0&&!current.countCards('e',{subtype:subtype});
						})){
							return 0;
						}
						if(player.countCards('h',{subtype:subtype})) return 20-get.value(card);
						return 10-get.value(card);
					}
					else{
						if(player.countCards('e')) return 0;
						if(player.countCards('h',{type:'equip'})) return 0;
						return 8-get.value(card);
					}
				},
				filterTarget:function(card,player,target){
					var card=ui.selected.cards[0];
					if(!card) return false;
					if(get.position(card)=='e'&&!target.isEmpty(get.subtype(card))) return false;
					return true;
				},
				discard:false,
				delay:false,
				lose:false,
				content:function(){
					'step 0'
					if(get.position(cards[0])=='e') event._result={index:0};
					else if(get.type(cards[0])!='equip'||!target.isEmpty(get.subtype(cards[0]))) event._result={index:1};
					else player.chooseControl().set('choiceList',[
						'将'+get.translation(cards[0])+'置入'+get.translation(target)+'的装备区',
						'弃置'+get.translation(cards[0]),
					]).ai=function(){return 1};
					'step 1'
					if(result.index==0){
						player.$give(cards,target,false);
						target.equip(cards[0]);
					}
					else{
						player.discard(cards);
					}
					'step 2'
					if(player.hp>target.hp){
						if(target.isDamaged()) target.recover();
					}
					else if(player.hp<target.hp){
						if(player.isDamaged()) player.recover();
					}
					else if(player.hp==target.hp){
						if(player.isDamaged()) player.recover();
						if(target.isDamaged()) target.recover();
					}
					game.asyncDraw([player,target]);
				},
				ai:{
					order:function(){
						var player=_status.event.player;
						var es=player.getCards('e');
						for(var i=0;i<es.length;i++){
							if(player.countCards('h',{subtype:get.subtype(es[i])})) return 10;
						}
						return 2;
					},
					result:{
						target:function(player,target){
							var goon=function(){
								var es=player.getCards('e');
								for(var i=0;i<es.length;i++){
									if(player.countCards('h',{subtype:get.subtype(es[i])})) return true;
								}
								return false;
							}
							if(player.hp<target.hp){
								if(player.isHealthy()){
									if(!player.needsToDiscard(1)||goon()) return 0.1;
									return 0;
								}
								return 1.5;
							}
							if(player.hp>target.hp){
								if(target.isHealthy()){
									if(!player.needsToDiscard(1)||goon()) return 0.1;
									return 0;
								}
								return 1;
							}
							return 0;
						},
					},
				},
			},
			zbyf:{
				audio:"ext:神怒降世:2",
				trigger:{
					player:"gainAfter",
				},
				filter:function(event,player){
					return event.cards&&event.cards.length>1;
				},
				check:function(event,player){
					return true;
				},
				content:function(){
					player.draw();
				},
				ai:{
					threaten:0.2,
				},
			},
			zbqy:{
				audio:"ext:神怒降世:2",
				usable:2,
				trigger:{
					player:"drawEnd",
				},
				filter:function(event,player){
					return _status.currentPhase==player;
				},
				check:function(event,player){
					return true;
				},
				content:function(){
					"step 0"
					event.cards=get.cards(2*player.hp);
					player.showCards(event.cards,'清雅');
					"step 1"
					var chooseButton=player.chooseButton(true,1,['〖清雅〗：获得其中的一张牌',event.cards]);
					chooseButton.set('ai',function(button){
						return get.value(button.link);
					});
					"step 2"
					event.huode=result.links[0];
					player.gain(event.huode,'gain2','log');
				},
				ai:{
					threaten:0.4,
				},
			},
			xpzt:{
				audio:"ext:神怒降世:2",
				trigger:{
					player:"phaseBegin",
				},
				direct:true,
				content:function(){
					"step 0"
					player.chooseTarget(get.prompt2('xpzt'),function(card,player,target){
						return player!=target;
					},function(target){
						var att=get.attitude(_status.event.player,target);
						return att>0;
					});
					"step 1"
					if(result.bool){
						player.logSkill('xpzt',result.targets);
						player.skip('phaseDraw');
						player.addTempSkill('xpzt_mark',{player:'phaseDrawSkipped'});
						game.asyncDraw([player,result.targets[0]]);
					}
					else event.finish();
					"step 2"
					player.chooseTarget("〖忠谭〗：令一名其他角色跳过下个摸牌阶段并弃置一张牌",true,function(card,player,target){
						return player!=target;
					},function(target){
						var att=get.attitude(_status.event.player,target);
						return 1-att;
					});
					"step 3"
					if(result.bool){
						player.line(result.targets);
						result.targets[0].skip('phaseDraw');
						result.targets[0].addTempSkill('xpzt_mark',{player:'phaseDrawSkipped'});
						if(result.targets[0].countCards('he')) result.targets[0].chooseToDiscard("〖忠谭〗：弃置一张牌","he",true);
					}
				},
				subSkill:{
					mark:{
						mark:true,
						intro:{
							content:"跳过摸牌阶段",
						},
						sub:true,
					},
				},
				ai:{
					threaten:0.6,
				},
			},
			wtaw:{
				audio:"ext:神怒降世:2",
				enable:["chooseToRespond","chooseToUse"],
				group:"wtaw_draw",
				filterCard:function(card,player){
					return get.suit(card)=='heart';
				},
				position:"hes",
				viewAs:{
					name:"sha",
				},
				prompt:"将一张红牌当作【杀】使用或打出",
				viewAsFilter:function (player){
					if(get.zhu(player,'shouyue')){
						if(!player.countCards('he')) return false;
					}
					else{
						if(!player.countCards('he',{color:'red'})) return false;
					}
				},
				check:function(card){return 6-get.value(card)},
				subSkill:{
					draw:{
						audio:"wtaw",
						trigger:{
							global:["useCard","respond"],
						},
						filter:function(event,player){
							return !(event.card.isCard)&&event.cards.filterInD().length>0;
						},
						check:function(event,player){
							return get.attitude(player,event.player)>0;
						},
						logTarget:function(event){
							return event.player;
						},
						content:function(){
							trigger.player.draw((trigger.player.name=='guansuo'||trigger.player.name1=='guansuo'||trigger.player.name2=='guansuo')?2:1);
						},
						sub:true,
					},
				},
				ai:{
					skillTagFilter:function(player){
						if(get.zhu(player,'shouyue')){
							if(!player.countCards('he')) return false;
						}
						else{
							if(!player.countCards('he',{color:'red'})) return false;
						}
					},
					basic:{
						useful:[5,1],
						value:[5,1],
					},
					order:function(item,player){
						if(player.hasSkillTag('presha',true,null,true)) return 10;
						if(lib.linked.contains(get.nature(item))) return (player.getCardUsable('sha')>1?3:3.1);
						return 3.05;
					},
					result:{
						target:function(player,target,card,isLink){
							if(!isLink&&player.hasSkill('jiu')){
								if(!target.hasSkillTag('filterDamage',null,{
									player:player,
									card:card,
									jiu:true,
								})){
									if(get.attitude(player,target)>0){
										return -7;
									}
									else{
										return -4;
									}
								}
								return -0.5;
							}
							return -1.5;
						},
					},
					tag:{
						respond:1,
						respondShan:1,
						damage:function(card){
							if(card.nature=='poison') return;
							return 1;
						},
						natureDamage:function(card){
							if(card.nature) return 1;
						},
						fireDamage:function(card,nature){
							if(card.nature=='fire') return 1;
						},
						thunderDamage:function(card,nature){
							if(card.nature=='thunder') return 1;
						},
						poisonDamage:function(card,nature){
							if(card.nature=='poison') return 1;
						},
					},
					canLink:function(player,target,card){
						if(!target.isLinked()&&!player.hasSkill('wutiesuolian_skill')) return false;
						if(target.mayHaveShan()&&!player.hasSkillTag('directHit_ai',true,{
							target:target,
							card:card,
						},true)) return false;
						if(player.hasSkill('jueqing')||target.hasSkill('gangzhi')||target.hasSkill('gangzhi')) return false;
						return true;
					},
				},
			},
			wyyh:{
				audio:"ext:神怒降世:2",
				enable:"phaseUse",
				usable:1,
				filterTarget:function (card,player,target){
					return target.hasSex('male');
				},
				content:function(){
					"step 0"
					event.mubiao=targets[0];
					"step 1"
					var num=game.countPlayer(function(current){
						return get.distance(event.mubiao,current)<=1&&current!=event.mubiao;
					});
					event.num1=Math.min(5,num);
					event.num2=Math.min(8,event.mubiao.getGlobalFrom()+num);
					"step 2"
					event.mubiao.draw((event.mubiao.name=='guansuo'||event.mubiao.name1=='guansuo'||event.mubiao.name2=='guansuo')?event.num2:event.num1);
				},
				ai:{
					order:20,
					expose:0.5,
					result:{
						target:function(player,target){
							return 1;
						},
					},
				},
			},
			yscy:{
				audio:"ext:神怒降世:2",
				trigger:{
					player:"phaseZhunbeiBegin",
				},
				check:function(event,player){
					return true;
				},
				content:function(){
					'step 0'
					var ziji=player;
					player.chooseCard("〖承遗〗：将一张手牌当作【万箭齐发】使用取消则令本回合摸牌阶段多摸一张牌且手牌上限+1","h").set('ai',function(card){
						var fadong=game.countPlayer(function(current){
							if(get.attitude(ziji,current)>0) return get.effect(current,{name:'wanjian'},ziji,current);
							else return -get.effect(current,{name:'wanjian'},ziji,current);
						});
						if(fadong>0) return 6-get.value(card);
						else return false;
					});
					'step 1'
					if(result.bool) player.chooseUseTarget({name:'wanjian'},result.cards,true).viewAs=true;
					else player.addTempSkill('yscy_xiaoguo');
				},
				subSkill:{
					xiaoguo:{
						mod:{
							maxHandcardBase:function(player,num){
								return num+1;
							},
						},
						trigger:{
							player:"phaseDrawBegin2",
						},
						filter:function(event,player){
							return !event.numFixed;
						},
						silent:true,
						popup:false,
						content:function(){
							trigger.num++;
						},
						sub:true,
					},
				},
			},
			ysdp:{
				mod:{
					globalTo:function(from,to,distance){
						return distance+Math.min(2,to.getDamagedHp());
					},
				},
			},
			ytzq:{
				audio:"ext:神怒降世:2",
				trigger:{
					global:["phaseDrawSkipped","useCard"],
				},
				filter:function(event,player,name){
					if(name=="useCard") return event.card.name=="wanjian";
					else return true;
				},
				direct:true,
				content:function(){
					"step 0"
					var ziji=player;
					var mubiao=trigger.player;
					player.chooseControl('令'+get.translation(trigger.player)+'弃置两张牌','令'+get.translation(trigger.player)+'摸一张牌','取消').set('prompt','是否发动〖占青〗?').set('ai',function(player){
						if(get.attitude(ziji,mubiao)>0) return '令'+get.translation(trigger.player)+'摸一张牌';
						if(get.attitude(ziji,mubiao)==0) return '取消';
						return '令'+get.translation(trigger.player)+'弃置两张牌';
					});
					"step 1"
					if(result.control!='取消'){
						player.logSkill('ytzq',trigger.player);
						if(result.control=='令'+get.translation(trigger.player)+'摸一张牌') trigger.player.draw();
						else trigger.player.chooseToDiscard('〖占青〗：弃置两张牌','he',2,true);
					}
				},
			},
			ytjq:{
				audio:"ext:神怒降世:2",
				init:function(player){
					player.addSkill('snjs_xingtai_skill');
				},
				trigger:{
					source:"damageSource",
					player:["damageEnd","phaseEnd"],
				},
				filter:function(event,player,name){
					if(name=="phaseEnd") return true;
					if(name=="damageEnd"){
						if(player.storage.ytjq_jilu2&&player.storage.ytjq_jilu2>=1) return false;
						else return player.storage.snjs_xingtai_skill==true;
					}
					if(name=="damageSource"){
						if(player.storage.ytjq_jilu1&&player.storage.ytjq_jilu1>=2) return false;
						else return !player.storage.snjs_xingtai_skill||player.storage.snjs_xingtai_skill==false;
					}
				},
				check:function (event,player){
					return true;
				},
				content:function(){
					"step 0"
					if(event.triggername=="phaseEnd"){
						if(player.hasSkill('snjs_xingtai_skill_biao')) player.removeSkill('snjs_xingtai_skill_biao');
						else player.removeSkill('snjs_xingtai_skill_li');
						event.finish();
					}
					else{
						if(!player.hasSkill('ytjq_jilu')) player.addTempSkill('ytjq_jilu');
						if(!player.storage.ytjq_jilu1) player.storage.ytjq_jilu1=0;
						if(!player.storage.ytjq_jilu2) player.storage.ytjq_jilu2=0;
						if(player.storage.snjs_xingtai_skill==true){
							player.storage.ytjq_jilu2++;
							player.draw();
							if(!player.hasSkill('ytjq_li')) player.addTempSkill('ytjq_li',{player:'phaseEnd'});
							if(!player.storage.ytjq_li) player.storage.ytjq_li=0;
							player.storage.ytjq_li++;
						}else{
							player.storage.ytjq_jilu1++;
							player.draw(2);
							if(!player.hasSkill('ytjq_biao')) player.addTempSkill('ytjq_biao');
							if(!player.storage.ytjq_biao) player.storage.ytjq_biao=0;
							player.storage.ytjq_biao+=2;
						}
					}
					"step 1"
					player.chooseBool("〖嫉权〗：是否切换形态？").ai=function(event,player){
						return true;
					};
					"step 2"
					if(result.bool){
						if(player.hasSkill('snjs_xingtai_skill_biao')) player.removeSkill('snjs_xingtai_skill_biao');
						else player.removeSkill('snjs_xingtai_skill_li');
					}
				},
				subSkill:{
					biao:{
						mod:{
							maxHandcardBase:function(player,num){
								return num-player.storage.ytjq_biao;
							},
						},
						init:function(player){
							if(!player.storage.ytjq_biao) player.storage.ytjq_biao=0;
						},
						onremove:function(player){
							delete player.storage.ytjq_biao;
						},
						silent:true,
						unique:true,
						forced:true,
						sub:true,
						popup:false,
					},
					li:{
						mod:{
							maxHandcardBase:function(player,num){
								return num+player.storage.ytjq_li;
							},
						},
						init:function(player){
							if(!player.storage.ytjq_li) player.storage.ytjq_li=0;
						},
						onremove:function(player){
							delete player.storage.ytjq_li;
						},
						silent:true,
						unique:true,
						forced:true,
						sub:true,
						popup:false,
					},
					jilu:{
						init:function(player){
							if(!player.storage.ytjq_jilu1) player.storage.ytjq_jilu1=0;
							if(!player.storage.ytjq_jilu2) player.storage.ytjq_jilu2=0;
						},
						onremove:function(player){
							delete player.storage.ytjq_jilu1;
							delete player.storage.ytjq_jilu2;
						},
						silent:true,
						unique:true,
						forced:true,
						sub:true,
						popup:false,
					},
				},
			},
			gtqg:{
				audio:"ext:神怒降世:2",
				trigger:{
					global:"phaseDiscardAfter",
				},
				filter:function(event,player){
					if(event.player!=player){
						return event.player.getHistory('lose',function(evt){
							return evt.type=='discard'&&evt.getParent('phaseDiscard')==event&&evt.hs.filterInD('d').length>0;
						}).length>0;
					}
					return false;
				},
				direct:true,
				content:function(){
					"step 0"
					var cards=[];
					event.cishu=0;
					game.getGlobalHistory('cardMove',function(evt){
						if(evt.name=='cardsDiscard'&&evt.getParent('phaseDiscard')==trigger) cards.addArray(evt.cards.filterInD('d'));
					});
					game.countPlayer2(function(current){
						current.getHistory('lose',function(evt){
							if(evt.type!='discard'||evt.getParent('phaseDiscard')!=trigger) return;
							cards.addArray(evt.cards.filterInD('d'));
						})
					});
					event.cards=cards;
					"step 1"
					var ziji=player;
					var str=(event.cishu==0?get.prompt('gtqg'):"〖强攻〗：选择要使用的牌");
					var next=player.chooseButton([str,[event.cards,'card']]);
					next.set('filterButton',function(button){
						return lib.filter.filterCard(button.link,player,_status.event.getParent());
					});
					next.set('ai',function(button,player){
						var fadong=game.countPlayer(function(current){
							if(get.attitude(ziji,current)>0) return get.effect(current,button.link,ziji,current);
							else return -get.effect(current,button.link,ziji,current);
						});
						if(fadong>0) return get.value(button.link);
						else return false;
					});
					"step 2"
					if(result.bool&&result.links&&result.links.length){
						event.shiyong=result.links.slice(0);
						event.cards.remove(event.shiyong);
						event.cishu++;
					}
					else event.goto(5);
					"step 3"
					if(!player.hasSkill('gtqg_jilu')){
						player.logSkill('gtqg');
						player.addTempSkill('gtqg_jilu');
						if(!player.hasSkill('gtqg_mark')) player.addTempSkill('gtqg_mark',{player:'phaseDrawEnd'});
						if(!player.storage.gtqg_mark) player.storage.gtqg_mark=0;
						player.storage.gtqg_mark++;
						player.updateMarks('gtqg_mark');
					}
					player.chooseUseTarget(event.shiyong);
					"step 4"
					if(event.cards.length>0) event.goto(1);
					"step 5"
					if(event.cishu>2){
						event.diaoxue=player.countCards('he');
						player.chooseToDiscard("〖强攻〗：弃置"+get.cnNumber(event.cishu-2)+"张牌",event.cishu-2,'he',true);
						if(event.diaoxue<(event.cishu-2)){
							player.loseHp();
							player.addTempSkill('gtqg_jilu2','roundStart');
						}
					}
				},
				subSkill:{
					jilu:{
						silent:true,
						unique:true,
						forced:true,
						sub:true,
						popup:false,
					},
					jilu2:{
						silent:true,
						unique:true,
						forced:true,
						sub:true,
						popup:false,
					},
					mark:{
						init:function(player){
							if(!player.storage.gtqg_mark) player.storage.gtqg_mark=0;
						},
						mark:true,
						intro:{
							content:"下个摸牌阶段摸牌数-#",
						},
						trigger:{
							player:"phaseDrawBegin",
						},
						filter:function(event,player){
							return !event.numFixed;
						},
						silent:true,
						unique:true,
						forced:true,
						content:function (){
							trigger.num-=player.storage.gtqg_mark;
						},
						onremove:function(player){
							delete player.storage.gtqg_mark;
						},
						sub:true,
						popup:false,
					},
				},
			},
			pjms:{
				audio:"ext:神怒降世:1",
				trigger:{
					global:"useCard",
				},
				filter:function(event,player){
					if(!event.targets) return false;
					return ["sha","wanjian"].contains(event.card.name);
				},
				check:function(event,player){
					return game.hasPlayer(function(current){
						return event.targets.contains(current)&&get.attitude(player,current)<=0;
					});
				},
				content:function(){
					"step 0"
					var func=function(result){
						if(get.suit(result)!='club') return 5;
						return -1;
					};
					player.judge(func);
					"step 1"
					event.suit=result.suit;
					if(event.suit!='club'){
						player.chooseTarget("〖明私〗：令"+get.translation(trigger.card)+"对至多"+get.cnNumber(player.hp)+"名目标造成的伤害+1",[1,player.hp],true,function(card,player,target){
							return _status.event.targets.contains(target);
						}).set('ai',function(target){
							return 2-get.attitude(_status.event.player,target);
						}).set('targets',trigger.targets);
					}
					else event.finish();
					"step 2"
					if(result.bool){
						event.mubiao=result.targets;
						player.line(event.mubiao);
						for(var i=0;i<event.mubiao.length;i++){
							event.mubiao[i].addTempSkill('pjms_damage');
							event.mubiao[i].storage.pjms_damage=trigger.card;
						}
						if(player.hp>2) player.damage('nosource','nocard');
					}
				},
				subSkill:{
					damage:{
						trigger:{
							player:"damageBegin",
						},
						filter:function(event,player){
							if(!event.card) return false;
							return event.card==player.storage.pjms_damage;
						},
						silent:true,
						unique:true,
						forced:true,
						content:function (){
							trigger.num++;
							player.removeSkill('pjms_damage');
						},
						onremove:function(player){
							delete player.storage.pjms_damage;
						},
						sub:true,
						popup:false,
					},
				},
			},
			lxsl:{
				audio:"ext:神怒降世:1",
				trigger:{
					target:"useCardToTargeted",
				},
				filter:function(event,player){
					return event.card.name=='sha';
				},
				forced:true,
				content:function(){
					"step 0"
					player.draw();
					"step 1"
					if(trigger.cards.filterInD().length<=0||!trigger.card.isCard) trigger.getParent().excluded.add(player);
				},
			},
			pxtj:{
				audio:"ext:神怒降世:2",
				trigger:{
					player:"phaseJieshuBegin",
				},
				direct:true,
				content:function(){
					"step 0"
					player.chooseTarget(get.prompt("pxtj"),"<center>摸一张牌并弃置一张其他角色区域内的牌</center>",function(card,player,target){
						return target.countCards('hej');
					}).set('ai',function(target){
						var player=_status.event.player;
						var att=get.attitude(player,target);
						if(att<0){
							att=-Math.sqrt(-att);
						}
						else{
							att=Math.sqrt(att);
						}
						return att*lib.card.guohe.ai.result.target(player,target);
					});
					"step 1"
					if(result.bool){
						event.target=result.targets[0];
						event.panduan=event.target.getCards('j');
						player.logSkill('pxtj',event.target);
						player.draw();
						player.discardPlayerCard(event.target,'hej',true);
					}
					else event.finish();
					"step 2"
					if(result.bool){
						var ziji=player;
						var card=result.cards[0];
						if(event.panduan.contains(card)){
							player.chooseBool("〖投机〗：是否令目标摸两张牌？").ai=function(event,player){
								return get.attitude(ziji,event.target)>0;
							};
						}
						else event.finish();
					}
					else event.finish();
					"step 3"
					if(result.bool) event.target.draw(2);
				},
			},
			pxhl:{
				audio:"ext:神怒降世:2",
				trigger:{
					player:"damageEnd",
				},
				check:function(event,player){
					return player.hp>=3||player.isTurnedOver();
				},
				content:function(){
					player.draw(player.hp);
					player.turnOver();
				},
			},
			fgzj:{
				audio:"ext:神怒降世:2",
				enable:"phaseUse",
				usable:1,
				filterTarget:function (card,player,target){
					return player!=target;
				},
				filter:function(event,player){
					return player.countCards('he')>0;
				},
				content:function(){
					"step 0"
					event.mubiao=target;
					player.chooseCard("〖资将〗：选择交给"+get.translation(event.mubiao)+"的牌",[1,player.hp+event.mubiao.hp],'he',true);
					"step 1"
					if(result.bool){
						event.num1=Math.ceil(result.cards.length/3);
						event.num2=Math.ceil(result.cards.length/2);
						event.mubiao.gain(result.cards,player,'giveAuto');
					}
					"step 2"
					if(player.isDamaged()){
						player.chooseControl("回复"+get.cnNumber(event.num1)+"点体力","摸"+get.cnNumber(event.num2)+"张牌").set("prompt","〖资将〗：选择一项").set('ai',function(player){
							if(player.getDamagedHp()<=event.num1) return "回复"+get.cnNumber(event.num1)+"点体力";
							else return "摸"+get.cnNumber(event.num2)+"张牌";
						});
					}
					else{
						player.draw(event.num2);
						event.finish();
					}
					"step 3"
					if(result.control=="回复"+get.cnNumber(event.num1)+"点体力") player.recover(event.num1);
					else player.draw(event.num2);
				},
				ai:{
					order:20,
					result:{
						target:function(player,target){
							return 1;
						},
					},
					threaten:0.8,
				},
			},
			fzbx:{
				audio:"ext:神怒降世:4",
				group:["fzbx_gaipan"],
				usable:2,
				trigger:{
					player:"loseAfter",
				},
				filter:function(event,player){
					if(player.hasSkill('fzbx_jilu')&&player!=_status.currentPhase) return false;
					if(event.cards2){
						for(var i=0;i<event.cards2.length;i++){
							if(['heart','spade'].contains(get.suit(event.cards2[i]))) return true;
						}
					}
					return false;
				},
				check:function(event,player){
					return true;
				},
				content:function(){
					if(!player.hasSkill('fzbx_jilu')) player.addTempSkill('fzbx_jilu');
					var func=function(result){
						return 0;
					};
					player.judge();
				},
				subSkill:{
					gaipan:{
						trigger:{
							player:"judge",
						},
						direct:true,
						content:function(){
							"step 0"
							var str=get.translation(trigger.player)+'的'+(trigger.judgestr||'')+'判定为'+get.translation(trigger.player.judging[0])+'，是否发动〖百学〗，修改判定结果？';
							player.chooseControl('spade','heart','diamond','club','cancel2').set('prompt',str).set('ai',function(){
								var judging=_status.event.judging;
								var trigger=_status.event.getTrigger();
								var res1=trigger.judge(judging);
								var list=lib.suit.slice(0);
								var attitude=get.attitude(player,trigger.player);
								if(attitude==0) return 0;
								var getj=function(suit){
									return trigger.judge({
										name:get.name(judging),
										nature:get.nature(judging),
										suit:suit,
										number:trigger.player.judging[0].number,
									})
								};
								list.sort(function(a,b){
									return (getj(b)-getj(a))*get.sgn(attitude);
								});
								if((getj(list[0])-res1)*attitude>0) return list[0];
								return 'cancel2';
							}).set('judging',trigger.player.judging[0]);
							"step 1"
							if(result.control!='cancel2'){
								player.addExpose(0.25);
								event.huase=result.control;
								player.logSkill("fzbx");
								player.popup(result.control);
								game.log(player,'将判定结果改为了','#y'+get.translation(result.control));
								trigger.fixedResult={
									suit:result.control,
									color:get.color({suit:result.control}),
									number:trigger.player.judging[0].number,
								};
							}
							else event.finish();
							"step 2"
							var card=get.cardPile2(function(card){
								return get.suit(card)==event.huase;
							});
							if(card) player.gain(card,'gain2','log');
						},
						ai:{
							rejudge:true,
							tag:{
								rejudge:1,
							},
						},
						sub:true,
					},
					jilu:{
						silent:true,
						unique:true,
						forced:true,
						sub:true,
						popup:false,
						sub:true,
					},
				},
			},
			fzyg:{
				audio:"ext:神怒降世:1",
				trigger:{
					global:"judgeBegin",
				},
				direct:true,
				content:function(){
					"step 0"
					event.renji=0;
					player.chooseControl('spade','heart','diamond','club','cancel2').set("prompt","是否发动〖研卦〗猜测判定结果？").set('ai',function(){
						if(player==trigger.player) event.renji++;
						return ['spade','heart','diamond','club'].randomGet();
					});
					"step 1"
					if(result.control!='cancel2'){
						player.logSkill("fzyg");
						player.popup(result.control);
						if(event.renji==0) game.log(player,"猜测判定结果为","#y"+result.control);
						if(!trigger.player.hasSkill('fzyg_houxu')) trigger.player.addTempSkill('fzyg_houxu');
						if(!trigger.player.storage.fzyg_houxu1) trigger.player.storage.fzyg_houxu1=[];
						if(!trigger.player.storage.fzyg_houxu2) trigger.player.storage.fzyg_houxu2=[];
						if(event.renji!=0) trigger.player.storage.fzyg_houxu1.push('all');
						else trigger.player.storage.fzyg_houxu1.push(result.control);
						trigger.player.storage.fzyg_houxu2.push(player);
					}
				},
				subSkill:{
					houxu:{
						trigger:{
							player:"judgeEnd",
						},
						silent:true,
						unique:true,
						forced:true,
						init:function(player){
							if(!player.storage.fzyg_houxu1) player.storage.fzyg_houxu1=[];
							if(!player.storage.fzyg_houxu2) player.storage.fzyg_houxu2=[];
						},
						onremove:function(player){
							player.storage.fzyg_houxu1=[];
							player.storage.fzyg_houxu2=[];
						},
						content:function(){
							"step 0"
							if(player.storage.fzyg_houxu1.length>0){
								event.huase=get.suit(trigger.result);
								event.popai=[];
							}
							else{
								player.removeSkill('fzyg_houxu');
								event.finish();
							}
							"step 1"
							for(var i=0;i<player.storage.fzyg_houxu1.length;i++){
								if([event.huase,"all"].contains(player.storage.fzyg_houxu1[i])) event.popai.push(player.storage.fzyg_houxu2[i]);
							}
							"step 2"
							if(event.popai.length>0) game.asyncDraw(event.popai,2);
							player.removeSkill('fzyg_houxu');
						},
						sub:true,
					},
				},
			},
			sphfkq:{
				audio:"ext:神怒降世:1",
				trigger:{
					player:"damageBegin4",
				},
				filter:function(event,player){
					return event.num>0&&!player.isMaxHandcard();
				},
				forced:true,
				content:function(){
					"step 0"
					trigger.num++;
					"step 1"
					if(!player.hasSkill('sphfkq_xiaoguo')) player.addTempSkill('sphfkq_xiaoguo');
				},
				subSkill:{
					xiaoguo:{
						trigger:{
							player:"damageBegin",
						},
						intro:{
							content:"受到的伤害-1",
						},
						mark:true,
						sub:true,
						popup:false,
						silent:true,
						unique:true,
						forced:true,
						content:function(){
							trigger.num--;
						},
						ai:{
							effect:{
								target:function(card,player,target,current){
									if(get.tag(card,'damage')&&target.isMaxHandcard()) return 'zeroplayertarget';
								},
							},
						},
					},
				},
			},
			sphffj:{
				audio:"ext:神怒降世:1",
				trigger:{
					player:["damageEnd","phaseDrawBegin2"],
				},
				filter:function(event,player,name){
					if(name!="damageEnd") return !event.numFixed&&player.storage.sphffj_mark;
					else return true;
				},
				check:function(event,player){
					return true;
				},
				content:function(){
					if(event.triggername=="damageEnd"){
						player.draw(trigger.num);
						if(!player.hasSkill('sphffj_mark')) player.addTempSkill('sphffj_mark',{player:"phaseEnd"});
						if(!player.storage.sphffj_mark) player.storage.sphffj_mark=0;
						if(!player.storage.sphffj_mark2) player.storage.sphffj_mark2=false;
						player.storage.sphffj_mark+=trigger.num;
						player.updateMarks('sphffj_mark');
					}
					else{
						trigger.num+=player.storage.sphffj_mark;
						player.storage.sphffj_mark2=true;
					}
				},
				subSkill:{
					mark:{
						trigger:{
							player:"phaseDrawEnd",
						},
						init:function(player){
							if(!player.storage.sphffj_mark) player.storage.sphffj_mark=0;
							if(!player.storage.sphffj_mark2) player.storage.sphffj_mark2=false;
						},
						onremove:function(player){
							delete player.storage.sphffj_mark;
							delete player.storage.sphffj_mark2;
						},
						intro:{
							content:"本轮已通过此技能摸了#张牌",
						},
						mark:true,
						sub:true,
						popup:false,
						filter:function(event,player){
							return player.storage.sphffj_mark-2>0;
						},
						silent:true,
						unique:true,
						forced:true,
						content:function(){
							player.storage.sphffj_mark2=false;
							player.chooseToDiscard("〖丰冀〗：弃置"+get.cnNumber(player.storage.sphffj_mark-2)+"张牌，令手牌上限+"+get.cnNumber(Math.floor(player.storage.sphffj_mark/2)),"he",true);
							if(!player.hasSkill('sphffj_shangxian')) player.addTempSkill('sphffj_shangxian');
							if(!player.storage.sphffj_shangxian) player.storage.sphffj_shangxian=0;
							player.storage.sphffj_shangxian+=Math.floor(player.storage.sphffj_mark/2);
						},
					},
					shangxian:{
						mod:{
							maxHandcardBase:function(player,num){
								return num+player.storage.sphffj_shangxian;
							},
						},
						init:function(player){
							if(!player.storage.sphffj_shangxian) player.storage.sphffj_shangxian=0;
						},
						onremove:function(player){
							delete player.storage.sphffj_shangxian;
						},
						sub:true,
						popup:false,
						silent:true,
						unique:true,
						forced:true,
					},
				},
			},
			
			snjs_xingtai_skill:{
				init:function(player){
					if(!player.storage.snjs_xingtai_skill){
						player.storage.snjs_xingtai_skill=false;
						player.addSkill('snjs_xingtai_skill_biao');
					}
				},
				charlotte:true,
				locked:true,
				silent:true,
				unique:true,
				forced:true,
				subSkill:{
					biao:{
						locked:true,
						marktext:"表",
						mark:true,
						intro:{
							name:"当前形态",
							content:"表",
						},
						charlotte:true,
						locked:true,
						silent:true,
						unique:true,
						forced:true,
						onremove:function(player){
							player.storage.snjs_xingtai_skill=true;
							player.addSkill('snjs_xingtai_skill_li');
						},
						sub:true,
					},
					li:{
						locked:true,
						marktext:"里",
						mark:true,
						intro:{
							name:"当前形态",
							content:"里",
						},
						charlotte:true,
						locked:true,
						silent:true,
						unique:true,
						forced:true,
						onremove:function(player){
							player.storage.snjs_xingtai_skill=false;
							player.addSkill('snjs_xingtai_skill_biao');
						},
						sub:true,
					},
				},
			},
			snjs_card_skill:{
				cardSkill:true,
				locked:true,
				firstDo:true,
				silent:true,
				unique:true,
				forced:true,
				priority:99,
				trigger:{player:'useCard'},
				filter:function(event,player,name){
					return event.card.isCard&&['snjs_card_fubing','snjs_card_fangong','snjs_card_yexi','snjs_card_weicheng'].contains(event.card.name);
				},
				content:function(){
					var cardname=trigger.card.name;
					var yuyin=player.sex=='male'?cardname+'_male.mp3':cardname+'_female.mp3';
					game.playAudio('..','extension','神怒降世',yuyin);
				},
			},
			snjs_card_fubing_skill:{
				cardSkill:true,
				trigger:{player:'gainAfter'},
				forced:true,
				filter:function(event,player){
					if(event.cards){
						for(var i=0;i<event.cards.length;i++){
							if(get.name(event.cards[i])=='snjs_card_fubing') return true;
						}
					}
					return false;
				},
				content:function(){
					var num=0;
					for(var i=0;i<trigger.cards.length;i++){
						if(get.name(trigger.cards[i],player)=='snjs_card_fubing'){
							player.useCard(trigger.cards[i]);
						};
					}
				},
			},
			snjs_card_fangong_skill:{
				cardSkill:true,
				trigger:{target:'useCardToBegin'},
				forced:true,
				priority:6,
				filter:function(event,player){
					if(event.player==player) return false;
					if(event.directHit||(!['delay','trick'].contains(get.type(event.card))&&event.card.name!='sha')) return false;
					if(event.targets.length>1) return false;
					return player.hasUsableCard('snjs_card_fangong');
				},
				content:function(){
					player.storage.snjs_card_fangong_skill=trigger.player;
					var next=player.chooseToUse();
					next.set('prompt','是否使用【伏兵】响应'+get.translation(trigger.player)+'使用的'+get.translation(trigger.card)+'？');
					next.set('filterCard',function(card,player){
						if(get.name(card)!='snjs_card_fangong') return false;
						return lib.filter.cardEnabled(card,player,'forceEnable');
					});
					next.set('respondTo',[trigger.player,trigger.card]);
					next.set('goon',-get.effect(player,trigger.card,trigger.player,player));
					next.set('ai1',function(card){
						if(get.attitude(player,trigger.player)>0) return false;
						return _status.event.goon;
					})
				},
			},
			
			snjs_guisha:{
				audio:"ext:神怒降世:1",
				shaRelated:true,
				trigger:{
					global:"useCard",
				},
				direct:true,
				filter:function(event,player){
					return event.card.name=='sha'&&player.countCards('hes')>0;
				},
				content:function(){
					'step 0'
					game.delayx();
					var go=false;
					if(get.attitude(player,trigger.player)>0){
						if(player.countCards('h',{suit:'club'})>0){
							go=true;
						}
						else if(trigger.player!=player&&player.countCards('h',{name:'sha'})>0){
							go=true;
						}
						else if(trigger.addCount===false||!trigger.player.isPhaseUsing()) go=false;
						else if(!trigger.player.hasSkill('paoxiao')&&!trigger.player.hasSkill('tanlin3')&&!trigger.player.hasSkill('zhaxiang2')&&!trigger.player.hasSkill('fengnu')&&!trigger.player.getEquip('zhuge')){
							var nh=trigger.player.countCards('h');
							if(player==trigger.player){
								go=(player.countCards('h','sha')>0);
							}
							else if(nh>=4){
								go=true;
							}
							else if(player.countCards('h','sha')){
								if(nh==3){
									go=Math.random()<0.8;
								}
								else if(nh==2){
									go=Math.random()<0.5;
								}
							}
							else if(nh>=3){
								if(nh==3){
									go=Math.random()<0.5;
								}
								else if(nh==2){
									go=Math.random()<0.2;
								}
							}
						}
					}
					var next;
					if(_status.currentPhase==trigger.player){
						next=player.chooseToDiscard(get.prompt('snjs_guisha'),'<center>弃置一张牌，令'+get.translation(trigger.player)+'本次使用的【杀】不计入使用次数，若弃置的牌为【杀】则此【杀】伤害+1，若弃置的牌花色为♣则你本回合可以额外发动一次〖姝丽〗</center>','hes');
					}
					else{
						next=player.chooseToDiscard(get.prompt('snjs_guisha'),'<center>弃置一张【杀】或♣牌，若弃置的牌为【杀】则'+get.translation(trigger.player)+'本次使用的【杀】伤害+1，若弃置的牌花色为♣则你本回合可以额外发动一次〖姝丽〗</center>','hes',function(card){
							return card.name=='sha'||get.suit(card)=='club';
						});
					}
					next.logSkill=['snjs_guisha',trigger.player];
					next.set('ai',function(card){
						if(_status.event.go){
							if(get.suit(card)=='club') return 1;
							if(card.name=='sha'&&trigger.player!=player) return 1;
							return 6-get.value(card);
						}
						return 0;
					});
					next.set('go',go);
					'step 1'
					if(result.bool){
						if(trigger.addCount!==false){
							trigger.addCount=false;
							trigger.player.getStat().card.sha--;
						}
						if(result.cards[0].name=='sha'){
							trigger.baseDamage++;
						}
						if(get.suit(result.cards[0])=='club'){
							if(player.hasSkill('snjs_shuli_jilu')){
								if(player.storage.counttrigger.snjs_shuli>=2) player.storage.counttrigger.snjs_shuli--;
								else{
									if(!player.hasSkill('snjs_guisha_xiaoguo')) player.addTempSkill('snjs_guisha_xiaoguo');
								}
							}
							else{
								if(!player.hasSkill('snjs_guisha_xiaoguo')) player.addTempSkill('snjs_guisha_xiaoguo');
							}
						}
					}
				},
				subSkill:{
					xiaoguo:{
						unique:true,
						silent:true,
						forced:true,
						sub:true,
					},
				},
				ai:{
					expose:0.2,
				},
			},
			snjs_tszz_guisha:{
				audio:"ext:神怒降世:1",
				shaRelated:true,
				trigger:{
					global:"useCard",
				},
				direct:true,
				filter:function(event,player){
					return event.card.name=='sha'&&player.countCards('hes')>0&&event.player!=player;
				},
				content:function(){
					'step 0'
					game.delayx();
					var go=false;
					if(get.attitude(player,trigger.player)>0) go=true;
					var next;
					next=player.chooseToDiscard(get.prompt('snjs_tszz_guisha'),'<center>弃置一张牌，令'+get.translation(trigger.player)+'本次使用的【杀】不计入使用次数且伤害+1</center>','hes');
					next.logSkill=['snjs_guisha',trigger.player];
					next.set('ai',function(card){
						return go;
					});
					next.set('go',go);
					'step 1'
					if(result.bool){
						if(trigger.addCount!==false){
							trigger.addCount=false;
							trigger.player.getStat().card.sha--;
						}
						trigger.baseDamage++;
					}
				},
			},
			snjs_shuli:{
				audio:"ext:神怒降世:1",
				usable:2,
				trigger:{
					global:"damageEnd",
				},
				filter:function(event,player){
					if(!event.card) return false;
					return event.card.name=='sha'&&event.source!=undefined&&event.num>0;
				},
				check:function(event,player){
					return get.attitude(player,event.source)>0;
				},
				logTarget:function(event){
					return event.source;
				},
				content:function(){
					'step 0'
					if(trigger.source==player) player.draw();
					else game.asyncDraw([player,trigger.source]);
					'step 1'
					if(player.hasSkill('snjs_guisha_xiaoguo')){
						player.removeSkill('snjs_guisha_xiaoguo');
						player.storage.counttrigger.snjs_shuli--;
					}
					'step 2'
					if(!player.hasSkill('snjs_shuli_jilu')) player.addTempSkill('snjs_shuli_jilu');
				},
				subSkill:{
					jilu:{
						unique:true,
						silent:true,
						forced:true,
						sub:true,
					},
				},
				ai:{
					expose:0.2,
				},
			},
			snjs_tszz_shuli:{
				audio:"ext:神怒降世:1",
				usable:2,
				trigger:{
					global:"damageEnd",
				},
				filter:function(event,player){
					if(!event.card) return false;
					return event.card.name=='sha'&&event.source!=undefined&&event.num>0&&event.source!=player;
				},
				check:function(event,player){
					return get.attitude(player,event.source)>0;
				},
				logTarget:function(event){
					return event.source;
				},
				content:function(){
					game.asyncDraw([player,trigger.source]);
				},
			},
			snjs_shanwu:{
				audio:"ext:神怒降世:1",
				trigger:{
					global:"useCardToTargeted",
				},
				filter:function(event,player){
					return event.card.name=='sha'&&player.countCards('hes')>0;
				},
				direct:true,
				content:function(){
					"step 0"
					player.chooseCard(get.prompt('snjs_shanwu'),'<center>弃置一张【闪】或♦牌，令此【杀】对'+get.translation(trigger.target)+'无效，若弃置的牌是不为【闪】的♦牌或是花色不为♦的【闪】，则你可以立刻无视条件额外发动一次〖娴丽〗，且此额外〖娴丽〗改为选择获得当前回合角色一张手牌或摸一张牌</center>','hes',function(card){
						return get.suit(card)=='diamond'||card.name=='shan';
					}).set('ai',function(card){
						if(get.attitude(player,trigger.target)<0) return 0;
						if((get.suit(card)=='diamond'&&card.name!='shan')||(get.suit(card)!='diamond'&&card.name=='shan')) return 1;
						return 6-get.value(card);
					});
					"step 1"
					if(result.bool){
						player.logSkill('snjs_shanwu',trigger.target);
						trigger.getParent().excluded.add(trigger.target);
						if((result.cards[0].name=='shan'&&get.suit(result.cards[0])!='diamond')||(result.cards[0].name!='shan'&&get.suit(result.cards[0])=='diamond')){
							if(player.hasSkill('snjs_xianli_jilu')){
								if(player.storage.counttrigger.snjs_xianli>=2){
									player.storage.counttrigger.snjs_xianli--;
									if(!player.hasSkill('snjs_shanwu_xiaoguo2')) player.addTempSkill('snjs_shanwu_xiaoguo2');
								}
								else{
									if(!player.hasSkill('snjs_shanwu_xiaoguo')) player.addTempSkill('snjs_shanwu_xiaoguo');
								}
							}
							else{
								if(!player.hasSkill('snjs_shanwu_xiaoguo')) player.addTempSkill('snjs_shanwu_xiaoguo');
							}
						}
						player.discard(result.cards);
					}
				},
				subSkill:{
					xiaoguo:{
						unique:true,
						silent:true,
						forced:true,
						sub:true,
					},
					xiaoguo2:{
						unique:true,
						silent:true,
						forced:true,
						sub:true,
					},
				},
				ai:{
					expose:0.2,
				},
			},
			snjs_tszz_shanwu:{
				audio:"ext:神怒降世:1",
				trigger:{
					global:"useCardToTargeted",
				},
				filter:function(event,player){
					return event.card.name=='sha'&&player.countCards('hes')>0&&event.target!=player&&!player.hasSkill("snjs_tszz_shanwu_jilu");
				},
				direct:true,
				content:function(){
					"step 0"
					player.chooseToDiscard(get.prompt('snjs_tszz_shanwu'),'<center>弃置一张【闪】，取消该【杀】的所有目标','hes',function(card){
						return card.name=='shan';
					}).set('ai',function(card){
						if(get.attitude(player,trigger.target)<0) return 0;
						else return 1;
					});
					"step 1"
					if(result.bool){
						player.logSkill('snjs_shanwu',trigger.targets);
						trigger.getParent().excluded.addArray(trigger.targets);
						game.delay();
						player.addTempSkill("snjs_tszz_shanwu_jilu");
						player.storage.snjs_tszz_shanwu_jilu=trigger.card;
					}
				},
				subSkill:{
					jilu:{
						trigger:{
							global:"useCardEnd",
						},
						filter:function(event,player){
							return player.storage.snjs_tszz_shanwu_jilu==event.card;
						},
						unique:true,
						silent:true,
						forced:true,
						content:function(){
							delete player.storage.snjs_tszz_shanwu_jilu;
							player.removeSkill("snjs_tszz_shanwu_jilu");
						},
						sub:true,
					},
				},
			},
			snjs_xianli:{
				audio:"ext:神怒降世:1",
				usable:2,
				trigger:{
					player:"loseEnd",
				},
				filter:function(event,player){
					if(player.hasSkill('snjs_shanwu_xiaoguo')||player.hasSkill('snjs_shanwu_xiaoguo2')) return true;
					for(var i=0;i<event.cards2.length;i++){
						if(event.cards2[i].name=='shan'){
							return true;
						}
					}
					return false;
				},
				direct:true,
				content:function(){
					'step 0'
					if(player.hasSkill('snjs_shanwu_xiaoguo')){
						player.removeSkill('snjs_shanwu_xiaoguo');
						player.storage.counttrigger.snjs_xianli--;
					}
					else{
						if(player.hasSkill('snjs_shanwu_xiaoguo2')){
							player.removeSkill('snjs_shanwu_xiaoguo2');
						}
						else event.goto(2);
					}
					if(_status.currentPhase==player) event.goto(2);
					'step 1'
					if(_status.currentPhase.countGainableCards(player,'h')>0){
						player.gainPlayerCard(_status.currentPhase,'h').logSkill=['snjs_xianli',_status.currentPhase];
					}
					'step 2'
					if(result.bool){
						if(!player.hasSkill('snjs_xianli_jilu')) player.addTempSkill('snjs_xianli_jilu');
						event.finish();
					}
					else{
						player.chooseBool('〖娴丽〗：是否摸一张牌？').ai=function(event,player){
							return true;
						};
					}
					'step 3'
					if(result.bool){
						if(!player.hasSkill('snjs_xianli_jilu')) player.addTempSkill('snjs_xianli_jilu');
						player.logSkill('snjs_xianli');
						player.draw();
					}
					else{
						player.storage.counttrigger.snjs_xianli--;
						event.finish();
					}
				},
				subSkill:{
					jilu:{
						unique:true,
						silent:true,
						forced:true,
						sub:true,
					},
				},
				ai:{
					expose:0.2,
				},
			},
			snjs_tszz_xianli:{
				audio:"ext:神怒降世:1",
				usable:2,
				trigger:{
					player:"loseEnd",
				},
				filter:function(event,player){
					for(var i=0;i<event.cards2.length;i++){
						if(event.cards2[i].name=='shan'){
							return _status.currentPhase!=player;
						}
					}
					return false;
				},
				direct:true,
				content:function(){
					if(_status.currentPhase.countGainableCards(player,'h')>0){
						player.gainPlayerCard(_status.currentPhase,'h').logSkill=['snjs_tszz_xianli',_status.currentPhase];
					}
				},
			},
			snjs_meiniang:{
				audio:"ext:神怒降世:1",
				trigger:{
					global:"phaseUseBegin",
				},
				filter:function(event,player){
					return event.player.countCards('hs')>0;
				},
				check:function(event,player){
					return get.attitude(player,event.player)>0;
				},
				logTarget:function(event){
					return event.player;
				},
				content:function(){
					'step 0'
					trigger.player.chooseCard('〖美酿〗：将一张基本牌当作【酒】使用且不计入使用次数','hs',function(card){
						return get.type(card)=='basic'||get.suit(card)=='spade';
					}).set('ai',function(card){
						if(trigger.player.countCards('hs',{name:'sha'})<2) return 0;
						if(get.suit(card)=='spade'){
							if(card.name=='sha'&&trigger.player.countCards('hs',{name:'sha'})<2) return 0;
							else return 6-get.value(card);
						}
						else return 6-get.value(card);
					});
					'step 1'
					if(result.bool){
						trigger.player.useCard({name:'jiu'},result.cards,trigger.player,false).viewAs=true;
					}
				},
				ai:{
					expose:0.2,
				},
			},
			snjs_tszz_meiniang:{
				audio:"ext:神怒降世:1",
				trigger:{
					global:"phaseUseBegin",
				},
				filter:function(event,player){
					return event.player!=player;
				},
				check:function(event,player){
					return get.attitude(player,event.player)>0;
				},
				logTarget:function(event){
					return event.player;
				},
				content:function(){
					trigger.player.useCard({name:'jiu',isCard:true},trigger.player,false);
				},
			},
			snjs_yaoli:{
				audio:"ext:神怒降世:1",
				trigger:{
					global:"useCardEnd",
				},
				filter:function(event,player){
					return event.card.name=='jiu'&&event.player.isPhaseUsing();
				},
				check:function(event,player){
					return get.attitude(player,event.player)>0;
				},
				logTarget:function(event){
					return event.player;
				},
				content:function(){
					if(!trigger.player.hasSkill('snjs_yaoli_xiaoguo1')) trigger.player.addTempSkill('snjs_yaoli_xiaoguo1');
					if(get.suit(trigger.card)=='spade'){
						if(!trigger.player.hasSkill('snjs_yaoli_xiaoguo2')) trigger.player.addTempSkill('snjs_yaoli_xiaoguo2');
					}
				},
				ai:{
					expose:0.2,
				},
				subSkill:{
					xiaoguo1:{
						trigger:{
							player:"useCard2",
						},
						filter:function(event,player){
							return event.card.name=='sha';
						},
						unique:true,
						silent:true,
						forced:true,
						content:function(){
							"step 0"
							player.chooseTarget(1,'〖媱丽〗：可以为此【杀】增加一个目标',function(card,player,target){
								var player=_status.event.player;
								if(_status.event.targets.contains(target)) return false;
								return lib.filter.targetEnabled2(_status.event.card,player,target)&&player.inRange(target);
							}).set('ai',function(target){
								var trigger=_status.event.getTrigger();
								var player=_status.event.player;
								return get.effect(target,trigger.card,player,player);
							}).set('targets',trigger.targets).set('card',trigger.card);
							"step 1"
							if(result.bool){
								if(!event.isMine()) game.delayx();
								event.targets=result.targets;
							}
							"step 2"
							if(event.targets){
								player.line(event.targets);
								trigger.targets.addArray(event.targets);
							}
							player.removeSkill('snjs_yaoli_xiaoguo1');
						},
						ai:{
							expose:0.2,
						},
						sub:true,
					},
					xiaoguo2:{
						trigger:{
							player:"useCard",
						},
						filter:function(event,player){
							return event.card.name=='sha';
						},
						unique:true,
						silent:true,
						forced:true,
						content:function(){
							"step 0"
							trigger.directHit.addArray(game.filterPlayer(function(current){
								return true;
							}));
							"step 1"
							player.removeSkill('snjs_yaoli_xiaoguo2');
						},
						ai:{
							"directHit_ai":true,
						},
						sub:true,
					},
				},
			},
			snjs_tszz_yaoli:{
				audio:"ext:神怒降世:1",
				trigger:{
					global:"useCardEnd",
				},
				filter:function(event,player){
					return event.card.name=='jiu'&&event.player.isPhaseUsing()&&event.player!=player;
				},
				check:function(event,player){
					return get.attitude(player,event.player)>0;
				},
				logTarget:function(event){
					return event.player;
				},
				content:function(){
					if(!trigger.player.hasSkill('snjs_tszz_yaoli_xiaoguo')) trigger.player.addTempSkill('snjs_tszz_yaoli_xiaoguo');
				},
				subSkill:{
					xiaoguo:{
						trigger:{
							player:"useCard",
						},
						filter:function(event,player){
							return event.card.name=='sha';
						},
						unique:true,
						silent:true,
						forced:true,
						content:function(){
							"step 0"
							player.chooseTarget(1,'〖媱丽〗：可以为此【杀】增加一个目标',function(card,player,target){
								var player=_status.event.player;
								if(_status.event.targets.contains(target)) return false;
								return lib.filter.targetEnabled2(_status.event.card,player,target);
							}).set('ai',function(target){
								var trigger=_status.event.getTrigger();
								var player=_status.event.player;
								return get.effect(target,trigger.card,player,player);
							}).set('targets',trigger.targets).set('card',trigger.card);
							"step 1"
							if(result.bool){
								if(!event.isMine()) game.delayx();
								event.targets=result.targets;
							}
							"step 2"
							if(event.targets){
								player.line(event.targets);
								trigger.targets.addArray(event.targets);
							}
							"step 3"
							trigger.directHit.addArray(game.filterPlayer(function(current){
								return true;
							}));
							"step 4"
							player.removeSkill('snjs_tszz_yaoli_xiaoguo');
						},
						ai:{
							"directHit_ai":true,
						},
						sub:true,
					},
				},
			},
			snjs_taoyan:{
				audio:"ext:神怒降世:1",
				enable:"phaseUse",
				usable:1,
				filterCard:true,
				filterTarget:true,
				position:"hes",
				check:function (card){
					return 8-get.value(card);
				},
				content:function(){
					"step 0"
					event.pai=[];
					var card1=get.cardPile2(function(card){
						return !event.pai.contains(card)&&card.name=='tao'&&get.type(card)=='basic';
					});
					if(card1){
						event.pai.push(card1);
					}
					var card2=get.cardPile2(function(card){
						return !event.pai.contains(card)&&card.name!='tao'&&get.suit(card)=='heart';
					});
					if(card2){
						event.pai.push(card2);
					}
					"step 1"
					if(event.pai.length) target.gain(event.pai,'gain2');
					target.draw('nodelay');
					if(get.type(cards[0])=='basic'&&!target.hasSkill('snjs_taoyan_draw')) target.addSkill('snjs_taoyan_draw');
					if(target==player&&!target.hasSkill('snjs_taoyan_draw')) target.addSkill('snjs_taoyan_draw');
				},
				subSkill:{
					draw:{
						mark:true,
						intro:{
							name:"桃宴",
							content:"下一个摸牌阶段少摸两张牌",
						},
						trigger:{
							player:"phaseDrawBegin",
						},
						silent:true,
						unique:true,
						forced:true,
						content:function(){
							trigger.num-=2;
							player.removeSkill('snjs_taoyan_draw');
						},
						sub:true,
					},
				},
				ai:{
					order:20,
					result:{
						target:function(player,target){
							return 1;
						},
					},
					expose:0.2,
				},
			},
			snjs_tszz_taoyan:{
				audio:"ext:神怒降世:1",
				trigger:{
					player:"phaseBegin",
				},
				direct:true,
				content:function(){
					"step 0"
					player.chooseTarget(get.prompt('snjs_tszz_taoyan'),'<center>令至多两名其他角色从牌堆获得一张【桃】并摸一张牌</center>',[1,2],function(card,player,target){
						return target!=player;
					}).ai=function(target){
						var player=_status.event.player;
						return get.attitude(player,target);
					}
					"step 1"
					if(result.bool){
						player.logSkill('snjs_tszz_taoyan',result.targets);
						var cards=[];
						while(cards.length<result.targets.length){
							var card=get.cardPile2(function(card){
								return !cards.contains(card)&&card.name=='tao'&&get.type(card)=='basic';
							});
							if(card) cards.push(card);
							else break;
						}
						for(var i=0;i<result.targets.length;i++){
							if(cards[i]) result.targets[i].gain(cards[i],'gain2','log');
							result.targets[i].draw();
						}
					}
				},
			},
			snjs_yanli:{
				audio:"ext:神怒降世:1",
				trigger:{
					global:"dying",
				},
				filter:function(event,player){
					return event.player.hp<1&&event.player.isDamaged()&&!player.hasSkill('snjs_yanli_jilu')&&_status.currentPhase!=player;
				},
				check:function(event,player){
					return get.attitude(player,event.player)>0;
				},
				logTarget:function(event){
					return event.player;
				},
				content:function(){
					'step 0'
					player.addTempSkill('snjs_yanli_jilu','roundStart');
					'step 1'
					trigger.player.recover(1-trigger.player.hp);
					'step 2'
					trigger.player.draw();
				},
				subSkill:{
					jilu:{
						unique:true,
						silent:true,
						forced:true,
						sub:true,
					},
				},
				ai:{
					expose:0.2,
				},
			},
			snjs_leyu:{
				audio:"ext:神怒降世:1",
				trigger:{
					global:"phaseBegin",
				},
				filter:function(event,player){
					return player.countCards('he')>0;
				},
				direct:true,
				content:function(){
					'step 0'
					var next=player.chooseCard({
						filterCard:function(card){
							var suit=get.suit(card);
							for(var i=0;i<ui.selected.cards.length;i++){
								if(get.suit(ui.selected.cards[i])==suit) return false;
							}
							return true;
						},
						position:'he',
						selectCard:[1,4],
						complexCard:true,
						prompt:get.prompt2('snjs_leyu',trigger.player),
					}).set('ai',function(card){
						if(get.attitude(player,trigger.player)>=0) return false;
						return 8-get.value(card);
					});
					'step 1'
					if(result.bool){
						player.logSkill('snjs_leyu',trigger.player);
						player.showCards(get.translation(player)+'〖乐虞〗展示',result.cards);
						event.cards=result.cards;
						event.huase=[];
						for(var i=0;i<result.cards.length;i++){
							if(!event.huase.contains(get.suit(result.cards[i]))) event.huase.push(get.suit(result.cards[i]));
						}
						var func=function(result){
							if(!event.huase.contains(get.suit(result))) return 1;
							return -10;
						};
						trigger.player.judge(func);
					}
					else event.finish();
					'step 2'
					if(event.huase.contains(result.suit)){
						player.discard(event.cards);
						trigger.player.skip('phaseUse');
					}
				},
				ai:{
					tag:{
						skip:"phaseUse",
					},
					expose:0.2,
				},
			},
			snjs_tszz_leyu:{
				audio:"ext:神怒降世:1",
				trigger:{
					global:"phaseBegin",
				},
				filter:function(event,player){
					return player.countCards('he')>=3;
				},
				direct:true,
				content:function(){
					'step 0'
					player.chooseToDiscard(get.prompt('snjs_tszz_leyu',trigger.player),3,"he").set('ai',function(card){
						if(get.attitude(player,trigger.player)>=0) return false;
						else return true;
					});
					'step 1'
					if(result.bool){
						player.logSkill('snjs_tszz_leyu',trigger.player);
						var func=function(result){
							if(get.suit(result)=="heart") return 1;
							return -10;
						};
						trigger.player.judge(func);
					}
					else event.finish();
					'step 2'
					if(result.suit!="heart"){
						trigger.player.skip('phaseUse');
					}
				},
				ai:{
					tag:{
						skip:"phaseUse",
					},
				},
			},
			snjs_yuanli:{
				audio:"ext:神怒降世:1",
				trigger:{
					global:"phaseUseSkipped",
				},
				direct:true,
				content:function(){
					"step 0"
					player.chooseTarget(get.prompt('snjs_yuanli'),'<center>与另一名角色各摸一张牌</center>',function(card,player,target){
						return target!=player;
					}).set('ai',function(target){
						var player=_status.event.player;
						return get.attitude(player,target)>0;
					});
					"step 1"
					if(result.bool){
						player.logSkill('snjs_yuanli',result.targets);
						game.asyncDraw([player,result.targets[0]]);
					}
					else event.finish();
				},
				ai:{
					expose:0.2,
				},
			},
			snjs_xuxiang:{
				audio:"ext:神怒降世:5",
				init:function(player){
					if(!player.storage.snjs_xuxiang) player.storage.snjs_xuxiang=[];
					if(!player.storage.snjs_xuxiang1) player.storage.snjs_xuxiang1=[];
				},
				mark:true,
				intro:{
					name:"虚像",
					content:"$",
				},
				trigger:{
					player:"damageBegin4",
				},
				filter:function(event,player){
					return event.num>0&&player.storage.snjs_xuxiang.length<4&&player.storage.snjs_xuxiang1.length<4;
				},
				direct:true,
				content:function(){
					"step 0"
					player.chooseBool(get.prompt2('snjs_xuxiang')).set('ai',function(){
						return true;
					});
					"step 1"
					if(result.bool){
						var skillname='snjs_xuxiang_qita';
						if(player.name=='snjs_xiaosha') skillname='snjs_xuxiang_xiaosha';
						if(player.name=='snjs_xiaoshan') skillname='snjs_xuxiang_xiaoshan';
						if(player.name=='snjs_xiaojiu') skillname='snjs_xuxiang_xiaojiu';
						if(player.name=='snjs_xiaotao') skillname='snjs_xuxiang_xiaotao';
						if(player.name=='snjs_xiaole') skillname='snjs_xuxiang_xiaole';
						player.logSkill(skillname);
					}
					else event.finish();
					"step 2"
					var func=function(result){
						if(!player.storage.snjs_xuxiang1.contains(get.suit(result))) return 10;
						return -10;
					};
					player.judge(func);
					"step 3"
					event.suit=result.suit;
					if(!player.storage.snjs_xuxiang1.contains(event.suit)){
						player.storage.snjs_xuxiang1.push(event.suit);
						if(event.suit=='spade') player.storage.snjs_xuxiang.push('♠');
						if(event.suit=='heart') player.storage.snjs_xuxiang.push('♥');
						if(event.suit=='club') player.storage.snjs_xuxiang.push('♣');
						if(event.suit=='diamond') player.storage.snjs_xuxiang.push('♦');
						player.updateMarks('snjs_xuxiang');
						trigger.cancel();
					}
				},
				ai:{
					filterDamage:function(player){
						if(player.storage.snjs_xuxiang1.length<3) return true;
						else return false;
					},
				},
				subSkill:{
					xiaosha:{
						audio:"ext:神怒降世:1",
						sub:true,
					},
					xiaoshan:{
						audio:"ext:神怒降世:1",
						sub:true,
					},
					xiaojiu:{
						audio:"ext:神怒降世:1",
						sub:true,
					},
					xiaotao:{
						audio:"ext:神怒降世:1",
						sub:true,
					},
					xiaole:{
						audio:"ext:神怒降世:1",
						sub:true,
					},
					qita:{
						sub:true,
					},
				},
			},
			snjs_tszz_xuxiang:{
				audio:"ext:神怒降世:5",
				trigger:{
					player:"damageBegin4",
					global:"die",
				},
				filter:function(event,player,name){
					if(name!="die") return true;
					else return !game.hasPlayer(function(current){
						return current.isFriendsOf(player)&&current!=player&&current.isAlive();
					});
				},
				forced:true,
				fixed:true,
				unique:true,
				silent:true,
				direct:true,
				charlotte:true,
				content:function(){
					if(event.triggername!="die"){
						var skillname='snjs_tszz_xuxiang_qita';
						if(player.name=='snjs_tszz_xiaosha') skillname='snjs_tszz_xuxiang_xiaosha';
						if(player.name=='snjs_tszz_xiaoshan') skillname='snjs_tszz_xuxiang_xiaoshan';
						if(player.name=='snjs_tszz_xiaojiu') skillname='snjs_tszz_xuxiang_xiaojiu';
						if(player.name=='snjs_tszz_xiaotao') skillname='snjs_tszz_xuxiang_xiaotao';
						if(player.name=='snjs_tszz_xiaole') skillname='snjs_tszz_xuxiang_xiaole';
						player.logSkill(skillname);
						trigger.cancel();
					}
					else player.die();
				},
				ai:{
					effect:{
						target:function(card,player,target,current){
							if(get.tag(card,'damage')){
								return 'zeroplayertarget';
							}
						},
					},
				},
				subSkill:{
					xiaosha:{
						audio:"ext:神怒降世:1",
						sub:true,
					},
					xiaoshan:{
						audio:"ext:神怒降世:1",
						sub:true,
					},
					xiaojiu:{
						audio:"ext:神怒降世:1",
						sub:true,
					},
					xiaotao:{
						audio:"ext:神怒降世:1",
						sub:true,
					},
					xiaole:{
						audio:"ext:神怒降世:1",
						sub:true,
					},
					qita:{
						sub:true,
					},
				},
			},
			
			snjs_boss_hulao:{
				trigger:{global:'gameStart'},
				forced:true,
				popup:false,
				fixed:true,
				unique:true,
				charlotte:true,
				content:function(){
					'step 0'
					game.bossinfo.chongzheng=999;
					player.smoothAvatar();
					'step 1'
					if(game.me==game.boss){
						game.me.chooseControl('第一关','第二关','第三关').set('prompt','选择你想要开始的节点').set('ai',function(target){
							return '第一关';
						});
					}
					else{
						event.guanqia='第一关';
						event.goto(4);
					}
					'step 2'
					event.guanqia=result.control;
					event.xuanze=['snjs_boss_hulaojieduan121','snjs_boss_hulaojieduan122','snjs_boss_hulaojieduan123','snjs_boss_hulaojieduan124','snjs_boss_hulaojieduan125','snjs_boss_hulaojieduan126'];
					event.xuanze2=['snjs_boss_hulaojieduan221','snjs_boss_hulaojieduan222','snjs_boss_hulaojieduan223','snjs_boss_hulaojieduan224'];
					event.juese=[];
					event.juese2=[];
					'step 3'
					if(event.guanqia=='第一关'){
						
						if(game.me==game.boss){
						   game.me.chooseControl('snjs_boss_hulaojieduan111','snjs_boss_hulaojieduan112','snjs_boss_hulaojieduan113','snjs_boss_hulaojieduan114').set('prompt','请选择出战武将').set('ai',function(target){
							   return ['snjs_boss_hulaojieduan111','snjs_boss_hulaojieduan112','snjs_boss_hulaojieduan113','snjs_boss_hulaojieduan114'].randomGet();
						   });
						}
						else event.goto(4);
					}
					else event.goto(5);
					'step 4'
					if(game.me==game.boss) player.init(result.control);
					else player.init(['snjs_boss_hulaojieduan111','snjs_boss_hulaojieduan112','snjs_boss_hulaojieduan113','snjs_boss_hulaojieduan114'].randomGet());
					'step 5'
					if(event.guanqia=='第三关'){
						game.me.chooseControl('2020','2021').set('prompt','选择版本').set('ai',function(target){
							return ['2020','2021'].randomGet();
						});
					}
					else event.goto(6);
					'step 6'
					if(event.guanqia=='第二关'){
						player.init('snjs_boss_hulaojieduan211');
					}
					if(event.guanqia=='第三关') player.init(result.control=='2020'?'snjs_boss_hulaolvbu1':'snjs_boss_hulaolvbu3');
					_status.noswap=true;
					game.delay(0.5);
					'step 7'
					if(game.me!=game.boss){
						game.boss.changeSeat(6);
						game.boss.nextSeat.changeSeat(1);
						game.boss.nextSeat.nextSeat.changeSeat(3);
						game.boss.previousSeat.changeSeat(5);
					}
					else{
						game.boss.nextSeat.changeSeat(2);
						game.boss.nextSeat.nextSeat.changeSeat(4);
						game.boss.previousSeat.changeSeat(6);
					}
					'step 8'
					if(game.me==game.boss){
						if(event.guanqia=='第一关'){
							game.me.chooseControl(event.xuanze).set('prompt','请选择出战随从').set('ai',function(target){
							return event.xuanze.randomGet();
						});
						}
						if(event.guanqia=='第二关'){
							game.me.chooseControl(event.xuanze2).set('prompt','请选择出战随从').set('ai',function(target){
							return event.xuanze2.randomGet();
						});
						}
						if(event.guanqia=='第三关'){
							var card1=get.cardPile('fangtian','field');
							var card2=get.cardPile('chitu','field');
							if(card1) game.boss.equip(card1);
							if(card2) game.boss.equip(card2);
							event.goto(12);
						}
					}
					else{
						event.juese=['snjs_boss_hulaojieduan121','snjs_boss_hulaojieduan122','snjs_boss_hulaojieduan123','snjs_boss_hulaojieduan124','snjs_boss_hulaojieduan125','snjs_boss_hulaojieduan126'].randomGets(3);
						event.goto(10);
					}
					'step 9'
					if(event.guanqia=='第一关'){
						event.xuanze.remove(result.control);
						event.juese.push(result.control);
						if(event.juese.length<3) event.goto(8);
					}
					if(event.guanqia=='第二关'){
						event.xuanze2.remove(result.control);
						event.juese2.push(result.control);
						if(event.juese2.length<2) event.goto(8);
					}
					'step 10'
					if(event.guanqia=='第一关') game.addBossFellow(game.me==game.boss?1:7,event.juese[0]);
					if(event.guanqia=='第一关') game.addBossFellow(game.me==game.boss?3:2,event.juese[1]);
					if(event.guanqia=='第一关') game.addBossFellow(game.me==game.boss?5:4,event.juese[2]);
					if(event.guanqia=='第二关') game.addBossFellow(game.me==game.boss?3:2,event.juese2[0]);
					if(event.guanqia=='第二关') game.addBossFellow(game.me==game.boss?5:4,event.juese2[1]);
					'step 11'
					game.addVideo('reinit2',player,player.name);
					'step 12'
					game.countPlayer(function(current){
						if(current.isFriendsOf(game.boss)||current==game.boss){
							if(current!=game.boss){
								var cards=current.getCards('h').randomGets(event.guanqia=='第一关'?4:2);
								if(cards.length){
									current.lose(cards);
									current.update();
									game.cardsDiscard(cards);
								}
							}
							else{
								if(['snjs_boss_hulaolvbu1','snjs_boss_hulaolvbu2','snjs_boss_hulaolvbu3'].contains(current.name)) current.directgain(get.cards(4));
								else current.directgain(get.cards(2));
							}
						}
					});
				}
			},
			snjs_boss_hulao2:{
				mode:['boss'],
				trigger:{player:'dieBegin'},
				silent:true,
				unique:true,
				forced:true,
				fixed:true,
				charlotte:true,
				filter:function(event,player){
					return player==game.boss;
				},
				content:function(){
					'step 0'
					if(game.me==game.boss){
						event.juese=[];
						event.xuanze=['snjs_boss_hulaojieduan221','snjs_boss_hulaojieduan222','snjs_boss_hulaojieduan223','snjs_boss_hulaojieduan224'];
						event.goto(2);
					}
					'step 1'
					event.ren=[];
					game.countPlayer(function(current){
						if(current.identity!='cai'&&current!=player&&current.isAlive()){
							event.ren.push(current);
						}
					});
					if(event.ren.length){
						game.boss=event.ren.randomGet();
						event.finish();
					}
					'step 2'
					player.hide();
					game.addVideo('hidePlayer',player);
					if(trigger.source!=undefined&&trigger.source.identity=='cai'){
						trigger.source.recover();
						trigger.source.draw(2);
					}
					'step 3'
					if(game.me!=game.boss) game.boss.changeSeat(6);
					game.delay();
					'step 4'
					if(game.me==game.boss){
						game.countPlayer(function(current){
							if(current!=player&&current.identity!='cai'){
								current.die();
							}
						});
					}
					'step 5'
					var dead=game.dead.slice(0);
					for(var i=0;i<dead.length;i++){
						if(dead[i]!=player&&dead[i].identity!='cai'){
							dead[i].hide();
						}
					}
					'step 6'
					game.changeBoss('snjs_boss_hulaojieduan211');
					game.delay(0.5);
					'step 7'
					if(game.me==game.boss){
						game.me.chooseControl(event.xuanze).set('prompt','请选择出战随从').set('ai',function(target){
							return event.xuanze.randomGet();
						});
					}
					else{
						event.juese=['snjs_boss_hulaojieduan221','snjs_boss_hulaojieduan222','snjs_boss_hulaojieduan223','snjs_boss_hulaojieduan224'].randomGets(2);
						event.goto(9);
					}
					'step 8'
					event.xuanze.remove(result.control);
					event.juese.push(result.control);
					if(event.juese.length<2) event.goto(7);
					'step 9'
					game.addBossFellow(game.me==game.boss?3:2,event.juese[0]);
					game.addBossFellow(game.me==game.boss?5:4,event.juese[1]);
					'step 10'
					game.countPlayer(function(current){
						if(current.isFriendsOf(game.boss)||current==game.boss){
								current.directgain(get.cards(2))
						}
					});
					'step 11'
					while(_status.event.name!='phaseLoop'){
						_status.event=_status.event.parent;
					}
					game.resetSkills();
					_status.paused=false;
					_status.event.player=_status.currentPhase.nextSeat;
					_status.event.step=0;
					_status.roundStart=_status.currentPhase.nextSeat;
					game.phaseNumber=0;
					game.roundNumber=0;
					if(game.bossinfo){
						game.bossinfo.loopType=1;
					}
					game.playAudio("..","extension","神怒降世",player.name+".mp3");
					player.die();
				}
			},
			snjs_boss_hulao3:{
				mode:['boss'],
				trigger:{player:'dieBegin'},
				silent:true,
				fixed:true,
				unique:true,
				forced:true,
				charlotte:true,
				filter:function(event,player){
					return player==game.boss;
				},
				content:function(){
					'step 0'
					if(game.me==game.boss) event.goto(2);
					'step 1'
					event.ren=[];
					game.countPlayer(function(current){
						if(current.identity!='cai'&&current!=player&&current.isAlive()){
							event.ren.push(current);
						}
					});
					if(event.ren.length){
						game.boss=event.ren.randomGet();
						event.finish();
					}
					'step 2'
					player.discard(player.getCards('hej'));
					game.playAudio('..','extension','神怒降世',player.name+'.mp3');
					player.hide();
					game.addVideo('hidePlayer',player);
					if(trigger.source!=undefined&&trigger.source.identity=='cai'){
						trigger.source.recover();
						trigger.source.draw(3);
					}
					'step 3'
					if(game.me!=game.boss) game.boss.changeSeat(7);
					game.delay();
					'step 4'
					if(game.me==game.boss){
						game.countPlayer(function(current){
							if(current!=player&&current.identity!='cai'){
								current.die();
							}
						});
					}
					'step 5'
					var dead=game.dead.slice(0);
					for(var i=0;i<dead.length;i++){
						if(dead[i]!=player&&dead[i].identity!='cai'){
							dead[i].hide();
						}
					}
					'step 6'
					game.me.chooseControl('2020','2021').set('prompt','选择版本').set('ai',function(target){
						return ['2020','2021'].randomGet();
					});
					'step 7'
					game.changeBoss(result.control=='2020'?'snjs_boss_hulaolvbu1':'snjs_boss_hulaolvbu3');
					game.boss.directgain(get.cards(8-game.boss.countCards('h')));
					game.delay(0.5);
					'step 8'
					var card1=get.cardPile('fangtian','field');
					var card2=get.cardPile('chitu','field');
					if(card1) game.boss.equip(card1);
					if(card2) game.boss.equip(card2);
					'step 9'
					while(_status.event.name!='phaseLoop'){
						_status.event=_status.event.parent;
					}
					_status.paused=false;
					_status.event.player=game.boss;
					_status.event.step=0;
					_status.roundStart=game.boss;
					player.die();
				}
			},
			snjs_boss_hulao_intro1:{nobracket:true},
			snjs_boss_hulao_intro2:{nobracket:true},
			snjs_boss_hulao_intro3:{nobracket:true},
			snjs_boss_hulao_intro4:{nobracket:true},
			snjs_boss_hulaoswdl:{
				trigger:{
					player:"die",
				},
				unique:true,
				silent:true,
				forceDie:true,
				charlotte:true,
				filter:function(event){
					return event.source&&event.source.isIn()&&event.source.identity=='cai';
				},
				content:function(){
					trigger.source.recover();
					trigger.source.draw(2);
				},
			},
			snjs_boss_hulaoswdl2:{
				trigger:{
					player:"die",
				},
				unique:true,
				silent:true,
				forceDie:true,
				charlotte:true,
				filter:function(event){
					return event.source&&event.source.isIn()&&event.source.identity=='cai';
				},
				content:function(){
					trigger.source.recover();
					trigger.source.draw(3);
				},
			},
			snjs_boss_hulaomj:{
				audio:"ext:神怒降世:1",
				trigger:{
					global:"damageEnd",
				},
				filter:function(event,player){
					if(!event.source) return false;
					if(event.source.countCards('h')>event.player.countCards('h')) return false;
					if(event.source.isFriendsOf(player)||event.source==player) return event.card&&event.card.name=='sha';
					return false;
				},
				logTarget:function(event){
					return event.source;
				},
				forced:true,
				content:function(){
					if(trigger.source==player) player.draw();
					else{
						event.draw=[player,trigger.source];
						game.asyncDraw(event.draw);
					}
				},
			},
			snjs_boss_hulaofg:{
				audio:"ext:神怒降世:1",
				trigger:{
					global:"useCardEnd",
				},
				forced:true,
				filter:function(event,player){
					if(!event.targets.contains(player)) return false;
					if(event.player.isFriendsOf(player)) return false;
					if(event.card.name=='sha') return true;
					if(get.type(event.card)=='trick'&&get.tag(event.card,'damage')) return !event.player.isFriendsOf(player);
				},
				content:function(){
					player.useCard({name:'sha',isCard:true},false,trigger.player);
				},
			},
			snjs_boss_hulaojl:{
				audio:"ext:神怒降世:2",
				trigger:{
					source:"damageSource",
				},
				forced:true,
				filter:function(event,player){
					if(event.player.countCards('he')<1) return false;
					return event.player!=player;
				},
				logTarget:function(event){
					return event.player;
				},
				content:function(){
					'step 0'
					event.cards=[];
					if(trigger.player.countCards('h')>0) var card1=trigger.player.getCards('h');
					if(trigger.player.countCards('e')>0) var card2=trigger.player.getCards('e');
					if(card1) event.cards.push(card1.randomGet());
					if(card2) event.cards.push(card2.randomGet());
					'step 1'
                    player.gain(event.cards,trigger.player,'giveAuto','bySelf');
				},
			},
			snjs_boss_hulaolx:{
				audio:"ext:神怒降世:1",
				trigger:{
					player:"phaseUseBegin",
				},
				filter:function(event,player){
					return game.hasPlayer(function(current){
						return current.isFriendsOf(player)&&current.isDamaged()&&current!=player;
					});
				},
				forced:true,
				content:function(){
					'step 0'
					event.target=[];
					game.countPlayer(function(current){
						if(current.isFriendsOf(player)&&current.isDamaged()&&current!=player) event.target.push(current);
					});
					'step 1'
					if(event.target.length>0){
						event.mubiao=event.target.randomGet();
						player.line(event.mubiao);
						player.loseHp();
						event.mubiao.recover();
						event.mubiao.draw(2);
					}
				},
			},
			snjs_boss_hulaohb:{
				audio:"ext:神怒降世:1",
				trigger:{
					player:"phaseUseBegin",
				},
				filter:function(event,player){
					return game.hasPlayer(function(current){
						return current.isFriendsOf(player)||current==player;
					});
				},
				forced:true,
				content:function(){
					'step 0'
					event.target=[];
					game.countPlayer(function(current){
						if(current.isFriendsOf(player)||current==player) event.target.push(current);
					});
					'step 1'
					if(event.target.length>0){
						event.mubiao=event.target.randomGet();
						var cards=[];
						while(cards.length<2){
							var card=get.cardPile2(function(card){
								return !cards.contains(card)&&card.name=='sha'&&get.type(card)=='basic';
							});
							if(card){
								cards.push(card);
							}
							else break;
						}
						if(cards.length){
							player.line(event.mubiao);
							event.mubiao.gain(cards,'gain2','log');
						}
					}
				},
			},
			snjs_boss_hulaofy:{
				audio:"ext:神怒降世:1",
				group:"snjs_boss_hulaofy_yichu",
				init:function(player){
					if(!player.storage.snjs_boss_hulaofy) player.storage.snjs_boss_hulaofy=[];
				},
				subSkill:{
					yichu:{
						trigger:{
							global:"useCardEnd",
						},
						filter:function(event,player){
							return event.card;
						},
						unique:true,
						silent:true,
						content:function(){
							player.storage.snjs_boss_hulaofy=[];
						},
						sub:true,
					},
				},
				trigger:{
					global:"useCardToPlayered",
				},
				filter:function(event,player){
					if(!event.card) return false;
					if(get.color(event.card)!='black') return false;
					if(event.player.isFriendsOf(player)) return false;
					return event.targets&&event.targets.length>0&&game.hasPlayer(function(current){
						if(current.isMinHp()){
							if(current.isFriendsOf(player)||current==player) return event.targets.contains(current);
						}
					});
				},
				forced:true,
				direct:true,
				content:function(){
					'step 0'
					event.mubiao=[];
					for(var i=0;i<trigger.targets.length;i++){
						if(trigger.targets[i].isMinHp()){
							if(trigger.targets[i].isFriendsOf(player)||trigger.targets[i]==player) event.mubiao.push(trigger.targets[i]);
						}
					}
					'step 2'
					if(event.mubiao.length>0){
						if(!player.storage.snjs_boss_hulaofy.contains(trigger.card)) player.logSkill('snjs_boss_hulaofy',event.mubiao);
						trigger.getParent().excluded.addArray(event.mubiao);
						player.storage.snjs_boss_hulaofy.push(trigger.card);
					}
				},
			},
			snjs_boss_hulaobl:{
				audio:"ext:神怒降世:1",
				trigger:{
					global:"dying",
				},
				forced:true,
				direct:true,
				filter:function(event,player){
					if(event.player==player) return false;
					return event.player.isFriendsOf(player)&&event.player.hp<1&&player.countCards('h')>0;
				},
				content:function(){
					'step 0'
					event.card=player.getCards('h');
					'step 1'
                    if(event.card){
						player.logSkill('snjs_boss_hulaobl',trigger.player);
						player.discard(event.card.randomGet());
						trigger.player.recover();
					}
				},
			},
			snjs_boss_hulaofx:{
				global:"snjs_boss_hulaofx_xiaoguo",
				forced:true,
				subSkill:{
					xiaoguo:{
						silent:true,
						unique:true,
						mod:{
							globalFrom:function(from,to,distance){
								if(game.hasPlayer(function(current){
									return current.hasSkill('snjs_boss_hulaofx')&&current.isFriendsOf(from);
								})){
									if(!to.isFriendsOf(from)) return distance-1;
								}
							},
						},
						sub:true,
					},
				},
			},
			snjs_boss_hulaotl:{
				audio:"ext:神怒降世:1",
				trigger:{
					global:"phaseDrawBegin",
				},
				filter:function(event,player){
					return event.player.isFriendsOf(player)&&!event.numFixed;
				},
				forced:true,
				logTarget:function(event){
					return event.player;
				},
				content:function(){
					trigger.num++;
				},
			},
			snjs_boss_hulaoyw:{
				audio:"ext:神怒降世:2",
				trigger:{
					player:"damageBegin3",
				},
				filter:function(event){
					if(!event.source) return false;
					if(event.card&&(event.card.name=='sha')) return true;
					return false;
				},
				forced:true,
				content:function(){
					if(get.color(trigger.card)=='red') trigger.source.chooseDrawRecover(true);
					else player.draw();
				},
				ai:{
					effect:{
						target:function(card,player,target,current){
							if(card.name=='sha'&&(get.color(card)=='red')){
								return [1,-2];
							}
						},
					},
				},
			},
			snjs_boss_hulaomq:{
				audio:"ext:神怒降世:1",
				trigger:{
					global:"phaseJieshuBegin",
				},
				filter:function(event,player){
					return event.player.isFriendsOf(player)&&event.player.countCards('h')<6;
				},
				forced:true,
				logTarget:function(event){
					return event.player;
				},
				content:function(){
					trigger.player.draw(6-trigger.player.countCards('h'));
				},
			},
			snjs_boss_hulaosc:{
				audio:"ext:神怒降世:1",
				trigger:{
					global:"phaseUseBegin",
				},
				filter:function(event,player){
					return event.player.isFriendsOf(player);
				},
				forced:true,
				logTarget:function(event){
					return event.player;
				},
				content:function(){
					'step 0'
					event.cards=[];
					for(var i=0;i<ui.discardPile.childNodes.length;i++){
						var current=ui.discardPile.childNodes[i];
						if(current.name=='sha'&&event.cards.length<1) event.cards.push(current);
					}
					'step 1'
					if(event.cards.length) trigger.player.gain(event.cards,'gain2','log');
					trigger.player.addTempSkill('snjs_boss_hulaosc_xiaoguo');
				},
				subSkill:{
					xiaoguo:{
						mod:{
							targetInRange:function(card,player,target,now){
								if(game.online){
									if(!player.countUsed()) return true;
								}
								else{
									var evt=_status.event.getParent('phaseUse');
									if(evt&&evt.name=='phaseUse'&&player.getHistory('useCard',function(evt2){
										return evt2.getParent('phaseUse')==evt
									}).length==0) return true;
								}
							},
							cardUsable:function(card,player,num){
								if(card.name=='sha') return num+1;
							},
						},
						sub:true,
					},
				},
			},
			snjs_boss_hulaosz:{
				audio:"ext:神怒降世:1",
				trigger:{
					source:"damageBegin",
				},
				filter:function(event,player){
					return event.card&&event.card.name=='sha';
				},
				forced:true,
				logTarget:function(event){
					return event.player;
				},
				content:function(){
					trigger.num++;
				},
				ai:{
					unequip:true,
				},
			},
			snjs_boss_hulaojj:{
				audio:"ext:神怒降世:2",
				global:"snjs_boss_hulaojj_xiaoguo",
				trigger:{
					player:"phaseBegin",
					global:"dying",
				},
				filter:function(event,player){
					return event.card&&event.card.name=='sha';
				},
				priority:15,
				forced:true,
				filter:function(event,player,name){
					return _status.currentPhase==player;
				},
				content:function(){},
				subSkill:{
					xiaoguo:{
						mod:{
							"cardEnabled2":function(card,player){
								if(_status.currentPhase.isAlive()&&_status.currentPhase&&_status.currentPhase.hasSkill('snjs_boss_hulaojj')&&card.name=='jiu') return false;
							},
						},
						sub:true,
					},
				},
			},
			snjs_boss_hulaows:{
				audio:"ext:神怒降世:2",
				group:['snjs_boss_hulaows_ws1','snjs_boss_hulaows_ws2'],
				shaRelated:true,
				trigger:{
					player:"useCard1",
				},
				filter:function(event,player){
					return event.card.name=='sha';
				},
				forced:true,
				locked:true,
				content:function(){},
				subSkill:{
					ws1:{
						trigger:{player:'useCardToPlayered'},
						forced:true,
						direct:true,
						filter:function(event,player){
							return event.card.name=='sha'&&!event.getParent().directHit.contains(event.target);
						},
						logTarget:'target',
						content:function(){
							var id=trigger.target.playerid;
							var map=trigger.getParent().customArgs;
							if(!map[id]) map[id]={};
							if(typeof map[id].shanRequired=='number'){
								map[id].shanRequired++;
							}
							else{
								map[id].shanRequired=2;
							}
						},
						ai:{
							directHit_ai:true,
							skillTagFilter:function(player,tag,arg){
								if(arg.card.name!='sha'||arg.target.countCards('h','shan')>1) return false;
							},
						},
						sub:true,
					},
					ws2:{
						audio:"snjs_boss_hulaows",
						trigger:{player:'useCardToPlayered',target:'useCardToTargeted'},
						forced:true,
						logTarget:function(trigger,player){
							return player==trigger.player?trigger.target:trigger.player
						},
						filter:function(event,player){
							return event.card.name=='juedou';
						},
						content:function(){
							var id=(player==trigger.player?trigger.target:trigger.player)['playerid'];
							var idt=trigger.target.playerid;
							var map=trigger.getParent().customArgs;
							if(!map[idt]) map[idt]={};
							if(!map[idt].shaReq) map[idt].shaReq={};
							if(!map[idt].shaReq[id]) map[idt].shaReq[id]=1;
							map[idt].shaReq[id]++;
						},
						ai:{
							directHit_ai:true,
							skillTagFilter:function(player,tag,arg){
								if(arg.card.name!='juedou'||Math.floor(arg.target.countCards('h','sha')/2)>player.countCards('h','sha')) return false;
							}
						},
						sub:true,
					},
				},
			},
			snjs_boss_hulaows2:{
				audio:"ext:神怒降世:2",
				group:['snjs_boss_hulaows2_ws1','snjs_boss_hulaows2_ws2'],
				shaRelated:true,
				trigger:{
					player:"useCard1",
				},
				filter:function(event,player){
					return event.card.name=='sha';
				},
				forced:true,
				locked:true,
				content:function(){},
				subSkill:{
					ws1:{
						trigger:{player:'useCardToPlayered'},
						forced:true,
						direct:true,
						filter:function(event,player){
							return event.card.name=='sha'&&!event.getParent().directHit.contains(event.target);
						},
						logTarget:'target',
						content:function(){
							var id=trigger.target.playerid;
							var map=trigger.getParent().customArgs;
							if(!map[id]) map[id]={};
							if(typeof map[id].shanRequired=='number'){
								map[id].shanRequired++;
							}
							else{
								map[id].shanRequired=2;
							}
						},
						ai:{
							directHit_ai:true,
							skillTagFilter:function(player,tag,arg){
								if(arg.card.name!='sha'||arg.target.countCards('h','shan')>1) return false;
							},
						},
						sub:true,
					},
					ws2:{
						audio:"snjs_boss_hulaows2",
						trigger:{player:'useCardToPlayered',target:'useCardToTargeted'},
						forced:true,
						logTarget:function(trigger,player){
							return player==trigger.player?trigger.target:trigger.player
						},
						filter:function(event,player){
							return event.card.name=='juedou';
						},
						content:function(){
							var id=(player==trigger.player?trigger.target:trigger.player)['playerid'];
							var idt=trigger.target.playerid;
							var map=trigger.getParent().customArgs;
							if(!map[idt]) map[idt]={};
							if(!map[idt].shaReq) map[idt].shaReq={};
							if(!map[idt].shaReq[id]) map[idt].shaReq[id]=1;
							map[idt].shaReq[id]++;
						},
						ai:{
							directHit_ai:true,
							skillTagFilter:function(player,tag,arg){
								if(arg.card.name!='juedou'||Math.floor(arg.target.countCards('h','sha')/2)>player.countCards('h','sha')) return false;
							}
						},
						sub:true,
					},
				},
			},
			snjs_boss_hulaobg:{
				audio:"ext:神怒降世:2",
				trigger:{
					global:"phaseEnd",
				},
				filter:function(event,player){
					return event.player!=player;
				},
				direct:true,
				content:function(){
					player.logSkill('snjs_boss_hulaobg');
					player.addTempSkill('snjs_boss_hulaobg_yz',{player:'phaseAfter'});
					player.insertPhase();
				},
				subSkill:{
					yz:{
						audio:"snjs_boss_hulaobg",
						trigger:{
							player:"phaseDrawBegin2",
						},
						forced:true,
						filter:function(event,player){
							return !event.numFixed;
						},
						content:function(){
							trigger.num++;
						},
						mod:{
							maxHandcardBase:function(player,num){
								return player.maxHp;
							},
						},
						sub:true,
					},
				},
			},
			snjs_boss_hulaozj:{
				audio:"ext:神怒降世:2",
				group:['snjs_boss_hulaozj_jianshang','snjs_boss_hulaozj_jilu1'],
				usable:1,
				trigger:{
					player:"damageBegin4",
				},
				filter:function(event,player){
					return event.num>1||player.hasSkill('snjs_boss_hulaozj_jilu2');
				},
				forced:true,
				content:function(){
					player.draw(2);
				},
				subSkill:{
					jianshang:{
						audio:"snjs_boss_hulaozj",
						usable:1,
						trigger:{
							player:"damageBegin",
						},
						filter:function(event,player){
							return event.num>2;
						},
						forced:true,
						content:function(){
							trigger.num=2;
						},
						sub:true,
					},
					jilu1:{
						usable:1,
						trigger:{
							player:"damageEnd",
						},
						filter:function(event,player){
							return !player.hasSkill('snjs_boss_hulaozj_jilu2');
						},
						unique:true,
						silent:true,
						forced:true,
						content:function(){
							player.addTempSkill('snjs_boss_hulaozj_jilu2');
						},
						sub:true,
					},
					jilu2:{
						unique:true,
						silent:true,
						forced:true,
						sub:true,
					},
				},
			},
			snjs_boss_hulaoxl:{
				audio:"ext:神怒降世:2",
				trigger:{
					player:"changeHp",
				},
				skillAnimation:true,
				animationColor:"metal",
				filter:function(event,player){
					return player.getDamagedHp()>player.hp;
				},
				unique:true,
				direct:true,
				content:function(){
					'step 0'
					player.logSkill('snjs_boss_hulaoxl');
					player.reinit('snjs_boss_hulaolvbu1','snjs_boss_hulaolvbu2');
					'step 1'
					player.maxHp=player.hp;
					player.update();
					'step 2'
					if(player.countCards('h')<player.hp) player.draw(player.hp-player.countCards('he'));
					'step 3'
					player.update();
					ui.clear();
					if(player.isLinked()) player.link();
					if(player.isTurnedOver()) player.turnOver();
					player.discard(player.getCards('j'));
					'step 4'
					while(_status.event.name!='phaseLoop'){
						_status.event=_status.event.parent;
					}
					game.resetSkills();
					_status.paused=false;
					_status.event.player=player;
					_status.event.step=0;
					_status.roundStart=player;
				},
			},
			snjs_boss_hulaozk:{
				audio:"ext:神怒降世:2",
				mod:{
					maxHandcardBase:function(player,num){
						return 12;
					},
				},
				trigger:{
					player:"damageEnd",
				},
				filter:function (event){
					return (event.num>0);
				},
				forced:true,
				direct:true,
				content:function(){
					'step 0'
					event.cishu=trigger.num;
					'step 1'
					player.logSkill('snjs_boss_hulaozk');
					if(trigger.source&&trigger.source!=player){
						player.line(trigger.source);
						if(trigger.source.countCards('e')>0){
							if(trigger.source.countCards('e')>player.countCards('e')){
								event.card=trigger.source.getCards('e');
							}
							else event.card=trigger.source.getCards('e').randomGet();
							trigger.source.discard(event.card);
						}
						else{
							if(trigger.source.countCards('h')>0){
								event.card=trigger.source.getCards('h').randomGet();
								trigger.source.discard(event.card);
							}
						}
					}
					'step 2'
					player.draw(2);
					event.cishu--;
					'step 3'
					if(event.cishu>0) event.goto(1);
				},
			},
			snjs_boss_hulaosj:{
				audio:"ext:神怒降世:2",
				group:"snjs_boss_hulaosj_draw",
				trigger:{
					player:"phaseJudgeBegin",
				},
				direct:true,
				filter:function(event,player){
					return player.countCards('j')&&player.countCards('h')>1;
				},
				content:function(){
					"step 0"
					player.chooseToDiscard(get.prompt('snjs_boss_hulaosj'),'<center>弃置两张手牌并弃置自己判定区的所有牌？</center>',2,'h').set('ai',function(card){
						return 6-get.value(card);
					});
					"step 1"
					if(result.bool){
						player.logSkill('snjs_boss_hulaosj');
						player.discard(player.getCards('j'));
					}
				},
				subSkill:{
					draw:{
						audio:"snjs_boss_hulaosj",
						trigger:{
							player:"phaseDrawBegin2",
						},
						filter:function(event,player){
							return !event.numFixed;
						},
						frequent:true,
						content:function(){
							trigger.num+=2;
						},
						sub:true,
					},
				},
                mod:{
					selectTarget:function(card,player,range){
						if(range[1]==-1) return;
						if(card.name=='sha') range[1]+=2;
					},
					cardUsable:function(card,player,num){
						if(card.name=='sha') return num+2;
					},
				},
			},
			snjs_boss_hulaolbyw:{
				audio:"ext:神怒降世:2",
				trigger:{
					global:"useCard",
				},
				forced:true,
				filter:function(event,player){
					return !event.player.isFriendsOf(player)&&get.type(event.card)=='trick'&&event.player!=player;
				},
				logTarget:function(event){
					return event.player;
				},
				content:function(){
					if(trigger.card.name=='wuxie') event.cards=trigger.player.getCards('he').randomGets(2);
					else event.cards=trigger.player.getCards('he').randomGets(1);
					if(event.cards.length) trigger.player.discard(event.cards);
				},
			},
			snjs_boss_hulaoxiuluo:{
				audio:"ext:神怒降世:2",
				derivation:["snjs_boss_hulaoshenjian","snjs_boss_hulaoliechu","snjs_boss_hulaofumo","snjs_boss_hulaojingang","snjs_boss_hulaokuangji"],
				init:function(player){
					if(!player.storage.snjs_boss_hulaoxiuluo) player.storage.snjs_boss_hulaoxiuluo=['snjs_boss_hulaoshenjian','snjs_boss_hulaoliechu','snjs_boss_hulaofumo','snjs_boss_hulaojingang'];
					if(!player.storage.snjs_boss_hulaoxiuluo1) player.storage.snjs_boss_hulaoxiuluo1=false;
					if(!player.storage.snjs_boss_hulaoxiuluo2) player.storage.snjs_boss_hulaoxiuluo2=false;
					if(!player.storage.snjs_boss_hulaoxiuluo3) player.storage.snjs_boss_hulaoxiuluo3=false;
					if(player.storage.snjs_boss_hulaoxiuluo.length>0&&player.storage.snjs_boss_hulaoxiuluo1==false){
						player.logSkill('snjs_boss_hulaoxiuluo');
						var skill1=player.storage.snjs_boss_hulaoxiuluo.randomGet();
						player.addSkill(skill1);
						player.storage.snjs_boss_hulaoxiuluo.remove(skill1);
						player.storage.snjs_boss_hulaoxiuluo1=true;
					}
				},
				trigger:{
					player:"changeHp",
				},
				forced:true,
				skillAnimation:true,
				animationColor:"metal",
				filter:function(event,player){
					if(player.hp<=8) return player.storage.snjs_boss_hulaoxiuluo3==false;
					if(player.hp<=16) return player.storage.snjs_boss_hulaoxiuluo2==false;
				},
				content:function(){
					'step 0'
					if(player.hp<=16&&player.storage.snjs_boss_hulaoxiuluo.length>0&&player.storage.snjs_boss_hulaoxiuluo2==false){
						var skill2=player.storage.snjs_boss_hulaoxiuluo.randomGet();
						player.addSkill(skill2);
						player.storage.snjs_boss_hulaoxiuluo.remove(skill2);
						player.storage.snjs_boss_hulaoxiuluo2=true;
					}
					if(player.hp<=8&&player.storage.snjs_boss_hulaoxiuluo3==false){
						player.addSkill('snjs_boss_hulaokuangji');
						player.storage.snjs_boss_hulaoxiuluo3=true;
					}
					'step 1'
					while(_status.event.name!='phaseLoop'){
						_status.event=_status.event.parent;
					}
					game.resetSkills();
					_status.paused=false;
					_status.event.player=player;
					_status.event.step=0;
					_status.roundStart=player;
				},
			},
			snjs_boss_hulaoshenjian:{
				audio:"ext:神怒降世:2",
				shaRelated:true,
				trigger:{
					player:"useCardToPlayered",
				},
				filter:function(event,player){
					return event.card.name=='sha'||event.card.name=='juedou';
				},
				forced:true,
				logTarget:"target",
				content:function(){
					trigger.target.damage('nocard');
				},
				ai:{
					"directHit_ai":true,
				},
			},
			snjs_boss_hulaoliechu:{
				audio:"ext:神怒降世:2",
				trigger:{
					source:"damageSource",
				},
				filter:function(event,player){
					if(!event.card) return false;
					else{
						if(event.card.name=='sha') return player.countUsed('sha',true)<2;
						if(event.card.name=='juedou') return player.countUsed('juedou',true)<2;
					}
					return false;
				},
				forced:true,
				content:function(){
					"step 0"
					var cards=get.cards(5);
					game.cardsGotoOrdering(cards);
					event.cards=[];
					event.qizhi=[];
					for(var i=0;i<cards.length;i++){
						if(get.type(cards[i])=='basic'||cards[i].name=='juedou'||
						   (get.type(cards[i])=='equip')){
							event.cards.push(cards[i]);
						}
						else event.qizhi.push(cards[i]);
					}
					"step 1"
					if(event.cards.length) player.gain(event.cards,'gain2');
					player.$throw(event.qizhi,1000,'snjs_boss_hulaoliechu','highlight');
				},
			},
			snjs_boss_hulaofumo:{
				audio:"ext:神怒降世:2",
				trigger:{
					player:"loseAfter",
					global:["equipAfter","addJudgeAfter","gainAfter","loseAsyncAfter"],
				},
				filter:function(event,player){
					var evt=event.getl(player);
					return evt&&evt.player==player&&evt.es&&evt.es.length>0;
				},
				forced:true,
				logTarget:function(event,player){
					return game.filterPlayer(function(current){
						return !current.isFriendsOf(player)&&current!=player;
					});
				},
				content:function(){
					"step 0"
					event.count=trigger.getl(player).es.length;
					event.i=0;
					"step 1"
					event.mubiao=[]
					game.countPlayer(function(current){
						if(!current.isFriendsOf(player)&&current!=player) event.mubiao.push(current);
					});
					"step 2"
					if(event.mubiao[event.i].countCards('e')>0){
						if(event.mubiao[event.i].countCards('e')==1){
							var card1=event.mubiao[event.i].getCards('e').randomGet();
							var card2=event.mubiao[event.i].getCards('h').randomGet();
							event.mubiao[event.i].discard([card1,card2]);
						}
						else event.mubiao[event.i].discard(event.mubiao[event.i].getCards('e').randomGets(2));
					}
					else{
						if(event.mubiao[event.i].countCards('h')>0) event.mubiao[event.i].discard(event.mubiao[event.i].getCards('h').randomGets(2));
					}
					"step 3"
					"step 4"
					event.i++;
					"step 5"
					if(event.i<event.mubiao.length) event.goto(2);
					"step 6"
					event.count--;
					"step 7"
					if(event.count>0){
						player.logSkill('snjs_boss_hulaofumo',game.filterPlayer(function(current){
							return !current.isFriendsOf(player)&&current!=player;
						}));
						event.goto(1);
					}
				},
			},
			snjs_boss_hulaojingang:{
				audio:"ext:神怒降世:2",
				trigger:{
					player:"damageEnd",
				},
				filter:function(event,player){
					return event.source&&event.source!=player&&event.source.isAlive();
				},
				forced:true,
				logTarget:'source',
				content:function(){
					'step 0'
					event.count=trigger.num;
					var target=trigger.source;
					if(!target.storage.snjs_boss_hulaojingang2) target.storage.snjs_boss_hulaojingang2=[];
					if(!target.hasSkill('snjs_boss_hulaojingang2')) target.addTempSkill('snjs_boss_hulaojingang2');
					'step 1'
					var target=trigger.source;
					event.count--;
					if(!target.countCards('he')) event._result={bool:false};
					else target.chooseCard('he','〖金刚〗：交给'+get.translation(player)+'一张本回合未通过此技能交出过的花色的牌，否则受到1点伤害',function(card){
						return !target.storage.snjs_boss_hulaojingang2.contains(get.suit(card));
					}).set('ai',function(card){
						return 8-get.value(card);
					});
					'step 2'
					var target=trigger.source;
					if(result.bool){
						var card=result.cards[0];
						var suit=get.suit(result.cards[0]);
						target.storage.snjs_boss_hulaojingang2.push(suit);
						player.gain(card,target,'giveAuto');
					}
					else target.damage('nocard');
					'step 3'
					var target=trigger.source;
					if(target.isAlive()&&event.count>0){
						player.logSkill('snjs_boss_hulaojingang',target);
						event.goto(1);
					}
				},
			},
			snjs_boss_hulaojingang2:{
				init:function(player){
					if(!player.storage.snjs_boss_hulaojingang2) player.storage.snjs_boss_hulaojingang2=[];
				},
				onremove:function(player){
					delete player.storage.snjs_boss_hulaojingang2;
				},
				silent:true,
				unique:true,
				forced:true,
			},
			snjs_boss_hulaokuangji:{
				audio:"ext:神怒降世:2",
				mod:{
					selectTarget:function(card,player,range){
						if(range[1]==-1) return;
						if(card.name=='sha') range[1]+=2;
					},
					cardUsable:function(card,player,num){
						if(card.name=='sha') return num+1;
					},
				},
				trigger:{
					player:"phaseDrawBegin",
					source:"damageSource",
				},
				filter:function(event,player,name){
					if(name=="phaseDrawBegin") return !event.numFixed;
					if(name=="damageSource"){
						if(!event.card) return false;
						if(event.player.isFriendsOf(player)||event.player==player) return false;
						if(event.player.countCards('h')<1) return false;
						return event.card.name=='sha'||event.card.name=='juedou';
					}
				},
				direct:true,
				content:function(){
					"step 0"
					if(event.triggername=="phaseDrawBegin"){
						player.chooseBool(get.prompt('snjs_boss_hulaokuangji')).ai=function(event,player){
							return player.countCards('h')<=10;
						};
					}
					else{
						player.logSkill('snjs_boss_hulaokuangji',trigger.player);
						trigger.player.discard(trigger.player.getCards('h').randomGet());
						event.finish();
					}
					"step 1"
					if(result.bool){
						player.logSkill('snjs_boss_hulaokuangji');
						if(player.countCards('h')>0) player.discard(player.getCards('h'));
						trigger.num=10;
					}
				},
			},
			snjs_boss_hulaolbcaidan:{
				group:["snjs_boss_hulaolbcaidan_cd1","snjs_boss_hulaolbcaidan_cd2"],
				unique:true,
				silent:true,
				forced:true,
				subSkill:{
					cd1:{
						trigger:{
							player:"phaseBegin",
						},
						filter:function(event,player){
							return game.countPlayer(function(current){
								var str=get.name(current);
								if(str.includes('liubei')&&current.identity=='cai') return current.isAlive();
								if(str.includes('dianwei')&&current.identity=='cai') return current.isAlive();
								if((str.includes('xuchu')||str.includes('xuzhu'))&&current.identity=='cai') return current.isAlive();
							})>0;
						},
						unique:true,
						silent:true,
						direct:true,
						forced:true,
						content:function(){
							'step 0'
							event.fzcf=[];
							'step 1'
							game.countPlayer(function(current){
								var str=get.name(current);
								if(current.identity=='cai'&&current.isAlive()&&str.includes('liubei')){
									current.chat('两位贤弟顶住，哥哥来助你们一臂之力！');
									game.playAudio('..','extension','神怒降世','caidan_liubei1.mp3');
									event.card0=get.cardPile('cixiong','field');
									if(event.card0) current.gain(event.card0,'gain2','log');
									current.draw(2);
								}
								if(current.identity=='cai'&&current.isAlive()&&str.includes('dianwei')){
									current.chat('不能让刘备抢了风头，吕布岂是我的对手！');
									game.playAudio('..','extension','神怒降世','caidan_dianwei.mp3');
									event.cards1=[];
									while(event.cards1.length<2){
										var card1=get.cardPile2(function(card){
											return !event.fzcf.contains(card)&&!event.cards1.contains(card)&&card.name!='fangtian'&&get.subtype(card)=='equip1';
										},'field');
										if(card1){
											event.cards1.push(card1);
											event.fzcf.push(card1);
										}
										else break;
									}
									if(event.cards1.length) current.gain(event.cards1,'gain2');
								}
								if(current.identity=='cai'&&current.isAlive()&&(str.includes('xuzhu')||str.includes('xuchu'))){
									current.chat('不能让刘备抢了风头，吕布岂是我的对手！');
									game.playAudio('..','extension','神怒降世','caidan_xuchu.mp3');
									event.cards2=[];
									while(event.cards2.length<2){
										var card2=get.cardPile2(function(card){
											return !event.fzcf.contains(card)&&!event.cards2.contains(card)&&card.name=='juedou';
										},'field');
										if(card2){
											event.cards2.push(card2);
											event.fzcf.push(card2);
										}
										else break;
									}
									if(event.cards2.length) current.gain(event.cards2,'gain2');
								}
							});
							'step 2'
							player.removeSkill('snjs_boss_hulaolbcaidan_cd1');
						},
						sub:true,
					},
					cd2:{
						trigger:{
							global:"phaseBegin",
						},
						init:function(player){
							if(!player.storage.snjs_boss_hulaolbcaidan_cd2) player.storage.snjs_boss_hulaolbcaidan_cd2=[];
						},
						filter:function(event,player){
							if(event.player==player) return false;
							if(player.storage.snjs_boss_hulaolbcaidan_cd2.contains(event.player)) return false;
							var str=get.name(event.player);
							if(event.player.identity=='cai') return str.includes('guanyu')||str.includes('zhangfei')||str.includes('zhaoyun')||str.includes('zhangliao');
							else return false;
						},
						unique:true,
						silent:true,
						direct:true,
						forced:true,
						content:function(){
							'step 0'
							event.str=get.name(trigger.player);
							'step 1'
							if(event.str.includes('guanyu')&&trigger.player.identity=='cai'){
								trigger.player.chat('吕布小儿，休得猖狂！');
								game.playAudio('..','extension','神怒降世','caidan_guanyu2.mp3');
								var card0=get.cardPile('qinglong','field');
								var card3=get.cardPile('shan','field');
								if(card0) trigger.player.gain(card0,'gain2','log');
								if(card3) trigger.player.gain(card3,'gain2','log');
								player.storage.snjs_boss_hulaolbcaidan_cd2.push(trigger.player);
							}
							if(event.str.includes('zhangfei')&&trigger.player.identity=='cai'){
								trigger.player.chat('三姓家奴休走，燕人张飞在此！');
								game.playAudio('..','extension','神怒降世','caidan_zhangfei1.mp3');
								var card1=get.cardPile('zhangba','field');
								var card2=get.cardPile('sha','field');
								if(card1) trigger.player.gain(card1,'gain2','log');
								if(card2) trigger.player.gain(card2,'gain2','log');
								player.storage.snjs_boss_hulaolbcaidan_cd2.push(trigger.player);
							}
							if(event.str.includes('zhaoyun')&&trigger.player.identity=='cai'){
								trigger.player.chat('刘关张三人实乃英雄豪杰，我也须要展露风头！');
								game.playAudio('..','extension','神怒降世','caidan_zhaoyun.mp3');
								var card2=get.cardPile('sha','field');
								var card3=get.cardPile('shan','field');
								if(card2) trigger.player.gain(card2,'gain2','log');
								if(card3) trigger.player.gain(card3,'gain2','log');
								player.storage.snjs_boss_hulaolbcaidan_cd2.push(trigger.player);
							}
							if(event.str.includes('zhangliao')&&trigger.player.identity=='cai'){
								trigger.player.chat('董卓暴政，吕布寄其帐下，视为明诛暗投。');
								game.playAudio('..','extension','神怒降世','caidan_zhangliao.mp3');
								trigger.player.gainPlayerCard(2,game.boss,'he',true);
								player.storage.snjs_boss_hulaolbcaidan_cd2.push(trigger.player);
							}
						},
						sub:true,
					},
				},
			},
			snjs_boss_hulaohxcaidan:{
				group:["snjs_boss_hulaohxcaidan_cd1","snjs_boss_hulaohxcaidan_cd2","snjs_boss_hulaohxcaidan_cd3"],
				unique:true,
				silent:true,
				forced:true,
				subSkill:{
					cd1:{
						trigger:{
							player:"phaseBegin",
						},
						unique:true,
						silent:true,
						direct:true,
						forced:true,
						filter:function(event,player){
							return game.countPlayer(function(current){
								var str=get.name(current);
								if(str.includes('panfeng')&&current.identity=='cai') return current.isAlive();
								if(str.includes('sunjian')&&current.identity=='cai') return current.isAlive();
								if(str.includes('yuanshao')&&current.identity=='cai') return current.isAlive();
							})>0;
						},
						content:function(){
							'step 0'
							event.fzcf=[];
							game.countPlayer(function(current){
								var str=get.name(current);
								if(current.isAlive()&&str.includes('yuanshao')&&current.identity=='cai'){
									current.chat('唉...可惜吾上将颜良文丑未至，得一人在此，何惧华雄！？');
									game.playAudio('..','extension','神怒降世','caidan_yuanshao.mp3');
									current.draw(3);
								}
								if(current.isAlive()&&str.includes('sunjian')&&current.identity=='cai'){
									current.chat('区区华雄，安敢在此造次！');
									game.playAudio('..','extension','神怒降世','caidan_sunjian.mp3');
									current.gainMaxHp();
									current.recover();
								}
								if(current.isAlive()&&str.includes('panfeng')&&current.identity=='cai'){
									current.chat('吾乃上将潘凤，华雄小儿速速受死！');
									game.playAudio('..','extension','神怒降世','caidan_panfeng.mp3');
									var card1=get.cardPile2(function(card){
										return get.subtype(card)=='equip1'&&!event.fzcf.contains(card);
									},'field');
									var card2=get.cardPile2(function(card){
										return get.subtype(card)=='equip2'&&!event.fzcf.contains(card);
									},'field');
									var card3=get.cardPile2(function(card){
										return get.subtype(card)=='equip3'&&!event.fzcf.contains(card);
									},'field');
									var card4=get.cardPile2(function(card){
										return get.subtype(card)=='equip4'&&!event.fzcf.contains(card);
									},'field');
									if(!current.getEquip(1)&&card1){
										current.equip(card1);
										event.fzcf.push(card1);
									}
									if(!current.getEquip(2)&&card2){
										current.equip(card2);
										event.fzcf.push(card2);
									}
									if(!current.getEquip(3)&&card3){
										current.equip(card3);
										event.fzcf.push(card3);
									}
									if(!current.getEquip(4)&&card4){
										current.equip(card4);
										event.fzcf.push(card4);
									}
								}
							});
							'step 1'
							player.removeSkill('snjs_boss_hulaohxcaidan_cd1');
						},
						sub:true,
					},
					cd2:{
						init:function(player){
							if(!player.storage.snjs_boss_hulaohxcaidan_cd2) player.storage.snjs_boss_hulaohxcaidan_cd2=[];
						},
						trigger:{
							global:"phaseBegin",
						},
						filter:function(event,player){
							if(event.player==player) return false;
							if(player.storage.snjs_boss_hulaohxcaidan_cd2.contains(event.player)) return false;
							var str=get.name(event.player);
							return str.includes('guanyu')&&event.player.identity=='cai';
						},
						unique:true,
						silent:true,
						direct:true,
						forced:true,
						content:function(){
							'step 0'
							event.card=get.cardPile('zhuge','field');
							'step 1'
							trigger.player.chat('小将愿往斩华雄头！');
							game.playAudio('..','extension','神怒降世','caidan_guanyu1.mp3');
							if(event.card) trigger.player.gain(event.card,'gain2','log');
							trigger.player.draw(3);
							'step 2'
							player.storage.snjs_boss_hulaohxcaidan_cd2.push(trigger.player);
						},
						sub:true,
					},
					cd3:{
						init:function(player){
							if(!player.storage.snjs_boss_hulaohxcaidan_cd3) player.storage.snjs_boss_hulaohxcaidan_cd3=[];
						},
						trigger:{
							global:"phaseDrawBegin",
						},
						filter:function(event,player){
							if(event.player==player) return false;
							if(player.storage.snjs_boss_hulaohxcaidan_cd3.contains(event.player)) return false;
							var str=get.name(event.player);
							return str.includes('caocao')&&event.player.identity=='cai';
						},
						unique:true,
						silent:true,
						direct:true,
						forced:true,
						content:function(){
							trigger.player.chat('众将士奋勇杀敌，论功行赏，不计贵贱。');
							game.playAudio('..','extension','神怒降世','caidan_caocao.mp3');
							trigger.num+=2;
							player.storage.snjs_boss_hulaohxcaidan_cd3.push(trigger.player);
						},
						sub:true,
					},
				},
			},
			snjs_boss_hulaocxcaidan:{
				init:function(player){
					if(!player.storage.snjs_boss_hulaocxcaidan) player.storage.snjs_boss_hulaocxcaidan=[];
				},
				trigger:{
					global:"phaseBegin",
				},
				unique:true,
				silent:true,
				direct:true,
				forced:true,
				filter:function(event,player){
					if(event.player==player) return false;
					if(player.storage.snjs_boss_hulaocxcaidan.contains(event.player)) return false;
					var str=get.name(event.player);
					return str.includes('xiahoudun')&&event.player.identity=='cai';
				},
				content:function(){
					trigger.player.chat('敌阵已乱，随我杀进去！');
					game.playAudio('..','extension','神怒降世','caidan_xiahoudun.mp3');
					trigger.player.gainMaxHp();
					trigger.player.recover(trigger.player.maxHp-trigger.player.hp);
					if(trigger.player.countCards('h')<trigger.player.hp) trigger.player.draw(trigger.player.hp-trigger.player.countCards('h'));
					player.storage.snjs_boss_hulaocxcaidan.push(trigger.player);
				},
			},
			snjs_boss_hulaocaidan:{
				trigger:{
					player:"phaseBegin",
				},
				unique:true,
				silent:true,
				direct:true,
				forced:true,
				filter:function(event,player){
					return game.countPlayer(function(current){
						var str=get.name(current);
						if(str.includes('jiaxu')&&current.identity=='cai') return current.isAlive();
						if(str.includes('xunyu')&&current.identity=='cai') return current.isAlive();
						if(str.includes('liuxie')&&current.identity=='cai') return current.isAlive();
						if(str.includes('gongsunzan')&&current.identity=='cai') return current.isAlive();
						if(str.includes('yuanshu')&&current.identity=='cai') return current.isAlive();
					})>0;
				},
				content:function(){
					'step 0'
					event.wansha=0;
					event.tianming=0;
					event.liangcao=0;
					event.fzcf=[];
					'step 1'
					game.countPlayer(function(current){
						var str=get.name(current);
						if(current.isAlive()&&str.includes('jiaxu')&&current.identity=='cai'){
							current.chat('李郭二人不除，日后必祸大乱。');
							game.playAudio('..','extension','神怒降世','caidan_jiaxu.mp3');
							event.wansha++;
						}
						if(current.isAlive()&&str.includes('xunyu')&&current.identity=='cai'){
							current.chat('董卓祸乱朝纲，汉室衰落，实属当世之不幸。');
							game.playAudio('..','extension','神怒降世','caidan_xunyu.mp3');
							current.gainMaxHp();
							current.recover();
						}
						if(current.isAlive()&&str.includes('liuxie')&&current.identity=='cai'){
							current.chat('各诸侯齐心协力，剿灭董卓党羽。');
							game.playAudio('..','extension','神怒降世','caidan_liuxie.mp3');
							event.tianming++;
						}
						if(current.isAlive()&&str.includes('gongsunzan')&&current.identity=='cai'){
							current.chat('今日一战，刘关张三人必将名扬天下！');
							game.playAudio('..','extension','神怒降世','caidan_gongsunzan.mp3');
							event.bcf=[];
							var card1=get.cardPile2(function(card){
								return get.subtype(card)=='equip3'&&!event.fzcf.contains(card);
							},'field');
							if(card1){
								current.equip(card1);
								event.fzcf.push(card1);
							}
							var card2=get.cardPile2(function(card){
								return get.subtype(card)=='equip4'&&!event.fzcf.contains(card);
							},'field');
							if(card2){
								current.equip(card2);
								event.fzcf.push(card2);
							}
						}
						if(current.isAlive()&&str.includes('yuanshu')&&current.identity=='cai'){
							current.chat('粮草已到，无后顾之忧。');
							game.playAudio('..','extension','神怒降世','caidan_yuanshu.mp3');
							event.liangcao++;
						}
					});
					'step 2'
					if(event.wansha!=0) event.goto(3);
					else event.goto(4);
					'step 3'
					game.countPlayer(function(current){
						if(current.isAlive()&&current.identity=='cai'&&!current.hasSkill('wansha')) current.addSkill('wansha');
					});
					'step 4'
					if(event.tianming!=0) event.goto(5);
					else event.goto(6);
					'step 5'
					game.countPlayer(function(current){
						if(current.isAlive()&&current.identity=='cai'&&!current.hasSkill('tianming')) current.addSkill('tianming');
					});
					'step 6'
					if(event.liangcao!=0) event.goto(7);
					else event.goto(8);
					'step 7'
					game.countPlayer(function(current){
						if(current.isAlive()&&current.identity=='cai'){
							var card1=get.cardPile2(function(card){
								return card.name=='tao'&&!event.fzcf.contains(card);
							},'field');
							var card2=get.cardPile2(function(card){
								return card.name=='jiu'&&!event.fzcf.contains(card);
							},'field');
							if(card1){
								current.gain(card1,'gain2','log');
								event.fzcf.push(card1);
							}
							if(card2){
								current.gain(card2,'gain2','log');
								event.fzcf.push(card2);
							}
						}
					});
					'step 8'
					player.removeSkill('snjs_boss_hulaocaidan');
				},
			},
			snjs_boss_hulaozjcaidan:{
				trigger:{
					player:"phaseBegin",
				},
				unique:true,
				silent:true,
				direct:true,
				forced:true,
				filter:function(event,player){
					return game.hasPlayer(function(current){
						var str=get.name(current);
						if(str.includes('zhangxiu')&&current.identity=='cai') return current.isAlive();
					});
				},
				content:function(){
					'step 0'
					if(!player.hasSkill('fengyin')) player.addSkill('fengyin');
					player.disableEquip('equip1');
					player.disableEquip('equip2');
					player.disableEquip('equip3');
					player.disableEquip('equip4');
					player.disableEquip('equip5');
					if(!player.hasSkill('hulaoxiongluan2')) player.addSkill('hulaoxiongluan2');
					player.removeSkill('snjs_boss_hulaomj');
					player.removeSkill('snjs_boss_hulaojl');
					'step 1'
					game.countPlayer(function(current){
						var str=get.name(current);
						if(str.includes('zhangxiu')&&current.isAlive()&&current.identity=='cai'){
							current.chat('叔若是执迷不悟，休怪我今日大义灭亲！');
							game.playAudio('..','extension','神怒降世','caidan_zhangxiu.mp3');
							if(!current.hasSkill('hulaoxiongluan1')) current.addSkill('hulaoxiongluan1');
						}
					});
					'step 2'
					player.removeSkill('snjs_boss_hulaozjcaidan');
				},
			},
			hulaoxiongluan1:{
				mark:true,
				marktext:"雄",
				intro:{
					name:"雄乱",
					content:"对拥有「乱」标记的角色使用牌没有次数与距离限制",
				},
				unique:true,
				silent:true,
				forced:true,
				mod:{
					targetInRange:function (card,player,target){
						if(target.hasSkill('hulaoxiongluan2')){
							return true;
						}
					},
					cardUsableTarget:function(card,player,target){
						if(target.hasSkill('hulaoxiongluan2')) return true;
					},
				},
			},
			hulaoxiongluan2:{
				mark:true,
				marktext:"乱",
				intro:{
					name:"雄乱",
					content:"无法使用或打出任何牌",
				},
				unique:true,
				silent:true,
				forced:true,
				trigger:{
					player:"dieBegin",
				},
				onremove:function(player){
					game.countPlayer(function(current){
						if(current.hasSkill('hulaoxiongluan1')) current.removeSkill('hulaoxiongluan1');
					});
				},
				content:function(){
					game.countPlayer(function(current){
						if(current.hasSkill('hulaoxiongluan1')) current.removeSkill('hulaoxiongluan1');
					});
				},
				mod:{
					"cardEnabled2":function(card,player){
						return false;
					},
				},
				ai:{
					effect:{
						target:function(card,player,target){
							if(get.tag(card,'damage')) return [0,-999999];
						},
					},
				},
			},
			snjs_boss_qihuan_intro1:{nobracket:true},
			snjs_boss_qihuan_intro2:{nobracket:true},
			snjs_boss_qihuan_intro3:{nobracket:true},
			snjs_boss_qihuan_intro4:{nobracket:true},
			snjs_boss_qihuan:{
				trigger:{global:'gameStart'},
				forced:true,
				popup:false,
				fixed:true,
				unique:true,
				charlotte:true,
				content:function(){
					'step 0'
					game.bossinfo.chongzheng=999;
					player.smoothAvatar();
					'step 1'
					game.me.chooseControl('外戚','内宦').set('prompt',game.me==game.boss?'选择你的所属势力':'选择要对抗的势力').set('ai',function(target){
						return ['外戚','内宦'].randomGet();
					});
					if(game.me==game.boss){
						event.boss2=[];
						event.wxuanze=['曹夏夏','曹曹曹','袁许沮','袁颜文郭逢','袁荀陈'];
						event.nxuanze=['snjs_boss_qihuancaojie','snjs_boss_qihuanchengkuang','snjs_boss_qihuanduangui','snjs_boss_qihuanfengxu','snjs_boss_qihuanguosheng','snjs_boss_qihuanhoulan','snjs_boss_qihuanjianshuo','snjs_boss_qihuanxiayun'];
					}
					'step 2'
					event.diduishili=result.control;
					'step 3'
					if(game.me==game.boss){
						game.me.chooseControl('普通场','Boss场').set('ai',function(target){
							return ['普通场','Boss场'].randomGet();
						});
					}
					else{
						event.bosszhan=[1,2,3,4,5].randomGet();
						event.goto(5);
					}
					'step 4'
					if(result.control=='Boss场') event.bosszhan=1;
					else event.bosszhan=[2,3,4,5].randomGet();
					'step 5'
					if(event.bosszhan!=1){
						if(game.me==game.boss&&event.diduishili=='外戚'){
							game.boss.nextSeat.changeSeat(3);
							game.boss.previousSeat.changeSeat(5);
						}
						if(game.me!=game.boss&&event.diduishili=='外戚'){
							game.boss.changeSeat(6);
						}
						if(game.me==game.boss&&event.diduishili=='内宦'){
							game.boss.nextSeat.changeSeat(3);
							game.boss.previousSeat.changeSeat(5);
						}
					}
					'step 6'
					if(event.diduishili=='内宦'){
						if(game.me==game.boss){
							if(event.bosszhan==1){
								game.me.chooseControl('snjs_boss_qihuanzhangrang','snjs_boss_qihuanzhaozhong').set('prompt','请选择一位BOSS').set('ai',function(target){
									return ['snjs_boss_qihuanzhangrang','snjs_boss_qihuanzhaozhong'].randomGet();
								});
							}
							else{
								game.me.chooseControl(event.nxuanze).set('prompt','请选择初场的常侍').set('ai',function(target){
									return event.nxuanze.randomGet();
								});
							}
						}
						else{
							event.neihuan1=['snjs_boss_qihuanzhangrang','snjs_boss_qihuanzhaozhong'];
							event.neihuan2=['snjs_boss_qihuancaojie','snjs_boss_qihuanchengkuang','snjs_boss_qihuanduangui','snjs_boss_qihuanfengxu','snjs_boss_qihuanguosheng','snjs_boss_qihuanhoulan','snjs_boss_qihuanjianshuo','snjs_boss_qihuanxiayun'];
							event.boss1=event.neihuan1.randomGet();
							event.boss2=event.neihuan2.randomGets(2);
							event.goto(8);
						}
					}
					else{
						if(game.me==game.boss){
							if(event.bosszhan==1){
								game.me.chooseControl('snjs_boss_qihuanhejin','snjs_boss_qihuanhetaihou').set('prompt','请选择一位BOSS').set('ai',function(target){
									return ['snjs_boss_qihuanhejin','snjs_boss_qihuanhetaihou'].randomGet();
								});
							}
							else{
								game.me.chooseControl(event.wxuanze).set('prompt','请选择一个组合').set('ai',function(target){
									return event.wxuanze.randomGet();
								});
							}
						}
						else{
							event.waiqi1=['snjs_boss_qihuanhejin','snjs_boss_qihuanhetaihou'];
							event.boss1=event.waiqi1.randomGet();
							var waiqi21=['snjs_boss_qihuancaocao','snjs_boss_qihuanxiahoudun','snjs_boss_qihuanxiahouyuan'];
							var waiqi22=['snjs_boss_qihuancaocao','snjs_boss_qihuancaoren','snjs_boss_qihuancaoang'];
							var waiqi23=['snjs_boss_qihuanyuanshao','snjs_boss_qihuanxuyou','snjs_boss_qihuanjushou'];
							var waiqi24=['snjs_boss_qihuanyuanshao','snjs_boss_qihuanyanwen','snjs_boss_qihuanguofeng'];
							var waiqi25=['snjs_boss_qihuanyuanshu','snjs_boss_qihuanxunyou','snjs_boss_qihuanchenlin'];
							event.waiqi2=[waiqi21,waiqi22,waiqi23,waiqi24,waiqi25];
							event.boss2=event.waiqi2.randomGet();
							event.goto(8);
						}
					}
					'step 7'
					if(event.diduishili=='外戚'){
						if(event.bosszhan==1){
							event.boss1=result.control;
						}
						else{
							if(result.control=='曹夏夏'){
								event.boss2=['snjs_boss_qihuancaocao','snjs_boss_qihuanxiahoudun','snjs_boss_qihuanxiahouyuan'];
							}
							if(result.control=='曹曹曹'){
								event.boss2=['snjs_boss_qihuancaocao','snjs_boss_qihuancaoren','snjs_boss_qihuancaoang'];
							}
							if(result.control=='袁许沮'){
								event.boss2=['snjs_boss_qihuanyuanshao','snjs_boss_qihuanxuyou','snjs_boss_qihuanjushou'];
							}
							if(result.control=='袁颜文郭逢'){
								event.boss2=['snjs_boss_qihuanyuanshao','snjs_boss_qihuanyanwen','snjs_boss_qihuanguofeng'];
							}
							if(result.control=='袁荀陈'){
								event.boss2=['snjs_boss_qihuanyuanshu','snjs_boss_qihuanxunyou','snjs_boss_qihuanchenlin'];
							}
						}
					}
					if(event.diduishili=='内宦'){
						if(event.bosszhan==1){
							event.boss1=result.control;
						}
						else{
							event.nxuanze.remove(result.control);
							event.boss2.push(result.control);
							if(event.boss2.length<2) event.goto(6);
						}
					}
					'step 8'
					if(event.bosszhan==1){
						player.init(event.boss1);
						player.directgain(get.cards(4));
						_status.noswap=true;
						event.goto(11);
					}
					else{
						player.init(event.boss2[0]);
						_status.noswap=true;
					}
					game.delay(0.5);
					'step 9'
					if(event.diduishili=='外戚'){
						game.addBossFellow(game.me==game.boss?1:5,event.boss2[1]);
						game.addBossFellow(7,event.boss2[2]);
					}
					else game.addBossFellow(game.me==game.boss?7:6,event.boss2[1]);
					'step 10'
					game.addVideo('reinit2',player,player.name);
					'step 11'
					if(event.bosszhan!=1){
						game.countPlayer(function(current){
							if(current.isFriendsOf(game.boss)||current==game.boss){
								if(current!=game.boss){
									var cards=current.getCards('h').randomGets(2);
									if(cards.length){
										current.lose(cards);
										current.update();
										game.cardsDiscard(cards);
									}
								}
								else current.directgain(get.cards(2));
							}
						});
					}
				}
			},
			snjs_boss_qihuan2:{
				mode:['boss'],
				trigger:{player:'dieBegin'},
				silent:true,
				unique:true,
				fixed:true,
				charlotte:true,
				filter:function(event,player){
					return player==game.boss;
				},
				content:function(){
					'step 0'
					//if(game.boss!=game.me){
						game.countPlayer(function(current){
							if(current.identity=='zhong'&&current!=player&&current.isAlive()){
								game.boss=current;
							}
						});
						event.finish();
					//}
					/*'step 1'
					player.chooseTarget('选择你要操控的角色',1,true,function(card,player,target){
						return target.identity!='cai'&&player!=target;
					});
					'step 2'
					if(result.bool){
						event.juese=result.targets[0];
						result.targets[0]._trueMe=game.me;
						game.boss=result.targets[0];
					}
					else{
						game.countPlayer(function(current){
							if(current.identity=='zhong'&&current!=player&&current.isAlive()){
								if(player==game.me) current._trueMe=game.me;
								game.boss=current;
							}
						});
					}*/
				},
			},
            snjs_boss_qihuangshd:{
                audio:"ext:神怒降世:1",
                trigger:{
                    player:"judgeEnd",
                },
				forced:true,
				filter:function(event,player){
					if(get.color(event.result.card)!='black') return false;
					return get.position(event.result.card,true)=='o'&&game.hasPlayer(function(current){
						return !current.isFriendsOf(player)&&current!=player;
					});
				},
                content:function(){
					game.countPlayer(function(current){
						if(!current.isFriendsOf(player)&&current!=player){
							player.line(current);
							current.damage('nocard');
						}
					});
				},
            },
            snjs_boss_qihuangshm:{
                audio:"ext:神怒降世:1",
				trigger:{
					global:"useCard",
				},
				filter:function(event,player){
					if(event.player.isFriendsOf(player)&&event.player!=player) return false;
					if(get.color(event.card)!='black') return false;
					if(event.player==player){
						return event.card&&game.hasPlayer(function(current){
							return !current.isFriendsOf(player)&&current!=player&&current.countCards('he')>0;
						});
					}
					return event.card;
				},
				forced:true,
				content:function(){
					'step 0'
					if(trigger.player!=player){
						player.draw();
						event.finish();
					}
					'step 1'
					event.target=[];
					game.countPlayer(function(current){
						if(!current.isFriendsOf(player)&&current!=player&&current.countCards('he')>0) event.target.push(current);
					});
					'step 2'
					if(event.target.length>0){
						event.mubiao=event.target.randomGet();
						event.cards=event.mubiao.getCards('he').randomGets(1);
						if(event.cards.length){
							player.line(event.mubiao);
							event.mubiao.discard(event.cards);
						}
					}
				},
            },
			snjs_boss_qihuanxyjf:{
				audio:"ext:神怒降世:1",
				trigger:{
					player:"phaseZhunbeiBegin",
				},
				filter:function(event,player){
					if(player.isMaxHandcard()) return false;
					return game.hasPlayer(function(current){
						return !current.isFriendsOf(player)&&current!=player&&current.countCards('h')>player.countCards('h');
					});
				},
				forced:true,
				direct:true,
				content:function(){
					'step 0'
					if(!game.hasPlayer(function(current){
						return !current.isFriendsOf(player)&&current!=player&&current.countCards('h')>player.countCards('h');
					})) event.finish();
					'step 1'
					event.target=[];
					game.countPlayer(function(current){
						if(!current.isFriendsOf(player)&&current!=player&&current.countCards('h')>player.countCards('h')) event.target.push(current);
					});
					'step 2'
					if(event.target.length>0){
						event.mubiao=event.target.randomGet();
						event.cards=event.mubiao.getCards('h').randomGets(1);
						if(event.cards.length){
							player.logSkill('snjs_boss_qihuanxyjf',event.mubiao);
							player.gain(event.cards,event.mubiao,'giveAuto','bySelf');
						}
					}
					'step 3'
					event.goto(0);
				},
			},
            snjs_boss_qihuanhljs:{
                audio:"ext:神怒降世:1",
                trigger:{
                    player:"damageEnd",
                },
                filter:function(event,player){
					return event.num>0&&_status.currentPhase!=player&&!_status.currentPhase.isFriendsOf(player);
				},
				logTarget:function(event){
					return _status.currentPhase;
				},
                forced:true,
                content:function(){
					_status.currentPhase.addTempSkill('hljs');
					if(trigger.num>1){
						player.recover(1);
					}
				},
            },
            snjs_boss_qihuanjsjb:{
                audio:"ext:神怒降世:1",
                group:["snjs_boss_qihuanjsjb_jieshu","snjs_boss_qihuanjsjb_shanghai"],
				forced:true,
				direct:true,
                subSkill:{
                    jieshu:{
                        forced:true,
                        trigger:{
                            player:"phaseJieshuBegin",
                        },
                        content:function(){
							player.loseMaxHp();
						},
                        sub:true,
                    },
                    shanghai:{
                        trigger:{
                            player:"loseMaxHpBegin",
                        },
                        forced:true,
						direct:true,
                        filter:function(event,player){
							return game.hasPlayer(function(current){
								return !current.isFriendsOf(player)&&current!=player;
							});
						},
                        content:function(){
							'step 0'
							event.target=[];
							game.countPlayer(function(current){
								if(!current.isFriendsOf(player)&&current!=player) event.target.push(current);
							});
							'step 1'
							if(event.target.length>0){
								event.mubiao=event.target.randomGet();
								player.logSkill('snjs_boss_qihuanjsjb',event.mubiao);
								event.mubiao.damage('nocard');
							}
						},
                        sub:true,
                    },
                },
            },
            snjs_boss_qihuancjhb:{
                audio:"ext:神怒降世:1",
				trigger:{
					player:"phaseUseBegin",
				},
                filter:function(event,player){
					return game.hasPlayer(function(current){
						return !current.isFriendsOf(player)&&current!=player;
					});
				},
				forced:true,
				logTarget:function(event,player){
					var mubiao=[];
					game.countPlayer(function(current){
						if(!current.isFriendsOf(player)&&current!=player) mubiao.push(current);
					});
					return mubiao;
				},
				content:function(){
					'step 0'
					event.target=[];
					game.countPlayer(function(current){
						if(!current.isFriendsOf(player)&&current!=player) event.target.push(current);
					});
					'step 1'
					if(event.target.length>0){
						player.chooseUseTarget('nanman',event.target,true,false);
					}
					'step 2'
					var bool=game.hasPlayer2(function(current){
						return current.getHistory('damage',function(evt){
							return evt.getParent(4)==event;
						}).length>0
					});
					if(!bool) player.draw(3);
				},
            },
            snjs_boss_qihuanckad:{
                audio:"ext:神怒降世:1",
                trigger:{
                    global:"phaseEnd",
                },
                filter:function(event,player){
					return !event.player.isFriendsOf(player)&&event.player.hp<=player.hp;
				},
				forced:true,
				logTarget:function(event,player){
					return event.player;
				},
                content:function (){
					trigger.player.damage('nocard');
				},
                ai:{
                    expose:0.4,
                    threaten:1,
                },
            },
            snjs_boss_qihuanckbr:{
                audio:"ext:神怒降世:1",
                trigger:{
                    player:"damageBegin4",
                },
                filter:function(event,player){
					if(event.source==undefined||event.num<1) return false;
					return event.source!=player&&!event.source.isFriendsOf(player);
				},
                logTarget:"source",
                forced:true,
                content:function(){
					"step 0"
					trigger.source.chooseToDiscard(trigger.source.countCards('h'),true);
					"step 1"
					if(result.cards.length<player.hp){
						trigger.num--;
					}
				},
            },
            snjs_boss_qihuandgsx:{
                audio:"ext:神怒降世:1",
                trigger:{
                    source:"damageSource",
                },
                direct:true,
                filter:function(event,player){
					return event.num>0&&player.countCards('he')>0;
				},
                content:function(){
					"step 0"
					var next=player.chooseCardTarget({
						position:'he',
						filterCard:lib.filter.cardDiscardable,
						filterTarget:function(card,player,target){
							return (target==trigger.player.previous||target==trigger.player.next)&&target!=trigger.player;
						},
						ai1:function(card){
							return get.unuseful(card)+9;
						},
						ai2:function(target){
							var player=_status.event.player;
							return get.damageEffect(target,player,player);
						},
						prompt:get.prompt('snjs_boss_qihuandgsx'),
						prompt2:'<center>弃置一张牌，令'+get.translation(trigger.player)+'的上家或下家失去1点体力</center>',
					});
					"step 1"
					if(result.bool){
						player.logSkill('snjs_boss_qihuandgsx',result.targets[0]);
						player.discard(result.cards);
						result.targets[0].loseHp(1);
					}
				},
            },
            snjs_boss_qihuanfxlx:{
                audio:"ext:神怒降世:1",
                trigger:{
                    player:["useCard","respond"],
                },
                filter:function(event,player){
					return (event.card.name=='shan'||event.card.name=='sha')&&_status.currentPhase!=player;
				},
                direct:true,
                content:function(){
					"step 0"
					player.chooseTarget(get.prompt('fxlx'),'<center>选择一名目标</center>',function(card,player,target){
						return target!=player;
					}).ai=function(target){
						return get.damageEffect(target,player,player,'thunder');
					};
					"step 1"
					if(result.bool){
						event.target=result.targets[0];
						player.logSkill('snjs_boss_qihuanfxlx',event.target,'thunder');
						var func=function(result){
							if(event.target.countCards('he')<1&&get.color(result)=='red') return 0;
							return -1;
						};
						event.target.judge(func);
					}
					"step 2"
					event.color=result.color;
					"step 3"
					if(event.color=='red'){
						player.discardPlayerCard(event.target,2,'he',true);
					}
					else{
						event.target.damage(2,'nocard','thunder');
					}
				},
                ai:{
                    threaten:1.7,
                },
            },
			snjs_boss_qihuanzrhl:{
                audio:"ext:神怒降世:1",
                trigger:{
                    player:"phaseUseBegin",
                },
				forced:true,
                direct:true,
				content:function (){
					"step 0"
					if(player.hp>10) event.num=1;
					else{
						if(player.hp>5) event.num=2;
						else event.num=3;
					}
					event.cards=[];
					while(event.cards.length<event.num){
						var card=get.cardPile2(function(card){
							return !event.cards.contains(card)&&get.color(card)=='black'&&(get.type(card)=='trick'||get.type(card)=='delay')&&lib.filter.filterCard(card,player,_status.event.getParent());
						});
						if(card){
							event.cards.push(card);
						}
						else break;
					}
					if(event.cards.length<1){
						event.finish();
					}
					"step 1"
					player.logSkill('snjs_boss_qihuanzrhl');
					for(var i=0;i<event.cards.length;i++){
						player.chooseUseTarget(event.cards[i]).set('prompt',get.translation(event.cards[i]));
					}
				},
			},
			snjs_boss_qihuanzryk:{
                audio:"ext:神怒降世:1",
                trigger:{
                    player:"damageEnd",
					source:"damageBegin",
                },
				intro:{
					name:"炎恐",
					content:"下一次对敌方角色造成的伤害+#",
				},
				forced:true,
                direct:true,
				content:function (){
					'step 0'
					if(event.triggername=='damageEnd'&&player.countMark('snjs_boss_qihuanzryk')<2){
						player.logSkill('snjs_boss_qihuanzryk');
						player.addMark('snjs_boss_qihuanzryk');
						event.finish();
					}
					'step 1'
					if(event.triggername=='damageBegin'&&player.countMark('snjs_boss_qihuanzryk')>0&&trigger.player!=player){
						if(!trigger.player.isFriendsOf(player)){
							player.logSkill('snjs_boss_qihuanzryk',trigger.player);
							trigger.num+=player.countMark('snjs_boss_qihuanzryk');
							player.removeMark('snjs_boss_qihuanzryk',player.countMark('snjs_boss_qihuanzryk'));
						}
					}
				},
			},
			snjs_boss_qihuanzrjq:{
				audio:"ext:神怒降世:1",
				trigger:{
					player:"phaseZhunbeiBegin",
				},
				filter:function(event,player){
					return player.countCards('h')<5;
				},
				forced:true,
				content:function(){
					player.draw(5-trigger.player.countCards('h'));
				},
			},
			snjs_boss_qihuanzrlz:{
				audio:"ext:神怒降世:1",
				group:["snjs_boss_qihuanzrlz_damage","snjs_boss_qihuanlzqc"],
				trigger:{
					global:"gainAfter",
				},
				filter:function(event,player){
					if(!event.player.isFriendsOf(player)&&event.player!=player){
						return event.player.isPhaseUsing()&&_status.currentPhase==event.player&&event.player.countCards('h')>7;
					}
				},
				forced:true,
                direct:true,
				content:function(){
					if(!trigger.player.hasSkill('snjs_boss_qihuanlz')){
						player.logSkill('snjs_boss_qihuanzrlz',trigger.player);
						trigger.player.addTempSkill('snjs_boss_qihuanlz');
					}
				},
				subSkill:{
					damage:{
						trigger:{
							player:"damageEnd",
						},
						filter:function(event,player){
							if(!_status.currentPhase.isFriendsOf(player)){
								return _status.currentPhase.isPhaseUsing()&&_status.currentPhase!=player;
							}
						},
						forced:true,
						direct:true,
						content:function(){
							'step 0'
							player.addMark('snjs_boss_qihuanlzqc',trigger.num);
							'step 1'
							if(player.countMark('snjs_boss_qihuanlzqc')>3){
								player.logSkill('snjs_boss_qihuanzrlz',_status.currentPhase);
								_status.currentPhase.addTempSkill('snjs_boss_qihuanlz');
								event.finish();
							}
						},
						sub:true,
					},
				},
			},
			snjs_boss_qihuanlz:{
				mark:true,
                marktext:"乱政",
				intro:{
					name:"乱政",
					content:"本回合不能使用任何牌",
				},
				unique:true,
				direct:true,
				forced:true,
				mod:{
					cardEnabled:function(card,player){
						return false;
					},
				},
			},
			snjs_boss_qihuanlzqc:{
                marktext:"乱政",
				intro:{
					name:"乱政",
					content:"本回合已受到#点伤害",
				},
				trigger:{
					global:"phaseEnd",
				},
				unique:true,
				silent:true,
				forced:true,
				content:function(){
					if(player.countMark('snjs_boss_qihuanlzqc')>0){
						player.removeMark('snjs_boss_qihuanlzqc',player.countMark('snjs_boss_qihuanlzqc'));
					}
				},
			},
			snjs_boss_qihuanzzlz:{
				audio:"ext:神怒降世:1",
				group:["snjs_boss_qihuanzzlz_damage","snjs_boss_qihuanlzqc"],
				trigger:{
					global:"gainAfter",
				},
				filter:function(event,player){
					if(!event.player.isFriendsOf(player)&&event.player!=player){
						return event.player.isPhaseUsing()&&_status.currentPhase==event.player&&event.player.countCards('h')>7;
					}
				},
				forced:true,
                direct:true,
				content:function(){
					if(!trigger.player.hasSkill('snjs_boss_qihuanlz')){
						player.logSkill('snjs_boss_qihuanzzlz',trigger.player);
						trigger.player.addTempSkill('snjs_boss_qihuanlz');
					}
				},
				subSkill:{
					damage:{
						trigger:{
							player:"damageEnd",
						},
						filter:function(event,player){
							if(!_status.currentPhase.isFriendsOf(player)){
								return _status.currentPhase.isPhaseUsing()&&_status.currentPhase!=player;
							}
						},
						forced:true,
						direct:true,
						content:function(){
							'step 0'
							player.addMark('snjs_boss_qihuanlzqc',trigger.num);
							'step 1'
							if(player.countMark('snjs_boss_qihuanlzqc')>3){
								player.logSkill('snjs_boss_qihuanzzlz',_status.currentPhase);
								_status.currentPhase.addTempSkill('snjs_boss_qihuanlz');
								event.finish();
							}
						},
						sub:true,
					},
				},
			},
			snjs_boss_qihuanzzdz:{
				audio:"ext:神怒降世:1",
				trigger:{
					global:"useCard",
				},
				usable:1,
				filter:function(event,player){
					if(event.player==player) return false;
					if(event.cards.filterInD().length<=0) return false;
					if(!event.player.isFriendsOf(player)){
						return _status.currentPhase==event.player;
					}
				},
				forced:true,
				logTarget:function(event){
					return event.player;
				},
				content:function(){
					'step 0'
					event.cards=trigger.cards.filterInD();
					event.suit=[];
					for(var i=0;i<event.cards.length;i++){
						if(!event.suit.contains(get.suit(event.cards[i]))){
							event.suit.push(get.suit(event.cards[i]));
						}
					}
					'step 1'
					event.cards2=trigger.player.getCards('h');
					event.cards3=[];
					for(var i=0;i<event.cards2.length;i++){
						if(event.suit.contains(get.suit(event.cards2[i]))){
							event.cards3.push(event.cards2[i]);
						}
					}
					'step 2'
					if(event.cards3.length) trigger.player.discard(event.cards3);
				},
			},
			snjs_boss_qihuanzzlh:{
				audio:"ext:神怒降世:1",
				trigger:{
					player:"damageEnd",
				},
				usable:1,
				filter:function(event,player){
					return game.hasPlayer(function(current){
						return !current.isFriendsOf(player)&&current!=player;
					});
				},
				forced:true,
				direct:true,
				content:function(){
					'step 0'
					event.target=[];
					game.countPlayer(function(current){
						if(!current.isFriendsOf(player)&&current!=player) event.target.push(current);
					});
					'step 1'
					if(event.target.length>0){
						event.mubiao=event.target.randomGets(trigger.num);
						player.logSkill('snjs_boss_qihuanzzlh',event.mubiao);
						for(var i=0;i<event.mubiao.length;i++){
							event.mubiao[i].loseHp();
						}
					}
				},
			},
			snjs_boss_qihuanzzhk:{
				audio:"ext:神怒降世:1",
				trigger:{
					target:"useCardToBegin",
				},
				filter:function(event,player){
					return player.countCards('h')==0&&_status.currentPhase!=player;
				},
				forced:true,
				content:function(){
					player.draw(4);
				},
			},
			snjs_boss_qihuanhthzq:{
				audio:"ext:神怒降世:1",
				trigger:{
					global:"useCardEnd",
				},
				usable:3,
				filter:function(event,player){
					if(!event.targets.contains(player)) return false;
					if(event.cards.filterInD().length<=0) return false;
					return !event.player.isFriendsOf(player)&&get.type(event.card)=='trick'&&get.color(event.card)=='black'&&event.card;
				},
				forced:true,
				content:function(){
					player.gain(trigger.cards,"gain2");
				},
			},
			snjs_boss_qihuanhthch:{
				audio:"ext:神怒降世:1",
				trigger:{
					player:"useCardToPlayered",
				},
				filter:function(event,player){
					return event.card.name=='sha';
				},
				forced:true,
				logTarget:"target",
				content:function(){
					player.loseHp();
					trigger.target.loseHp();
				},
			},
			snjs_boss_qihuanhthnq:{
				audio:"ext:神怒降世:1",
				trigger:{
					player:"damageEnd",
				},
				usable:1,
				filter:function(event,player){
					return game.hasPlayer(function(current){
						return !current.isFriendsOf(player)&&current!=player;
					});
				},
				forced:true,
				direct:true,
				content:function(){
					'step 0'
					event.target=[];
					game.countPlayer(function(current){
						if(!current.isFriendsOf(player)&&current!=player){
							event.target.push(current);
							event.xueliang=current.hp;
							event.mubiao=current;
						}
					});
					'step 1'
					if(event.target.length>0){
						for(var i=0;i<event.target.length;i++){
							if(event.xueliang>event.target[i].hp){
								event.mubiao=event.target[i];
								event.xueliang=event.target[i].hp;
							}
							else{
								if(event.mubiao!=event.target[i]&&event.xueliang==event.target[i].hp&&event.mubiao) delete event.mubiao;
							}
						}
					}
					'step 2'
					if(event.mubiao){
						player.logSkill('snjs_boss_qihuanhthnq',event.mubiao);
						event.mubiao.damage('nocard');
						if(trigger.num>1){
							event.cards=event.mubiao.getCards('he').randomGets(2);
							if(event.cards.length) event.mubiao.discard(event.cards);
						}
					}
				},
			},
			snjs_boss_qihuanhthsx:{
				audio:"ext:神怒降世:1",
				trigger:{
					global:"dying",
				},
				forced:true,
				filter:function(event,player){
					return event.player.countCards('h')>0&&!event.player.isFriendsOf(player);
				},
				logTarget:function(event){
					return event.player;
				},
				content:function(){
					var cards=trigger.player.getCards('h');
					if(cards.length){
						var card=cards.randomGet();
						player.gain(card,trigger.player,'giveAuto','bySelf');
					}
				},
			},
			snjs_boss_qihuanhjzm:{
				audio:"ext:神怒降世:1",
				trigger:{
					global:"useCard",
				},
				forced:true,
				filter:function(event,player){
					return get.type(event.card)=='trick'&&event.player!=player&&event.player.isPhaseUsing()&&!event.player.isFriendsOf(player);
				},
				usable:1,
				logTarget:function(event){
					return event.player;
				},
				content:function(){
					'step 0'
					trigger.player.chooseToDiscard('〖镇谋〗：弃置两张非锦囊牌，否则令'+get.translation(trigger.card)+'无效',2,'he',function(card,player){
						return get.type2(card)!='trick';
					}).set('ai',function(card){
						return 8-get.value(card);
					});
					'step 1'
					if(!result.cards){
						trigger.cancel();
					}
				},
			},
			snjs_boss_qihuanhjgl:{
				audio:"ext:神怒降世:1",
				trigger:{
					player:"useCard",
				},
				forced:true,
				filter:function(event,player){
					return event.card.name=='sha'||event.card.name=='juedou'||event.card.name=='guohe';
				},
				content:function(){},
				mod:{
					targetInRange:function(card,player,target){
						if(card.name=='sha'&&game.hasPlayer(function(current){
							return current!=player&&player.inRange(current);
						})) return true;
					},
					selectTarget:function(card,player,range){
						if(card.name=='sha'||card.name=='juedou'||card.name=='guohe'){
							range[1]=-1;
							range[0]=-1;
						}
					},
					playerEnabled:function(card,player,target){
						if((card.name=='sha'||card.name=='juedou'||card.name=='guohe')&&target.isFriendsOf(player)){
							return false;
						}
					},
				},
			},
			snjs_boss_qihuanhjwx:{
				audio:"ext:神怒降世:1",
				trigger:{
					source:"damageSource",
				},
				filter:function(event,player){
					return _status.currentPhase==player;
				},
				forced:true,
				usable:1,
				content:function(){
					'step 0'
					player.draw(3);
					'step 1'
					event.target=[];
					game.countPlayer(function(current){
						if(current!=player&&!current.isFriendsOf(player)&&current.countCards('h')<player.countCards('h')) event.target.push(current);
					});
					'step 2'
					if(event.target.length>0){
						for(var i=0;i<event.target.length;i++){
							if(event.target[i].countCards('hej')>0) player.gainPlayerCard('hej',event.target[i],true);
						}
					}
				},
			},
			snjs_boss_qihuanhjqb:{
				audio:"ext:神怒降世:1",
				trigger:{
					global:"useCard",
				},
				filter:function(event,player){
					return !event.player.isFriendsOf(player)&&_status.currentPhase==event.player&&event.player.countUsed('sha',true)>3;
				},
				forced:true,
				content:function(){
					trigger.player.loseHp();
				},
			},
			snjs_boss_zhuogui_intro1:{nobracket:true},
			snjs_boss_zhuogui_intro2:{nobracket:true},
			snjs_boss_zhuogui_intro3:{nobracket:true},
			snjs_boss_zhuogui_intro4:{nobracket:true},
			snjs_boss_zhuogui:{
				trigger:{global:'gameStart'},
				forced:true,
				popup:false,
				fixed:true,
				unique:true,
				charlotte:true,
				content:function(){
					'step 0'
					game.bossinfo.chongzheng=999;
					player.smoothAvatar();
					'step 1'
					game.me.chooseControl('2020','2021').set('prompt','选择版本').set('ai',function(target){
						return ['2020','2021'].randomGet();
					});
					'step 2'
					event.banben=result.control;
					'step 3'
					if(game.me==game.boss){
						if(event.banben=='2020'){
							game.me.chooseControl('第一关','第二关','第三关','第四关').set('prompt','选择你想要开始的节点').set('ai',function(target){
								return '第一关';
							});
						}
						if(event.banben=='2021'){
							game.me.chooseControl('第一关','第二关','第三关').set('prompt','选择你想要开始的节点').set('ai',function(target){
								return '第一关';
							});
						}
					}
					else{
						event.guanqia='第一关';
						event.goto(8);
					}
					'step 4'
					if(game.me==game.boss){
						game.boss.nextSeat.changeSeat(3);
						game.boss.previousSeat.changeSeat(5);
					}
					else{
						game.boss.changeSeat(6);
					}
					'step 5'
					event.guanqia=result.control;
					if(event.guanqia=='第一关'||event.guanqia=='第四关') event.goto(8);
					if(event.guanqia=='第二关'){
						event.zjxz=1;
						event.xuanze20=['黑无常与白无常','牛头与马面'];
						event.xuanze21=[];
						event.xuanze211=['snjs_boss_zhuoguiheiwuchangbaiwuchang','snjs_boss_zhuoguiniutoumamian','snjs_boss_zhuoguiriyoushenyeyoushen'];
						event.xuanze212=['snjs_boss_zhuoguibaowei','snjs_boss_zhuoguiniaozui','snjs_boss_zhuoguiyusai','snjs_boss_zhuoguihuangfeng'];
					}
					if(event.guanqia=='第三关'){
						event.xuanze20=['snjs_boss_zhuoguibaowei','snjs_boss_zhuoguiniaozui','snjs_boss_zhuoguiyusai','snjs_boss_zhuoguihuangfeng'];
						event.xuanze21=['snjs_boss_zhuoguiguiwang','snjs_boss_zhuoguiyanluowang'];
					}
					event.juese=[];
					'step 6'
					if(game.me==game.boss){
						if(event.guanqia=='第二关'){
							if(event.banben=='2020'){
								game.me.chooseControl(event.xuanze20).set('prompt',event.zjxz>0?'请选择出战的阴兵组合':'请选择自己的武将牌').set('ai',function(target){
									return event.xuanze20.randomGet();
								});
							}
							if(event.banben=='2021'){
								if(event.zjxz>0){
									if(event.xuanze21.length<1){
										game.me.chooseControl(event.xuanze211).set('prompt','请选择出战的阴兵').set('ai',function(target){
											return event.xuanze211.randomGet();
										});
									}
									else{
										game.me.chooseControl(event.xuanze212).set('prompt','请选择出战的阴兵').set('ai',function(target){
											return event.xuanze212.randomGet();
										});
									}
								}
								else{
									game.me.chooseControl(event.xuanze21).set('prompt','请选择自己的武将牌').set('ai',function(target){
										return event.xuanze21.randomGet();
									});
								}
							}
						}
						if(event.guanqia=='第三关'){
							if(event.banben=='2020'){
								game.me.chooseControl(event.xuanze20).set('prompt','请选择出战的阴兵').set('ai',function(target){
									return event.xuanze20.randomGet();
								});
							}
							if(event.banben=='2021'){
								game.me.chooseControl(event.xuanze21).set('prompt','请选择出战的BOSS').set('ai',function(target){
									return event.xuanze21.randomGet();
								});
							}
						}
					}
					'step 7'
					if(event.guanqia=='第二关'){
						if(event.banben=='2020'){
							if(event.zjxz>0){
								if(result.control=='黑无常与白无常') event.xuanze20=['snjs_boss_zhuoguiheiwuchang','snjs_boss_zhuoguibaiwuchang'];
								else event.xuanze20=['snjs_boss_zhuoguiniutou','snjs_boss_zhuoguimamian'];
								event.zjxz--;
								event.goto(6);
							}
							else{
								event.xuanze20.remove(result.control);
								event.juese.push(result.control);
								event.juese.push(event.xuanze20[0]);
							}
						}
						if(event.banben=='2021'){
							if(event.xuanze21.length<2){
								event.xuanze21.push(result.control);
								if(event.xuanze21.length==2&&event.zjxz>0) event.zjxz--;
								event.goto(6);
							}
							else{
								event.xuanze21.remove(result.control);
								event.juese.push(result.control);
								event.juese.push(event.xuanze21[0]);
							}
						}
					}
					if(event.guanqia=='第三关'){
						if(event.banben=='2020'){
							event.xuanze20.remove(result.control);
							event.juese.push(result.control);
							if(event.juese.length<2) event.goto(6);
						}
						if(event.banben=='2021'){
							event.juese.push(result.control);
						}
					}
					'step 8'
					if(event.guanqia=='第一关'){
						player.init('snjs_boss_zhuoguimengpo');
						if(event.banben=='2021') player.addSkill('snjs_boss_zhuoguibanbenqubie');
						event.goto(11);
					}
					if(event.guanqia=='第二关'){
						player.init(event.juese[0]);
					}
					if(event.guanqia=='第三关'){
						player.init(event.juese[0]);
						if(event.banben=='2021') event.goto(11);
					}
					if(event.guanqia=='第四关'){
						player.init('snjs_boss_zhuoguiyanluowang');
						player.removeSkill('snjs_boss_zhuoguiylwdw');
						player.removeSkill('snjs_boss_zhuoguiylwxp2');
						event.goto(11);
					}
					'step 9'
					if(event.guanqia=='第二关') game.addBossFellow(game.me==game.boss?7:6,event.juese[1]);
					if(event.guanqia=='第三关'&&event.banben=='2020') game.addBossFellow(game.me==game.boss?7:6,event.juese[1]);
					'step 10'
					game.addVideo('reinit2',player,player.name);
					'step 11'
					game.countPlayer(function(current){
						if(current.name=='snjs_boss_zhuoguiguiwang'||current.name=='snjs_boss_zhuoguiyanluowang'){
							current.directgain(get.cards(4));
						}
						else{
							if(current.isFriendsOf(game.boss)||current==game.boss){
								if(event.banben=='2021') current.addSkill('snjs_boss_zhuoguibanbenqubie');
								if(current!=game.boss){
									var cards=current.getCards('h').randomGets(2);
									if(cards.length){
										current.lose(cards);
										current.update();
										game.cardsDiscard(cards);
									}
								}
								else current.directgain(get.cards(2));
							}
						}
					});
				}
			},
			snjs_boss_zhuoguibanbenqubie:{
				forced:true,
				popup:false,
				fixed:true,
				unique:true,
			},
			snjs_boss_zhuogui2:{
				mode:['boss'],
				trigger:{player:'dieBegin'},
				silent:true,
				unique:true,
				forced:true,
				fixed:true,
				charlotte:true,
				filter:function(event,player){
					return player==game.boss;
				},
				content:function(){
					'step 0'
					if(player.hasSkill('snjs_boss_zhuoguibanbenqubie')){
						event.xxx=1;
					}
					else event.xxx=0;
					if(game.me==game.boss){
						event.juese=[];
						event.zjxz=1;
						event.xuanze20=['黑无常与白无常','牛头与马面'];
						event.xuanze21=[];
						event.xuanze211=['snjs_boss_zhuoguiheiwuchangbaiwuchang','snjs_boss_zhuoguiniutoumamian','snjs_boss_zhuoguiriyoushenyeyoushen'];
						event.xuanze212=['snjs_boss_zhuoguibaowei','snjs_boss_zhuoguiniaozui','snjs_boss_zhuoguiyusai','snjs_boss_zhuoguihuangfeng'];
					}
					'step 1'
					player.hide();
					game.addVideo('hidePlayer',player);
					'step 2'
					if(game.me==game.boss){
						game.countPlayer(function(current){
							if(current!=player&&current.identity!='cai'){
								current.die();
							}
						});
					}
					'step 3'
					var dead=game.dead.slice(0);
					for(var i=0;i<dead.length;i++){
						if(dead[i]!=player&&dead[i].identity!='cai'){
							dead[i].hide();
						}
					}
					'step 4'
					if(game.me!=game.boss) game.boss.changeSeat(7);
					game.delay();
					'step 5'
					if(game.boss==game.me){
						if(!player.hasSkill('snjs_boss_zhuoguibanbenqubie')){
							game.me.chooseControl(event.xuanze20).set('prompt',event.zjxz>0?'请选择出战的阴兵组合':'请选择自己的武将牌').set('ai',function(target){
								return event.xuanze20.randomGet();
							});
						}
						if(player.hasSkill('snjs_boss_zhuoguibanbenqubie')){
							if(event.zjxz>0){
								if(event.xuanze21.length<1){
									game.me.chooseControl(event.xuanze211).set('prompt','请选择出战的阴兵').set('ai',function(target){
										return event.xuanze211.randomGet();
									});
								}
								else{
									game.me.chooseControl(event.xuanze212).set('prompt','请选择出战的阴兵').set('ai',function(target){
										return event.xuanze212.randomGet();
									});
								}
							}
							else{
								game.me.chooseControl(event.xuanze21).set('prompt','请选择自己的武将牌').set('ai',function(target){
									return event.xuanze21.randomGet();
								});
							}
						}
					}
					else{
						event.juese=[];
						event.suiji=[0,1].randomGet();
						if(!player.hasSkill('snjs_boss_zhuoguibanbenqubie')){
							if(event.suiji==0){
								event.juese=['snjs_boss_zhuoguiheiwuchang','snjs_boss_zhuoguibaiwuchang'];
							}
							if(event.suiji==1){
								event.juese=['snjs_boss_zhuoguiniutou','snjs_boss_zhuoguimamian'];
							}
							event.goto(7);
						}
						if(player.hasSkill('snjs_boss_zhuoguibanbenqubie')){
							event.juese.push(['snjs_boss_zhuoguiheiwuchangbaiwuchang','snjs_boss_zhuoguiniutoumamian','snjs_boss_zhuoguiriyoushenyeyoushen'].randomGet());
							event.juese.push(['snjs_boss_zhuoguibaowei','snjs_boss_zhuoguiniaozui','snjs_boss_zhuoguiyusai','snjs_boss_zhuoguihuangfeng'].randomGet());
							event.goto(7);
						}
					}
					'step 6'
					if(game.boss==game.me){
						if(!player.hasSkill('snjs_boss_zhuoguibanbenqubie')){
							if(event.zjxz>0){
								if(result.control=='黑无常与白无常') event.xuanze20=['snjs_boss_zhuoguiheiwuchang','snjs_boss_zhuoguibaiwuchang'];
								else event.xuanze20=['snjs_boss_zhuoguiniutou','snjs_boss_zhuoguimamian'];
								event.zjxz--;
								event.goto(5);
							}
							else{
								event.xuanze20.remove(result.control);
								event.juese.push(result.control);
								event.juese.push(event.xuanze20[0]);
							}
						}
						else{
							if(event.xuanze21.length<2){
								event.xuanze21.push(result.control);
								if(event.xuanze21.length==2&&event.zjxz>0) event.zjxz--;
								event.goto(5);
							}
							else{
								event.xuanze21.remove(result.control);
								event.juese.push(result.control);
								event.juese.push(event.xuanze21[0]);
							}
						}
					}
					'step 7'
					game.changeBoss(event.juese[0]);
					game.delay(0.5);
					'step 8'
					game.addBossFellow(game.me==game.boss?7:6,event.juese[1]);
					'step 9'
					event.draw=[];
					game.countPlayer(function(current){
						if(current.isFriendsOf(game.boss)||current==game.boss){
							if(event.xxx==1) current.addSkill('snjs_boss_zhuoguibanbenqubie');
							current.directgain(get.cards(2));
						}
						if(current.identity=='cai') event.draw.push(current);
					});
					'step 10'
					if(trigger.source==undefined||trigger.source.identity!='cai') event.goto(13);
					else event.draw.remove(trigger.source);
					if(trigger.source!=undefined&&!trigger.source.isDamaged()){
						trigger.source.draw(2);
						event.goto(13);
					}
					'step 11'
					trigger.source.chooseControl('回复1点体力','摸两张牌').set('ai',function(){
						if(player.getDamagedHp()<2) return '回复1点体力';
						return '摸两张牌';
					});
					'step 12'
					if(result.control=='回复1点体力') trigger.source.recover();
					else trigger.source.draw(2);
					'step 13'
					game.asyncDraw(event.draw);
					'step 14'
					while(_status.event.name!='phaseLoop'){
						_status.event=_status.event.parent;
					}
					game.resetSkills();
					_status.paused=false;
					_status.event.player=_status.currentPhase.nextSeat;
					_status.event.step=0;
					_status.roundStart=_status.currentPhase.nextSeat;
					game.phaseNumber=0;
					game.roundNumber=0;
					if(game.bossinfo){
						game.bossinfo.loopType=1;
					}
					game.playAudio("..","extension","神怒降世",player.name+".mp3");
					player.die();
				}
			},
			snjs_boss_zhuogui3:{
				mode:['boss'],
				trigger:{player:'dieBegin'},
				silent:true,
				unique:true,
				forced:true,
				fixed:true,
				charlotte:true,
				filter:function(event,player){
					return player==game.boss;
				},
				content:function(){
					'step 0'
					if(game.me==game.boss){
						event.juese=[];
						event.xuanze20=['snjs_boss_zhuoguibaowei','snjs_boss_zhuoguiniaozui','snjs_boss_zhuoguiyusai','snjs_boss_zhuoguihuangfeng'];
						event.goto(2);
					}
					'step 1'
					event.ren=[];
					game.countPlayer(function(current){
						if(current.identity!='cai'&&current!=player&&current.isAlive()){
							event.ren.push(current);
						}
					});
					if(event.ren.length){
						game.boss=event.ren.randomGet();
						event.finish();
					}
					'step 2'
					player.hide();
					game.addVideo('hidePlayer',player);
					if(trigger.source!=undefined&&trigger.source.identity=='cai'){
						trigger.source.recover();
						trigger.source.draw(2);
					}
					'step 3'
					if(game.me==game.boss){
						game.countPlayer(function(current){
							if(current!=player&&current.identity!='cai'){
								current.die();
							}
						});
					}
					'step 4'
					var dead=game.dead.slice(0);
					for(var i=0;i<dead.length;i++){
						if(dead[i]!=player&&dead[i].identity!='cai'){
							dead[i].hide();
						}
					}
					'step 5'
					if(game.me!=game.boss) game.boss.changeSeat(7);
					game.delay();
					'step 6'
					if(game.boss==game.me){
						game.me.chooseControl(event.xuanze20).set('prompt','请选择出战的阴兵').set('ai',function(target){
							return event.xuanze20.randomGet();
						});
					}
					else{
						event.juese=['snjs_boss_zhuoguibaowei','snjs_boss_zhuoguiniaozui','snjs_boss_zhuoguiyusai','snjs_boss_zhuoguihuangfeng'].randomGets(2);
						event.goto(8);
					}
					'step 7'
					if(game.boss==game.me){
						event.xuanze20.remove(result.control);
						event.juese.push(result.control);
						if(event.juese.length<2) event.goto(6);
					}
					'step 8'
					game.changeBoss(event.juese[0]);
					game.delay(0.5);
					'step 9'
					game.addBossFellow(game.me==game.boss?7:6,event.juese[1]);
					'step 10'
					game.countPlayer(function(current){
						if(current.isFriendsOf(game.boss)||current==game.boss){
							current.directgain(get.cards(2))
						}
					});
					'step 11'
					while(_status.event.name!='phaseLoop'){
						_status.event=_status.event.parent;
					}
					game.resetSkills();
					_status.paused=false;
					_status.event.player=_status.currentPhase.nextSeat;
					_status.event.step=0;
					_status.roundStart=_status.currentPhase.nextSeat;
					game.phaseNumber=0;
					game.roundNumber=0;
					if(game.bossinfo){
						game.bossinfo.loopType=1;
					}
					game.playAudio("..","extension","神怒降世",player.name+".mp3");
					player.die();
				}
			},
			snjs_boss_zhuogui3x:{
				mode:['boss'],
				trigger:{player:'dieBegin'},
				silent:true,
				unique:true,
				forced:true,
				fixed:true,
				charlotte:true,
				filter:function(event,player){
					return player==game.boss;
				},
				content:function(){
					'step 0'
					if(game.me==game.boss){
						event.juese=[];
						event.xuanze21=['snjs_boss_zhuoguiguiwang','snjs_boss_zhuoguiyanluowang'];
						event.goto(2);
					}
					'step 1'
					event.ren=[];
					game.countPlayer(function(current){
						if(current.identity!='cai'&&current!=player&&current.isAlive()){
							event.ren.push(current);
						}
					});
					if(event.ren.length){
						game.boss=event.ren.randomGet();
						event.finish();
					}
					'step 2'
					player.discard(player.getCards('hej'));
					game.playAudio('..','extension','神怒降世',player.name+'.mp3');
					player.hide();
					game.addVideo('hidePlayer',player);
					if(trigger.source!=undefined&&trigger.source.identity=='cai'){
						trigger.source.recover();
						trigger.source.draw(3);
					}
					'step 3'
					if(game.me==game.boss){
						game.countPlayer(function(current){
							if(current!=player&&current.identity!='cai'){
								current.die();
							}
						});
					}
					'step 4'
					var dead=game.dead.slice(0);
					for(var i=0;i<dead.length;i++){
						if(dead[i]!=player&&dead[i].identity!='cai'){
							dead[i].hide();
						}
					}
					'step 5'
					if(game.me!=game.boss) game.boss.changeSeat(7);
					game.delay();
					'step 6'
					if(game.boss==game.me){
						game.me.chooseControl(event.xuanze21).set('prompt','请选择出战的BOSS').set('ai',function(target){
							return event.xuanze21.randomGet();
						});
					}
					else{
						event.juese=['snjs_boss_zhuoguiguiwang','snjs_boss_zhuoguiyanluowang'].randomGet();
						event.goto(8);
					}
					'step 7'
					if(game.boss==game.me){
						event.juese=result.control;
					}
					'step 8'
					game.changeBoss(event.juese);
					game.boss.directgain(get.cards(8-game.boss.countCards('h')));
					game.delay(0.5);
					'step 9'
					while(_status.event.name!='phaseLoop'){
						_status.event=_status.event.parent;
					}
					_status.paused=false;
					_status.event.player=game.boss;
					_status.event.step=0;
					_status.roundStart=game.boss;
				}
			},
			snjs_boss_zhuogui4:{
				mode:['boss'],
				trigger:{player:'dieBegin'},
				silent:true,
				unique:true,
				forced:true,
				fixed:true,
				charlotte:true,
				filter:function(event,player){
					return player==game.boss;
				},
				content:function(){
					'step 0'
					if(game.me==game.boss){
						event.juese=[];
						if(player.hasSkill('snjs_boss_zhuoguibanbenqubie')) event.xuanze21=['snjs_boss_zhuoguiguiwang','snjs_boss_zhuoguiyanluowang'];
						event.goto(2);
					}
					'step 1'
					event.ren=[];
					game.countPlayer(function(current){
						if(current.identity!='cai'&&current!=player&&current.isAlive()){
							event.ren.push(current);
						}
					});
					if(event.ren.length){
						game.boss=event.ren.randomGet();
						event.finish();
					}
					'step 2'
					player.discard(player.getCards('hej'));
					game.playAudio('..','extension','神怒降世',player.name+'.mp3');
					player.hide();
					game.addVideo('hidePlayer',player);
					if(trigger.source!=undefined&&trigger.source.identity=='cai'){
						trigger.source.recover();
						if(player.name=='snjs_boss_zhuoguibaowei') trigger.source.draw(3);
						else trigger.source.draw(2);
					}
					'step 3'
					if(game.me==game.boss){
						game.countPlayer(function(current){
							if(current!=player&&current.identity!='cai'){
								current.die();
							}
						});
					}
					'step 4'
					if(game.me!=game.boss) game.boss.changeSeat(7);
					game.delay();
					'step 5'
					var dead=game.dead.slice(0);
					for(var i=0;i<dead.length;i++){
						if(dead[i]!=player&&dead[i].identity!='cai'){
							dead[i].hide();
						}
					}
					'step 6'
					if(player.hasSkill('snjs_boss_zhuoguibanbenqubie')){
						if(game.boss==game.me){
							game.me.chooseControl(event.xuanze21).set('prompt','请选择出战的BOSS').set('ai',function(target){
								return event.xuanze21.randomGet();
							});
						}
						else{
							event.juese=['snjs_boss_zhuoguiguiwang','snjs_boss_zhuoguiyanluowang'].randomGet();
							event.goto(8);
						}
					}
					else event.goto(8);
					'step 7'
					if(game.boss==game.me){
						event.juese=result.control;
					}
					'step 8'
					if(player.hasSkill('snjs_boss_zhuoguibanbenqubie')) game.changeBoss(event.juese);
					else{
						game.changeBoss('snjs_boss_zhuoguiyanluowang');
						game.boss.removeSkill('snjs_boss_zhuoguiylwdw');
						game.boss.removeSkill('snjs_boss_zhuoguiylwxp2');
					}
					game.boss.directgain(get.cards(8-game.boss.countCards('h')));
					game.delay(0.5);
					'step 9'
					while(_status.event.name!='phaseLoop'){
						_status.event=_status.event.parent;
					}
					_status.paused=false;
					_status.event.player=game.boss;
					_status.event.step=0;
					_status.roundStart=game.boss;
				}
			},
			snjs_boss_zhuoguigm:{
				audio:"ext:神怒降世:2",
				group:["snjs_boss_zhuoguigm_draw","snjs_boss_zhuoguigm_use"],
				trigger:{
					player:"turnOverBefore",
				},
				priority:20,
				filter:function(event,player){
					return !player.isTurnedOver();
				},
				forced:true,
				direct:true,
				content:function(){
					if(player.sex=='male'){
						player.logSkill("snjs_boss_zhuoguigm_male");
					}
					else player.logSkill("snjs_boss_zhuoguigm_female");
					trigger.cancel();
					game.log(player,'取消了翻面');
				},
				subSkill:{
					draw:{
						trigger:{
							player:'phaseDrawSkipped',
						},
						forced:true,
						direct:true,
						content:function(){
							if(player.sex=='male'){
								player.logSkill("snjs_boss_zhuoguigm_male");
							}
							else player.logSkill("snjs_boss_zhuoguigm_female");
							player.draw();
						},
						sub:true,
					},
					use:{
						trigger:{
							player:'phaseUseSkipped',
						},
						forced:true,
						direct:true,
						content:function(){
							if(player.sex=='male'){
								player.logSkill("snjs_boss_zhuoguigm_male");
							}
							else player.logSkill("snjs_boss_zhuoguigm_female");
							player.addTempSkill('snjs_boss_zhuoguigm_xiaoguo');
						},
						sub:true,
					},
					xiaoguo:{
						mod:{
							ignoredHandcard:function(card,player){
								return true;
							},
							cardDiscardable:function(card,player,name){
								if(name=='phaseDiscard') return false;
							},
						},
						silent:true,
						unique:true,
						forced:true,
						fixed:true,
						sub:true,
					},
					male:{
						audio:"ext:神怒降世:1",
						sub:true,
					},
					female:{
						audio:"ext:神怒降世:1",
						sub:true,
					},
				},
				ai:{
					noturn:true,
					effect:{
						target:function(card,player,target){
							if(get.type(card)=='delay') return 0.5;
						},
					},
				},
			},
			snjs_boss_zhuoguimpat:{
				audio:"ext:神怒降世:1",
				trigger:{
					player:"phaseBegin",
				},
				filter:function(event,player){
					return game.hasPlayer(function(current){
						return !current.isFriendsOf(player)&&current!=player;
					});
				},
				forced:true,
				direct:true,
				content:function(){
					'step 0'
					event.target=[];
					game.countPlayer(function(current){
						if(!current.isFriendsOf(player)&&current!=player) event.target.push(current);
					});
					'step 1'
					if(event.target.length>0){
						event.mubiao=event.target.randomGet();
						player.logSkill('snjs_boss_zhuoguimpat',event.mubiao);
						event.mubiao.storage.snjs_boss_zhuoguimpat=player;
						event.mubiao.storage.snjs_boss_zhuoguimpat1=false;
						event.mubiao.addSkill('snjs_boss_zhuoguimpat_xiaoguo');
					}
				},
				subSkill:{
					xiaoguo:{
						init:function (player,skill){
							var skills=player.getSkills(true,false);
							for(var i=0;i<skills.length;i++){
								var info=get.info(skills[i]);
								if(skills[i]=='chanyuan'||skills[i]=='rechanyuan'||skills[i]=='snjs_boss_zhuoguimpat_xiaoguo'||skills[i]=='snjs_boss_zhuogui2'||skills[i]=='snjs_boss_zhuogui3'||skills[i]=='snjs_boss_zhuogui3x'||skills[i]=='snjs_boss_zhuogui4'||info.charlotte){
									skills.splice(i--,1);
								}
							}
							player.disableSkill(skill,skills);
						},
						onremove:function (player,skill){
							player.enableSkill(skill);
							delete player.storage.snjs_boss_zhuoguimpat;
						},
						intro:{
							name:"遗忘",
							content:function (storage,player,skill){
								var str='失效技能：';
								var list=[];
								for(var i in player.disabledSkills){
									if(player.disabledSkills[i].contains(skill)){
										list.push(i)
									}
								}
								if(list.length){
									str+='';
									for(var i=0;i<list.length;i++){
										if(lib.translate[list[i]+'_info']){
											str+=get.translation(list[i])+'、';
										}
									}
									return str.slice(0,str.length-1);
								}else return str;
							},
						},
						mark:true,
						marktext:"遗忘",
						locked:true,
						firstDo:true,
						silent:true,
						unique:true,
						forced:true,
						direct:true,
						priority:99,
						trigger:{
							global:["phaseBegin","dieBegin"],
						},
						filter:function(event,player){
							return event.player==player.storage.snjs_boss_zhuoguimpat;
						},
						content:function(){
							'step 0'
							if(event.triggername=='dieBegin'){
								player.removeSkill('snjs_boss_zhuoguimpat_xiaoguo');
								event.finish();
							}
							'step 1'
							if(event.triggername=='phaseBegin'&&player.storage.snjs_boss_zhuoguimpat1==true){
								player.removeSkill('snjs_boss_zhuoguimpat_xiaoguo');
							}
							else{
								player.storage.snjs_boss_zhuoguimpat1=true;
							}
						},
						sub:true,
					},
				},
			},
			snjs_boss_zhuoguimpyj:{
				audio:"ext:神怒降世:1",
				trigger:{
					global:"phaseEnd",
				},
				filter:function(event,player){
					return !event.player.isFriendsOf(player)&&event.player.countCards('h')>0&&event.player!=player;
				},
				forced:true,
				direct:true,
				content:function(){
					var card=trigger.player.getCards('h').randomGets(1);
					if(card){
						player.logSkill('snjs_boss_zhuoguimpyj',trigger.player);
						trigger.player.discard(card);
					}
				},
			},
			snjs_boss_zhuoguihwcxx:{
				audio:"ext:神怒降世:2",
				trigger:{
					player:"phaseZhunbeiBegin",
				},
				filter:function(event,player){
					return game.hasPlayer(function(current){
						return !current.isFriendsOf(player)&&current!=player;
					});
				},
				forced:true,
				direct:true,
				content:function(){
					'step 0'
					event.target=[];
					game.countPlayer(function(current){
						if(!current.isFriendsOf(player)&&current!=player){
							event.target.push(current);
							event.xueliang=current.hp;
						}
					});
					'step 1'
					if(event.target.length>0){
						event.mubiao=[];
						for(var i=0;i<event.target.length;i++){
							if(event.xueliang<event.target[i].hp){
								event.mubiao.push(event.target[i]);
								event.xueliang=event.target[i].hp;
							}
						}
						for(var i=0;i<event.target.length;i++){
							if(event.xueliang==event.target[i].hp) event.mubiao.push(event.target[i]);
						}
					}
					'step 2'
					if(event.mubiao.length){
						event.mubiao2=event.mubiao.randomGet();
						if(player.name=='snjs_boss_zhuoguiheiwuchangbaiwuchang'||player.name=='snjs_boss_tianshuheiwuchangbaiwuchang'){
							player.logSkill('snjs_boss_zhuoguihwcxx_hbwc',event.mubiao2);
						}
						else player.logSkill('snjs_boss_zhuoguihwcxx_hwc',event.mubiao2);
						event.mubiao2.damage('thunder',1,'nocard');
						player.recover();
					}
				},
				subSkill:{
					hwc:{
						audio:"ext:神怒降世:1",
						sub:true,
					},
					hbwc:{
						audio:"ext:神怒降世:1",
						sub:true,
					},
				},
			},
			snjs_boss_zhuoguihwctp:{
				audio:"ext:神怒降世:2",
				trigger:{
					player:"damageEnd",
				},
				filter:function(event,player){
					if(event.source==undefined) return false;
					return !event.source.isFriendsOf(player)&&event.source!=player;
				},
				forced:true,
				direct:true,
				content:function(){
					"step 0"
					event.num=trigger.num;
					"step 1"
					if(player.name=='snjs_boss_zhuoguiheiwuchangbaiwuchang'||player.name=='snjs_boss_tianshuheiwuchangbaiwuchang'){
						player.logSkill('snjs_boss_zhuoguihwctp_hbwc',trigger.source);
					}
					else player.logSkill('snjs_boss_zhuoguihwctp_hwc',trigger.source);
					if(trigger.source.countCards('h')<2){
						trigger.source.loseHp();
						event.goto(4);
					}
					"step 2"
					if(trigger.source.countCards('h')>1){
						var chooseButton=trigger.source.chooseButton(2,['〖太平〗：弃置两张花色不同的手牌，否则失去1点体力',trigger.source.getCards('h')]);
					}
					else{
						trigger.source.loseHp();
						event.goto(4);
					}
					chooseButton.set('ai',function(button){
						return get.unuseful(button.link)+9;
					});
					chooseButton.set('filterButton',function(button){
						if(ui.selected.buttons.length){
							return get.suit(button.link)!=get.suit(ui.selected.buttons[0].link);
						};
						return true;
					});
					"step 3"
					if(result.bool){
						trigger.source.discard(result.links);
					}
					else trigger.source.loseHp();
					"step 4"
					event.num--;
					"step 5"
					if(event.num>0) event.goto(1);
				},
				subSkill:{
					hbwc:{
						audio:"ext:神怒降世:1",
						sub:true,
					},
					hwc:{
						audio:"ext:神怒降世:1",
						sub:true,
					},
				},
			},
			snjs_boss_zhuoguihwcdh:{
				audio:"ext:神怒降世:1",
				trigger:{
					player:"damageBegin4",
				},
				filter:function(event,player){
					if(player.countCards('h')>1) return false;
					return !event.card||event.card.name!='sha';
				},
				forced:true,
				content:function(){
					trigger.num--;
				},
			},
			snjs_boss_zhuoguibwcbl:{
				audio:"ext:神怒降世:1",
				trigger:{
					player:"phaseZhunbeiBegin",
				},
				filter:function(event,player){
					return game.hasPlayer(function(current){
						return !current.isFriendsOf(player)&&current!=player&&current.countCards('he')>0;
					});
				},
				forced:true,
				logTarget:function(event,player){
					var ren=[];
					game.countPlayer(function(current){
						if(!current.isFriendsOf(player)&&current!=player&&current.countCards('he')>0) ren.push(current);
					});
					return ren;
				},
				content:function(){
					'step 0'
					event.target=[];
					game.countPlayer(function(current){
						if(current!=player&&!current.isFriendsOf(player)&&current.countCards('he')>0) event.target.push(current);
					});
					'step 1'
					if(event.target.length>0){
						for(var i=0;i<event.target.length;i++){
							if(event.target[i].countCards('e')>0) player.gainPlayerCard('e',event.target[i],true);
							else{
								if(event.target[i].countCards('h')>0){
									var cards=event.target[i].getCards('h');
									var card=cards.randomGet();
									player.gain(card,event.target[i],'giveAuto','bySelf');
								}
							}
						}
					}
					'step 2'
					if(!player.hasSkill('snjs_boss_zhuoguibwcbl_draw')) player.addTempSkill('snjs_boss_zhuoguibwcbl_draw');
				},
				subSkill:{
					draw:{
						trigger:{
							player:"phaseDrawBegin",
						},
						silent:true,
						unique:true,
						direct:true,
						forced:true,
						fixed:true,
						content:function(){
							trigger.cancel();
						},
						sub:true,
					},
				},
			},
			snjs_boss_zhuoguibwcqz:{
				audio:"ext:神怒降世:2",
				trigger:{
					player:"phaseJieshuBegin",
				},
				filter:function(event,player){
					return game.hasPlayer(function(current){
						return !current.isFriendsOf(player)&&current!=player&&current.countCards('h')==1;
					});
				},
				forced:true,
				direct:true,
				content:function(){
					'step 0'
					event.target=[];
					game.countPlayer(function(current){
						if(current!=player&&!current.isFriendsOf(player)&&current.countCards('h')==1) event.target.push(current);
					});
					'step 1'
					if(event.target.length>0){
						if(player.name=='snjs_boss_zhuoguiheiwuchangbaiwuchang'||player.name=='snjs_boss_tianshuheiwuchangbaiwuchang'){
							player.logSkill('snjs_boss_zhuoguibwcqz_hbwc',event.target);
						}
						else player.logSkill('snjs_boss_zhuoguibwcqz_bwc',event.target);
						for(var i=0;i<event.target.length;i++){
							var cards=event.target[i].getCards('h');
							player.gain(cards,event.target[i],'giveAuto','bySelf');
						}
					}
				},
				subSkill:{
					hbwc:{
						audio:"ext:神怒降世:1",
						sub:true,
					},
					bwc:{
						audio:"ext:神怒降世:1",
						sub:true,
					},
				},
			},
			snjs_boss_zhuoguibwcmz:{
				audio:"ext:神怒降世:2",
				trigger:{
					source:"damageSource",
				},
				filter:function(event,player){
					if(!event.player.isAlive()) return false;
					if(!event.card) return false;
					return (event.card.name=='sha'&&get.color(event.card)=='red')||(event.card.name=='sha'&&(event.nature=='thunder'||event.nature=='fire'))&&event.player.countCards('hej')>0;
				},
				forced:true,
				direct:true,
				content:function(){
					var skillname='snjs_boss_zhuoguibwcmz_bwc';
					if(player.name=='snjs_boss_zhuoguiheiwuchangbaiwuchang'||player.name=='snjs_boss_tianshuheiwuchangbaiwuchang') skillname='snjs_boss_zhuoguibwcmz_hbwc';
					player.discardPlayerCard('〖迷醉〗：弃置'+get.translation(trigger.player)+'一张牌','hej',trigger.player).logSkill=[skillname,trigger.player];
				},
				subSkill:{
					hbwc:{
						audio:"ext:神怒降世:1",
						sub:true,
					},
					bwc:{
						audio:"ext:神怒降世:1",
						sub:true,
					},
				},
			},
			snjs_boss_zhuoguintxs:{
				audio:"ext:神怒降世:2",
				trigger:{
					player:"phaseZhunbeiBegin",
				},
				filter:function(event,player){
					return game.hasPlayer(function(current){
						return !current.isFriendsOf(player)&&current!=player&&current.hp>player.hp;
					});
				},
				forced:true,
				direct:true,
				content:function(){
					'step 0'
					event.target=[];
					game.countPlayer(function(current){
						if(!current.isFriendsOf(player)&&current!=player&&current.hp>player.hp){
							event.target.push(current);
						}
					});
					'step 1'
					if(event.target.length){
						event.mubiao=event.target.randomGet();
						if(player.name=='snjs_boss_zhuoguiniutoumamian'||player.name=='snjs_boss_tianshuniutoumamian'){
							player.logSkill('snjs_boss_zhuoguintxs_ntmm',event.mubiao);
						}
						else player.logSkill('snjs_boss_zhuoguintxs_nt',event.mubiao);
						event.mubiao.damage(2,'nocard');
					}
				},
				subSkill:{
					ntmm:{
						audio:"ext:神怒降世:1",
						sub:true,
					},
					nt:{
						audio:"ext:神怒降世:1",
						sub:true,
					},
				},
			},
			snjs_boss_zhuoguintmj:{
				audio:"ext:神怒降世:2",
				trigger:{
					player:"useCardToPlayered",
				},
				filter:function(event,player){
					return event.card.name=='sha'&&event.target.countCards('h')>0&&event.targets.length==1&&!event.target.isFriendsOf(player)&&event.target!=player;
				},
				forced:true,
				direct:true,
				content:function(){
					'step 0'
					var skillname='snjs_boss_zhuoguintmj_nt';
					if(player.name=='snjs_boss_zhuoguiniutoumamian'||player.name=='snjs_boss_tianshuniutoumamian') skillname='snjs_boss_zhuoguintmj_ntmm';
					player.discardPlayerCard('h',trigger.target).logSkill=[skillname,trigger.target];
					'step 1'
					if(result.bool){
						if(result.cards[0].name!='sha') player.gain(result.cards[0],'gain2','log');
						else{
							var id=trigger.target.playerid;
							var map=trigger.getParent().customArgs;
							if(!map[id]) map[id]={};
							if(typeof map[id].extraDamage!='number'){
								map[id].extraDamage=0;
							}
							map[id].extraDamage++;
						}
					}
				},
				subSkill:{
					ntmm:{
						audio:"ext:神怒降世:1",
						sub:true,
					},
					nt:{
						audio:"ext:神怒降世:1",
						sub:true,
					},
				},
			},
			snjs_boss_zhuoguimmsy:{
				audio:"ext:神怒降世:2",
				trigger:{
					player:"phaseDrawBegin",
				},
				forced:true,
				direct:true,
				content:function(){
					'step 0'
					if(player.name=='snjs_boss_zhuoguiniutoumamian'||player.name=='snjs_boss_tianshuniutoumamian'){
						player.logSkill('snjs_boss_zhuoguimmsy_ntmm');
					}
					else player.logSkill('snjs_boss_zhuoguimmsy_mm');
					var suit=[];
					var cards=[];
					while(cards.length<4){
						var card=get.cardPile2(function(card){
							return !cards.contains(card)&&!suit.contains(get.suit(card));
						});
						if(card){
							cards.push(card);
							suit.push(get.suit(card));
						}
						else break;
					}
					if(cards.length){
						player.gain(cards,'gain2','log');
					}
					'step 1'
					trigger.cancel();
				},
				subSkill:{
					ntmm:{
						audio:"ext:神怒降世:1",
						sub:true,
					},
					mm:{
						audio:"ext:神怒降世:1",
						sub:true,
					},
				},
			},
			snjs_boss_zhuoguimmgz:{
				audio:"ext:神怒降世:2",
				trigger:{
					player:"useCard",
				},
				filter:function(event,player,name){
					if(_status.currentPhase!=player) return false;
					var history=player.getHistory('useCard');
					var evt=name=='useCard'?event:event.getParent();
					for(var i=0;i<history.length;i++){
						if(history[i]!=evt&&get.type(history[i].card)==get.type(event.card)) return false;
						else if(history[i]==evt) return true;
					}
					return false;
				},
				forced:true,
				direct:true,
				content:function(){
					if(player.name=='snjs_boss_zhuoguiniutoumamian'||player.name=='snjs_boss_tianshuniutoumamian'){
						player.logSkill('snjs_boss_zhuoguimmgz_ntmm');
					}
					else player.logSkill('snjs_boss_zhuoguimmgz_mm');
					player.draw();
				},
				subSkill:{
					ntmm:{
						audio:"ext:神怒降世:1",
						sub:true,
					},
					mm:{
						audio:"ext:神怒降世:1",
						sub:true,
					},
				},
			},
			snjs_boss_zhuoguibwys:{
				audio:"ext:神怒降世:1",
				trigger:{
					global:"phaseUseBegin",
				},
				filter:function(event,player){
					return event.player.countCards('h')>=event.player.hp&&!event.player.isFriendsOf(player)&&event.player!=player;
				},
				forced:true,
				content:function(){
					if(!player.hasSkill('snjs_boss_zhuoguibwys_xiaoguo')) player.addTempSkill('snjs_boss_zhuoguibwys_xiaoguo');
				},
				subSkill:{
					xiaoguo:{
						mark:true,
						intro:{
							name:"隐煞",
						},
						silent:true,
						unique:true,
						forced:true,
						mod:{
							targetEnabled:function(card,player,target,now){
								if(!target.hasSkill('snjs_boss_zhuoguibanbenqubie')){
									if(card.name=='sha'||card.name=='juedou'||card.name=='huogong') return false;
								}
								else{
									if(card.name=='sha') return false;
								}
							},
						},
						sub:true,
					},
				},
			},
			snjs_boss_zhuoguibwel:{
				audio:"ext:神怒降世:1",
				trigger:{
					source:"damageBegin",
				},
				filter:function(event,player){
					return !event.player.isFriendsOf(player)&&event.player!=player;
				},
				usable:1,
				forced:true,
				content:function(){
					"step 0"
					var func=function(result){
						return 1;
					};
					player.judge(func);
					"step 1"
					event.color=result.color;
					if(event.color=='red'){
						trigger.num++;
					}
					else{
						if(!player.hasSkill('wansha')) player.addTempSkill('wansha');
					}
				},
			},
			snjs_boss_zhuoguinzby:{
				audio:"ext:神怒降世:1",
				trigger:{
					player:"loseAfter",
					global:["equipAfter","addJudgeAfter","gainAfter","loseAsyncAfter"],
				},
				usable:1,
				filter:function(event,player){
					if(player.countCards('h')) return false;
					var evt=event.getl(player);
					return evt&&evt.hs&&evt.hs.length;
				},
				forced:true,
				content:function(){
					player.draw(6);
				},
			},
			snjs_boss_zhuoguinzsx:{
				audio:"ext:神怒降世:1",
				trigger:{
					player:"useCardToTargeted",
				},
				filter:function(event,player){
					return event.targets.length==1&&event.card.name=='sha'&&event.target.countCards('h')!=player.countCards('h');
				},
				forced:true,
				direct:true,
				content:function(){
					"step 0"
					if(trigger.target.countCards('h')>player.countCards('h')){
						player.logSkill('snjs_boss_zhuoguinzsx',trigger.target);
						player.draw(trigger.target.countCards('h')-player.countCards('h'));
						event.finish();
					}
					"step 1"
					player.chooseToDiscard(get.prompt('snjs_boss_zhuoguinzsx'),'<center>弃置一张手牌令此【杀】不能被响应)</center>','h').set('ai',function(card){
						return true;
					});
					"step 2"
					if(result.bool){
						player.logSkill('snjs_boss_zhuoguinzsx',trigger.target);
						trigger.getParent().directHit.add(trigger.target);
					}
				},
			},
			snjs_boss_zhuoguiysgx:{
				audio:"ext:神怒降世:1",
				trigger:{
					player:"damageEnd",
				},
				forced:true,
				content:function(){
					"step 0"
					var func=function(result){
						if(get.suit(result)=='heart') return 10;
						return -1;
					};
					player.judge(func);
					"step 1"
					event.suit=result.suit;
					if(event.suit=='heart'){
						player.recover();
					}
					else player.loseHp();
				},
			},
			snjs_boss_zhuoguiysac:{
				audio:"ext:神怒降世:1",
				trigger:{
					global:"phaseEnd",
				},
				filter:function(event,player){
					return event.player.isFriendsOf(player)||event.player==player;
				},
				forced:true,
				direct:true,
				content:function(){
					'step 0'
					event.num=trigger.player.getStat('damage');
					'step 1'
					if(event.num>0){
						trigger.player.removeMark('snjs_boss_zhuoguiysac_xiaoguo',trigger.player.countMark('snjs_boss_zhuoguiysac_xiaoguo'));
						if(trigger.player.hasSkill('snjs_boss_zhuoguiysac_xiaoguo')){
							trigger.player.removeSkill('snjs_boss_zhuoguiysac_xiaoguo');
						}
					}
					else{
						player.logSkill('snjs_boss_zhuoguiysac_xiaoguo',trigger.player);
						if(!trigger.player.hasSkill('snjs_boss_zhuoguiysac_xiaoguo')){
							trigger.player.addSkill('snjs_boss_zhuoguiysac_xiaoguo');
						}
						trigger.player.addMark('snjs_boss_zhuoguiysac_xiaoguo',1);
					}
				},
				ai:{
					threaten:99,
				},
				subSkill:{
					xiaoguo:{
						audio:"snjs_boss_zhuoguiysac",
						intro:{
							name:"暗潮",
							content:"<li>摸牌阶段多摸#张牌<br><li>回合内对敌方造成的伤害+#",
						},
						trigger:{
							player:"phaseDrawBegin",
							source:"damageBegin",
						},
						filter:function(event,player){
							if(!game.hasPlayer(function(current){
								return current.isFriendsOf(player)&&current.hasSkill('snjs_boss_zhuoguiysac');
							})) return false;
							return _status.currentPhase==player;
						},
						unique:true,
						forced:true,
						direct:true,
						content:function(){
							'step 0'
							if(event.triggername=='damageBegin'&&trigger.player.isFriendsOf(player)) event.finish();
							'step 1'
							player.logSkill('snjs_boss_zhuoguiysac_xiaoguo',trigger.player);
							trigger.num+=player.countMark('snjs_boss_zhuoguiysac_xiaoguo');
						},
						sub:true,
					},
				},
			},
            snjs_boss_zhuoguihfdz:{
                audio:"ext:神怒降世:1",
				trigger:{
					player:"useCardToTargeted",
				},
				filter:function(event,player){
					if(_status.currentPhase!=player) return false;
					return !event.target.isFriendsOf(player)&&event.targets.length==1&&event.card&&event.target.countCards('he')>0;
				},
				forced:true,
				logTarget:function(event){
					return event.target;
				},
				content:function(){
					if(trigger.target.countCards('e')>0){
						event.card=trigger.target.getCards('e').randomGet();
						trigger.target.discard(event.card);
					}
					else{
						if(trigger.target.countCards('h')>0){
							event.card=trigger.target.getCards('h').randomGet();
							trigger.target.discard(event.card);
						}
					}
				},
            },
            snjs_boss_zhuoguihfmc:{
                audio:"ext:神怒降世:1",
				trigger:{
					player:"dieBegin",
				},
				filter:function(event,player){
					return game.hasPlayer(function(current){
						return current.isFriendsOf(player)&&current!=player&&!current.isDying()&&!current.hasSkill('snjs_boss_zhuoguihfdz');
					});
				},
				firstDo:true,
				forced:true,
				priority:99,
				logTarget:function(event,player){
					var ren=[];
					game.countPlayer(function(current){
						if(current.isFriendsOf(player)&&current!=player&&!current.isDying()&&!current.hasSkill('snjs_boss_zhuoguihfdz')) ren.push(current);
					});
					return ren;
				},
				content:function(){
					game.countPlayer(function(current){
						if(current.isFriendsOf(player)&&current!=player&&!current.isDying()&&!current.hasSkill('snjs_boss_zhuoguihfdz')){
							current.addSkill('snjs_boss_zhuoguihfdz');
						}
					});
				},
            },
            snjs_boss_zhuoguirysyyszc:{
                audio:"ext:神怒降世:1",
				trigger:{
					player:"phaseZhunbeiBegin",
				},
				forced:true,
				content:function(){
					'step 0'
					var func=function(result){
						if(get.color(result)=='red') return 10;
						return -10;
					};
					player.judge(func);
					'step 1'
					event.color=result.color;
					event.card=result.card;
					player.gain(event.card,'gain2','log');
					'step 2'
					if(event.color=='red'){
						player.addTempSkill('snjs_boss_zhuoguirysyyszc_xiaoguo');
						event.finish();
					}
				},
				subSkill:{
					xiaoguo:{
						mark:true,
						intro:{
							name:"昼刹",
							content:"本回合使用【杀】的次数+2",
						},
						unique:true,
						silent:true,
						forced:true,
						mod:{
							cardUsable:function(card,player,num){
								if(card.name=='sha') return num+2;
							},
						},
						sub:true,
					},
				},
            },
            snjs_boss_zhuoguirysyysyz:{
                audio:"ext:神怒降世:1",
				trigger:{
					player:"phaseJieshuBegin",
				},
				forced:true,
				content:function(){
					'step 0'
					var func=function(result){
						if(get.color(result)=='black') return 10;
						return -10;
					};
					player.judge(func);
					'step 1'
					event.color=result.color;
					event.card=result.card;
					player.gain(event.card,'gain2','log');
					'step 2'
					if(event.color=='black'){
						event.mubiao=[];
						game.countPlayer(function(current){
							if(current!=player&&!current.isFriendsOf(player)&&current.countCards('h')>0) event.mubiao.push(current);
						});
					}
					else event.finish();
					'step 3'
					if(event.mubiao.length>0){
						player.line(event.mubiao);
						for(var i=0;i<event.mubiao.length;i++){
							var cards=event.mubiao[i].getCards('h');
							var card=cards.randomGet();
							event.mubiao[i].discard(card);
						}
					}
				},
            },
            snjs_boss_zhuoguirysyyshy:{
                audio:"ext:神怒降世:1",
				enable:"phaseUse",
				usable:1,
				filterTarget:function(card,player,target){
					return target!=player&&target.countCards('h')>0;
				},
				content:function(){
					'step 0'
					target.showHandcards();
					'step 1'
					var chooseButton=player.chooseButton([1,2],[get.translation(target.name)+'的手牌',target.getCards('h')]);
					chooseButton.set('target',target);
					chooseButton.set('ai',function(button){
						return get.value(button.link);
					});
					'step 2'
					if(result.bool){
						event.cards=result.links;
						event.names=[];
						for(var i=0;i<result.links.length;i++){
							event.names.push(result.links[i].name);
						}
						target.discard(result.links);
					}
					else event.finish();
					'step 3'
					if(event.names.length){
						player.chooseToDiscard('〖晦运〗:是否弃置一张名称与'+get.translation(event.cards)+'之一相同的牌，然后对'+get.translation(target)+'造成1点伤害？','he',function(card){
							return event.names.contains(card.name);
						}).set('ai',function(card){
							return 8-get.value(card);
						});
					}
					'step 4'
					if(result.bool){
						player.line(target);
						if(target.hp>player.hp) target.damage(2,'nocard');
						else target.damage('nocard');
					}
				},
				ai:{
					order:13,
					result:{
						target:function(target,player){
							return -1;
						},
					},
				},
            },
            snjs_boss_zhuoguirysyysde:{
                audio:"ext:神怒降世:1",
				trigger:{
					global:"phaseDiscardEnd",
				},
				filter:function(event,player){
					if(event.player.isFriendsOf(player)||event.player==player) return false;
					var cards=[];
					event.player.getHistory('lose',function(evt){
						if(evt.type=='discard'&&evt.getParent('phaseDiscard')==event){
							cards.addArray(evt.cards.filterInD('d'));
						}
					});
					for(var i=0;i<cards.length;i++){
						if(get.color(cards[i])=='black') return true;
					}
					return false;
				},
				forced:true,
				logTarget:function(event){
					return event.player;
				},
				content:function(){
					trigger.player.loseHp();
				},
            },
            snjs_boss_zhuoguigwjz:{
                audio:"ext:神怒降世:1",
				trigger:{
					global:"phaseUseEnd",
				},
				filter:function(event,player){
					return !event.player.isFriendsOf(player)&&event.player!=player;
				},
				forced:true,
				logTarget:function(event){
					return event.player;
				},
				content:function(){
					'step 0'
					if(player.hp>15) event.shuliang=1;
					else event.shuliang=2;
					player.judge();
					'step 1'
					var num=result.number;
					var next=trigger.player.chooseToDiscard('〖疾咒〗：弃置任意张点数之和大于'+get.cnNumber(num)+'的牌，否则失去1点体力',function(card){
						var num=0;
						for(var i=0;i<ui.selected.cards.length;i++){
							num+=get.number(ui.selected.cards[i]);
						}
						return get.number(card)+num<=_status.event.num||get.number(card)+num>_status.event.num;
					},'he');
					next.set('num',num);
					next.set('complexCard',true);
					next.set('selectCard',function(){
						var num=0;
						for(var i=0;i<ui.selected.cards.length;i++){
							num+=get.number(ui.selected.cards[i]);
						}
						if(num>_status.event.num) return ui.selected.cards.length;
						return ui.selected.cards.length+2;
					});
					next.set('cardResult',function(){
						var cards=player.getCards('he');
						var l=cards.length;
						var all=Math.pow(l,2);
						var list=[];
						for(var i=1;i<all;i++){
							var array=[];
							for(var j=0;j<l;j++){
								if(Math.floor((i%Math.pow(2,j+1))/Math.pow(2,j))>0) array.push(cards[j])
							}
							var numx=0;
							for(var k of array){
								numx+=get.number(k);
							}
							if(numx>num) list.push(array);
						}
						if(list.length){
							list.sort(function(a,b){
								return get.value(a)-get.value(b);
							});
							return list[0];
						}
						return list;
					}());
					next.set('ai',function(card){
						return 20-get.value(card);
					});
					'step 2'
					if(!result.bool) trigger.player.loseHp();
					else if(result.cards.length>event.shuliang) player.addMark('snjs_boss_zhuoguigwds',1);
				},
            },
			snjs_boss_zhuoguigwds:{
                audio:"ext:神怒降世:1",
				intro:{
					name:"啖噬",
					content:"下次受到的伤害+#，然后移除1枚「啖噬」",
				},
				trigger:{
					player:"damageBegin",
				},
				filter:function(event,player){
					return player.countMark('snjs_boss_zhuoguigwds')>0;
				},
				forced:true,
				content:function(){
					trigger.num+=player.countMark('snjs_boss_zhuoguigwds');
					player.removeMark('snjs_boss_zhuoguigwds',1);
				},
			},
			snjs_boss_zhuoguigwch:{
                audio:"ext:神怒降世:1",
				trigger:{
					player:"phaseDrawBegin",
					source:"damageBegin",
				},
				forced:true,
				direct:true,
				content:function(){
					if(event.triggername=='damageBegin'&&player.hp<=15){
						player.logSkill('snjs_boss_zhuoguigwch');
						trigger.num++;
					}
					if(event.triggername=='phaseDrawBegin'&&!player.isMaxHandcard()){
						player.logSkill('snjs_boss_zhuoguigwch');
						trigger.num+=2;
					}
				},
			},
			snjs_boss_zhuoguitm:{
                audio:"ext:神怒降世:2",
				trigger:{
					target:"useCardToTargeted",
				},
				filter:function(event,player){
					if(!event.card) return false;
					return get.color(event.card)=='red'&&event.card.name=='sha';
				},
				forced:true,
				direct:true,
				content:function(){
					'step 0'
					event.chufa=[0,1,2,3].randomGet();
					'step 1'
					if(event.chufa>0){
						if(player.name=='snjs_boss_zhuoguiguiwang'){
							player.logSkill("snjs_boss_zhuoguitm_gw");
						}
						else player.logSkill("snjs_boss_zhuoguitm_ylw");
						trigger.getParent().excluded.add(player);
					}
				},
				subSkill:{
					gw:{
						audio:"ext:神怒降世:1",
						sub:true,
					},
					ylw:{
						audio:"ext:神怒降世:1",
						sub:true,
					},
				},
			},
			snjs_boss_zhuoguiylwdf:{
                audio:"ext:神怒降世:1",
				trigger:{
					global:"phaseUseBegin",
				},
				filter:function(event,player){
					return event.player!=player&&event.player.countCards('h')>event.player.maxHp&&!event.player.isFriendsOf(player);
				},
				forced:true,
				logTarget:function(event){
					return event.player;
				},
				content:function(){
					trigger.player.chooseToDiscard('〖地府〗：弃置'+get.cnNumber(trigger.player.countCards('h')-trigger.player.maxHp)+'张手牌',trigger.player.countCards('h')-trigger.player.maxHp,true).set('ai',function(card){
						return 8-get.value(card);
					});
				},
			},
			snjs_boss_zhuoguiylwzn:{
                audio:"ext:神怒降世:1",
				init:function(player){
					if(!player.storage.snjs_boss_zhuoguiylwzn1) player.storage.snjs_boss_zhuoguiylwzn1=true;
					if(!player.storage.snjs_boss_zhuoguiylwzn2) player.storage.snjs_boss_zhuoguiylwzn2=true;
				},	
				trigger:{
					player:"changeHp",
				},
				filter:function(event,player){
					if(player.hp<=5) return player.storage.snjs_boss_zhuoguiylwzn2==true;
					if(player.hp<=10) return player.storage.snjs_boss_zhuoguiylwzn1==true;
				},
				forced:true,
				animationColor:"water",
				skillAnimation:"legend",
				content:function(){
					'step 0'
					if(player.hp<=10) player.storage.snjs_boss_zhuoguiylwzn1=false;
					if(player.hp<=5) player.storage.snjs_boss_zhuoguiylwzn2=false;
					'step 1'
					player.draw(4);
					'step 2'
					while(_status.event.name!='phaseLoop'){
						_status.event=_status.event.parent;
					}
					game.resetSkills();
					_status.paused=false;
					_status.event.player=player;
					_status.event.step=0;
					_status.roundStart=player;
				},
			},
			snjs_boss_zhuoguiylwxp:{
                audio:"ext:神怒降世:1",
				trigger:{
					player:"phaseUseBegin",
				},
				filter:function(event,player){
					return game.hasPlayer(function(current){
						return !current.isFriendsOf(player)&&current!=player;
					});
				},
				forced:true,
				content:function(){
					'step 0'
					event.target=[];
					game.countPlayer(function(current){
						if(!current.isFriendsOf(player)&&current!=player){
							event.target.push(current);
							event.xueliang=current.hp;
							event.shoupai=current.countCards('h');
							event.mubiao=current;
							event.mubiao2=current;
						}
					});
					'step 1'
					if(event.target.length>0){
						for(var i=0;i<event.target.length;i++){
							if(event.xueliang<event.target[i].hp){
								event.mubiao=event.target[i];
								event.xueliang=event.target[i].hp;
							}
							else{
								if(event.mubiao!=event.target[i]&&event.xueliang==event.target[i].hp&&event.mubiao) delete event.mubiao;
							}
							if(event.shoupai<event.target[i].countCards('h')){
								event.mubiao2=event.target[i];
								event.shoupai=event.target[i].countCards('h');
							}
							else{
								if(event.mubiao2!=event.target[i]&&event.shoupai==event.target[i].countCards('h')&&event.mubiao2) delete event.mubiao2;
							}
						}
					}
					'step 2'
					var func=function(result){
						if(get.color(result)=='red'&&event.mubiao2) return 10;
						if(get.color(result)=='black'&&event.mubiao) return 1;
						return -1;
					};
					player.judge(func);
					'step 3'
					event.color=result.color;
					if(event.color=='red'&&event.mubiao2){
						if(event.shoupai%2==0) event.num=event.shoupai/2;
						else event.num=(event.shoupai-1)/2;
						player.line(event.mubiao2);
						event.mubiao2.chooseCard('〖刑判〗交给'+get.translation(player)+get.cnNumber(event.num)+'张手牌',true,event.num).set('ai',function(card){
							return 7-get.value(card);
						});
					}
					if(event.color=='black'&&event.mubiao){
						player.line(event.mubiao);
						event.mubiao.loseHp();
						event.finish();
					}
					'step 4'
					if(result.bool){
						player.gain(result.cards,event.mubiao2,'giveAuto');
					}
				},
			},
			snjs_boss_zhuoguiylwdw:{
                audio:"ext:神怒降世:1",
				trigger:{
					player:"phaseZhunbeiBegin",
				},
				filter:function(event,player){
					return game.hasPlayer(function(current){
						return !current.isFriendsOf(player)&&current!=player;
					});
				},
				forced:true,
				content:function(){
					game.countPlayer(function(current){
						if(!current.isFriendsOf(player)&&current!=player){
							if(current.countCards('e')>0){
								player.line(current);
								var card=current.getCards('e').randomGet();
								current.discard(card);
							}
							else player.useCard({name:'sha',isCard:true},false,current);
						}
					});
				},
			},
			snjs_boss_zhuoguiylwxp2:{
                audio:"ext:神怒降世:1",
				group:["snjs_boss_zhuoguiylwxp2_jilu","snjs_boss_zhuoguiylwxp2_qingchu"],
				trigger:{
					global:"phaseEnd",
				},
				filter:function(event,player){
					if(event.player==player||event.player.isFriendsOf(player)) return false;
					var num1=0;
					//var num2=0;
					var num3=0;
					var num4=0;
					event.player.getHistory('sourceDamage',function(evt){
						if(evt.player==player) num1+=evt.num;
					});
					//event.player.getHistory('changeHp',function(evt){
					//	if(evt.getParent().name=='recover') num2+=evt.num;
					//});
					event.player.getHistory('lose',function(evt){
						if(evt.type=='discard') num3+=evt.cards2.length;
					});
					event.player.getHistory('gain',function(evt){
						if(evt.getParent().name=='draw') num4+=evt.cards.length;
					});
					return num1>=3||player.storage.zhuoguiylwxp2_jilu>=2||num3>=4||num4>=6;
				},
				forced:true,
				content:function(){
					'step 0'
					event.num1=0;
					//event.num2=0;
					event.num3=0;
					event.num4=0;
					'step 1'
					trigger.player.getHistory('sourceDamage',function(evt){
						if(evt.player==player) event.num1+=evt.num;
					});
					//trigger.player.getHistory('changeHp',function(evt){
					//	if(evt.getParent().name=='recover') event.num2+=evt.num;
					//});
					trigger.player.getHistory('lose',function(evt){
						if(evt.type=='discard') event.num3+=evt.cards2.length;
					});
					trigger.player.getHistory('gain',function(evt){
						if(evt.getParent().name=='draw') event.num4+=evt.cards.length;
					});
					'step 2'
					if(event.num1>=3){
						player.line(trigger.player);
						trigger.player.damage([1,2].randomGet(),'nocard');
					}
					if(player.storage.zhuoguiylwxp2_jilu>=2){
						player.recover(1);
					}
					if(event.num3>=4){
						player.line(trigger.player);
						var cards=trigger.player.getCards('he').randomGets([1,2].randomGet());
						if(cards.length) trigger.player.discard(cards);
					}
					if(event.num4>=6){
						player.draw([1,2,3].randomGet());
					}
				},
				subSkill:{
					jilu:{
						trigger:{
							global:"recoverAfter",
						},
						init:function(player){
							if(!player.storage.zhuoguiylwxp2_jilu) player.storage.zhuoguiylwxp2_jilu=0;
						},
						filter:function(event,player){
							return event.player!=player&&!event.player.isFriendsOf(player)&&_status.currentPhase==event.player;
						},
						silent:true,
						unique:true,
						forced:true,
						content:function(){
							player.storage.zhuoguiylwxp2_jilu+=trigger.num;
						},
						sub:true,
					},
					qingchu:{
						trigger:{
							global:"phaseBegin",
						},
						silent:true,
						unique:true,
						forced:true,
						content:function(){
							player.storage.zhuoguiylwxp2_jilu=0;
						},
						sub:true,
					},
				},
			},
			snjs_boss_zhuoguiswdl:{
				trigger:{
					player:"die",
				},
				unique:true,
				silent:true,
				forceDie:true,
				charlotte:true,
				filter:function(event){
					return event.source&&event.source.isIn()&&event.source.identity=='cai';
				},
				content:function(){
					trigger.source.recover();
					trigger.source.draw(2);
				},
			},
			snjs_boss_zhuoguiswdl2:{
				trigger:{
					player:"die",
				},
				unique:true,
				silent:true,
				forceDie:true,
				charlotte:true,
				filter:function(event){
					return event.source&&event.source.isIn()&&event.source.identity=='cai';
				},
				content:function(){
					trigger.source.recover();
					trigger.source.draw(3);
				},
			},
			
			snjs_boss_tianshu_intro1:{nobracket:true},
			snjs_boss_tianshu_intro2:{nobracket:true},
			snjs_boss_tianshu_intro3:{nobracket:true},
			snjs_boss_tianshu_intro4:{nobracket:true},
			snjs_boss_tianshu_intro5:{nobracket:true},
			snjs_boss_baizhan_intro1:{nobracket:true},
			snjs_boss_baizhan_intro2:{nobracket:true},
			snjs_boss_baizhan_intro3:{nobracket:true},
			snjs_boss_baizhan_intro4:{nobracket:true},
			snjs_boss_baizhan_intro5:{nobracket:true},
			snjs_boss_tianshu_zhuzhan:{
				mod:{},
				init:function(player){
					if(!player.storage.snjs_boss_tianshu_zhuzhan) player.storage.snjs_boss_tianshu_zhuzhan=true;
				},
				silent:true,
				forced:true,
				popup:false,
				fixed:true,
				unique:true,
				charlotte:true,
			},
			snjs_tianshuluandou_jinengxuanze:{
				mod:{},
				init:function(player){
					if(!player.storage.snjs_tianshuluandou_jinengxuanze) player.storage.snjs_tianshuluandou_jinengxuanze=[];
				},
				mark:true,
				marktext:"天书",
				intro:{
					name:"已获得技能：",
					content:"$",
				},
				silent:true,
				forced:true,
				popup:false,
				fixed:true,
				unique:true,
				charlotte:true,
			},
			snjs_baizhantianshu_jinengxuanze:{
				mod:{},
				init:function(player){
					if(!player.storage.snjs_baizhantianshu_jinengxuanze1) player.storage.snjs_baizhantianshu_jinengxuanze1=[];
					if(!player.storage.snjs_baizhantianshu_jinengxuanze2) player.storage.snjs_baizhantianshu_jinengxuanze2=[];
				},
				mark:true,
				marktext:"百战",
				intro:{
					name:"百战天书",
					content:function(storage,player,skill){
						var str="<center>主动技能：</center><br><center>"+get.translation(player.storage.snjs_baizhantianshu_jinengxuanze1)+"</center><br><center>被动技能：</center><br><center>"+get.translation(player.storage.snjs_baizhantianshu_jinengxuanze2)+"</center>";
						return str;
					},
				},
				silent:true,
				forced:true,
				popup:false,
				fixed:true,
				unique:true,
				charlotte:true,
			},
			snjs_boss_tianshu:{
				trigger:{global:'gameStart'},
				forced:true,
				popup:false,
				fixed:true,
				unique:true,
				charlotte:true,
				content:function(){
					'step 0'
					game.bossinfo.chongzheng=999;
					player.smoothAvatar();
					'step 1'
					if(game.me!=game.boss){
						game.boss.changeSeat(7);
					}
					else{
						game.boss.nextSeat.changeSeat(2);
						game.boss.nextSeat.nextSeat.changeSeat(3);
						game.boss.previousSeat.changeSeat(4);
					}
					event.zhuzhan=["snjs_tszz_xiaosha","snjs_tszz_xiaoshan","snjs_tszz_xiaojiu","snjs_tszz_xiaotao","snjs_tszz_xiaole"].randomGet();
					var zhuzhanjuese=ui.create.player();
					zhuzhanjuese.getId();
					zhuzhanjuese.init(event.zhuzhan).animate('start');
					zhuzhanjuese.setIdentity('cai');
					zhuzhanjuese.identity='cai';
					zhuzhanjuese.side=false;
					game.players.push(zhuzhanjuese);
					ui.arena.appendChild(zhuzhanjuese);
					zhuzhanjuese.addSkill("snjs_boss_tianshu_zhuzhan");
					zhuzhanjuese.changeSeat(game.me==game.boss?7:6);
					var str;
					if(event.zhuzhan=="snjs_tszz_xiaosha"){
						str=["缮甲修戈，清风赠袍泽","挽发降唇，一吻赏英雄"].randomGet();
						zhuzhanjuese.chat(str);
						if(str=="缮甲修戈，清风赠袍泽") game.playAudio('..','extension','神怒降世','snjs_tszz_xiaosha1.mp3');
						else game.playAudio('..','extension','神怒降世','snjs_tszz_xiaosha2.mp3');
					}
					if(event.zhuzhan=="snjs_tszz_xiaoshan"){
						str=["别误会，我可没什么别的意思","真拿你没办法"].randomGet();
						zhuzhanjuese.chat(str);
						if(str=="别误会，我可没什么别的意思") game.playAudio('..','extension','神怒降世','snjs_tszz_xiaoshan1.mp3');
						else game.playAudio('..','extension','神怒降世','snjs_tszz_xiaoshan2.mp3');
					}
					if(event.zhuzhan=="snjs_tszz_xiaojiu"){
						str=["喂，几点钟啦？饮酒先","一杯好酒相赠，三分萃意纵横"].randomGet();
						zhuzhanjuese.chat(str);
						if(str=="喂，几点钟啦？饮酒先") game.playAudio('..','extension','神怒降世','snjs_tszz_xiaojiu1.mp3');
						else game.playAudio('..','extension','神怒降世','snjs_tszz_xiaojiu2.mp3');
					}
					if(event.zhuzhan=="snjs_tszz_xiaotao"){
						str=["君心我心，纵万里亦不弃","郎情妾意，我四季有灵犀"].randomGet();
						zhuzhanjuese.chat(str);
						if(str=="君心我心，纵万里亦不弃") game.playAudio('..','extension','神怒降世','snjs_tszz_xiaotao1.mp3');
						else game.playAudio('..','extension','神怒降世','snjs_tszz_xiaotao2.mp3');
					}
					if(event.zhuzhan=="snjs_tszz_xiaole"){
						str=["有因必有果，你的好运就是我","可爱滞销，帮帮人家嘛"].randomGet();
						zhuzhanjuese.chat(str);
						if(str=="有因必有果，你的好运就是我") game.playAudio('..','extension','神怒降世','snjs_tszz_xiaole1.mp3');
						else game.playAudio('..','extension','神怒降世','snjs_tszz_xiaole2.mp3');
					}
					'step 2'
					event.guai=["snjs_baoxin","snjs_bianxi","snjs_caohua","snjs_caoxian","snjs_caoyuee","snjs_chezhou","snjs_jiachong","snjs_xiahouen","snjs_sp_zhangxiu","snjs_zhaoang","snjs_sp_chenzhen","snjs_fanqiangzhangda","snjs_sp_fushirenmifang","snjs_gaoxiang","snjs_gouan","snjs_jiangwan","snjs_wuban","snjs_xiahouzie","snjs_sp_xvjing","snjs_zhangwei","snjs_re_dingfeng","snjs_sp_liubei","snjs_penghu","snjs_pengqi","snjs_sp_sunyi","snjs_sunyu","snjs_zhanghong","snjs_sp_zhouche","snjs_zhucaizhuji","snjs_sp_fanyufeng","snjs_guodian","snjs_haomeng","snjs_houcheng","snjs_liuli","snjs_wangchong","snjs_yushe","snjs_zhangjv","snjs_zhangchun","snjs_zhangyan"].randomGets(2);
					player.init(event.guai[0]);
					game.addBossFellow(game.me==game.boss?6:5,event.guai[1]);
					'step 3'
					game.addVideo('reinit2',player,player.name);
					'step 4'
					game.countPlayer(function(current){
						if(current.isFriendsOf(game.boss)||current==game.boss){
							if(!current.hasSkill("snjs_boss_tianshu2")) current.addSkill("snjs_boss_tianshu2");
							if(!current.hasSkill("snjs_boss_tianshuswdl")) current.addSkill("snjs_boss_tianshuswdl");
							if(current.hasSkill("nzry_jieying")) current.link(true);
							var str=get.name(current);
							if(!str.includes('snjs_boss_tianshu')){
								current.maxHp+=2;
								var cards=current.getCards('h').randomGets(4);
								if(cards.length){
									current.lose(cards);
									current.update();
									game.cardsDiscard(cards);
								}
								current.hp+=2;
							}
						}
						else{
							if(current.identity=='cai'&&!current.hasSkill("snjs_boss_tianshu_zhuzhan")&&!current.storage.snjs_boss_tianshu_zhuzhan){
								current.addSkill("snjs_tianshuluandou_jinengxuanze");
							}
						}
					});
				}
			},
			snjs_boss_tianshu2:{
				mode:['boss'],
				trigger:{player:'dieBegin'},
				silent:true,
				unique:true,
				forced:true,
				fixed:true,
				charlotte:true,
				filter:function(event,player){
					return player==game.boss;
				},
				skillList:["decadexuanfeng","qiaobian","exgnqx","snjs_tianshuluandou_tiaoxin","nzry_shicai","exzglgx","rehuaiyi","huomo","exscyh","shibei","decadezongshi","zhiyu","xpchijie","jslmgx","fenyue","rezhiman","zhiyan","remieji","mozhi","oldimeng","xingongji","exzyld","qice","exmdqx","chenqing","snjs_tianshuluandou_jiuchi","szxcj","decadejingce","xindanshou","snjs_tianshuluandou_quhu","fangquan","qianya","zuoding","mingjian","xinfu_tunan","jcgmc","xiantu","rexuanhuo","rebeige","sheyan","mizhao","hongyuan","new_reqingnang","lieren","liangzhu","jijiu","xinanguo","quji","exmctj","exlbws","reanjian","snjs_tianshuluandou_pojun","exgyws","exxcly","rejianchu","exhzlg","xinfu_qinguo","xinshensu","drlt_wanglie","resanyao","juesi","olluanji","xinfu_lingren","rehuoji","xinbenxi","exdwqx","lijian","xinfu_langxi","benyu","jieming","exccjx","exgjyj","jcccx","exsmyfk","mingzhe","xiaoji","rejizhi","qizhi","exsqzh","exscja","xinjushou","qiluan","rebiyue","xinfu_guolun","miji","gzjili","wangxi","xinfu_zuilun","exlbly","exssxjy","daiyan","reyingzi","rezishou","jslmsl","qingjiao","rejigong","drlt_yongsi","olhaoshi","exzyyj","tianming","exzglkc","xiangle","danlao","exzjqg","jcakk","jcgzc","exgjtd","zhaxiang","daoshu","jmylfp","spjiedao","reshenxing","pingkou","drlt_zhenggu","jyzongshi","wcjm","ylyj","kurou","wbxz","zwxq","xhzeqw","jusqty","pqqp","pqqy","jiaozi","duwu","exzjls","gongao","spzmjd","lihuo","exsmygc","fangzhu","exccxc"],
				content:function(){
					'step 0'
					event.guai=["shen_guanyu","shen_liubei","shen_luxun","shen_caocao","shen_zhouyu","shen_lvmeng","shen_zhugeliang","shen_luxun","shen_simayi","shen_zhaoyun","shen_lvbu","snjs_boss_tianshuzishu","snjs_boss_tianshuchouniu","snjs_boss_tianshuyinhu","snjs_boss_tianshumaotu","snjs_boss_tianshuchenlong","snjs_boss_tianshusishe","snjs_boss_tianshuwuma","snjs_boss_tianshuweiyang","snjs_boss_tianshushenhou","snjs_boss_tianshuyouji","snjs_boss_tianshuxugou","snjs_boss_tianshuhaizhu"].randomGets(2);
					if(game.me==game.boss) event.goto(2);
					'step 1'
					event.ren=[];
					game.countPlayer(function(current){
						if(current.identity!='cai'&&current!=player&&current.isAlive()){
							event.ren.push(current);
						}
					});
					if(event.ren.length){
						game.boss=event.ren.randomGet();
						event.finish();
					}
					'step 2'
					if(player.hasSkill("new_wuhun")){
						game.countPlayer(function(current){
							if(current.hasMark('new_wuhun_mark')) current.removeMark('new_wuhun_mark',current.countMark('new_wuhun_mark'));
						});
					}
					player.hide();
					game.addVideo('hidePlayer',player);
					if(trigger.source!=undefined&&trigger.source.identity=='cai'){
						if(trigger.source.isDamaged()) trigger.source.recover();
						else trigger.source.draw(2);
					}
					'step 3'
					if(game.me!=game.boss) game.boss.changeSeat(7);
					game.delay();
					'step 4'
					if(game.me==game.boss){
						game.countPlayer(function(current){
							if(current!=player&&current.identity!='cai'){
								current.die();
							}
						});
					}
					'step 5'
					var dead=game.dead.slice(0);
					for(var i=0;i<dead.length;i++){
						if(dead[i]!=player&&dead[i].identity!='cai'){
							dead[i].hide();
						}
					}
					'step 6'
					event.skills=[];
					for(var i=0;i<lib.skill.snjs_boss_tianshu2.skillList.length;i++){
						event.skills.push(lib.skill.snjs_boss_tianshu2.skillList[i]);
					}
					event.ren=[];
					game.countPlayer(function(current){
						if(current.hasSkill("snjs_tianshuluandou_jinengxuanze")){
							event.ren.push(current);
							var removes=current.storage.snjs_tianshuluandou_jinengxuanze;
							for(var i=0;i<removes.length;i++){
								if(event.skills.contains(removes[i])) event.skills.remove(removes[i]);
							}
						}
					});
					'step 7'
					event.xuanze=event.skills;
					'step 8'
					if(event.ren.length>0) event.i=0;
					else event.goto(12);
					'step 9'
					event.xuanze1=event.xuanze;
					for(var i=0;i<event.xuanze.length;i++){
						if(event.ren[event.i].hasSkill(event.xuanze[i])) event.xuanze1.remove(event.xuanze[i]);
					}
					'step 10'
					if(event.xuanze1.length>0){
						var xuanze2=event.xuanze1.randomGets(Math.min(3,event.xuanze1.length));
						var fanyi="";
						for(var i=0;i<xuanze2.length;i++){
							fanyi+="<br><span style='text-decoration: underline;color: #ff0000'>【"+get.translation(xuanze2[i])+"】</span>："+get.translation(xuanze2[i]+"_info");
						}
						event.ren[event.i].chooseControl(xuanze2).set("prompt","请选择令<span style='color: #00cc00'>"+get.translation(event.ren[event.i])+"</span>获得的技能"+fanyi).set("ai",function(){return xuanze2.randomGet()});
					}
					else{
						event.i++;
						if(event.i<event.ren.length) event.goto(9);
					}
					'step 11'
					event.ren[event.i].addSkill(result.control);
					event.ren[event.i].storage.snjs_tianshuluandou_jinengxuanze.push(result.control);
					event.ren[event.i].updateMarks('snjs_tianshuluandou_jinengxuanze');
					event.xuanze.remove(result.control);
					event.i++;
					if(event.i<event.ren.length) event.goto(9);
					'step 12'
					game.changeBoss(event.guai[0]);
					game.delay(0.5);
					'step 13'
					game.addBossFellow(game.me==game.boss?6:5,event.guai[1]);
					'step 14'
					game.countPlayer(function(current){
						if(current.isFriendsOf(game.boss)||current==game.boss){
							if(!current.hasSkill("snjs_boss_tianshu3")) current.addSkill("snjs_boss_tianshu3");
							if(!current.hasSkill("snjs_boss_tianshuswdl")) current.addSkill("snjs_boss_tianshuswdl");
							if(current.hasSkill("nzry_jieying")) current.link(true);
							var str=get.name(current);
							if(!str.includes('snjs_boss_tianshu')){
								current.maxHp+=2;
								current.hp+=2;
							}
							current.directgain(get.cards(1));
						}
					});
					'step 15'
					while(_status.event.name!='phaseLoop'){
						_status.event=_status.event.parent;
					}
					game.resetSkills();
					_status.paused=false;
					_status.event.player=_status.currentPhase.nextSeat;
					_status.event.step=0;
					_status.roundStart=_status.currentPhase.nextSeat;
					game.phaseNumber=0;
					game.roundNumber=0;
					if(game.bossinfo){
						game.bossinfo.loopType=1;
					}
					game.playAudio("..","extension","神怒降世",player.name+".mp3");
					player.die();
				}
			},
			snjs_boss_tianshu3:{
				mode:['boss'],
				trigger:{player:'dieBegin'},
				silent:true,
				unique:true,
				forced:true,
				fixed:true,
				charlotte:true,
				filter:function(event,player){
					return player==game.boss;
				},
				skillList:["decadexuanfeng","qiaobian","exgnqx","snjs_tianshuluandou_tiaoxin","nzry_shicai","exzglgx","rehuaiyi","huomo","exscyh","shibei","decadezongshi","zhiyu","xpchijie","jslmgx","fenyue","rezhiman","zhiyan","remieji","mozhi","oldimeng","xingongji","exzyld","qice","exmdqx","chenqing","snjs_tianshuluandou_jiuchi","szxcj","decadejingce","xindanshou","snjs_tianshuluandou_quhu","fangquan","qianya","zuoding","mingjian","xinfu_tunan","jcgmc","xiantu","rexuanhuo","rebeige","sheyan","mizhao","hongyuan","new_reqingnang","lieren","liangzhu","jijiu","xinanguo","quji","exmctj","exlbws","reanjian","snjs_tianshuluandou_pojun","exgyws","exxcly","rejianchu","exhzlg","xinfu_qinguo","xinshensu","drlt_wanglie","resanyao","juesi","olluanji","xinfu_lingren","rehuoji","xinbenxi","exdwqx","lijian","xinfu_langxi","benyu","jieming","exccjx","exgjyj","jcccx","exsmyfk","mingzhe","xiaoji","rejizhi","qizhi","exsqzh","exscja","xinjushou","qiluan","rebiyue","xinfu_guolun","miji","gzjili","wangxi","xinfu_zuilun","exlbly","exssxjy","daiyan","reyingzi","rezishou","jslmsl","qingjiao","rejigong","drlt_yongsi","olhaoshi","exzyyj","tianming","exzglkc","xiangle","danlao","exzjqg","jcakk","jcgzc","exgjtd","zhaxiang","daoshu","jmylfp","spjiedao","reshenxing","pingkou","drlt_zhenggu","jyzongshi","wcjm","ylyj","kurou","wbxz","zwxq","xhzeqw","jusqty","pqqp","pqqy","jiaozi","duwu","exzjls","gongao","spzmjd","lihuo","exsmygc","fangzhu","exccxc"],
				content:function(){
					'step 0'
					event.guai=["snjs_boss_tianshubaihu","snjs_boss_tianshuqinglong","snjs_boss_tianshuzhuque","snjs_boss_tianshuxuanwu","snjs_boss_tianshumengpo","snjs_boss_tianshuheiwuchang","snjs_boss_tianshubaiwuchang","snjs_boss_tianshuniutou","snjs_boss_tianshumamian","snjs_boss_tianshubaowei","snjs_boss_tianshuyusai","snjs_boss_tianshuniaozui","snjs_boss_tianshuhuangfeng","snjs_boss_tianshuweixi","snjs_boss_tianshushuxi","snjs_boss_tianshuwuxi","snjs_boss_tianshuqunxi"].randomGets(2);
					if(game.me==game.boss) event.goto(2);
					'step 1'
					event.ren=[];
					game.countPlayer(function(current){
						if(current.identity!='cai'&&current!=player&&current.isAlive()){
							event.ren.push(current);
						}
					});
					if(event.ren.length){
						game.boss=event.ren.randomGet();
						event.finish();
					}
					'step 2'
					if(player.hasSkill("new_wuhun")){
						game.countPlayer(function(current){
							if(current.hasMark('new_wuhun_mark')) current.removeMark('new_wuhun_mark',current.countMark('new_wuhun_mark'));
						});
					}
					player.hide();
					game.addVideo('hidePlayer',player);
					if(trigger.source!=undefined&&trigger.source.identity=='cai'){
						if(trigger.source.isDamaged()) trigger.source.recover();
						else trigger.source.draw(2);
					}
					'step 3'
					if(game.me!=game.boss) game.boss.changeSeat(7);
					game.delay();
					'step 4'
					if(game.me==game.boss){
						game.countPlayer(function(current){
							if(current!=player&&current.identity!='cai'){
								current.die();
							}
						});
					}
					'step 5'
					var dead=game.dead.slice(0);
					for(var i=0;i<dead.length;i++){
						if(dead[i]!=player&&dead[i].identity!='cai'){
							dead[i].hide();
						}
					}
					'step 6'
					event.skills=[];
					for(var i=0;i<lib.skill.snjs_boss_tianshu3.skillList.length;i++){
						event.skills.push(lib.skill.snjs_boss_tianshu3.skillList[i]);
					}
					event.ren=[];
					game.countPlayer(function(current){
						if(current.hasSkill("snjs_tianshuluandou_jinengxuanze")){
							event.ren.push(current);
							var removes=current.storage.snjs_tianshuluandou_jinengxuanze;
							for(var i=0;i<removes.length;i++){
								if(event.skills.contains(removes[i])) event.skills.remove(removes[i]);
							}
						}
					});
					'step 7'
					event.xuanze=event.skills;
					'step 8'
					if(event.ren.length>0) event.i=0;
					else event.goto(12);
					'step 9'
					event.xuanze1=event.xuanze;
					for(var i=0;i<event.xuanze.length;i++){
						if(event.ren[event.i].hasSkill(event.xuanze[i])) event.xuanze1.remove(event.xuanze[i]);
					}
					'step 10'
					if(event.xuanze1.length>0){
						var xuanze2=event.xuanze1.randomGets(Math.min(3,event.xuanze1.length));
						var fanyi="";
						for(var i=0;i<xuanze2.length;i++){
							fanyi+="<br><span style='text-decoration: underline;color: #ff0000'>【"+get.translation(xuanze2[i])+"】</span>："+get.translation(xuanze2[i]+"_info");
						}
						event.ren[event.i].chooseControl(xuanze2).set("prompt","请选择令<span style='color: #00cc00'>"+get.translation(event.ren[event.i])+"</span>获得的技能"+fanyi).set("ai",function(){return xuanze2.randomGet()});
					}
					else{
						event.i++;
						if(event.i<event.ren.length) event.goto(9);
					}
					'step 11'
					event.ren[event.i].addSkill(result.control);
					event.ren[event.i].storage.snjs_tianshuluandou_jinengxuanze.push(result.control);
					event.ren[event.i].updateMarks('snjs_tianshuluandou_jinengxuanze');
					event.xuanze.remove(result.control);
					event.i++;
					if(event.i<event.ren.length) event.goto(9);
					'step 12'
					game.changeBoss(event.guai[0]);
					game.delay(0.5);
					'step 13'
					game.addBossFellow(game.me==game.boss?6:5,event.guai[1]);
					'step 14'
					game.countPlayer(function(current){
						if(current.isFriendsOf(game.boss)||current==game.boss){
							if(!current.hasSkill("snjs_boss_tianshu4")) current.addSkill("snjs_boss_tianshu4");
							if(!current.hasSkill("snjs_boss_tianshuswdl")) current.addSkill("snjs_boss_tianshuswdl");
							if(current.hasSkill("nzry_jieying")) current.link(true);
							var str=get.name(current);
							if(!str.includes('snjs_boss_tianshu')){
								current.maxHp+=2;
								current.hp+=2;
							}
							current.directgain(get.cards(2));
						}
					});
					'step 15'
					while(_status.event.name!='phaseLoop'){
						_status.event=_status.event.parent;
					}
					game.resetSkills();
					_status.paused=false;
					_status.event.player=_status.currentPhase.nextSeat;
					_status.event.step=0;
					_status.roundStart=_status.currentPhase.nextSeat;
					game.phaseNumber=0;
					game.roundNumber=0;
					if(game.bossinfo){
						game.bossinfo.loopType=1;
					}
					game.playAudio("..","extension","神怒降世",player.name+".mp3");
					player.die();
				}
			},
			snjs_boss_tianshu4:{
				mode:['boss'],
				trigger:{player:'dieBegin'},
				silent:true,
				unique:true,
				forced:true,
				fixed:true,
				charlotte:true,
				filter:function(event,player){
					return player==game.boss;
				},
				skillList:["decadexuanfeng","qiaobian","exgnqx","snjs_tianshuluandou_tiaoxin","nzry_shicai","exzglgx","rehuaiyi","huomo","exscyh","shibei","decadezongshi","zhiyu","xpchijie","jslmgx","fenyue","rezhiman","zhiyan","remieji","mozhi","oldimeng","xingongji","exzyld","qice","exmdqx","chenqing","snjs_tianshuluandou_jiuchi","szxcj","decadejingce","xindanshou","snjs_tianshuluandou_quhu","fangquan","qianya","zuoding","mingjian","xinfu_tunan","jcgmc","xiantu","rexuanhuo","rebeige","sheyan","mizhao","hongyuan","new_reqingnang","lieren","liangzhu","jijiu","xinanguo","quji","exmctj","exlbws","reanjian","snjs_tianshuluandou_pojun","exgyws","exxcly","rejianchu","exhzlg","xinfu_qinguo","xinshensu","drlt_wanglie","resanyao","juesi","olluanji","xinfu_lingren","rehuoji","xinbenxi","exdwqx","lijian","xinfu_langxi","benyu","jieming","exccjx","exgjyj","jcccx","exsmyfk","mingzhe","xiaoji","rejizhi","qizhi","exsqzh","exscja","xinjushou","qiluan","rebiyue","xinfu_guolun","miji","gzjili","wangxi","xinfu_zuilun","exlbly","exssxjy","daiyan","reyingzi","rezishou","jslmsl","qingjiao","rejigong","drlt_yongsi","olhaoshi","exzyyj","tianming","exzglkc","xiangle","danlao","exzjqg","jcakk","jcgzc","exgjtd","zhaxiang","daoshu","jmylfp","spjiedao","reshenxing","pingkou","drlt_zhenggu","jyzongshi","wcjm","ylyj","kurou","wbxz","zwxq","xhzeqw","jusqty","pqqp","pqqy","jiaozi","duwu","exzjls","gongao","spzmjd","lihuo","exsmygc","fangzhu","exccxc"],
				content:function(){
					'step 0'
					event.guai=["snjs_boss_tianshuqiuniu","snjs_boss_tianshusuanni","snjs_boss_tianshuchiwen","snjs_boss_tianshuyazi","snjs_boss_tianshuchaofeng","snjs_boss_tianshupulao","snjs_boss_tianshubian","snjs_boss_tianshubixi","snjs_boss_tianshufuxi","snjs_boss_tianshuweinian","snjs_boss_tianshushunian","snjs_boss_tianshuwunian","snjs_boss_tianshuqunnian","snjs_boss_tianshuhuoshenzhurong","snjs_boss_tianshushuishengonggong","snjs_boss_tianshubaiqi"].randomGets(2);
					if(game.me==game.boss) event.goto(2);
					'step 1'
					event.ren=[];
					game.countPlayer(function(current){
						if(current.identity!='cai'&&current!=player&&current.isAlive()){
							event.ren.push(current);
						}
					});
					if(event.ren.length){
						game.boss=event.ren.randomGet();
						event.finish();
					}
					'step 2'
					if(player.hasSkill("new_wuhun")){
						game.countPlayer(function(current){
							if(current.hasMark('new_wuhun_mark')) current.removeMark('new_wuhun_mark',current.countMark('new_wuhun_mark'));
						});
					}
					player.hide();
					game.addVideo('hidePlayer',player);
					if(trigger.source!=undefined&&trigger.source.identity=='cai'){
						if(trigger.source.isDamaged()) trigger.source.recover();
						else trigger.source.draw(2);
					}
					'step 3'
					if(game.me!=game.boss) game.boss.changeSeat(7);
					game.delay();
					'step 4'
					if(game.me==game.boss){
						game.countPlayer(function(current){
							if(current!=player&&current.identity!='cai'){
								current.die();
							}
						});
					}
					'step 5'
					var dead=game.dead.slice(0);
					for(var i=0;i<dead.length;i++){
						if(dead[i]!=player&&dead[i].identity!='cai'){
							dead[i].hide();
						}
					}
					'step 6'
					event.skills=[];
					for(var i=0;i<lib.skill.snjs_boss_tianshu4.skillList.length;i++){
						event.skills.push(lib.skill.snjs_boss_tianshu4.skillList[i]);
					}
					event.ren=[];
					game.countPlayer(function(current){
						if(current.hasSkill("snjs_tianshuluandou_jinengxuanze")){
							event.ren.push(current);
							var removes=current.storage.snjs_tianshuluandou_jinengxuanze;
							for(var i=0;i<removes.length;i++){
								if(event.skills.contains(removes[i])) event.skills.remove(removes[i]);
							}
						}
					});
					'step 7'
					event.xuanze=event.skills;
					'step 8'
					if(event.ren.length>0) event.i=0;
					else event.goto(12);
					'step 9'
					event.xuanze1=event.xuanze;
					for(var i=0;i<event.xuanze.length;i++){
						if(event.ren[event.i].hasSkill(event.xuanze[i])) event.xuanze1.remove(event.xuanze[i]);
					}
					'step 10'
					if(event.xuanze1.length>0){
						var xuanze2=event.xuanze1.randomGets(Math.min(3,event.xuanze1.length));
						var fanyi="";
						for(var i=0;i<xuanze2.length;i++){
							fanyi+="<br><span style='text-decoration: underline;color: #ff0000'>【"+get.translation(xuanze2[i])+"】</span>："+get.translation(xuanze2[i]+"_info");
						}
						event.ren[event.i].chooseControl(xuanze2).set("prompt","请选择令<span style='color: #00cc00'>"+get.translation(event.ren[event.i])+"</span>获得的技能"+fanyi).set("ai",function(){return xuanze2.randomGet()});
					}
					else{
						event.i++;
						if(event.i<event.ren.length) event.goto(9);
					}
					'step 11'
					event.ren[event.i].addSkill(result.control);
					event.ren[event.i].storage.snjs_tianshuluandou_jinengxuanze.push(result.control);
					event.ren[event.i].updateMarks('snjs_tianshuluandou_jinengxuanze');
					event.xuanze.remove(result.control);
					event.i++;
					if(event.i<event.ren.length) event.goto(9);
					'step 12'
					game.changeBoss(event.guai[0]);
					game.delay(0.5);
					'step 13'
					game.addBossFellow(game.me==game.boss?6:5,event.guai[1]);
					'step 14'
					game.countPlayer(function(current){
						if(current.isFriendsOf(game.boss)||current==game.boss){
							if(!current.hasSkill("snjs_boss_tianshu5")) current.addSkill("snjs_boss_tianshu5");
							if(!current.hasSkill("snjs_boss_tianshuswdl")) current.addSkill("snjs_boss_tianshuswdl");
							if(current.hasSkill("nzry_jieying")) current.link(true);
							var str=get.name(current);
							if(!str.includes('snjs_boss_tianshu')){
								current.maxHp+=2;
								current.hp+=2;
							}
							current.directgain(get.cards(4));
						}
					});
					'step 15'
					while(_status.event.name!='phaseLoop'){
						_status.event=_status.event.parent;
					}
					game.resetSkills();
					_status.paused=false;
					_status.event.player=_status.currentPhase.nextSeat;
					_status.event.step=0;
					_status.roundStart=_status.currentPhase.nextSeat;
					game.phaseNumber=0;
					game.roundNumber=0;
					if(game.bossinfo){
						game.bossinfo.loopType=1;
					}
					game.playAudio("..","extension","神怒降世",player.name+".mp3");
					player.die();
				}
			},
			snjs_boss_tianshu5:{
				mode:['boss'],
				trigger:{player:'dieBegin'},
				silent:true,
				unique:true,
				forced:true,
				fixed:true,
				charlotte:true,
				filter:function(event,player){
					return player==game.boss;
				},
				skillList:["decadexuanfeng","qiaobian","exgnqx","snjs_tianshuluandou_tiaoxin","nzry_shicai","exzglgx","rehuaiyi","huomo","exscyh","shibei","decadezongshi","zhiyu","xpchijie","jslmgx","fenyue","rezhiman","zhiyan","remieji","mozhi","oldimeng","xingongji","exzyld","qice","exmdqx","chenqing","snjs_tianshuluandou_jiuchi","szxcj","decadejingce","xindanshou","snjs_tianshuluandou_quhu","fangquan","qianya","zuoding","mingjian","xinfu_tunan","jcgmc","xiantu","rexuanhuo","rebeige","sheyan","mizhao","hongyuan","new_reqingnang","lieren","liangzhu","jijiu","xinanguo","quji","exmctj","exlbws","reanjian","snjs_tianshuluandou_pojun","exgyws","exxcly","rejianchu","exhzlg","xinfu_qinguo","xinshensu","drlt_wanglie","resanyao","juesi","olluanji","xinfu_lingren","rehuoji","xinbenxi","exdwqx","lijian","xinfu_langxi","benyu","jieming","exccjx","exgjyj","jcccx","exsmyfk","mingzhe","xiaoji","rejizhi","qizhi","exsqzh","exscja","xinjushou","qiluan","rebiyue","xinfu_guolun","miji","gzjili","wangxi","xinfu_zuilun","exlbly","exssxjy","daiyan","reyingzi","rezishou","jslmsl","qingjiao","rejigong","drlt_yongsi","olhaoshi","exzyyj","tianming","exzglkc","xiangle","danlao","exzjqg","jcakk","jcgzc","exgjtd","zhaxiang","daoshu","jmylfp","spjiedao","reshenxing","pingkou","drlt_zhenggu","jyzongshi","wcjm","ylyj","kurou","wbxz","zwxq","xhzeqw","jusqty","pqqp","pqqy","jiaozi","duwu","exzjls","gongao","spzmjd","lihuo","exsmygc","fangzhu","exccxc"],
				content:function(){
					'step 0'
					event.guai=["snjs_boss_tianshuyanluowang","snjs_boss_tianshutaoshen","snjs_boss_tianshucaoe","snjs_boss_tianshushaohao","snjs_boss_tianshuhanba","snjs_boss_tianshuxuannv"].randomGets(2);
					if(game.me==game.boss) event.goto(2);
					'step 1'
					event.ren=[];
					game.countPlayer(function(current){
						if(current.identity!='cai'&&current!=player&&current.isAlive()){
							event.ren.push(current);
						}
					});
					if(event.ren.length){
						game.boss=event.ren.randomGet();
						event.finish();
					}
					'step 2'
					if(player.hasSkill("new_wuhun")){
						game.countPlayer(function(current){
							if(current.hasMark('new_wuhun_mark')) current.removeMark('new_wuhun_mark',current.countMark('new_wuhun_mark'));
						});
					}
					player.hide();
					game.addVideo('hidePlayer',player);
					if(trigger.source!=undefined&&trigger.source.identity=='cai'){
						if(trigger.source.isDamaged()) trigger.source.recover();
						else trigger.source.draw(2);
					}
					'step 3'
					if(game.me!=game.boss) game.boss.changeSeat(7);
					game.delay();
					'step 4'
					if(game.me==game.boss){
						game.countPlayer(function(current){
							if(current!=player&&current.identity!='cai'){
								current.die();
							}
						});
					}
					'step 5'
					var dead=game.dead.slice(0);
					for(var i=0;i<dead.length;i++){
						if(dead[i]!=player&&dead[i].identity!='cai'){
							dead[i].hide();
						}
					}
					'step 6'
					event.skills=[];
					for(var i=0;i<lib.skill.snjs_boss_tianshu5.skillList.length;i++){
						event.skills.push(lib.skill.snjs_boss_tianshu5.skillList[i]);
					}
					event.ren=[];
					game.countPlayer(function(current){
						if(current.hasSkill("snjs_tianshuluandou_jinengxuanze")){
							event.ren.push(current);
							var removes=current.storage.snjs_tianshuluandou_jinengxuanze;
							for(var i=0;i<removes.length;i++){
								if(event.skills.contains(removes[i])) event.skills.remove(removes[i]);
							}
						}
					});
					'step 7'
					event.xuanze=event.skills;
					'step 8'
					if(event.ren.length>0) event.i=0;
					else event.goto(12);
					'step 9'
					event.xuanze1=event.xuanze;
					for(var i=0;i<event.xuanze.length;i++){
						if(event.ren[event.i].hasSkill(event.xuanze[i])) event.xuanze1.remove(event.xuanze[i]);
					}
					'step 10'
					if(event.xuanze1.length>0){
						var xuanze2=event.xuanze1.randomGets(Math.min(3,event.xuanze1.length));
						var fanyi="";
						for(var i=0;i<xuanze2.length;i++){
							fanyi+="<br><span style='text-decoration: underline;color: #ff0000'>【"+get.translation(xuanze2[i])+"】</span>："+get.translation(xuanze2[i]+"_info");
						}
						event.ren[event.i].chooseControl(xuanze2).set("prompt","请选择令<span style='color: #00cc00'>"+get.translation(event.ren[event.i])+"</span>获得的技能"+fanyi).set("ai",function(){return xuanze2.randomGet()});
					}
					else{
						event.i++;
						if(event.i<event.ren.length) event.goto(9);
					}
					'step 11'
					event.ren[event.i].addSkill(result.control);
					event.ren[event.i].storage.snjs_tianshuluandou_jinengxuanze.push(result.control);
					event.ren[event.i].updateMarks('snjs_tianshuluandou_jinengxuanze');
					event.xuanze.remove(result.control);
					event.i++;
					if(event.i<event.ren.length) event.goto(9);
					'step 12'
					game.changeBoss(event.guai[0]);
					game.delay(0.5);
					'step 13'
					game.addBossFellow(game.me==game.boss?6:5,event.guai[1]);
					'step 14'
					game.countPlayer(function(current){
						if(current.isFriendsOf(game.boss)||current==game.boss){
							if(!current.hasSkill("snjs_boss_tianshuzzgq")) current.addSkill("snjs_boss_tianshuzzgq");
							if(current.hasSkill("nzry_jieying")) current.link(true);
							var str=get.name(current);
							if(!str.includes('snjs_boss_tianshu')){
								current.maxHp+=2;
								current.hp+=2;
							}
							current.directgain(get.cards(6));
						}
					});
					'step 15'
					while(_status.event.name!='phaseLoop'){
						_status.event=_status.event.parent;
					}
					game.resetSkills();
					_status.paused=false;
					_status.event.player=_status.currentPhase.nextSeat;
					_status.event.step=0;
					_status.roundStart=_status.currentPhase.nextSeat;
					game.phaseNumber=0;
					game.roundNumber=0;
					if(game.bossinfo){
						game.bossinfo.loopType=1;
					}
					game.playAudio("..","extension","神怒降世",player.name+".mp3");
					player.die();
				}
			},
			snjs_boss_tianshuzzgq:{
				mode:['boss'],
				trigger:{player:'dieBegin'},
				silent:true,
				unique:true,
				forced:true,
				fixed:true,
				charlotte:true,
				filter:function(event,player){
					return player==game.boss;
				},
				content:function(){
					event.ren=[];
					game.countPlayer(function(current){
						if(current.identity!='cai'&&current!=player&&current.isAlive()){
							event.ren.push(current);
						}
					});
					if(game.me!=game.boss&&event.ren.length) game.boss=event.ren.randomGet();
				},
			},
			snjs_boss_tianshuswdl:{
				trigger:{
					player:["die","dieBegin"],
				},
				firstDo:true,
				priority:99,
				unique:true,
				silent:true,
				forceDie:true,
				charlotte:true,
				filter:function(event,player,name){
					if(name=="die") return event.source&&event.source.isIn()&&event.source.identity=='cai';
					else return true;
				},
				content:function(){
					if(event.triggername=="dieBegin"){
						if(player.storage.qixing&&player.storage.qixing.length>0){
							var qipaila=player.storage.qixing;
							player.$throw(qipaila,1000);
							game.delayx();
							game.cardsDiscard(qipaila);
							game.log(qipaila,'被置入了弃牌堆');
							player.storage.qixing=[];
						}
						if(player.storage.chrh&&player.storage.chrh.length>0){
							var qipaila2=player.storage.chrh;
							player.$throw(qipaila2,1000);
							game.delayx();
							game.cardsDiscard(qipaila2);
							game.log(qipaila2,'被置入了弃牌堆');
							player.storage.chrh=[];
						}
						if(player.storage.szjfz_mark&&player.storage.szjfz_mark.length>0){
							var qipaila3=player.storage.szjfz_mark;
							player.$throw(qipaila3,1000);
							game.delayx();
							game.cardsDiscard(qipaila3);
							game.log(qipaila3,'被置入了弃牌堆');
							player.storage.szjfz_mark=[];
						}
					}
					else{
						if(trigger.source.isDamaged()) trigger.source.recover();
						else trigger.source.draw(2);
					}
				},
			},
			snjs_boss_baizhan:{
				trigger:{global:'gameStart'},
				forced:true,
				popup:false,
				fixed:true,
				unique:true,
				charlotte:true,
				content:function(){
					'step 0'
					game.bossinfo.chongzheng=99999;
					player.smoothAvatar();
					'step 1'
					if(game.me!=game.boss){
						game.boss.changeSeat(7);
					}
					else{
						game.boss.nextSeat.changeSeat(2);
						game.boss.nextSeat.nextSeat.changeSeat(3);
						game.boss.previousSeat.changeSeat(4);
					}
					event.zhuzhan=["snjs_tszz_xiaosha","snjs_tszz_xiaoshan","snjs_tszz_xiaojiu","snjs_tszz_xiaotao","snjs_tszz_xiaole"].randomGet();
					var zhuzhanjuese=ui.create.player();
					zhuzhanjuese.getId();
					zhuzhanjuese.init(event.zhuzhan).animate('start');
					zhuzhanjuese.setIdentity('cai');
					zhuzhanjuese.identity='cai';
					zhuzhanjuese.side=false;
					game.players.push(zhuzhanjuese);
					ui.arena.appendChild(zhuzhanjuese);
					zhuzhanjuese.addSkill("snjs_boss_tianshu_zhuzhan");
					zhuzhanjuese.changeSeat(game.me==game.boss?7:6);
					var str;
					if(event.zhuzhan=="snjs_tszz_xiaosha"){
						str=["缮甲修戈，清风赠袍泽","挽发降唇，一吻赏英雄"].randomGet();
						zhuzhanjuese.chat(str);
						if(str=="缮甲修戈，清风赠袍泽") game.playAudio('..','extension','神怒降世','snjs_tszz_xiaosha1.mp3');
						else game.playAudio('..','extension','神怒降世','snjs_tszz_xiaosha2.mp3');
					}
					if(event.zhuzhan=="snjs_tszz_xiaoshan"){
						str=["别误会，我可没什么别的意思","真拿你没办法"].randomGet();
						zhuzhanjuese.chat(str);
						if(str=="别误会，我可没什么别的意思") game.playAudio('..','extension','神怒降世','snjs_tszz_xiaoshan1.mp3');
						else game.playAudio('..','extension','神怒降世','snjs_tszz_xiaoshan2.mp3');
					}
					if(event.zhuzhan=="snjs_tszz_xiaojiu"){
						str=["喂，几点钟啦？饮酒先","一杯好酒相赠，三分萃意纵横"].randomGet();
						zhuzhanjuese.chat(str);
						if(str=="喂，几点钟啦？饮酒先") game.playAudio('..','extension','神怒降世','snjs_tszz_xiaojiu1.mp3');
						else game.playAudio('..','extension','神怒降世','snjs_tszz_xiaojiu2.mp3');
					}
					if(event.zhuzhan=="snjs_tszz_xiaotao"){
						str=["君心我心，纵万里亦不弃","郎情妾意，我四季有灵犀"].randomGet();
						zhuzhanjuese.chat(str);
						if(str=="君心我心，纵万里亦不弃") game.playAudio('..','extension','神怒降世','snjs_tszz_xiaotao1.mp3');
						else game.playAudio('..','extension','神怒降世','snjs_tszz_xiaotao2.mp3');
					}
					if(event.zhuzhan=="snjs_tszz_xiaole"){
						str=["有因必有果，你的好运就是我","可爱滞销，帮帮人家嘛"].randomGet();
						zhuzhanjuese.chat(str);
						if(str=="有因必有果，你的好运就是我") game.playAudio('..','extension','神怒降世','snjs_tszz_xiaole1.mp3');
						else game.playAudio('..','extension','神怒降世','snjs_tszz_xiaole2.mp3');
					}
					'step 2'
					event.guai=["snjs_baoxin","snjs_bianxi","snjs_caohua","snjs_caoxian","snjs_caoyuee","snjs_chezhou","snjs_jiachong","snjs_xiahouen","snjs_sp_zhangxiu","snjs_zhaoang","snjs_sp_chenzhen","snjs_fanqiangzhangda","snjs_sp_fushirenmifang","snjs_gaoxiang","snjs_gouan","snjs_jiangwan","snjs_wuban","snjs_xiahouzie","snjs_sp_xvjing","snjs_zhangwei","snjs_re_dingfeng","snjs_sp_liubei","snjs_penghu","snjs_pengqi","snjs_sp_sunyi","snjs_sunyu","snjs_zhanghong","snjs_sp_zhouche","snjs_zhucaizhuji","snjs_sp_fanyufeng","snjs_guodian","snjs_haomeng","snjs_houcheng","snjs_liuli","snjs_wangchong","snjs_yushe","snjs_zhangjv","snjs_zhangchun","snjs_zhangyan"].randomGets(2);
					player.init(event.guai[0]);
					game.addBossFellow(game.me==game.boss?6:5,event.guai[1]);
					'step 3'
					game.addVideo('reinit2',player,player.name);
					'step 4'
					game.countPlayer(function(current){
						if(current.isFriendsOf(game.boss)||current==game.boss){
							if(!current.hasSkill("snjs_boss_baizhan2")){
								current.addSkill("snjs_boss_baizhan2");
								current.storage.snjs_boss_baizhan2=1;
							}
							if(!current.hasSkill("snjs_boss_tianshuswdl")) current.addSkill("snjs_boss_tianshuswdl");
							if(current.hasSkill("nzry_jieying")) current.link(true);
							var str=get.name(current);
							if(!str.includes('snjs_boss_tianshu')){
								current.maxHp+=2;
								var cards=current.getCards('h').randomGets(4);
								if(cards.length){
									current.lose(cards);
									current.update();
									game.cardsDiscard(cards);
								}
								current.hp+=2;
							}
						}
						else{
							if(current.identity=='cai'&&!current.hasSkill("snjs_boss_tianshu_zhuzhan")&&!current.storage.snjs_boss_tianshu_zhuzhan){
								current.addSkill("snjs_baizhantianshu_jinengxuanze");
							}
						}
					});
				},
			},
			snjs_boss_baizhan2:{
				mode:['boss'],
				trigger:{player:'dieBegin'},
				init:function(player){
					if(!player.storage.snjs_boss_baizhan2) player.storage.snjs_boss_baizhan2=1;
					if(!player.storage.snjs_boss_baizhan2_hp) player.storage.snjs_boss_baizhan2_hp=0;
					if(!player.storage.snjs_boss_baizhan2_begindraw) player.storage.snjs_boss_baizhan2_begindraw=0;
					if(!player.storage.snjs_boss_baizhan2_enddraw) player.storage.snjs_boss_baizhan2_enddraw=0;
					if(!player.storage.snjs_boss_baizhan2_beginrecover) player.storage.snjs_boss_baizhan2_beginrecover=0;
					if(!player.storage.snjs_boss_baizhan2_damage) player.storage.snjs_boss_baizhan2_damage=0;
				},
				mark:true,
				marktext:"关卡",
				intro:{
					name:"当前关卡：",
					content:function(storage,player,skill){
						var str="<center>第"+player.storage.snjs_boss_baizhan2+"关</center>";
						if(player.storage.snjs_boss_baizhan2<=10) str+="<center>目前没有场景加持</center>";
						if(player.storage.snjs_boss_baizhan2>=11) str+="<br><li>体力上限+"+player.storage.snjs_boss_baizhan2_hp;
						if(player.storage.snjs_boss_baizhan2>=12) str+="<br><li>回合开始摸"+player.storage.snjs_boss_baizhan2_begindraw+"张牌";
						if(player.storage.snjs_boss_baizhan2>=14) str+="<br><li>回合结束摸"+player.storage.snjs_boss_baizhan2_enddraw+"张牌";
						if(player.storage.snjs_boss_baizhan2>=15) str+="<br><li>回合开始回复"+player.storage.snjs_boss_baizhan2_beginrecover+"点体力";
						if(player.storage.snjs_boss_baizhan2>=20) str+="<br><li>造成的伤害+"+player.storage.snjs_boss_baizhan2_damage;
						return str;
					},
				},
				group:["snjs_boss_baizhan2_begin","snjs_boss_baizhan2_end","snjs_boss_baizhan2_damage"],
				silent:true,
				unique:true,
				forced:true,
				fixed:true,
				charlotte:true,
				filter:function(event,player){
					return player==game.boss;
				},
				skillList1:["exgnqx","snjs_tianshuluandou_tiaoxin","rehuaiyi","huomo","jslmgx","fenyue","remieji","oldimeng","xingongji","exzyld","qice","snjs_tianshuluandou_quhu","xinfu_tunan","mizhao","new_reqingnang","jijiu","xinanguo","quji","exgyws","resanyao","juesi","olluanji","rehuoji","exdwqx","lijian","xinfu_guolun","exssxjy","daoshu","reshenxing","wcjm","ylyj","kurou","wbxz","zwxq","jusqty","duwu","snjs_tianshuluandou_jiuchi","exsqzh"],
				skillList2:["decadexuanfeng","qiaobian","nzry_shicai","exzglgx","exscyh","shibei","decadezongshi","zhiyu","xpchijie","rezhiman","zhiyan","mozhi","exmdqx","chenqing","szxcj","decadejingce","xindanshou","fangquan","qianya","zuoding","mingjian","jcgmc","xiantu","rexuanhuo","rebeige","sheyan","hongyuan","lieren","liangzhu","exmctj","exlbws","reanjian","snjs_tianshuluandou_pojun","exxcly","rejianchu","exhzlg","xinfu_qinguo","xinshensu","drlt_wanglie","xinfu_lingren","xinbenxi","xinfu_langxi","benyu","jieming","exccjx","exgjyj","jcccx","exsmyfk","mingzhe","xiaoji","rejizhi","qizhi","exscja","xinjushou","qiluan","rebiyue","miji","gzjili","wangxi","xinfu_zuilun","exlbly","daiyan","reyingzi","rezishou","jslmsl","qingjiao","rejigong","drlt_yongsi","olhaoshi","exzyyj","tianming","exzglkc","xiangle","danlao","exzjqg","jcakk","jcgzc","exgjtd","zhaxiang","jmylfp","spjiedao","pingkou","drlt_zhenggu","jyzongshi","xhzeqw","pqqp","pqqy","jiaozi","gongao","spzmjd","exsmygc","lihuo","fangzhu","snjs_tianshuluandou_xingri","snjs_tianshuluandou_kuimu","snjs_tianshuluandou_nutao","snjs_tianshuluandou_yujian","snjs_tianshuluandou_kangjin","snjs_tianshuluandou_yihuo","snjs_tianshuluandou_yehuo","snjs_tianshuluandou_jinniu","snjs_tianshuluandou_jiaomu","snjs_tianshuluandou_canshui","snjs_tianshuluandou_weiyue","snjs_tianshuluandou_doumu","exzjls","exccxc"],
				content:function(){
					"step 0"
					if(player.storage.snjs_boss_baizhan2>=10&&player.storage.snjs_boss_baizhan2%10==0&&!game.hasPlayer(function(current){
						return current!=player&&current.isFriendsOf(player);
					})){
						game.me.chooseBool("下一关：第"+get.cnNumber(player.storage.snjs_boss_baizhan2+1)+"关 是否继续挑战？").set('ai',function(target){
							return false;
						});
					}
					else event.goto(2);
					"step 1"
					if(result.bool) event.goto(2);
					else event.finish();
					"step 2"
					var guaiweupanduan=player.storage.snjs_boss_baizhan2+1;
					if([1,6,11,16,21,26,31,36,41,46,51,56,61,66,71,76,81,86,91,96].contains(guaiweupanduan)){
						event.guai=["snjs_baoxin","snjs_bianxi","snjs_caohua","snjs_caoxian","snjs_caoyuee","snjs_chezhou","snjs_jiachong","snjs_xiahouen","snjs_sp_zhangxiu","snjs_zhaoang","snjs_sp_chenzhen","snjs_fanqiangzhangda","snjs_sp_fushirenmifang","snjs_gaoxiang","snjs_gouan","snjs_jiangwan","snjs_wuban","snjs_xiahouzie","snjs_sp_xvjing","snjs_zhangwei","snjs_re_dingfeng","snjs_sp_liubei","snjs_penghu","snjs_pengqi","snjs_sp_sunyi","snjs_sunyu","snjs_zhanghong","snjs_sp_zhouche","snjs_zhucaizhuji","snjs_sp_fanyufeng","snjs_guodian","snjs_haomeng","snjs_houcheng","snjs_liuli","snjs_wangchong","snjs_yushe","snjs_zhangjv","snjs_zhangchun","snjs_zhangyan"].randomGets(2);
					}
					if([2,7,12,17,22,27,32,37,42,47,52,57,62,67,72,77,82,87,92,97].contains(guaiweupanduan)){
						event.guai=["shen_guanyu","shen_liubei","shen_luxun","shen_caocao","shen_zhouyu","shen_lvmeng","shen_zhugeliang","shen_luxun","shen_simayi","shen_zhaoyun","shen_lvbu","snjs_boss_tianshuzishu","snjs_boss_tianshuchouniu","snjs_boss_tianshuyinhu","snjs_boss_tianshumaotu","snjs_boss_tianshuchenlong","snjs_boss_tianshusishe","snjs_boss_tianshuwuma","snjs_boss_tianshuweiyang","snjs_boss_tianshushenhou","snjs_boss_tianshuyouji","snjs_boss_tianshuxugou","snjs_boss_tianshuhaizhu"].randomGets(2);
					}
					if([3,8,13,18,23,28,33,38,43,48,53,58,63,68,73,78,83,88,93,98].contains(guaiweupanduan)){
						event.guai=["snjs_boss_tianshubaihu","snjs_boss_tianshuqinglong","snjs_boss_tianshuzhuque","snjs_boss_tianshuxuanwu","snjs_boss_tianshumengpo","snjs_boss_tianshuheiwuchang","snjs_boss_tianshubaiwuchang","snjs_boss_tianshuniutou","snjs_boss_tianshumamian","snjs_boss_tianshubaowei","snjs_boss_tianshuyusai","snjs_boss_tianshuniaozui","snjs_boss_tianshuhuangfeng","snjs_boss_tianshuweixi","snjs_boss_tianshushuxi","snjs_boss_tianshuwuxi","snjs_boss_tianshuqunxi","snjs_boss_tianshuweinian","snjs_boss_tianshushunian","snjs_boss_tianshuwunian","snjs_boss_tianshuqunnian"].randomGets(2);
					}
					if([4,9,14,19,24,29,34,39,44,49,54,59,64,69,74,79,84,89,94,99].contains(guaiweupanduan)){
						event.guai=["snjs_boss_tianshuheiwuchangbaiwuchang","snjs_boss_tianshuniutoumamian","snjs_boss_tianshuriyoushenyeyoushen","snjs_boss_tianshuweishunian","snjs_boss_tianshuweiwunian","snjs_boss_tianshuweiqunnian","snjs_boss_tianshushuwunian","snjs_boss_tianshushuqunnian","snjs_boss_tianshuwuqunnian","snjs_boss_tianshuqiuniu","snjs_boss_tianshusuanni","snjs_boss_tianshuchiwen","snjs_boss_tianshuyazi","snjs_boss_tianshuchaofeng","snjs_boss_tianshupulao","snjs_boss_tianshubian","snjs_boss_tianshubixi","snjs_boss_tianshufuxi","snjs_boss_tianshuhuoshenzhurong","snjs_boss_tianshushuishengonggong","snjs_boss_tianshubaiqi"].randomGets(2);
					}
					if([5,10,15,20,25,30,35,40,45,50,55,60,65,70,75,80,85,90,95,100].contains(guaiweupanduan)){
						event.guai=["snjs_boss_tianshuyanluowang","snjs_boss_tianshutaoshen","snjs_boss_tianshucaoe","snjs_boss_tianshushaohao","snjs_boss_tianshuhanba","snjs_boss_tianshuxuannv","snjs_boss_tianshukuafu"].randomGets(2);
					}
					if(game.me==game.boss) event.goto(4);
					"step 3"
					event.ren=[];
					game.countPlayer(function(current){
						if(current.identity!='cai'&&current!=player&&current.isAlive()){
							event.ren.push(current);
						}
					});
					if(event.ren.length){
						game.boss=event.ren.randomGet();
						event.finish();
					}
					"step 4"
					if(player.hasSkill("new_wuhun")){
						game.countPlayer(function(current){
							if(current.hasMark('new_wuhun_mark')) current.removeMark('new_wuhun_mark',current.countMark('new_wuhun_mark'));
						});
					}
					player.hide();
					game.addVideo('hidePlayer',player);
					if(trigger.source!=undefined&&trigger.source.identity=='cai'){
						if(trigger.source.isDamaged()) trigger.source.recover();
						else trigger.source.draw(2);
					}
					"step 5"
					if(game.me!=game.boss) game.boss.changeSeat(7);
					game.delay();
					"step 6"
					if(game.me==game.boss){
						game.countPlayer(function(current){
							if(current!=player&&current.identity!='cai'){
								current.die();
							}
						});
					}
					"step 7"
					var dead=game.dead.slice(0);
					for(var i=0;i<dead.length;i++){
						if(dead[i]!=player&&dead[i].identity!='cai'){
							dead[i].hide();
						}
					}
					if(player.storage.snjs_boss_baizhan2>4&&player.storage.snjs_boss_baizhan2%5!=0) event.goto(14);
					"step 8"
					event.skills1=[];
					event.skills2=[];
					for(var i=0;i<lib.skill.snjs_boss_baizhan2.skillList1.length;i++){
						event.skills1.push(lib.skill.snjs_boss_baizhan2.skillList1[i]);
					}
					for(var i=0;i<lib.skill.snjs_boss_baizhan2.skillList2.length;i++){
						event.skills2.push(lib.skill.snjs_boss_baizhan2.skillList2[i]);
					}
					event.ren=[];
					game.countPlayer(function(current){
						if(current.hasSkill("snjs_baizhantianshu_jinengxuanze")){
							event.ren.push(current);
							var removes1=current.storage.snjs_baizhantianshu_jinengxuanze1;
							var removes2=current.storage.snjs_baizhantianshu_jinengxuanze2;
							for(var i=0;i<removes1.length;i++){
								if(event.skills1.contains(removes1[i])) event.skills1.remove(removes1[i]);
							}
							for(var i=0;i<removes2.length;i++){
								if(event.skills2.contains(removes2[i])) event.skills2.remove(removes2[i]);
							}
						}
					});
					"step 9"
					event.zhudong=event.skills1;
					event.beidong=event.skills2;
					"step 10"
					if(event.ren.length>0) event.i=0;
					else event.goto(14);
					"step 11"
					event.zhudong1=event.zhudong;
					event.beidong1=event.beidong;
					for(var i=0;i<event.zhudong.length;i++){
						if(event.ren[event.i].hasSkill(event.zhudong[i])) event.zhudong1.remove(event.zhudong[i]);
					}
					for(var i=0;i<event.beidong.length;i++){
						if(event.ren[event.i].hasSkill(event.beidong[i])) event.beidong1.remove(event.beidong[i]);
					}
					"step 12"
					var xuanze=[];
					var xuanze1;
					var xuanze2;
					var tishi="<br>";
					var fanyi="";
					if(event.zhudong1.length){
						xuanze1=event.zhudong1.randomGets(Math.min(3,event.zhudong1.length));
						tishi+="主动：";
						for(var i=0;i<xuanze1.length;i++){
							xuanze.push(xuanze1[i]);
							tishi+="<span style='color: #ff9900'>"+get.translation(xuanze1[i])+"</span>";
							if(i<xuanze1.length-1) tishi+="、";
							fanyi+="<br><span style='text-decoration: underline;color: #ff0000'>【"+get.translation(xuanze1[i])+"】</span>："+get.translation(xuanze1[i]+"_info");
						}
					}
					if(event.beidong1.length){
						xuanze2=event.beidong1.randomGets(Math.min(4,event.beidong1.length));
						tishi+=event.zhudong1.length?"<br>被动：":"被动：";
						for(var i=0;i<xuanze2.length;i++){
							xuanze.push(xuanze2[i]);
							tishi+="<span style='color: #33ccff'>"+get.translation(xuanze2[i])+"</span>";
							if(i<xuanze2.length-1) tishi+="、";
							fanyi+="<br><span style='text-decoration: underline;color: #ff0000'>【"+get.translation(xuanze2[i])+"】</span>："+get.translation(xuanze2[i]+"_info");
						}
					}
					if(xuanze.length>0){
						event.ren[event.i].chooseControl(xuanze).set("prompt","请选择令<span style='color: #00cc00'>"+get.translation(event.ren[event.i])+"</span>获得的技能<br><span style='color: #ff0000'>选择主动技会替换掉当前的主动技</span>"+tishi).set("ai",function(player){return xuanze.randomGet()});
					}
					else{
						event.i++;
						if(event.i<event.ren.length) event.goto(11);
					}
					"step 13"
					if(lib.skill.snjs_boss_baizhan2.skillList1.contains(result.control)){
						event.ren[event.i].removeSkill(event.ren[event.i].storage.snjs_baizhantianshu_jinengxuanze1);
						event.ren[event.i].storage.snjs_baizhantianshu_jinengxuanze1=[];
						event.ren[event.i].storage.snjs_baizhantianshu_jinengxuanze1.push(result.control);
						event.ren[event.i].addSkill(result.control);
						event.zhudong.remove(result.control);
					}
					if(lib.skill.snjs_boss_baizhan2.skillList2.contains(result.control)){
						event.ren[event.i].storage.snjs_baizhantianshu_jinengxuanze2.push(result.control);
						event.ren[event.i].addSkill(result.control);
						event.beidong.remove(result.control);
					}
					event.ren[event.i].updateMarks('snjs_baizhantianshu_jinengxuanze');
					event.i++;
					if(event.i<event.ren.length) event.goto(11);
					"step 14"
					game.changeBoss(event.guai[0]);
					game.delay(0.5);
					"step 15"
					game.addBossFellow(game.me==game.boss?6:5,event.guai[1]);
					"step 16"
					var guanqiajisuan=player.storage.snjs_boss_baizhan2+1;
					var hp=player.storage.snjs_boss_baizhan2_hp;
					var begindraw=player.storage.snjs_boss_baizhan2_begindraw;
					var enddraw=player.storage.snjs_boss_baizhan2_enddraw;
					var beginrecover=player.storage.snjs_boss_baizhan2_beginrecover;
					var damage=player.storage.snjs_boss_baizhan2_damage;
					game.countPlayer(function(current){
						if(current.isFriendsOf(game.boss)||current==game.boss){
							if(!current.hasSkill("snjs_boss_baizhan2")){
								current.addSkill("snjs_boss_baizhan2");
								current.storage.snjs_boss_baizhan2=guanqiajisuan;
							}
							if(!current.hasSkill("snjs_boss_tianshuswdl")) current.addSkill("snjs_boss_tianshuswdl");
							if(current.hasSkill("nzry_jieying")) current.link(true);
							var str=get.name(current);
							if(!str.includes('snjs_boss_tianshu')){
								current.maxHp+=2;
								current.hp+=2;
							}
							if([2,7,12,17,22,27,32,37,42,47,52,57,62,67,72,77,82,87,92,97].contains(guanqiajisuan)) current.directgain(get.cards(1));
							if([3,8,13,18,23,28,33,38,43,48,53,58,63,68,73,78,83,88,93,98].contains(guanqiajisuan)) current.directgain(get.cards(2));
							if([4,9,14,19,24,29,34,39,44,49,54,59,64,69,74,79,84,89,94,99].contains(guanqiajisuan)) current.directgain(get.cards(4));
							if([5,10,15,20,25,30,35,40,45,50,55,60,65,70,75,80,85,90,95,100].contains(guanqiajisuan)) current.directgain(get.cards(6));
							if(guanqiajisuan>10){
								if([1,3,6,8].contains(guanqiajisuan%10)) current.storage.snjs_boss_baizhan2_hp=hp+1;
								else current.storage.snjs_boss_baizhan2_hp=hp;
								if([2,7].contains(guanqiajisuan%10)) current.storage.snjs_boss_baizhan2_begindraw=begindraw+1;
								else current.storage.snjs_boss_baizhan2_begindraw=begindraw;
								if([4,9].contains(guanqiajisuan%10)) current.storage.snjs_boss_baizhan2_enddraw=enddraw+1;
								else current.storage.snjs_boss_baizhan2_enddraw=enddraw;
								if(guanqiajisuan%10==5) current.storage.snjs_boss_baizhan2_beginrecover=beginrecover+1;
								else current.storage.snjs_boss_baizhan2_beginrecover=beginrecover;
								if(guanqiajisuan%10==0) current.storage.snjs_boss_baizhan2_damage=damage+1;
								else current.storage.snjs_boss_baizhan2_damage=damage;
								current.maxHp+=current.storage.snjs_boss_baizhan2_hp;
								current.hp+=current.storage.snjs_boss_baizhan2_hp;
							}
							current.update();
						}
					});
					"step 17"
					while(_status.event.name!='phaseLoop'){
						_status.event=_status.event.parent;
					}
					game.resetSkills();
					_status.paused=false;
					_status.event.player=_status.currentPhase.nextSeat;
					_status.event.step=0;
					_status.roundStart=_status.currentPhase.nextSeat;
					game.phaseNumber=0;
					game.roundNumber=0;
					if(game.bossinfo){
						game.bossinfo.loopType=1;
					}
					game.playAudio("..","extension","神怒降世",player.name+".mp3");
					player.die();
				},
				subSkill:{
					begin:{
						trigger:{
							player:"phaseBegin",
						},
						filter:function(event,player){
							if(player.storage.snjs_boss_baizhan2<=10) return false;
							if(!player.storage.snjs_boss_baizhan2_begindraw&&!player.storage.snjs_boss_baizhan2_beginrecover) return false;
							return player.storage.snjs_boss_baizhan2_begindraw||player.storage.snjs_boss_baizhan2_beginrecover;
						},
						fixed:true,
						silent:true,
						unique:true,
						forced:true,
						popup:false,
						charlotte:true,
						content:function(){
							if(player.storage.snjs_boss_baizhan2_beginrecover&&player.storage.snjs_boss_baizhan2_beginrecover>0){
								player.popup("百战","green");
								player.recover(player.storage.snjs_boss_baizhan2_beginrecover);
							}
							if(player.storage.snjs_boss_baizhan2_begindraw&&player.storage.snjs_boss_baizhan2_begindraw>0){
								player.popup("百战","blue");
								player.draw(player.storage.snjs_boss_baizhan2_begindraw);
							}
						},
						sub:true,
					},
					end:{
						trigger:{
							player:"phaseEnd",
						},
						filter:function(event,player){
							if(player.storage.snjs_boss_baizhan2<=10) return false;
							if(!player.storage.snjs_boss_baizhan2_enddraw) return false;
							return player.storage.snjs_boss_baizhan2_enddraw>0;
						},
						fixed:true,
						silent:true,
						unique:true,
						forced:true,
						popup:false,
						charlotte:true,
						content:function(){
							player.popup("百战","blue");
							player.draw(player.storage.snjs_boss_baizhan2_enddraw);
						},
						sub:true,
					},
					damage:{
						trigger:{
							source:"damageBegin",
						},
						filter:function(event,player){
							if(player.storage.snjs_boss_baizhan2<=10) return false;
							if(!player.storage.snjs_boss_baizhan2_damage) return false;
							return player.storage.snjs_boss_baizhan2_damage>0;
						},
						fixed:true,
						silent:true,
						unique:true,
						forced:true,
						popup:false,
						charlotte:true,
						content:function(){
							player.popup("百战","red");
							trigger.num+=player.storage.snjs_boss_baizhan2_damage;
						},
						sub:true,
					},
				},
			},
			snjs_boss_tianshuzishuzishu:{
				audio:"ext:神怒降世:1",
				enable:"phaseUse",
				usable:1,
				filter:function(event,player){
					return !player.isMaxHandcard();
				},
				filterTarget:function(card,player,target){
					return player!=target&&target.countCards('h')>player.countCards('h')&&target.countGainableCards(player,'h')>0;
				},
				content:function(){
					"step 0"
					player.gainPlayerCard(target,'h',true);
					"step 1"
					player.chooseTarget(get.prompt('snjs_boss_tianshuzishuzishu'),'<center>获得一名其他角色的一张手牌</center>',function(card,player,target){
						return target.countGainableCards(player,'h')>0&&player!=target&&target.countCards('h')>player.countCards('h');
					}).set('ai',function(target){
						return 10-get.attitude(_status.event.player,target);
					});
					"step 2"
					if(result.bool){
						event.target=result.targets[0];
						player.logSkill('snjs_boss_tianshuzishuzishu',event.target);
						player.gainPlayerCard(event.target,'h',true);
						if(!player.isMaxHandcard()) event.goto(1);
					}
				},
				ai:{
					order:1,
					threaten:3,
					result:{
						target:function (player,target){
							return -1;
						},
					},
				},
			},
			snjs_boss_tianshuchouniuchouniu:{
				audio:"ext:神怒降世:1",
				trigger:{
					player:"phaseJieshuBegin",
				},
				filter:function(event,player){
					return player.isMinHp();
				},
				forced:true,
				content:function(){
					player.recover();
				},
			},
			snjs_boss_tianshuyinhuyinhu:{
				audio:"ext:神怒降世:1",
				enable:"phaseUse",
				filter:function(event,player){
					if(player.countCards('he')<1) return false;
					if(player.hasSkill('snjs_boss_tianshuyinhuyinhu_mark')) return false;
					return !player.hasSkill("snjs_boss_tianshuyinhuyinhu_jilu")||player.storage.snjs_boss_tianshuyinhuyinhu_jilu.length<4;
				},
				filterCard:function(card,player){
					if(!player.hasSkill("snjs_boss_tianshuyinhuyinhu_jilu")) return true;
					else return !player.storage.snjs_boss_tianshuyinhuyinhu_jilu.contains(get.type(card));
				},
				position:"he",
				check:function(card){
					return 8-get.value(card);
				},
				filterTarget:function(card,player,target){
					return player!=target;
				},
				content:function(){
					if(!player.hasSkill("snjs_boss_tianshuyinhuyinhu_jilu")) player.addTempSkill("snjs_boss_tianshuyinhuyinhu_jilu");
					if(!player.storage.snjs_boss_tianshuyinhuyinhu_jilu) player.storage.snjs_boss_tianshuyinhuyinhu_jilu=[];
					player.storage.snjs_boss_tianshuyinhuyinhu_jilu.push(get.type(cards[0]));
					if(get.type(cards[0])=='trick') player.storage.snjs_boss_tianshuyinhuyinhu_jilu.push('delay');
					if(get.type(cards[0])=='delay') player.storage.snjs_boss_tianshuyinhuyinhu_jilu.push('trick');
					target.damage('nocard');
				},
				ai:{
					threaten:3.5,
					order:8.5,
					result:{
						target:function(player,target){
							return get.damageEffect(target,player);
						},
					},
				},
				subSkill:{
					jilu:{
						trigger:{
							global:"dying",
						},
						filter:function(event,player){
							return event.reason&&event.reason.getParent().name=='snjs_boss_tianshuyinhuyinhu';
						},
						content:function(){
							if(!player.hasSkill('snjs_boss_tianshuyinhuyinhu_mark')) player.addTempSkill('snjs_boss_tianshuyinhuyinhu_mark');
						},
						silent:true,
						unique:true,
						forced:true,
						onremove:function(player){
							delete player.storage.snjs_boss_tianshuyinhuyinhu_jilu;
						},
						sub:true,
						popup:false,
					},
					mark:{
						mark:true,
						intro:{
							name:"寅虎",
							content:"本回合〖寅虎〗失效",
						},
						silent:true,
						unique:true,
						forced:true,
						sub:true,
						popup:false,
					},
				},
			},
			snjs_boss_tianshumaotumaotu:{
				audio:"ext:神怒降世:1",
				trigger:{
					global:"die",
				},
				filter:function(event,player){
					return event.player!=player;
				},
				forced:true,
				content:function(){
					if(!player.hasSkill("snjs_boss_tianshumaotumaotu_xiaoguo")) player.addTempSkill("snjs_boss_tianshumaotumaotu_xiaoguo",{player:'phaseUseBegin'});
				},
				subSkill:{
					xiaoguo:{
						mark:true,
						intro:{
							name:"卯兔",
							content:"直到你的下一个出牌阶段开始前，你不能成为体力值大于等于你的角色使用牌的目标",
						},
						mod:{
							targetEnabled:function(card,player,target,now){
								if(target.hp<=player.hp) return false;
							},
						},
						silent:true,
						unique:true,
						forced:true,
						sub:true,
						popup:false,
					},
				},
			},
			snjs_boss_tianshuchenlongchenlong:{
				audio:"ext:神怒降世:1",
				enable:"phaseUse",
				unique:true,
				mark:true,
				limited:true,
				init:function(player){
					player.storage.snjs_boss_tianshuchenlongchenlong=false;
				},
				intro:{
					content:"limited",
				},
				skillAnimation:true,
				animationColor:"orange",
				filterTarget:function(card,player,target){
					return player!=target;
				},
				filter:function(event,player){
					if(player.storage.snjs_boss_tianshuchenlongchenlong) return false;
					return true;
				},
				content:function(){
					'step 0'
					player.awakenSkill('snjs_boss_tianshuchenlongchenlong');
					player.storage.snjs_boss_tianshuchenlongchenlong=true;
					if(!player.hasSkill("snjs_boss_tianshuchenlongchenlong_jilu")) player.addTempSkill("snjs_boss_tianshuchenlongchenlong_jilu");
					event.mobiao=targets[0];
					'step 1'
					player.chooseControl('一','二','三','四','五').set('prompt',"〖辰龙〗：选择失去的体力值数量").set('ai',function(target){
						if(targets[0].hp<=1) return '一';
						if(targets[0].hp==2) return '二';
						if(targets[0].hp==3) return '三';
						if(targets[0].hp==4) return '四';
						if(targets[0].hp>=5) return '五';
						else return '五';
					});
					'step 2'
					if(result.control=='一'){
						player.loseHp();
						event.mobiao.damage('nocard');
					}
					if(result.control=='二'){
						player.loseHp(2);
						event.mobiao.damage(2,'nocard');
					}
					if(result.control=='三'){
						player.loseHp(3);
						event.mobiao.damage(3,'nocard');
					}
					if(result.control=='四'){
						player.loseHp(4);
						event.mobiao.damage(4,'nocard');
					}
					if(result.control=='五'){
						player.loseHp(5);
						event.mobiao.damage(5,'nocard');
					}
				},
				ai:{
					threaten:3.5,
					order:20,
					result:{
						target:function(player,target){
							return get.damageEffect(target,player);
						},
					},
				},
				subSkill:{
					jilu:{
						trigger:{
							player:"dying",
						},
						filter:function(event,player){
							return event.reason&&event.reason.getParent().name=='snjs_boss_tianshuchenlongchenlong';
						},
						content:function(){
							if(player.hp<=0){
								player.recover(1-player.hp);
								player.loseMaxHp();
							}
							player.removeSkill("snjs_boss_tianshuchenlongchenlong_jilu");
						},
						silent:true,
						unique:true,
						forced:true,
						sub:true,
						popup:false,
					},
				},
			},
			snjs_boss_tianshusishesishe:{
				audio:"ext:神怒降世:1",
				trigger:{
					player:"damageEnd",
				},
				filter:function(event,player){
					return (event.source!=undefined&&event.num>0&&event.source!=player);
				},
				check:function(event,player){
					return (get.attitude(player,event.source)<=0);
				},
				logTarget:function(event,player){
					return event.source;
				},
				content:function(){
					trigger.source.damage(trigger.num,'nocard');
				},
				ai:{
					"maixie_defend":true,
				},
			},
			snjs_boss_tianshuwumawuma:{
				audio:"ext:神怒降世:1",
				trigger:{
					player:["turnOverBefore","phaseZhunbeiSkipped","phaseJudgeSkipped","phaseDrawSkipped","phaseUseSkipped",,"phaseDiscardSkipped","phaseJieshuSkipped"],
					target:"useCardToTarget",
				},
				priority:20,
				filter:function(event,player,name){
					if(name=="turnOverBefore") return !player.isTurnedOver();
					if(name=="useCardToTarget") return get.type(event.card)=='trick'&&event.player!=player;
					return true;
				},
				forced:true,
				content:function(){
					if(event.triggername!="useCardToTarget"){
						if(event.triggername=="turnOverBefore"){
							trigger.cancel();
							game.log(player,'取消了翻面');
						}
						else{
							if(event.triggername=="phaseZhunbeiSkipped") var next=player.phaseZhunbei();
							if(event.triggername=="phaseJudgeSkipped") var next=player.phaseJudge();
							if(event.triggername=="phaseDrawSkipped") var next=player.phaseDraw();
							if(event.triggername=="phaseUseSkipped") var next=player.phaseUse();
							if(event.triggername=="phaseDiscardSkipped") var next=player.phaseDiscard();
							if(event.triggername=="phaseJieshuSkipped") var next=player.phaseJieshu();
							trigger.getParent().next.push(next);
						}
					}
					else player.draw();
				},
			},
			snjs_boss_tianshuweiyangweiyang:{
				audio:"ext:神怒降世:1",
				enable:"phaseUse",
				usable:1,
				filter:function(event,player){
					return player.countCards('he')>0&&game.hasPlayer(function(current){
						return current.isDamaged();
					});
				},
				selectCard:function(){
					var num=game.countPlayer(function(current){
						return current.isDamaged();
					});
					return [1,num];
				},
				position:"he",
				complexCard:true,
				filterCard:function(card,player){
					var type=get.type(card);
					for(var i=0;i<ui.selected.cards.length;i++){
						if(get.type(ui.selected.cards[i])==type) return false;
					}
					return true;
				},
                selectTarget:function(){
					return ui.selected.cards.length;
				},
				filterTarget:function(card,player,target){
					return target.isDamaged();
				},
				check:function(card){
					return 8-get.value(card);
				},
				content:function(){
					"step 0"
					event.mubiao=targets;
					"step 1"
					if(event.mubiao.length>0){
						event.mubiao[0].recover();
						event.mubiao.remove(event.mubiao[0]);
					}
					else event.finish();
					"step 2"
					if(event.mubiao.length>0) event.goto(1);
				},
				ai:{
					threaten:1.5,
					order:8,
					result:{
						target:function(player,target){
							return 1;
						},
					},
				},
			},
			snjs_boss_tianshushenhoushenhou:{
				audio:"ext:神怒降世:1",
				trigger:{
					target:"useCardToTarget",
				},
				filter:function(event,player){
					return event.card.name=='sha';
				},
				check:function(event,player){
					return true;
				},
				content:function(){
					'step 0'
					player.judge(function(result){
						if(get.color(result)=='red') return 2;
						return -1;
					}).judge2=function(result){
						return result.bool;
					};
					'step 1'
					if(result.bool){
						trigger.targets.remove(player);
						trigger.getParent().triggeredTargets2.remove(player);
						trigger.untrigger();
					}
				},
			},
			snjs_boss_tianshuyoujiyouji:{
				audio:"ext:神怒降世:1",
				trigger:{
					player:"phaseDrawBegin",
				},
				filter:function(event,player){
					return game.roundNumber>0;
				},
				forced:true,
				content:function(){
					trigger.num+=Math.min(game.roundNumber,5);
				},
				ai:{
					threaten:3.2,
				},
			},
			snjs_boss_tianshuxugouxugou:{
				audio:"ext:神怒降世:1",
				mod:{
					targetInRange:function(card){
						if(get.color(card)=='red'&&card.name=='sha') return true;
					},
				},
				trigger:{
					player:"useCard",
					target:"useCardToBefore",
				},
				filter:function(event,player){
					return event.card.name=='sha'&&get.color(event.card)=='red';
				},
				forced:true,
				content:function(){
					if(event.triggername=="useCard") trigger.baseDamage++;
					else trigger.cancel();
				},
			},
			snjs_boss_tianshuhaizhuhaizhu:{
				audio:"ext:神怒降世:1",
				trigger:{
					player:"phaseZhunbeiBegin",
					global:"loseAfter",
				},
				filter:function(event,player,name){
					if(name=="phaseZhunbeiBegin") return player.isMaxHandcard();
					else{
						if(event.player==player) return false;
						if(event.type!='discard') return false;
						for(var i=0;i<event.cards2.length;i++){
							if(get.color(event.cards2[i],event.player)=='black'){
								return true;
							}
						}
						return false;
					}
				},
				forced:true,
				content:function(){
					"step 0"
					if(trigger.delay==false) game.delay();
					"step 1"
					if(event.triggername=="phaseZhunbeiBegin") player.loseHp();
					else{
						var cards=[];
						for(var i=0;i<trigger.cards2.length;i++){
							var card=trigger.cards2[i];
							if(get.color(card,trigger.player)=='black'){
								cards.push(card);
							}
						}
						player.gain(cards,'gain2','log');
					}
				},
				ai:{
					threaten:2.5,
				},
			},
			snjs_boss_tianshuqinglonglonghui:{
				audio:"ext:神怒降世:1",
				trigger:{
					player:"phaseZhunbeiBegin",
				},
				forced:true,
				content:function(){
					event.cards=[];
					while(event.cards.length<2){
						var card=get.cardPile2(function(card){
							return !event.cards.contains(card)&&(get.type(card)=='trick'||get.type(card)=='delay');
						});
						if(card){
							event.cards.push(card);
						}
						else{
							for(var i=0;i<ui.discardPile.childNodes.length;i++){
								var current=ui.discardPile.childNodes[i];
								if(!event.cards.contains(current)&&(get.type(current)=='trick'||get.type(current)=='delay')&&event.cards.length<2){
									event.cards.push(current);
								}
							}
						}
					}
					if(event.cards.length>0) player.gain(event.cards,'gain2');
				},
				ai:{
					threaten:1.2,
				},
			},
			snjs_boss_tianshuqinglonglonglin:{
				audio:"ext:神怒降世:1",
				trigger:{
					player:"damageEnd",
				},
				forced:true,
				content:function(){
					if(!player.hasSkill('snjs_boss_tianshuqinglonglonglin_xiaoguo')) player.addTempSkill('snjs_boss_tianshuqinglonglonglin_xiaoguo',['phaseAfter','phaseBefore']);
				},
				subSkill:{
					xiaoguo:{
						audio:"snjs_boss_tianshuqinglonglonglin",
						trigger:{
							target:"useCardToBefore",
						},
						forced:true,
						priority:15,
						filter:function(event,player){
							return event.player!=player&&!event.player.isFriendsOf(player);
						},
						content:function(){
							trigger.cancel();
						},
						mark:true,
						intro:{
							name:"龙鳞",
							content:"敌方角色对你使用的牌无效",
						},
						ai:{
							effect:{
								target:function(card,player,target,current){
									if(!player.isFriendsOf(target)) return 'zeroplayertarget';
								},
							},
						},
						sub:true,
					},
				},
			},
			snjs_boss_tianshubaihuhuwei:{
				audio:"ext:神怒降世:1",
				trigger:{
					player:"phaseZhunbeiBegin",
				},
				forced:true,
				content:function (){
					event.cards=[];
					while(event.cards.length<2){
						var card=get.cardPile2(function(card){
							return !event.cards.contains(card)&&get.type(card)=='basic'&&card.name=='sha';
						});
						if(card){
							event.cards.push(card);
						}
						else{
							for(var i=0;i<ui.discardPile.childNodes.length;i++){
								var current=ui.discardPile.childNodes[i];
								if(!event.cards.contains(current)&&get.type(current)=='basic'&&current.name=='sha'&&event.cards.length<2){
									event.cards.push(current);
								}
							}
						}
					}
					if(event.cards.length>0) player.gain(event.cards,'gain2');
				},
				ai:{
					threaten:1.2,
				}
			},
			snjs_boss_tianshubaihukuangxiao:{
				audio:"ext:神怒降世:1",
				mod:{
					targetInRange:function(card,player,target){
						if(card.name=='sha'&&_status.currentPhase==player) return true;
					},
					cardUsable:function(card,player,num){
						if(card.name=='sha') return num+1;
					},
					selectTarget:function(card,player,range){
						if(card.name=='sha'&&_status.currentPhase==player){
							range[1]=-1;
							range[0]=-1;
						}
					},
					playerEnabled:function(card,player,target){
						if(_status.currentPhase==player){
							if(card.name=='sha'&&target.isFriendsOf(player)){
								return false;
							}
						}
					},
				},
				firstDo:true,
				trigger:{
					player:"useCard1",
				},
				forced:true,
				filter:function(event,player){
					return event.card.name=='sha'&&_status.currentPhase==player;
				},
				content:function(){},
			},
			snjs_boss_tianshuxuanwulingqu:{
				audio:"ext:神怒降世:1",
				mod:{
					maxHandcardBase:function(player,num){
						return num+player.countMark('snjs_boss_tianshuxuanwulingqu');
					},
				},
				trigger:{
					player:"damageBegin4",
				},
				mark:true,
				intro:{
					name:"灵躯",
					content:"手牌上限+#",
				},
				forced:true,
				content:function(){
					if(trigger.num>1&&game.hasPlayer(function(current){
						return current!=player&&current.isFriendsOf(player);
					})) trigger.num=1;
					player.draw();
					player.addMark('snjs_boss_tianshuxuanwulingqu',1);
				},
				ai:{
					filterDamage:true,
				},
			},
			snjs_boss_tianshuxuanwuxuankai:{
				audio:"ext:神怒降世:1",
				trigger:{
					player:"damageEnd",
				},
				forced:true,
				content:function(){
					if(!player.hasSkill("snjs_boss_tianshuxuanwuxuankai_xiaoguo")) player.addSkill("snjs_boss_tianshuxuanwuxuankai_xiaoguo");
				},
				subSkill:{
					xiaoguo:{
						audio:"snjs_boss_tianshuxuanwuxuankai",
						mark:true,
						intro:{
							name:"玄铠",
							content:"你使用的下一张【杀】无法被响应",
						},
						trigger:{
							player:"useCard",
						},
						filter:function(event,player){
							return event.card.name=='sha';
						},
						unique:true,
						forced:true,
						content:function(){
							"step 0"
							trigger.directHit.addArray(game.filterPlayer(function(current){
								return true;
							}));
							"step 1"
							player.removeSkill("snjs_boss_tianshuxuanwuxuankai_xiaoguo");
						},
						ai:{
							"directHit_ai":true,
						},
						sub:true,
					},
				},
			},
			snjs_boss_tianshuzhuquezhuyu:{
				audio:"ext:神怒降世:1",
				trigger:{
					player:"phaseZhunbeiBegin",
				},
				forced:true,
				content:function (){
					event.cards=[];
					while(event.cards.length<2){
						var card=get.cardPile2(function(card){
							return !event.cards.contains(card)&&get.color(card)=='red';
						});
						if(card){
							event.cards.push(card);
						}
						else{
							for(var i=0;i<ui.discardPile.childNodes.length;i++){
								var current=ui.discardPile.childNodes[i];
								if(!event.cards.contains(current)&&get.color(current)=='red'&&event.cards.length<2){
									event.cards.push(current);
								}
							}
						}
					}
					if(event.cards.length>0) player.gain(event.cards,'gain2');
				},
				ai:{
					threaten:1.5,
				}
			},
			snjs_boss_tianshuzhuquefentian:{
				audio:"ext:神怒降世:1",
				filter:function(event,player){
					return !player.hasSkill('snjs_boss_tianshuzhuquefentian_jilu');
				},
				filterTarget:function(card,player,target){
					return player!=target;
				},
				enable:"phaseUse",
				content:function (){
					player.addTempSkill('snjs_boss_tianshuzhuquefentian_jilu');
					target.damage('nocard','fire');
				},
				ai:{
					order:8.5,
					damage:true,
					fireAttack:true,
					threaten:2,
					result:{
						target:function (player,target){
							return get.damageEffect(target,player);
						},
					},
				},
				subSkill:{
					jilu:{
						trigger:{
							global:"die",
						},
						filter:function(event,player){
							return event.reason&&event.reason.getParent().name=='snjs_boss_tianshuzhuquefentian_jilu';
						},
						silent:true,
						unique:true,
						forced:true,
						popup:false,
						content:function(){
							player.removeSkill("snjs_boss_tianshuzhuquefentian_jilu");
						},
						sub:true,
					},
				},
			},
			snjs_boss_tianshuweixitaoyuan:{
				audio:"ext:神怒降世:1",
				trigger:{
					player:"damageEnd",
				},
				check:function(event,player){
					return true;
				},
				logTarget:function(event,player){
					if(event.source==undefined||event.source.isFriendsOf(player)) return false;
					else return event.source;
				},
				content:function(){
					"step 0"
					event.num=trigger.num;
					"step 1"
					event.cards=get.cards(2);
					player.gain(event.cards,'gain2','log');
					if(trigger.source==undefined||trigger.source.isFriendsOf(player)||trigger.source.countCards('h')<1) event.goto(4);
					"step 2"
					var chufa=0;
					if(event.cards.length>1){
						for(var i=1;i<event.cards.length;i++){
							if(get.suit(event.cards[i])!=get.suit(event.cards[i-1])){
								chufa++;
								break;
							}
						}
					}
					else event.finish();
					if(chufa==0) event.goto(4);
					"step 3"
					var pai=trigger.source.getCards('h').randomGet();
					player.gain(pai,trigger.source,'giveAuto');
					"step 4"
					event.num--;
					if(event.num>0){
						player.chooseBool(get.prompt('snjs_boss_tianshuweixitaoyuan')).set('ai',function(event,player){
							return true;
						});
					}
					else event.finish();
					"step 5"
					if(result.bool){
						if(event.source==undefined||event.source.isFriendsOf(player)) player.logSkill('snjs_boss_tianshuweixitaoyuan');
						else player.logSkill('snjs_boss_tianshuweixitaoyuan',trigger.source);
						event.goto(1);
					}
				},
				ai:{
					"maixie_defend":true,
				},
			},
			snjs_boss_tianshushuxipaoxiao:{
				audio:"ext:神怒降世:1",
				firstDo:true,
				trigger:{player:'useCard1'},
				forced:true,
				filter:function(event,player){
					return !event.audioed&&event.card.name=='sha'&&player.countUsed('sha',true)>1&&event.getParent().type=='phase';
				},
				content:function(){
					trigger.audioed=true;
					player.addTempSkill('snjs_boss_tianshushuxipaoxiao_xiaoguo');
				},
				mod:{
					cardUsable:function (card,player,num){
						if(card.name=='sha') return Infinity;
					},
				},
				ai:{
					threaten:0.5,
					skillTagFilter:function (player,tag,arg){
						if(!get.zhu(player,'shouyue')) return false;
						if(arg&&arg.name=='sha') return true;
						return false;
					},
				},
				subSkill:{
					xiaoguo:{
						charlotte:true,
						mod:{
							targetInRange:function (card,player){
								if(card.name=='sha') return true;
							},
						},
						sub:true,
					},
				},
			},
			snjs_boss_tianshushuxilizhan:{
				audio:"ext:神怒降世:1",
				group:"snjs_boss_tianshushuxilizhan_geisha",
				trigger:{
					player:"phaseUseBegin",
				},
				forced:true,
				content:function (){
					event.cards=[];
					while(event.cards.length<2){
						var card=get.cardPile2(function(card){
							return !event.cards.contains(card)&&get.type(card)=='basic'&&card.name=='sha';
						});
						if(card){
							event.cards.push(card);
						}
						else{
							for(var i=0;i<ui.discardPile.childNodes.length;i++){
								var current=ui.discardPile.childNodes[i];
								if(!event.cards.contains(current)&&get.type(current)=='basic'&&current.name=='sha'&&event.cards.length<2){
									event.cards.push(current);
								}
							}
						}
					}
					if(event.cards.length>0) player.gain(event.cards,'gain2');
				},
				subSkill:{
					geisha:{
						trigger:{
							player:"useCardAfter",
						},
						direct:true,
						usable:1,
						filter:function(event,player){
							if(event.cards.filterInD().length<=0) return false;
							if(player.countUsed('sha',true)>1) return false;
							return event.card.name=="sha";
						},
						content:function(){
							'step 0'
							player.chooseTarget(get.prompt('snjs_boss_tianshushuxilizhan'),'将'+get.translation(trigger.cards)+'交给一名其他角色',function(card,player,target){
								return target!=player;
							}).set('ai',function(target){
								return get.attitude(_status.event.player,target);
							});
							'step 1'
							if(result.bool){
								player.logSkill('snjs_boss_tianshushuxilizhan',result.targets[0]);
								result.targets[0].gain(trigger.cards.filterInD(),'gain2');
							}
						},
						sub:true,
					},
				},
				ai:{
					threaten:0.5,
				},
			},
			snjs_boss_tianshuwuximingzhe:{
				audio:"ext:神怒降世:1",
				trigger:{
					player:["useCard","respond","loseAfter"],
				},
				frequent:true,
				filter:function(event,player){
					if(player==_status.currentPhase) return false;
					if(event.name!='lose') return get.color(event.card)=='red';
					if(event.type!='discard') return false;
					if(event.cards2){
						for(var i=0;i<event.cards2.length;i++){
							if(get.color(event.cards2[i],player)=='red') return true;
						}
					}
					return false;
				},
				content:function(){
					"step 0"
					event.count=1;
					if(trigger.name=='lose'){
						event.count=0;
						for(var i=0;i<trigger.cards2.length;i++){
							if(get.color(trigger.cards2[i],player)=='red') event.count++;
						}
					}
					"step 1"
					player.draw();
					event.count--;
					"step 2"
					if(event.count){
						player.chooseBool(get.prompt('snjs_boss_tianshuwuximingzhe')).set('frequentSkill','snjs_boss_tianshuwuximingzhe');
					}
					else event.finish();
					"step 3"
					if(result.bool){
						player.logSkill('snjs_boss_tianshuwuximingzhe');
						event.goto(1);
					}
				},
				ai:{
					threaten:0.7,
				},
			},
			snjs_boss_tianshuwuxitianxiang:{
				audio:"ext:神怒降世:1",
				trigger:{
					player:"damageBegin4",
				},
				direct:true,
				filter:function(event,player){
					return player.countCards('he',function(card){
						if(_status.connectMode&&get.position(card)=='h') return true;
						return get.suit(card,player)=='heart';
					})>0&&event.num>0;
				},
				content:function(){
					"step 0"
					player.chooseCardTarget({
						filterCard:function(card,player){
							return get.suit(card)=='heart'&&lib.filter.cardDiscardable(card,player);
						},
						filterTarget:function(card,player,target){
							return player!=target;
						},
						position:'he',
						ai1:function(card){
							return 10-get.value(card);
						},
						ai2:function(target){
							var att=get.attitude(_status.event.player,target);
							var trigger=_status.event.getTrigger();
							var da=0;
							if(_status.event.player.hp==1){
								da=10;
							}
							var eff=get.damageEffect(target,trigger.source,target);
							if(att==0) return 0.1+da;
							if(eff>=0&&att>0){
								return att+da;
							}
							if(att>0&&target.hp>1){
								if(target.maxHp-target.hp>=3) return att*1.1+da;
								if(target.maxHp-target.hp>=2) return att*0.9+da;
							}
							return -att+da;
						},
						prompt:get.prompt('snjs_boss_tianshuwuxitianxiang'),
					});
					"step 1"
					if(result.bool){
						player.discard(result.cards);
						var target=result.targets[0];
						player.chooseControlList(true,function(event,player){
							var target=_status.event.target;
							var att=get.attitude(player,target);
							if(target.hasSkillTag('maihp')) att=-att;
							if(att>0){
								return 0;
							}
							else{
								return 1;
							}
						},
						['令'+get.translation(target)+'受到伤害来源对其造成的1点伤害，然后摸X张牌(X为其已损失体力值且至多为5)','令'+get.translation(target)+'失去1点体力，然后获得'+get.translation(result.cards)]).set('target',target);
						player.logSkill(event.name,target);
						trigger.cancel();
						event.target=target;
						event.card=result.cards[0];
					}
					else{
						event.finish();
					}
					"step 2"
					if(typeof result.index=='number'){
						event.index=result.index;
						if(result.index){
							event.related=event.target.loseHp();
						}
						else{
							event.related=event.target.damage(trigger.source||'nosource','nocard');
						}
					}
					else event.finish();
					"step 3"
					if(event.related.cancelled||target.isDead()) return;
					if(event.index&&card.isInPile()) target.gain(card,'gain2');
					else if(target.getDamagedHp()) target.draw(Math.min(5,target.getDamagedHp()));
				},
				ai:{
					"maixie_defend":true,
					effect:{
						target:function(card,player,target){
							if(player.hasSkillTag('jueqing',false,target)) return;
							if(get.tag(card,'damage')&&target.countCards('he')>1) return 0.7;
						},
					},
				},
			},
			snjs_boss_tianshuqunxijvxiang:{
				audio:"ext:神怒降世:1",
				locked:true,
				group:["snjs_boss_tianshuqunxijvxiang1","snjs_boss_tianshuqunxijvxiang2"],
				preHidden:["snjs_boss_tianshuqunxijvxiang1","snjs_boss_tianshuqunxijvxiang2"],
				ai:{
					effect:{
						target:function(card){
							if(card.name=='nanman') return [0,1];
						},
					},
				},
			},
			snjs_boss_tianshuqunxijvxiang1:{
				audio:"snjs_boss_tianshuqunxijvxiang",
				trigger:{target:'useCardToBefore'},
				forced:true,
				priority:15,
				filter:function(event,player){
					return (event.card.name=='nanman');
				},
				content:function(){
					trigger.cancel();
				}
			},
			snjs_boss_tianshuqunxijvxiang2:{
				audio:"snjs_boss_tianshuqunxijvxiang",
				trigger:{global:'useCardAfter'},
				forced:true,
				filter:function(event,player){
					return (event.card.name=='nanman'&&event.player!=player&&get.itemtype(event.cards)=='cards'&&get.position(event.cards[0],true)=='o');
				},
				content:function(){
					player.gain(trigger.cards,'gain2');
				}
			},
			snjs_boss_tianshuqunxishouxi:{
				audio:"ext:神怒降世:1",
				trigger:{
					player:"useCard",
				},
				frequent:true,
				filter:function(event){
					return get.type(event.card)=='trick'&&event.card.isCard&&get.color(event.card)=='black';
				},
				content:function(){
					"step 0"
					var func=function(result){
						if(get.color(result)=='red') return 5;
						return 5;
					};
					player.judge(func);
					"step 1"
					event.card=result.card;
					event.color=result.color;
					if(event.color=='red'){
						player.recover();
						player.gain(event.card,'gain2','log');
					}
					else{
						event.mubiao=[];
						game.countPlayer(function(current){
							if(!current.isFriendsOf(player)&&current!=player) event.mubiao.push(current);
						});
						if(event.mubiao.length>0){
							var mubiao2=event.mubiao.randomGet();
							player.line(mubiao2);
							mubiao2.damage('nocard');
						}
					}
				},
				ai:{
					threaten:1.4,
				},
			},
			snjs_boss_tianshuweinianfange:{
				audio:"ext:神怒降世:1",
				trigger:{
					player:"damageEnd",
				},
				forced:true,
				logTarget:function(event,player){
					if(event.source==undefined||event.source.isFriendsOf(player)) return false;
					else return event.source;
				},
				content:function(){
					"step 0"
					event.num=trigger.num;
					"step 1"
					event.cards=get.cards(2);
					player.gain(event.cards,'gain2','log');
					if(trigger.source==undefined||trigger.source.isFriendsOf(player)) event.goto(4);
					"step 2"
					event.shanghai=0;
					event.mopai=0;
					if(event.cards.length>1){
						if(event.cards[0].number>event.cards[1].number){
							if(event.cards[0].number-event.cards[1].number>=player.hp) event.shanghai++;
						}
						else if(event.cards[1].number-event.cards[0].number>=player.hp) event.shanghai++;
						if(event.cards[1].number+event.cards[0].number>=player.hp) event.mopai++;
					}
					else event.goto(4);
					"step 3"
					if(event.shanghai!=0) trigger.source.damage('nocard');
					if(event.mopai!=0&&trigger.source.countCards('h')>0){
						var pai=trigger.source.getCards('h').randomGet();
						player.gain(pai,trigger.source,'giveAuto');
					}
					"step 4"
					event.num--;
					"step 5"
					if(event.num>0){
						if(trigger.source==undefined||trigger.source.isFriendsOf(player)) player.logSkill('snjs_boss_tianshuweinianfange');
						else player.logSkill('snjs_boss_tianshuweinianfange',trigger.source);
						event.goto(1);
					}
				},
				ai:{
					"maixie_defend":true,
				},
			},
			snjs_boss_tianshushuniansiyao:{
				audio:"ext:神怒降世:1",
				trigger:{
					player:"useCardToPlayered",
					source:"damageSource",
				},
				filter:function(event,player,name){
					if(!event.card||event.card.name!='sha') return false;
					if(name=="useCardToPlayered") return !event.target.isFriendsOf(player)&&player.countUsed('sha',true)<2;
					return !event.player.isFriendsOf(player)&&event.player.isAlive()&&event.player.countCards('he')>0;
				},
				forced:true,
				logTarget:function(event){
					if(!event.target) return event.player;
					else return event.target;
				},
				content:function(){
					if(event.triggername=="damageSource"){
						var pai=trigger.player.getCards('he').randomGet();
						trigger.player.discard(pai);
					}
					else trigger.target.damage('nocard');
				},
				ai:{
					"directHit_ai":true,
					threaten:2,
				},
			},
			snjs_boss_tianshushunianhengsao:{
				audio:"ext:神怒降世:1",
				mod:{
					selectTarget:function(card,player,range){
						if(range[1]==-1) return;
						if(card.name=='sha') range[1]+=1;
					},
					targetInRange:function(card,player,target){
						if(card.name=='sha') return true;
					},
					cardUsable:function(card,player,num){
						if(card.name=='sha') return num+1;
					},
				},
				firstDo:true,
				trigger:{
					player:"useCard1",
				},
				forced:true,
				filter:function(event,player){
					return event.card.name=='sha';
				},
				content:function(){},
				ai:{
					threaten:1.5,
				},
			},
			snjs_boss_tianshuwunianzhuyan:{
				audio:"ext:神怒降世:1",
				trigger:{
					player:"phaseDrawBegin2",
				},
				filter:function(event,player){
					return !event.numFixed;
				},
				forced:true,
				content:function(){
					trigger.num+=2;
				},
				ai:{
					threaten:1.5,
				},
			},
			snjs_boss_tianshuwunianxiaoshou:{
				audio:"ext:神怒降世:1",
				trigger:{
					player:"loseEnd",
				},
				filter:function(event,player){
					for (var i=0;i<event.cards2.length;i++){
						if (get.type(event.cards2[i],event.player)=='equip'){
							return true;
						}
					}
					return false;
				},
				forced:true,
				content:function(){
					var x=0;
					for(var i=0;i<trigger.cards2.length;i++){
						if(get.type(trigger.cards2[i])=='equip') x++;
					}
					player.draw(2*x);
				},
				ai:{
					threaten:1.5,
				},
			},
			snjs_boss_tianshuqunnianqunxiang:{
				audio:"ext:神怒降世:1",
				trigger:{
					player:["phaseZhunbeiBegin","phaseDrawBegin","phaseJieshuBegin"],
				},
				forced:true,
				content:function(){
					if(event.triggername!="phaseDrawBegin") player.chooseUseTarget({name:'nanman',isCard:true},true);
					else return trigger.cancel();
				},
				ai:{
					threaten:1.5,
				},
			},
			snjs_boss_tianshuqunniantanshi:{
				audio:"ext:神怒降世:1",
				trigger:{
					source:"damageSource",
				},
				forced:true,
				content:function(){
					"step 0"
					var func=function(result){
						if(get.color(result)=='black') return 5;
						return -1;
					};
					player.judge(func);
					"step 1"
					event.color=result.color;
					if(event.color=='black'){
						if(player.isDamaged()) player.recover();
						else player.draw();
					}
				},
				ai:{
					threaten:1.5,
				},
			},
			snjs_boss_tianshuweishunianqubi:{
				audio:"ext:神怒降世:1",
				trigger:{
					player:["useCardToPlayered","damageEnd"],
				},
				filter:function(event,player,name){
					if(name=="useCardToPlayered") return !event.target.isFriendsOf(player)&&event.card&&event.card.name=='sha';
					else{
						if(!event.source) return false;
						else return !event.source.isFriendsOf(player);
					}
				},
				forced:true,
				logTarget:function(event){
					if(!event.target) return event.source;
					else return event.target;
				},
				content:function(){
					"step 0"
					if(event.triggername=="useCardToPlayered") event.mubiao=trigger.target;
					else{
						event.mubiao=trigger.source;
						event.num=trigger.num;
					}
					"step 1"
					if(event.mubiao.countCards('h')>0) event.cards=event.mubiao.getCards('h');
					else{
						player.draw(2);
						event.goto(5);
					}
					"step 2"
					event.sha=[];
					event.shan=[];
					if(event.cards.length>0){
						for(var i=0;i<event.cards.length;i++){
							if(event.cards[i].name=="sha") event.sha.push(event.cards[i]);
							if(event.cards[i].name=="shan") event.shan.push(event.cards[i]);
						}
					}
					"step 3"
					event.dis=[];
					if(event.sha.length>0) event.dis.push(event.sha.randomGet());
					if(event.shan.length>0) event.dis.push(event.shan.randomGet());
					"step 4"
					if(event.dis.length>0) event.mubiao.discard(event.dis);
					player.draw(2-event.dis.length);
					"step 5"
					if(event.triggername=="useCardToPlayered") event.finish();
					else event.num--;
					"step 6"
					if(event.num>0){
						player.logSkill('snjs_boss_tianshuweishunianqubi',trigger.source);
						event.goto(1);
					}
				},
				ai:{
					threaten:2,
				},
			},
			snjs_boss_tianshuweishunianhuaji:{
				audio:"ext:神怒降世:1",
				trigger:{
					global:"phaseEnd",
				},
				filter:function(event,player){
					return event.player.isFriendsOf(player)||event.player==player;
				},
				forced:true,
				content:function(){
					if(!trigger.player.getStat('damage')){
						event.mubiao=[];
						game.countPlayer(function(current){
							if(!current.isFriendsOf(player)&&current!=player) event.mubiao.push(current);
						});
						if(event.mubiao.length>0){
							var mubiao2=event.mubiao.randomGet();
							player.line(mubiao2);
							mubiao2.damage('fire','nocard');
						}
					}
					else player.draw(2);
				},
				ai:{
					threaten:1.5,
				},
			},
			snjs_boss_tianshuweiwunianweihe:{
				audio:"ext:神怒降世:1",
				trigger:{
					target:"useCardToTarget",
					global:"gainEnd",
				},
				filter:function(event,player,name){
					if(name=="useCardToTarget") return event.card.name=='sha'&&!event.player.isFriendsOf(player);
					else return event.player.isPhaseUsing()&&_status.currentPhase==event.player&&event.player!=player&&event.player.countCards('h')>=event.player.maxHp&&!event.player.isFriendsOf(player);
				},
				forced:true,
				logTarget:function(event){
					return event.player;
				},
				content:function(){
					"step 0"
					if(trigger.player.countCards('he')>0){
						event.yizhang=0;
						if(trigger.player.countCards('he')<2){
							event.cards=trigger.player.getCards('he').randomGet();
							event.yizhang++;
						}
						else event.cards=trigger.player.getCards('he').randomGets(2);
					}
					else{
						player.draw(3);
						event.finish();
					}
					"step 1"
					trigger.player.discard(event.cards);
					if(event.yizhang!=0) player.draw(3);
					else{
						var num=0;
						if(event.cards[0].number%2==event.cards[1].number%2) num++;
						if(get.type(event.cards[0])==get.type(event.cards[1])) num++;
						if(get.suit(event.cards[0])==get.suit(event.cards[1])) num++;
						if(num!=0) player.draw(num);
					}
				},
				ai:{
					threaten:3.5,
				},
			},
			snjs_boss_tianshuweiqunnianyuxiang:{
				audio:"ext:神怒降世:1",
				trigger:{
					player:"loseAfter",
				},
				filter:function(event,player){
					for(var i=0;i<event.cards2.length;i++){
						if(['basic','trick','equip'].contains(get.type(event.cards2[i],event.player))){
							return true;
						}
					}
					return false;
				},
				forced:true,
				content:function(){
					"step 0"
					event.basic=0;
					event.trick=0;
					event.equip=0;
					for(var i=0;i<trigger.cards2.length;i++){
						if(get.type(trigger.cards2[i])=='basic') event.basic++;
						if(get.type(trigger.cards2[i])=='trick') event.trick++;
						if(get.type(trigger.cards2[i])=='equip') event.equip++;
					}
					event.mubiao=[];
					game.countPlayer(function(current){
						if(!current.isFriendsOf(player)&&current!=player) event.mubiao.push(current);
					});
					"step 1"
					if(event.basic!=0){
						player.draw();
						if(event.mubiao.length>0){
							var mubiao2=event.mubiao.randomGet();
							player.line(mubiao2);
							if(mubiao2.countCards('he')>0) mubiao2.discard(mubiao2.getCards('he').randomGet());
						}
					}
					if(event.trick!=0){
						if(event.mubiao.length>0){
							var mubiao2=event.mubiao.randomGet();
							player.line(mubiao2);
							mubiao2.damage('thunder','nocard');
						}
					}
					if(event.equip!=0) player.recover();
				},
				ai:{
					threaten:3.5,
				},
			},
			snjs_boss_tianshushuwunianhuanling:{
				audio:"ext:神怒降世:1",
				trigger:{
					player:"phaseUseBegin",
				},
				forced:true,
				content:function (){
					"step 0"
					player.recover();
					event.cards=[];
					while(event.cards.length<2){
						var card=get.cardPile2(function(card){
							return !event.cards.contains(card)&&(get.type(card)=='trick')&&lib.filter.filterCard(card,player,_status.event.getParent());
						});
						if(card){
							event.cards.push(card);
						}
						else break;
					}
					if(event.cards.length<1){
						event.finish();
					}
					"step 1"
					for(var i=0;i<event.cards.length;i++){
						player.chooseUseTarget(event.cards[i],true).set('prompt',get.translation(event.cards[i]));
					}
				},
				ai:{
					threaten:3,
				},
			},
			snjs_boss_tianshushuwunianfangong:{
				audio:"ext:神怒降世:1",
				trigger:{
					player:"phaseJieshuBegin",
				},
				forced:true,
				content:function(){
					if(!player.getStat('damage')){
						event.mubiao=[];
						game.countPlayer(function(current){
							if(!current.isFriendsOf(player)&&current!=player&&current.countCards('h')>0) event.mubiao.push(current);
						});
						if(event.mubiao.length>0){
							var mubiao2=event.mubiao.randomGets(Math.min(2,event.mubiao.length));
							player.line(mubiao2);
							for(var i=0;i<mubiao2.length;i++){
								player.gain(mubiao2[i].getCards('h').randomGet(),mubiao2[i],'giveAuto','bySelf');
							}
						}
					}
					else player.draw(2);
				},
				ai:{
					threaten:1.5,
				},
			},
			snjs_boss_tianshushuqunnianxunshou:{
				audio:"ext:神怒降世:1",
				trigger:{
					global:"phaseZhunbeiBegin",
				},
				filter:function(event,player){
					return !event.player.isFriendsOf(player)&&event.player!=player;
				},
				forced:true,
				logTarget:function(event){
					return event.player;
				},
				content:function(){
					"step 0"
					trigger.player.chooseToDiscard('〖巡狩〗：弃置两张牌，否则'+get.translation(player)+'摸两张牌',2).set('ai',function(card){
							return 8-get.value(card);
					});
					"step 1"
					if(!result.bool) player.draw(2);
				},
				ai:{
					threaten:2,
				},
			},
			snjs_boss_tianshushuqunnianxunlie:{
				audio:"ext:神怒降世:1",
				trigger:{
					global:"phaseJieshuBegin",
				},
				filter:function(event,player){
					return !event.player.isFriendsOf(player)&&event.player!=player;
				},
				forced:true,
				logTarget:function(event){
					return event.player;
				},
				content:function(){
					"step 0"
					trigger.player.chooseToDiscard('〖寻猎〗：弃置两张牌，否则受到1点伤害',2).set('ai',function(card){
							return 8-get.value(card);
					});
					"step 1"
					if(!result.bool) trigger.player.damage('nocard');
				},
				ai:{
					threaten:2,
				},
			},
			snjs_boss_tianshuwuqunnianhuozhong:{
				audio:"ext:神怒降世:1",
				init:function(player){
					if(!player.snjs_boss_tianshuwuqunnianhuozhong) player.snjs_boss_tianshuwuqunnianhuozhong=[];
				},
				trigger:{
					player:"useCardAfter",
				},
				filter:function(event,player){
					if(event.cards.filterInD().length<=0) return false;
					if(player.snjs_boss_tianshuwuqunnianhuozhong.contains(event.card.name)) return false;
					return ['basic','trick'].contains(get.type(event.card));
				},
				forced:true,
				content:function(){
					if(!player.hasSkill('snjs_boss_tianshuwuqunnianhuozhong_jilu')) player.addTempSkill('snjs_boss_tianshuwuqunnianhuozhong_jilu','roundStart');
					if(!player.snjs_boss_tianshuwuqunnianhuozhong.contains(trigger.card.name)) player.snjs_boss_tianshuwuqunnianhuozhong.push(trigger.card.name);
					player.gain(trigger.cards.filterInD(),'gain2');
				},
				subSkill:{
					jilu:{
						silent:true,
						unique:true,
						forced:true,
						onremove:function(player){
							player.snjs_boss_tianshuwuqunnianhuozhong=[];
						},
						sub:true,
						popup:false,
					},
				},
				ai:{
					threaten:1.5,
				},
			},
			snjs_boss_tianshuwuqunnianzange:{
				audio:"ext:神怒降世:1",
				trigger:{
					player:"useCard",
				},
				filter:function(event,player){
					if(get.type(event.card)!='trick') return false;
					return !player.getEquip(1)||!player.getEquip(2)||!player.getEquip(3)||!player.getEquip(4)||!player.getEquip(5);
				},
				forced:true,
				content:function(){
					"step 0"
					event.num=[1,2,3,4,5];
					"step 1"
					if(player.getEquip(1)) event.num.remove(1);
					if(player.getEquip(2)) event.num.remove(2);
					if(player.getEquip(3)) event.num.remove(3);
					if(player.getEquip(4)) event.num.remove(4);
					if(player.getEquip(5)) event.num.remove(5);
					"step 2"
					if(event.num.length<1) event.finish();
					"step 3"
					event.lx=event.num.randomGet();
					"step 4"
					if(event.lx==1) event.lx2='equip1';
					if(event.lx==2) event.lx2='equip2';
					if(event.lx==3) event.lx2='equip3';
					if(event.lx==4) event.lx2='equip4';
					if(event.lx==5) event.lx2='equip5';
					"step 5"
					var card=get.cardPile2(function(card){
						return get.subtype(card)==event.lx2;
					});
					if(card){
						player.equip(card);
					}
					else{
						if(event.lx==5){
							event.num.remove(5);
							event.goto(2);
						}
					}
				},
				ai:{
					threaten:1.5,
				},
			},
			snjs_boss_tianshuqiuniulongxian:{
				mod:{
					targetInRange:function(card,player,target){
						if(card.name=='bingliang') return true;
					}
				},
				audio:"ext:神怒降世:1",
				enable:"phaseUse",
				discard:false,
				lose:false,
				delay:false,
				filter:function(event,player){
					return player.countCards('he',{suit:'diamond'})>0||player.countCards('he',{suit:'club'})>0;
				},
				position:"he",
				filterCard:function(card,player){
					var suits=['diamond','club'];
					if(player.hasSkill("snjs_boss_tianshuqiuniulongxian_jilu1")) suits.remove('diamond');
					if(player.hasSkill("snjs_boss_tianshuqiuniulongxian_jilu2")) suits.remove('club');
					return suits.contains(get.suit(card));
				},
				filterTarget:function(card,player,target){
					var panding=get.suit(ui.selected.cards[0])=='club'?'bingliang':'lebu';
					if(target.hasJudge(panding)) return false;
					if(player==target) return false;
					if(!game.checkMod(ui.selected.cards[0],player,'unchanged','cardEnabled2',player)) return false;
					return player.canUse({name:panding,cards:ui.selected.cards},target);
				},
				check:function(card){
					return 7-get.value(card);
				},
				content:function(){
					var pai=cards[0];
					var panding=get.suit(pai)=='club'?'bingliang':'lebu';
					if(get.suit(pai)=='diamond') player.addTempSkill("snjs_boss_tianshuqiuniulongxian_jilu1");
					if(get.suit(pai)=='club') player.addTempSkill("snjs_boss_tianshuqiuniulongxian_jilu2");
					player.useCard({name:panding},target,cards).audio=false;
				},
				ai:{
					result:{
						target:function(player,target){
							var name=get.suit(ui.selected.cards[0])=='diamond'?'lebu':'bingliang';
							return get.effect(target,{name:name},player,target);
							
						},
					},
					threaten:3.5,
					order:function(skill,player){
						if(player.countCards(function(current){
							return get.tag(current,'damage');
						})>0){
							return get.order({name:'sha'})-1;
						}
						else return 20;
					},
				},
				subSkill:{
					jilu1:{
						silent:true,
						unique:true,
						forced:true,
						popup:false,
						sub:true,
					},
					jilu2:{
						silent:true,
						unique:true,
						forced:true,
						popup:false,
						sub:true,
					},
				},
			},
			snjs_boss_tianshuqiuniulige:{
				audio:"ext:神怒降世:1",
				trigger:{
					global:"judge",
				},
				direct:true,
				filter:function(event,player){
					return player.countCards('hes')>0;
				},
				content:function(){
					"step 0"
					player.chooseCard(get.translation(trigger.player)+'的'+(trigger.judgestr||'')+'判定为'+get.translation(trigger.player.judging[0])+'，'+get.prompt('snjs_boss_tianshuqiuniulige'),'hes',function(card){
						var player=_status.event.player;
						var mod2=game.checkMod(card,player,'unchanged','cardEnabled2',player);
						if(mod2!='unchanged') return mod2;
						var mod=game.checkMod(card,player,'unchanged','cardRespondable',player);
						if(mod!='unchanged') return mod;
						return true;
					}).set('ai',function(card){
						var trigger=_status.event.getTrigger();
						var player=_status.event.player;
						var judging=_status.event.judging;
						var result=trigger.judge(card)-trigger.judge(judging);
						var attitude=get.attitude(player,trigger.player);
						if(attitude==0||result==0) return 0;
						if(attitude>0){
							return result-get.value(card)/2;
						}
						else{
							return -result-get.value(card)/2;
						}
					}).set('judging',trigger.player.judging[0]);
					"step 1"
					if(result.bool){
						player.respond(result.cards,'snjs_boss_tianshuqiuniulige','highlight','noOrdering');
					}
					else{
						event.finish();
					}
					"step 2"
					if(result.bool){
						if(trigger.player.judging[0].clone){
							trigger.player.judging[0].clone.classList.remove('thrownhighlight');
							game.broadcast(function(card){
								if(card.clone){
									card.clone.classList.remove('thrownhighlight');
								}
							},trigger.player.judging[0]);
							game.addVideo('deletenode',player,get.cardsInfo([trigger.player.judging[0].clone]));
						}
						player.gain(trigger.player.judging[0],'gain2');
						trigger.player.judging[0]=result.cards[0];
						trigger.orderingCards.addArray(result.cards);
						game.log(trigger.player,'的判定牌改为',result.cards[0]);
						game.delay(2);
					}
				},
				ai:{
					rejudge:true,
					threaten:1,
					tag:{
						rejudge:1,
					},
				},
			},
			snjs_boss_tianshuqiuniuqinlv:{
				audio:"ext:神怒降世:1",
				trigger:{
					global:["phaseZhunbeiSkipped","phaseJudgeSkipped","phaseDrawSkipped","phaseUseSkipped","phaseDiscardSkipped","phaseJieshuSkipped"],
				},
				filter:function(event,player){
					return event.player!=player&&game.hasPlayer(function(current){
						return current.isFriendsOf(player)&&current!=player;
					});
				},
				forced:true,
				content:function(){
					"step 0"
					event.target=[];
					game.countPlayer(function(current){
						if(current.isFriendsOf(player)&&current!=player) event.target.push(current);
					});
					"step 1"
					if(event.target.length>0){
						player.line(event.target);
						game.asyncDraw(event.target);
					}
				},
				ai:{
					threaten:0.8,
				},
			},
			snjs_boss_tianshuqiuniujilv:{
				audio:"ext:神怒降世:1",
				trigger:{
					global:"judgeEnd",
				},
				filter:function(event,player){
					if(event.player==player) return false;
					return get.position(event.result.card,true)=='o';
				},
				forced:true,
				content:function(){
					player.gain(trigger.result.card,'gain2');
				},
				ai:{
					threaten:0.5,
				},
			},
			snjs_boss_tianshusuannilongzhen:{
				audio:"ext:神怒降世:1",
				usable:1,
				trigger:{
					global:"gainAfter",
				},
				filter:function(event,player){
					if(!event.player.isFriendsOf(player)) return false;
					return event.player!=player&&_status.currentPhase!=event.player;
				},
				forced:true,
				logTarget:function(event){
					return event.player;
				},
				content:function(){
					trigger.player.draw(2);
				},
				ai:{
					threaten:1.2,
				},
			},
			snjs_boss_tianshusuanniruiyan:{
				audio:"ext:神怒降世:1",
				trigger:{
					player:"phaseJieshuBegin",
				},
				forced:true,
				content:function(){
					player.draw(2);
				},
				ai:{
					threaten:1,
				},
			},
			snjs_boss_tianshusuanniraoling:{
				audio:"ext:神怒降世:1",
				enable:"phaseUse",
				usable:2,
				filterCard:true,
				discard:false,
				lose:false,
				delay:0,
				filterTarget:function(card,player,target){
					return player!=target&&target.isFriendsOf(player);
				},
				check:function(card){
					return get.value(card);
				},
				content:function(){
					target.gain(cards,player,'giveAuto','bySelf');
				},
				ai:{
					order:1,
					result:{
						target:function(player,target){
							return 1;
						},
					},
					threaten:0.5,
				},
			},
			snjs_boss_tianshusuannixiangjin:{
				audio:"ext:神怒降世:1",
				enable:"phaseUse",
				usable:1,
				filterTarget:function(card,player,target){
					return player!=target&&target.countCards('h')!=player.countCards('h');
				},
				content:function(){
					if(target.countCards('h')>player.countCards('h')) target.chooseToDiscard("〖香金〗：弃置张"+get.cnNumber(target.countCards('h')-player.countCards('h'))+"牌",target.countCards('h')-player.countCards('h'),'h',true);
					else target.draw(player.countCards('h')-target.countCards('h'));
				},
				ai:{
					order:function(skill,player){
						if(game.hasPlayer(function(current){
							return current.isFriendsOf(player)&&current!=player&&current.isMinHandcard()&&player.countCards('h')-current.countCards('h')>2;
						})){
							return 20;
						}
						else return 1;
					},
					result:{
						target:function(player,target){
							var xx=0;
							game.countPlayer(function(current){
								if(current!=player){
									var yy=player.countCards('h')-current.countCards('h');
									if(get.attitude(player,current)<=0) yy=-yy;
									if(xx<yy) xx=yy;
								}
							});
							var zz=player.countCards('h')-target.countCards('h');
							if(get.attitude(player,target)<=0) zz=-zz;
							if(zz==xx) return get.attitude(player,target)>0?1:-1;
						},
					},
					threaten:3,
				},
			},
			snjs_boss_tianshuchiwenlongao:{
				audio:"ext:神怒降世:1",
				trigger:{
					global:"damageBegin4",
				},
				filter:function(event,player){
					if(event.player==player) return false;
					if(!event.player.isFriendsOf(player)) return false;
					return event.num>0&&event.nature;
				},
				logTarget:function(event,player){
					return event.player;
				},
				content:function(){
					trigger.num-=2;
				},
				ai:{
					threaten:1,
				},
			},
			snjs_boss_tianshuchiwenquyan:{
				audio:"ext:神怒降世:1",
				trigger:{
					global:"damageBegin",
				},
				filter:function(event,player){
					if(event.source==undefined) return false;
					if(!event.source.isFriendsOf(player)) return false;
					return event.source!=player&&event.nature;
				},
				logTarget:function(event,player){
					return event.source;
				},
				content:function(){
					trigger.num++;
				},
				ai:{
					threaten:0.5,
				},
			},
			snjs_boss_tianshuchiwenyuhuo:{
				audio:"ext:神怒降世:1",
				enable:"chooseToUse",
				prompt:"将♦牌当做火【杀】，♠牌当做【铁索连环】使用",
				viewAs:function(cards,player){
					var name=false;
					var nature=null;
					switch(get.suit(cards[0],player)){
						case 'diamond':name='sha';nature='fire';break;
						case 'spade':name='tiesuo';break;
					}
					if(name) return {name:name,nature:nature};
					return null;
				},
				position:"hes",
				check:function(card){
					return 10-get.value(card);
				},
				filterCard:function(card,player,event){
					event=event||_status.event;
					//获取当前时机的卡牌选择限制
					var filter=event._backup.filterCard;
					//获取卡牌花色
					var name=get.suit(card,player);
					//如果这张牌是方片并且当前时机能够使用火杀 那么这张牌可以选择
					if(name=='diamond'&&filter({name:'sha',cards:[card],nature:'fire'},player,event)) return true;
					//如果这张牌是黑桃并且当前时机能够使用铁索 那么这张牌可以选择
					if(name=='spade'&&filter({name:'tiesuo',cards:[card]},player,event)) return true;
					//上述条件都不满足 那么就不能选择这张牌
					return false;
				},
				filter:function(event,player){
					//获取当前时机的卡牌选择限制
					var filter=event.filterCard;
					//如果当前时机能够使用火杀并且角色有方片 那么可以发动技能
					if(filter({name:'sha',nature:'fire'},player,event)&&player.countCards('hes',{suit:'diamond'})) return true;
					//如果当前时机能够使用铁索可击并且角色有黑桃 那么可以发动技能
					if(filter({name:'tiesuo'},player,event)&&player.countCards('hes',{suit:'spade'})) return true;
					return false;
				},
				ai:{
					threaten:0.5,
					order:function(item,player){
						if(player&&_status.event.type=='phase'){
							var max=0;
							var list=['sha','tiesuo'];
							var map={sha:'diamond',teisuo:'spade'}
							for(var i=0;i<list.length;i++){
								var name=list[i];
								if(player.countCards('hes',function(card){
									return (name!='sha'||get.value(card)<8)&&get.suit(card,player)==map[name];
								})>0&&player.getUseValue({name:name,nature:name=='sha'?'fire':null})>0){
									var temp=get.order({name:name,nature:name=='sha'?'fire':null});
									if(temp>max) max=temp;
								}
							}
							max/=1.1;
							return max;
						}
						return get.order({name:'tiesuo'})-1;
					},
				},
			},
			snjs_boss_tianshuchiwenfubing:{
				audio:"ext:神怒降世:1",
				trigger:{
					player:"phaseUseBegin",
				},
				filter:function(event,player){
					return game.hasPlayer(function(current){
						if(current.isFriendsOf(player)||current==player) return current.isTurnedOver()||current.isLinked();
						else return current!=player&&!current.isLinked();
					});
				},
				forced:true,
				content:function(){
					"step 0"
					event.jifang=[];
					event.difang=[];
					game.countPlayer(function(current){
						if((current.isFriendsOf(player)||current==player)&&(current.isTurnedOver()||current.isLinked())) event.jifang.push(current);
						if(!current.isFriendsOf(player)&&!current.isLinked()) event.difang.push(current);
					});
					"step 1"
					if(event.jifang.length>0){
						var mubiao1=event.jifang.randomGet();
						player.line(mubiao1);
						if(mubiao1.isTurnedOver()) mubiao1.turnOver();
						if(mubiao1.isLinked()) mubiao1.link();
					}
					if(event.difang.length>0){
						var mubiao2=event.difang.randomGet();
						player.line(mubiao2);
						mubiao2.link(true);
					}
				},
				ai:{
					threaten:1,
				},
			},
			snjs_boss_tianshuyazilonglie:{
				audio:"ext:神怒降世:1",
				trigger:{
					player:"useCardToPlayered",
				},
				forced:true,
				filter:function(event,player){
					return event.card.name=='sha';
				},
				logTarget:"target",
				content:function(){
					if(!trigger.getParent().directHit.contains(trigger.target)){
						var id=trigger.target.playerid;
						var map=trigger.getParent().customArgs;
						if(!map[id]) map[id]={};
						if(typeof map[id].shanRequired=='number'){
							map[id].shanRequired+=player.countUsed('sha',true)-1;
						}
						else{
							map[id].shanRequired=player.countUsed('sha',true);
						}
					}
				},
				ai:{
					threaten:0.2,
				},
			},
			snjs_boss_tianshuyazichaiyue:{
				audio:"ext:神怒降世:1",
				mod:{
					targetInRange:function(card,player,target){
						if(card.name=='sha'&&game.hasPlayer(function(current){
							return current!=player&&player.inRange(current);
						})) return true;
					},
					selectTarget:function(card,player,range){
						if(card.name=='sha'){
							range[1]=-1;
							range[0]=-1;
						}
					},
					playerEnabled:function(card,player,target){
						if(card.name=='sha'&&target.isFriendsOf(player)){
							return false;
						}
					},
				},
				firstDo:true,
				trigger:{
					player:"useCard1",
				},
				forced:true,
				filter:function(event,player){
					return event.card.name=='sha';
				},
				content:function(){},
				ai:{
					threaten:1.5,
				},
			},
			snjs_boss_tianshuyazilangri:{
				audio:"ext:神怒降世:1",
				mod:{
					targetInRange:function(card,player,target){
						if(card.name=='sha') return true;
					},
				},
				ai:{
					threaten:0.8,
					unequip:true,
				},
			},
			snjs_boss_tianshuyazibibao:{
				audio:"ext:神怒降世:1",
				trigger:{
					player:"phaseBegin",
				},
				filter:function(event,player){
					return game.hasPlayer(function(current){
						return current!=player&&!current.isFriendsOf(player);
					});
				},
				forced:true,
				content:function(){
					"step 0"
					event.mubiao=[];
					game.countPlayer(function(current){
						if(current!=player&&!current.isFriendsOf(player)) event.mubiao.push(current);
					});
					"step 1"
					if(event.mubiao.length>0){
						player.loseHp();
						var mubiao2=event.mubiao.randomGet();
						if(player.hasSkill("snjs_boss_tianshuyazichaiyue")) player.useCard({name:'sha',isCard:true},false,event.mubiao);
						else player.useCard({name:'sha',isCard:true},false,mubiao2);
					}
				},
			},
			snjs_boss_tianshuchaofenglonglin:{
				audio:"ext:神怒降世:1",
				usable:1,
				trigger:{
					player:"equipAfter",
				},
				filter:function(event,player){
					return get.subtype(event.card)=="equip2"&&game.hasPlayer(function(current){
						return current!=player&&current.isFriendsOf(player)&&(current.isDamaged()||!current.getEquip(2));
					});
				},
				forced:true,
				content:function(){
					"step 0"
					event.mubiao=[];
					game.countPlayer(function(current){
						if(current!=player&&current.isFriendsOf(player)&&(current.isDamaged()||!current.getEquip(2))) event.mubiao.push(current);
					});
					"step 1"
					if(event.mubiao.length>0){
						player.line(event.mubiao);
						for(var i=0;i<event.mubiao.length;i++){
							if(event.mubiao[i].isDamaged()) event.mubiao[i].recover();
							if(!event.mubiao[i].getEquip(2)){
								var card=get.cardPile2(function(card){
									return get.type(card)=='equip'&&get.subtype(card)=='equip2';
								});
								if(card){
									event.mubiao[i].equip(card);
								}
							}
						}
					}
				},
				ai:{
					threaten:1.2,
				},
			},
			snjs_boss_tianshuchaofengzhijiao:{
				audio:"ext:神怒降世:1",
				enable:"phaseUse",
				filter:function(event,player){
					return player.countCards('he',{subtype:'equip3'})>0||player.countCards('he',{subtype:'equip4'})>0;
				},
				filterCard:function(card){
					return get.subtype(card)=='equip3'||get.subtype(card)=='equip4';
				},
				check:function(card){
					return get.value(card);
				},
				filterTarget:function(card,player,target){
					if(target.isMin()) return false;
					var type=get.subtype(card);
					return target.isEmpty(type)&&target.isFriendsOf(player)&&target!=player;
				},
				content:function(){
					"step 0"
					player.$give(cards[0],target,false);
					target.equip(cards[0]);
					"step 1"
					var card1=get.cardPile2(function(card){
						return get.color(card)=='red';
					});
					if(card1){
						player.gain(card1,'gain2','log');
					}
					"step 2"
					var card2=get.cardPile2(function(card){
						return get.color(card)=='red';
					});
					if(card2){
						target.gain(card2,'gain2','log');
					}
				},
				position:"he",
				delay:false,
				lose:false,
				discard:false,
				ai:{
					basic:{
						order:10,
					},
					result:{
						target:function(player,target){
							var card=ui.selected.cards[0];
							if(card) return get.effect(target,card,target,target);
							return 0;
						},
					},
					threaten:1.3,
				},
			},
			snjs_boss_tianshuchaofengzhixie:{
				audio:"ext:神怒降世:1",
				trigger:{
					global:"phaseEnd",
				},
				filter:function(event,player){
					return !event.player.getStat('damage')&&event.player!=player;
				},
				direct:true,
				content:function(){
					"step 0"
					player.chooseTarget(get.prompt('snjs_boss_tianshuchaofengzhixie'),'<center>获得场上的一张装备牌</center>',function(card,player,target){
						return target!=player&&target.countCards('e')>0;
					}).set('ai',function(target){
						var player=_status.event.player;
						return get.attitude(player,target)<=0;
					});
					"step 1"
					if(result.bool&&result.targets&&result.targets.length){
						var target=result.targets[0];
						player.logSkill('snjs_boss_tianshuchaofengzhixie',target);
						player.gainPlayerCard(target,'e',true);
					}
				},
				ai:{
					threaten:1,
				},
			},
			snjs_boss_tianshuchaofenghaoxian:{
				audio:"ext:神怒降世:1",
				trigger:{
					player:"phaseJieshuBegin",
				},
				filter:function(event,player){
					var chufa=0;
					game.countPlayer(function(current){
						if(current!=player&&!current.isFriendsOf(player)) chufa+=current.countCards('e');
					});
					return chufa>3;
				},
				forced:true,
				content:function(){
					var num=0;
					game.countPlayer(function(current){
						if(current!=player&&!current.isFriendsOf(player)&&current.countCards('e')>0){
							num+=current.countCards('e');
							current.discard(current.getCards('e'));
						}
					});
					player.draw(num);
				},
				ai:{
					threaten:1.5,
				},
			},
			snjs_boss_tianshupulaolonghou:{
				audio:"ext:神怒降世:1",
				trigger:{
					player:"phaseEnd",
				},
				forced:true,
				content:function(){
					player.chooseUseTarget({name:'wanjian',isCard:true},true);
				},
				ai:{
					threaten:1.5,
				},
			},
			snjs_boss_tianshupulaoqiejing:{
				audio:"ext:神怒降世:1",
				trigger:{
					global:"useCard",
				},
				filter:function(event,player){
					return event.targets.length>1;
				},
				forced:true,
				content:function(){
					game.countPlayer(function(current){
						if(current==player||current.isFriendsOf(player)){
							player.line(current);
							current.draw();
							if(current.countCards('h')>0) current.chooseToDiscard('〖怯鲸〗：弃置一张手牌',1,'h',true);
						}
					});
				},
				ai:{
					threaten:0.3,
				},
			},
			snjs_boss_tianshupulaomingyin:{
				audio:"ext:神怒降世:1",
				trigger:{
					global:"damageBegin4",
				},
				filter:function(event,player){
					return event.source==player;
				},
				forced:true,
				content:function(){
					trigger.cancel();
					trigger.player.loseHp(trigger.num);
				},
				ai:{
					jueqing:true,
				},
			},
			snjs_boss_tianshupulaoduyuan:{
				audio:"ext:神怒降世:1",
				mod:{
					playerEnabled:function(card,player,target){
						if((get.type(card)=='basic'||get.type(card)=='trick')&&target.isFriendsOf(player)&&target!=player){
							return false;
						}
					},
				},
				trigger:{
					source:"damageBegin",
				},
				filter:function(event,player){
					return player.isPhaseUsing();
				},
				forced:true,
				content:function(){
					trigger.num++;
				},
				ai:{
					threaten:2,
				},
			},
			snjs_boss_tianshubianlongshi:{
				audio:"ext:神怒降世:1",
				trigger:{
					global:"useCardToPlayered",
				},
				filter:function(event,player){
					return get.type(event.card)=='basic'&&event.target.isFriendsOf(player)&&event.target.isIn()&&!event.target.hasSkill('snjs_boss_tianshubianlongshi_jilu');
				},
				forced:true,
				logTarget:"target",
				content:function(){
					trigger.target.draw();
					if(!trigger.target.hasSkill('snjs_boss_tianshubianlongshi_jilu')) trigger.target.addTempSkill('snjs_boss_tianshubianlongshi_jilu');
				},
				subSkill:{
					jilu:{
						silent:true,
						unique:true,
						forced:true,
						sub:true,
						popup:false,
					},
				},
				ai:{
					threaten:0.4,
				},
			},
			snjs_boss_tianshubiansongyan:{
				audio:"ext:神怒降世:1",
				trigger:{
					global:"useCardToPlayered",
				},
				filter:function(event,player){
					return get.type(event.card)=='trick'&&event.target.isFriendsOf(player)&&event.target.isIn()&&!event.target.hasSkill('snjs_boss_tianshubiansongyan_jilu');
				},
				forced:true,
				logTarget:"target",
				content:function(){
					"step 0"
					if(!trigger.target.hasSkill('snjs_boss_tianshubiansongyan_jilu')) trigger.target.addTempSkill('snjs_boss_tianshubiansongyan_jilu');
					"step 1"
					var ren=[];
					game.countPlayer(function(current){
						if(current==player||current.isFriendsOf(player)) ren.push(current);
					});
					player.line(ren);
					game.asyncDraw(ren);
				},
				subSkill:{
					jilu:{
						silent:true,
						unique:true,
						forced:true,
						sub:true,
						popup:false,
					},
				},
				ai:{
					threaten:0.5,
				},
			},
			snjs_boss_tianshubiansuwei:{
				audio:"ext:神怒降世:1",
				trigger:{
					target:"useCardToTarget",
				},
				filter:function(event,player){
					if(event.player==player||event.player.isFriendsOf(player)) return false;
					return _status.currentPhase==event.player&&event.player.countCards('h')>0;
				},
				forced:true,
				logTarget:"player",
				content:function(){
					event.cards=trigger.player.getCards('h').randomGets(1);
					if(event.cards.length) trigger.player.discard(event.cards);
				},
			},
			snjs_boss_tianshubianhualao:{
				audio:"ext:神怒降世:1",
				trigger:{
					global:"damageBegin4",
				},
				filter:function(event,player){
					if(event.player==player) return false;
					if(!event.player.isFriendsOf(player)) return false;
					return event.source!=undefined&&!event.source.isFriendsOf(player)&&event.player.hp<4;
				},
				forced:true,
				logTarget:"player",
				content:function(){
					trigger.cancel();
				},
				ai:{
					threaten:1,
				},
			},
			snjs_boss_tianshubixilongxuan:{
				audio:"ext:神怒降世:1",
				global:"snjs_boss_tianshubixilongxuan2",
				mod:{
					maxHandcardBase:function(player,num){
						return num-player.storage.snjs_boss_tianshubixilongxuan.length;
					},
				},
				init:function(player){
					if(!player.storage.snjs_boss_tianshubixilongxuan) player.storage.snjs_boss_tianshubixilongxuan=[];
				},
				mark:true,
				intro:{
					content:"cards",
					onunmark:function(storage,player){
						if(storage&&storage.length){
							player.$throw(storage,1000);
							game.cardsDiscard(storage);
							game.log(storage,'被置入了弃牌堆');
							storage.length=0;
						}
					},
				},
				trigger:{
					player:["phaseDrawBegin2","dieBegin"],
				},
				filter:function(event,player){
					if(name=='die') return player.storage.snjs_boss_tianshubixilongxuan.length>0;
					else return !event.numFixed;
				},
				direct:true,
				forced:true,
				locked:false,
				content:function(){
					if(event.triggername!='dieBegin'){
						player.logSkill('snjs_boss_tianshubixilongxuan');
						trigger.num--;
					}
					else{
						event.card=player.storage.snjs_boss_tianshubixilongxuan;
						player.$throw(event.card,1000);
						game.delayx();
						game.cardsDiscard(event.card);
						game.log(event.card,'被置入了弃牌堆');
						player.storage.snjs_boss_tianshubixilongxuan=[];
						player.storage.snjs_boss_tianshubixilongxuan.length=0;
					}
				},
			},
			snjs_boss_tianshubixilongxuan2:{
				enable:"phaseUse",
				usable:1,
				filter:function(event,player){
					if(player.hasSkill('snjs_boss_tianshubixilongxuan')) return false;
					return player.countCards('he')&&game.hasPlayer(function(current){
						return current.hasSkill('snjs_boss_tianshubixilongxuan');
					});
				},
				filterCard:function(card){
					return get.type(card)=='trick';
				},
				complexCard:true,
				position:"he",
				filterTarget:function (card,player,target){
					return player!=target&&target.hasSkill('snjs_boss_tianshubixilongxuan');
				},
				discard:false,
				toStorage:true,
				prepare:"give",
				prompt:function(){
					var player=_status.event.player;
					var list=game.filterPlayer(function(current){
						return current.hasSkill('snjs_boss_tianshubixilongxuan');
					});
					var str='将一张牌交给'+get.translation(list);
					if(list.length>1) str+='中的一人';
					return str;
				},
				check:function(card){
					return 8-get.value(card);
				},
				content:function(){
					target.logSkill('snjs_boss_tianshubixilongxuan');
					target.markAuto('snjs_boss_tianshubixilongxuan',cards);
					game.cardsGotoSpecial(cards);
					game.log(event.target,'将',cards,'置于了','#g「碑铭」上');
					if(player.isDamaged()) player.recover();
					target.gainMaxHp();
				},
				ai:{
					order:20,
					threaten:1.5,
					result:{
						player:function(player,target){
							var target=game.findPlayer(function(current){
								return current.hasSkill('snjs_boss_tianshubixilongxuan');
							});
							if(target){
								return get.attitude(player,target);
							}
						},
					},
				},
			},
			snjs_boss_tianshubixilingxi:{
				audio:"ext:神怒降世:1",
				trigger:{
					player:"damageEnd",
				},
				filter:function(event,player){
					if(!player.storage.snjs_boss_tianshubixilongxuan) return false;
					return player.storage.snjs_boss_tianshubixilongxuan.length>0;
				},
				forced:true,
				content:function(){
					"step 0"
					event.num=trigger.num;
					"step 1"
					if(player.storage.snjs_boss_tianshubixilongxuan.length>0){
					   player.chooseCardButton('弃置一张「碑铭」',1,player.storage.snjs_boss_tianshubixilongxuan,true);
					}
					else event.finish();
					"step 2"
					event.card=result.links[0];
					player.storage.snjs_boss_tianshubixilongxuan.remove(event.card);
					player.$throw(event.card,1000);
					game.delayx();
					game.cardsDiscard(event.card);
					game.log(player,'将',event.card,'置入了弃牌堆');
					player.loseMaxHp();
					"step 3"
					var ren=[];
					game.countPlayer(function(current){
						if(current==player||current.isFriendsOf(player)) ren.push(current);
					});
					player.line(ren);
					game.asyncDraw(ren,2);
					event.num--;
					"step 4"
					if(event.num>0) event.goto(1);
				},
				ai:{
					"maixie_defend":true,
				},
			},
			snjs_boss_tianshubixishuliu:{
				audio:"ext:神怒降世:1",
				trigger:{
					player:"useCardAfter",
				},
				filter:function(event,player,name){
					if(event.cards.filterInD().length<=0) return false;
					return get.type(event.card)=='trick';
				},
				forced:true,
				content:function(){
                    player.$gain2(trigger.cards.filterInD());
					player.markAuto('snjs_boss_tianshubixilongxuan',trigger.cards.filterInD());
					game.cardsGotoSpecial(trigger.cards.filterInD());
					game.log(player,'将',trigger.cards.filterInD(),'置于了','#g「碑铭」上');
					player.gainMaxHp();
				},
				ai:{
					threaten:0.5,
				},
			},
			snjs_boss_tianshubixijienu:{
				audio:"ext:神怒降世:1",
				trigger:{
					player:"phaseUseBegin",
				},
				filter:function(event,player,name){
					if(!player.storage.snjs_boss_tianshubixilongxuan) return false;
					return player.storage.snjs_boss_tianshubixilongxuan.length>=7;
				},
				forced:true,
				content:function(){
					"step 0"
					if(player.isDamaged()) player.recover(player.storage.snjs_boss_tianshubixilongxuan.length);
					"step 1"
					player.damage(player.storage.snjs_boss_tianshubixilongxuan.length,'nocard','nosource');
				},
				ai:{
					threaten:function(player){
						if(!player.storage.snjs_boss_tianshubixilongxuan) return 0.5;
						if(player.storage.snjs_boss_tianshubixilongxuan.length<1) return 0.5;
						else return player.storage.snjs_boss_tianshubixilongxuan.length;
					},
				},
			},
			snjs_boss_tianshufuxilongzhi:{
				audio:"ext:神怒降世:1",
				global:"snjs_boss_tianshufuxilongzhi2",
				init:function(player){
					if(!player.storage.snjs_boss_tianshufuxilongzhi) player.storage.snjs_boss_tianshufuxilongzhi=[];
				},
				mark:true,
				intro:{
					content:"cards",
					onunmark:function(storage,player){
						if(storage&&storage.length){
							player.$throw(storage,1000);
							game.cardsDiscard(storage);
							game.log(storage,'被置入了弃牌堆');
							storage.length=0;
						}
					},
				},
				trigger:{
					player:["phaseDrawBegin2","dieBegin"]
				},
				filter:function(event,player,name){
					if(name=='die') return player.storage.snjs_boss_tianshufuxilongzhi.length>0;
					else return !event.numFixed&&player.storage.snjs_boss_tianshufuxilongzhi.length>0;
				},
				direct:true,
				forced:true,
				locked:false,
				content:function(){
					if(event.triggername!='dieBegin'){
						player.logSkill('snjs_boss_tianshufuxilongzhi');
						trigger.num+=player.storage.snjs_boss_tianshufuxilongzhi.length;
					}
					else{
						event.card=player.storage.snjs_boss_tianshufuxilongzhi;
						player.$throw(event.card,1000);
						game.delayx();
						game.cardsDiscard(event.card);
						game.log(event.card,'被置入了弃牌堆');
						player.storage.snjs_boss_tianshufuxilongzhi=[];
						player.storage.snjs_boss_tianshufuxilongzhi.length=0;
					}
				},
				ai:{
					threaten:function(player){
						if(!player.storage.snjs_boss_tianshufuxilongzhi) return 0.5;
						if(player.storage.snjs_boss_tianshufuxilongzhi.length<1) return 0.5;
						else return player.storage.snjs_boss_tianshufuxilongzhi.length;
					},
				},
			},
			snjs_boss_tianshufuxilongzhi2:{
				enable:"phaseUse",
				usable:1,
				filter:function(event,player){
					if(player.hasSkill('snjs_boss_tianshufuxilongzhi')) return false;
					return player.countCards('he')&&game.hasPlayer(function(current){
						return current.hasSkill('snjs_boss_tianshufuxilongzhi');
					});
				},
				filterCard:function(card){
					return get.type(card)=='trick';
				},
				complexCard:true,
				position:"he",
				filterTarget:function (card,player,target){
					return player!=target&&target.hasSkill('snjs_boss_tianshufuxilongzhi');
				},
				discard:false,
				toStorage:true,
				prepare:"give",
				prompt:function(){
					var player=_status.event.player;
					var list=game.filterPlayer(function(current){
						return current.hasSkill('snjs_boss_tianshufuxilongzhi');
					});
					var str='将一张牌交给'+get.translation(list);
					if(list.length>1) str+='中的一人';
					return str;
				},
				check:function(card){
					return true
				},
				content:function(){
					target.logSkill('snjs_boss_tianshufuxilongzhi');
					target.markAuto('snjs_boss_tianshufuxilongzhi',cards);
					game.cardsGotoSpecial(cards);
					game.log(event.target,'将',cards,'置于了','#g「碑文」上');
					player.draw(2);
				},
				ai:{
					order:20,
					threaten:1.5,
					result:{
						player:function(player,target){
							var target=game.findPlayer(function(current){
								return current.hasSkill('snjs_boss_tianshufuxilongzhi');
							});
							if(target){
								return get.attitude(player,target);
							}
						},
					},
				},
			},
			snjs_boss_tianshufuxilingjie:{
				audio:"ext:神怒降世:1",
				enable:"phaseUse",
				filter:function(event,player){
					if(player.hasSkill('snjs_boss_tianshufuxilingjie_jilu')) return false;
					if(!player.storage.snjs_boss_tianshufuxilongzhi) return false;
					else return player.countCards('hse')>0&&player.storage.snjs_boss_tianshufuxilongzhi.length>0;
				},
				direct:true,
				content:function(){
					"step 0"
					if(player.storage.snjs_boss_tianshufuxilongzhi.length>0){
					   player.chooseCardButton('选择想要使用的「碑文」',1,player.storage.snjs_boss_tianshufuxilongzhi).set('filterButton',function(button){
						   return lib.filter.filterCard(button.link,player,_status.event.getParent());
					   }).set('ai',function(button){
						   return get.value(button.link);
					   });
					}
					"step 1"
					if(result.links){
						event.zhuanhuan=result.links[0].name;
						player.chooseCard('〖灵碣〗：将一张牌当作'+get.translation(event.zhuanhuan)+'使用','hes').set('ai',function(card){
							return 6-get.value(card);
						});
					}
					else event.finish();
					"step 2"
					if(result.bool){
						player.chooseUseTarget({name:event.zhuanhuan},result.cards).logSkill=['snjs_boss_tianshufuxilingjie'];
					}
					else event.finish();
					"step 3"
					if(result.bool){
						if(!player.hasSkill('snjs_boss_tianshufuxilingjie_jilu')) player.addTempSkill('snjs_boss_tianshufuxilingjie_jilu');
					}
				},
				subSkill:{
					jilu:{
						silent:true,
						unique:true,
						forced:true,
						sub:true,
						popup:false,
					},
				},
				ai:{
					order:function(item,player){
						if(!player.getStat('skill').snjs_boss_tianshufuxilingjie) return 20;
						return 0;
					},
					threaten:function(player){
						if(!player.storage.snjs_boss_tianshufuxilongzhi) return 0.5;
						if(player.storage.snjs_boss_tianshufuxilongzhi.length<1) return 0.5;
						else return player.storage.snjs_boss_tianshufuxilongzhi.length;
					},
					result:{
						player:1,
					},
				},
			},
			snjs_boss_tianshufuxifeizhang:{
				audio:"ext:神怒降世:1",
				usable:1,
				trigger:{
					player:"useCard2",
				},
				filter:function(event,player){
					if(!event.targets.contains(player)&&event.targets.length>=game.countPlayer(function(current){return current!=player;})) return false;
					if(event.targets.contains(player)&&event.targets.length==game.countPlayer()) return false;
					return get.type(event.card)=='trick'&&player.isPhaseUsing();
				},
				direct:true,
				content:function(){
					'step 0'
					player.chooseTarget(get.prompt('snjs_boss_tianshufuxifeizhang'),'<center>为'+get.translation(trigger.card)+'增加一个目标</center>',function(card,player,target){
						var player=_status.event.player;
						if(_status.event.targets.contains(target)) return false;
						return lib.filter.targetEnabled2(_status.event.card,player,target)&&player!=target;
					}).set('ai',function(target){
						var trigger=_status.event.getTrigger();
						var player=_status.event.player;
						return get.effect(target,trigger.card,player,player);
					}).set('targets',trigger.targets).set('card',trigger.card);
					'step 1'
					if(result.bool){
						if(!event.isMine()) game.delayx();
						event.target=result.targets[0];
					}
					else{
						event.finish();
					}
					'step 2'
					if(event.target){
						player.logSkill('snjs_boss_tianshufuxifeizhang',event.target);
						trigger.targets.push(event.target);
						game.log(event.target,'成为了',trigger.card,'的额外目标');
					}
				},
				ai:{
					threaten:1.2,
				},
			},
			snjs_boss_tianshufuxibowen:{
				audio:"ext:神怒降世:1",
				mod:{
					maxHandcardBase:function(player,num){
						return num+player.storage.snjs_boss_tianshufuxibowen;
					},
				},
				init:function(player){
					if(!player.storage.snjs_boss_tianshufuxibowen) player.storage.snjs_boss_tianshufuxibowen=0;
				},
				trigger:{
					player:"phaseDrawBegin",
				},
				filter:function(event,player){
					if(!player.storage.snjs_boss_tianshufuxilongzhi) return false;
					else return player.storage.snjs_boss_tianshufuxilongzhi.length>0;
				},
				direct:true,
				content:function(){
					"step 0"
					var panduan=player.storage.snjs_boss_tianshufuxilongzhi.length;
					if(player.storage.snjs_boss_tianshufuxilongzhi.length>0){
					   player.chooseCardButton('选择想要获得的「碑文」',1,player.storage.snjs_boss_tianshufuxilongzhi).set('ai',function(button){
						   if(panduan>3) return get.value(button.link);
						   else return false;
					   });
					}
					else event.finish();
					"step 1"
					if(result.links){
						event.cards=result.links;
						player.logSkill('snjs_boss_tianshufuxibowen',event.target);
						player.gain(event.cards,player,'giveAuto','bySelf','fromStorage');
						for(var i=0;i<event.cards.length;i++){
							player.storage.snjs_boss_tianshufuxilongzhi.remove(event.cards[i]);
						}
						player.syncStorage('snjs_boss_tianshufuxilongzhi');
						player.storage.snjs_boss_tianshufuxibowen++;
					}
				},
				ai:{
					threaten:1,
				},
			},
			snjs_boss_tianshuhuoshenzhurongxingxia:{
				audio:"ext:神怒降世:2",
				trigger:{
					player:["phaseZhunbeiBegin","phaseJieshuBegin"],
				},
				filter:function(event,player){
					return game.hasPlayer(function(current){
						return current!=player&&!current.isFriendsOf(player);
					});
				},
				forced:true,
				logTarget:function(event,player){
					var mubiao=game.filterPlayer(function(current){
						return current!=player&&!current.isFriendsOf(player);
					});
					return mubiao;
				},
				content:function(){
					"step 0"
					event.mubiao=game.filterPlayer(function(current){
						return current!=player&&!current.isFriendsOf(player);
					});
					"step 1"
					if(event.mubiao.length>0) event.count=0;
					else event.finish();
					"step 2"
					var str=event.triggername=="phaseJieshuBegin"?"交给"+get.translation(player):"弃置";
					event.mubiao[event.count].chooseCard("〖行夏〗："+str+"一张红牌，否则受到1点火焰伤害",{color:"red"},"he").set('ai',function(card){
						return 8-get.value(card);
					});
					"step 3"
					if(result.bool){
						if(event.triggername=="phaseJieshuBegin") player.gain(result.cards,event.mubiao[event.count],'giveAuto','bySelf');
						else event.mubiao[event.count].discard(result.cards);
					}
					else event.mubiao[event.count].damage('fire','nocard');
					"step 4"
					event.count++;
					"step 5"
					if(event.count<event.mubiao.length) event.goto(2);
				},
				ai:{
					threaten:2,
				},
			},
			snjs_boss_tianshushuishengonggongjuehong:{
				audio:"ext:神怒降世:2",
				trigger:{
					player:"phaseZhunbeiBegin",
				},
				filter:function(event,player){
					return game.hasPlayer(function(current){
						return current!=player&&!current.isFriendsOf(player);
					});
				},
				forced:true,
				logTarget:function(event,player){
					var mubiao=game.filterPlayer(function(current){
						return current!=player&&!current.isFriendsOf(player);
					});
					return mubiao;
				},
				content:function(){
					"step 0"
					event.mubiao=game.filterPlayer(function(current){
						return current!=player&&!current.isFriendsOf(player);
					});
					"step 1"
					if(event.mubiao.length>0) event.count=0;
					else event.finish();
					"step 2"
					if(event.mubiao[event.count].countCards('e')<1){
						event.mubiao[event.count].chooseToDiscard("〖决洪〗：弃置两张手牌",2,"h",true).set('ai',function(card){
							return 6-get.value(card);
						});
					}
					else{
						event.mubiao[event.count].discard(event.mubiao[event.count].getCards('e'));
						event.goto(4);
					}
					"step 3"
					if(result.bool){
						player.draw(2-result.cards.length);
					}
					else player.draw(2);
					"step 4"
					event.count++;
					"step 5"
					if(event.count<event.mubiao.length) event.goto(2);
				},
				ai:{
					threaten:2,
				},
			},
			snjs_boss_tianshubaiqiwuan:{
				audio:"ext:神怒降世:1",
				usable:1,
				trigger:{
					source:"damageBegin",
				},
				filter:function(event,player){
					if(event._notrigger.contains(event.player)) return false;
					return event.card&&event.card.name=='sha';
				},
				forced:true,
				logTarget:"player",
				content:function(){
					trigger.num++;
					player.draw(2);
				},
				ai:{
					threaten:1.5,
				},
			},
			snjs_boss_tianshubaiqishashen:{
				audio:"ext:神怒降世:1",
				enable:["chooseToRespond","chooseToUse"],
				filterCard:true,
				position:"hs",
				viewAs:{
					name:"sha",
				},
				viewAsFilter:function(player){
					if(get.zhu(player,'shouyue')){
						if(!player.countCards('hs')) return false;
					}
					else{
						if(!player.countCards('hs')) return false;
					}
				},
				prompt:"将一张手牌当作【杀】使用或打出",
				check:function(card){return 4-get.value(card)},
				ai:{
					threaten:1,
					respondSha:true,
					skillTagFilter:function(player){
						if(get.zhu(player,'shouyue')){
							if(!player.countCards('hs')) return false;
						}
						else{
							if(!player.countCards('hs')) return false;
						}
					},
					canLink:function(player,target,card){
						if(!target.isLinked()&&!player.hasSkill('wutiesuolian_skill')) return false;
						if(target.mayHaveShan()&&!player.hasSkillTag('directHit_ai',true,{
							target:target,
							card:card,
						},true)) return false;
						if(player.hasSkill('jueqing')||target.hasSkill('gangzhi')||target.hasSkill('gangzhi')) return false;
						return true;
					},
					basic:{
						useful:[5,1],
						value:[5,1],
					},
					order:function(item,player){
						if(player.hasSkillTag('presha',true,null,true)) return 10;
						if(lib.linked.contains(get.nature(item))){
							if(game.hasPlayer(function(current){
								return current!=player&&current.isLinked()&&player.canUse(item,current,null,true)&&get.effect(current,item,player,player)>0&&lib.card.sha.ai.canLink(player,current,item);
							})&&game.countPlayer(function(current){
								return current.isLinked()&&get.damageEffect(current,player,player,get.nature(item))>0;
							})>1) return 3.1;
							return 3;
						}
						return 3.05;
					},
					result:{
						target:function(player,target,card,isLink){
							var eff=function(){
								if(!isLink&&player.hasSkill('jiu')){
									if(!target.hasSkillTag('filterDamage',null,{
										player:player,
										card:card,
										jiu:true,
									})){
										if(get.attitude(player,target)>0){
											return -7;
										}
										else{
											return -4;
										}
									}
									return -0.5;
								}
								return -1.5;
							}();
							if(!isLink&&target.mayHaveShan()&&!player.hasSkillTag('directHit_ai',true,{
								target:target,
								card:card,
							},true)) return eff/1.2;
							return eff;
						},
					},
					tag:{
						respond:1,
						respondShan:1,
						damage:function(card){
							if(card.nature=='poison') return;
							return 1;
						},
						natureDamage:function(card){
							if(card.nature) return 1;
						},
						fireDamage:function(card,nature){
							if(card.nature=='fire') return 1;
						},
						thunderDamage:function(card,nature){
							if(card.nature=='thunder') return 1;
						},
						poisonDamage:function(card,nature){
							if(card.nature=='poison') return 1;
						},
					},
				},
			},
			snjs_boss_tianshubaiqichangsheng:{
				audio:"ext:神怒降世:1",
				mod:{
					targetInRange:function (card){
						if(card.name=='sha') return true;
					},
					cardUsable:function(card,player,num){
						if(card.name=='sha') return num+2;
					},
				},
				firstDo:true,
				trigger:{
					player:"useCard1",
				},
				forced:true,
				filter:function(event,player){
					return event.card.name=='sha';
				},
				content:function(){},
				ai:{
					unequip:true,
					threaten:1,
				},
			},
			snjs_boss_tianshutaoshennutao:{
				audio:"ext:神怒降世:1",
				trigger:{
					player:"phaseBegin",
				},
				filter:function(event,player){
					return game.hasPlayer(function(current){
						return !current.isFriendsOf(player)&&current!=player;
					});
				},
				forced:true,
				direct:true,
				content:function(){
					'step 0'
					event.mubiao=game.filterPlayer(function(current){
						return current!=player&&!current.isFriendsOf(player);
					}).randomGet();
					'step 1'
					player.logSkill('snjs_boss_tianshutaoshennutao',event.mubiao);
					event.mubiao.damage('thunder','nocard');
				},
				ai:{
					thunderAttack:true,
					threaten:1,
				},
			},
			snjs_boss_tianshutaoshenxiongzi:{
				audio:"ext:神怒降世:1",
				mod:{
					maxHandcardBase:function(player,num){
						return player.maxHp;
					},
				},
				trigger:{
					player:"phaseDrawBegin",
				},
				forced:true,
				content:function(){
					event.card=[];
                    var card1=get.cardPile('sha','field');
                    var card2=get.cardPile('shan','field');
                    if(card1) event.card.push(card1);
                    if(card2) event.card.push(card2);
					if(event.card.length>0) player.gain(event.card,'gain2','log');
				},
				ai:{
					threaten:1.5,
				},
			},
			snjs_boss_tianshutaoshenlongdan:{
				audio:"ext:神怒降世:1",
				mod:{
					aiValue:function(player,card,num){
						if(card.name!='sha'&&card.name!='shan') return;
						var geti=function(){
							var cards=player.getCards('hs',function(card){
								return card.name=='sha'||card.name=='shan';
							});
							if(cards.contains(card)){
								return cards.indexOf(card);
							}
							return cards.length;
						};
						return Math.max(num,[7,5,5,3][Math.min(geti(),3)]);
					},
					aiUseful:function(){
						return lib.skill.ollongdan.mod.aiValue.apply(this,arguments);
					},
				},
				locked:false,
				hiddenCard:function(player,name){
					if(name=='tao') return player.countCards('hs','jiu')>0;
					if(name=='jiu') return player.countCards('hs','tao')>0;
					return false;
				},
				enable:["chooseToUse","chooseToRespond"],
				position:"hs",
				prompt:"将【杀】当做【闪】，或将【闪】当做【杀】使用或打出",
				viewAs:function(cards,player){
					var name=false;
					switch(get.name(cards[0],player)){
						case 'sha':name='shan';break;
						case 'shan':name='sha';break;
					}
					if(name) return {name:name};
					return null;
				},
				check:function(card){
					var player=_status.event.player;
					if(_status.event.type=='phase'){
						var max=0;
						var name2;
						var list=['sha','tao','jiu'];
						var map={sha:'shan',tao:'jiu',jiu:'tao'}
						for(var i=0;i<list.length;i++){
							var name=list[i];
							if(player.countCards('hs',map[name])>(name=='jiu'?1:0)&&player.getUseValue({name:name})>0){
								var temp=get.order({name:name});
								if(temp>max){
									max=temp;
									name2=map[name];
								}
							}
						}
						if(name2==get.name(card,player)) return 1;
						return 0;
					}
					return 1;
				},
				filterCard:function(card,player,event){
					event=event||_status.event;
					var filter=event._backup.filterCard;
					var name=get.name(card,player);
					if(name=='sha'&&filter({name:'shan',cards:[card]},player,event)) return true;
					if(name=='shan'&&filter({name:'sha',cards:[card]},player,event)) return true;
					return false;
				},
				filter:function(event,player){
					var filter=event.filterCard;
					if(filter({name:'sha'},player,event)&&player.countCards('hs','shan')) return true;
					if(filter({name:'shan'},player,event)&&player.countCards('hs','sha')) return true;
					return false;
				},
				ai:{
					threaten:1,
					respondSha:true,
					respondShan:true,
					skillTagFilter:function(player,tag){
						var name;
						switch(tag){
							case 'respondSha':name='shan';break;
							case 'respondShan':name='sha';break;
						}
						if(!player.countCards('hs',name)) return false;
					},
					order:function(item,player){
						if(player&&_status.event.type=='phase'){
							var max=0;
							var list=['sha'];
							var map={sha:'shan'}
							for(var i=0;i<list.length;i++){
								var name=list[i];
								if(player.countCards('hs',map[name])>0&&player.getUseValue({name:name})>0){
									var temp=get.order({name:name});
									if(temp>max) max=temp;
								}
							}
							if(max>0) max+=0.3;
							return max;
						}
						return 4;
					},
				},
			},
			snjs_boss_tianshutaoshenwushuang:{
				audio:"ext:神怒降世:1",
				group:["snjs_boss_tianshutaoshenwushuang_sha","snjs_boss_tianshutaoshenwushuang_juedou"],
				shaRelated:true,
				trigger:{
					player:"useCard1",
				},
				filter:function(event,player){
					return event.card.name=='sha';
				},
				forced:true,
				locked:true,
				content:function(){},
				ai:{
					threaten:1,
				},
				subSkill:{
					sha:{
						trigger:{
							player:"useCardToPlayered",
						},
						forced:true,
						direct:true,
						filter:function(event,player){
							return event.card.name=='sha';
						},
						logTarget:"target",
						content:function(){
							if(!trigger.getParent().directHit.contains(trigger.target)){
								var id=trigger.target.playerid;
								var map=trigger.getParent().customArgs;
								if(!map[id]) map[id]={};
								if(typeof map[id].shanRequired=='number'){
									map[id].shanRequired++;
								}
								else{
									map[id].shanRequired=2;
								}
							}
						},
						ai:{
							"directHit_ai":true,
							skillTagFilter:function(player,tag,arg){
								if(arg.card.name!='sha'||arg.target.countCards('h','shan')>1) return false;
							},
						},
						sub:true,
					},
					juedou:{
						audio:"snjs_boss_tianshutaoshenwushuang",
						trigger:{
							player:"useCardToPlayered",
							target:"useCardToTargeted",
						},
						forced:true,
						logTarget:function(trigger,player){
							return player==trigger.player?trigger.target:trigger.player
						},
						filter:function(event,player){
							return event.card.name=='juedou';
						},
						content:function(){
							var id=(player==trigger.player?trigger.target:trigger.player)['playerid'];
							var idt=trigger.target.playerid;
							var map=trigger.getParent().customArgs;
							if(!map[idt]) map[idt]={};
							if(!map[idt].shaReq) map[idt].shaReq={};
							if(!map[idt].shaReq[id]) map[idt].shaReq[id]=1;
							map[idt].shaReq[id]++;
						},
						ai:{
							"directHit_ai":true,
							skillTagFilter:function(player,tag,arg){
								if(arg.card.name!='juedou'||Math.floor(arg.target.countCards('h','sha')/2)>player.countCards('h','sha')) return false;
							},
						},
						sub:true,
					},
				},
			},
			snjs_boss_tianshutaoshenpaoxiao:{
				audio:"ext:神怒降世:1",
				firstDo:true,
				trigger:{
					player:"useCard1",
				},
				forced:true,
				filter:function(event,player){
					return !event.audioed&&event.card.name=='sha'&&player.countUsed('sha',true)>1&&event.getParent().type=='phase';
				},
				content:function(){
					trigger.audioed=true;
				},
				mod:{
					cardUsable:function(card,player,num){
						if(card.name=='sha') return Infinity;
					},
					targetInRange:function (card,player){
						if(player.countUsed('sha',true)>0&&card.name=='sha') return true;
					},
				},
				ai:{
					threaten:1,
					skillTagFilter:function(player,tag,arg){
						if(!get.zhu(player,'shouyue')) return false;
						if(arg&&arg.name=='sha') return true;
						return false;
					},
				},
			},
			snjs_boss_tianshucaoeshoujiang:{
				audio:"ext:神怒降世:1",
				usable:1,
				trigger:{
					player:"damageBegin4",
				},
				filter:function(event,player){
					return event.num>1;;
				},
				forced:true,
				content:function(){
					player.draw(trigger.num-1);
					trigger.num=1;
				},
				ai:{
					filterDamage:true,
				},
			},
			snjs_boss_tianshucaoeluoshen:{
				audio:"ext:神怒降世:1",
				trigger:{
					player:"phaseZhunbeiBegin",
				},
				frequent:true,
				preHidden:true,
				content:function(){
					"step 0"
					player.addTempSkill('snjs_boss_tianshucaoeluoshen_add');
					event.cards=[];
					"step 1"
					var next=player.judge(function(card){
						if(get.color(card)=='black') return 1.5;
						return -1.5;
					});
					next.judge2=function(result){
						return result.bool;
					};
					if(get.mode()!='guozhan'&&!player.hasSkillTag('rejudge')) next.set('callback',function(){
						if(event.judgeResult.color=='black'&&get.position(card,true)=='o'){
							player.gain(card,'gain2').gaintag.add('snjs_boss_tianshucaoeluoshen');
						}
					});
					else next.set('callback',function(){
						if(event.judgeResult.color=='black') event.getParent().orderingCards.remove(card);
					});
					"step 2"
					if(result.bool){
						event.cards.push(result.card);
						player.chooseBool('是否再次发动〖洛神〗？').set('frequentSkill','snjs_boss_tianshucaoeluoshen');
					}
					else{
						for(var i=0;i<event.cards.length;i++){
							if(get.position(event.cards[i],true)!='o'){
								event.cards.splice(i,1);
								i--;
							}
						}
						if(event.cards.length){
							player.gain(event.cards,'gain2').gaintag.add('snjs_boss_tianshucaoeluoshen');
						}
						event.finish();
					}
					"step 3"
					if(result.bool){
						event.goto(1);
					}
					else{
						for(var i=0;i<event.cards.length;i++){
							if(get.position(event.cards[i],true)!='o'){
								event.cards.splice(i,1);i--;
							}
						}
						if(event.cards.length){
							player.gain(event.cards,'gain2').gaintag.add('snjs_boss_tianshucaoeluoshen');
						}
					}
				},
				subSkill:{
					add:{
						mod:{
							ignoredHandcard:function(card,player){
								if(card.hasGaintag('snjs_boss_tianshucaoeluoshen')){
									return true;
								}
							},
							cardDiscardable:function(card,player,name){
								if(name=='phaseDiscard'&&card.hasGaintag('snjs_boss_tianshucaoeluoshen')){
									return false;
								}
							},
						},
						onremove:function(player){
							player.removeGaintag('snjs_boss_tianshucaoeluoshen');
						},
						sub:true,
					},
				},
				ai:{
					threaten:1.5,
				},
			},
			snjs_boss_tianshucaoebiyue:{
				audio:"ext:神怒降世:1",
				trigger:{
					player:"phaseJieshuBegin",
				},
				frequent:true,
				content:function(){
					var num=1;
					if(!player.countCards('h')){
						num=2;
					}
					player.draw(num);
				},
				ai:{
					threaten:0.5,
				},
			},
			snjs_boss_tianshucaoeguose:{
				audio:"ext:神怒降世:1",
				enable:"phaseUse",
				usable:1,
				discard:false,
				lose:false,
				delay:false,
				filter:function(event,player){
					return player.countCards('hes',{suit:'diamond'})>0;
				},
				position:"hes",
				filterCard:{
					suit:"diamond",
				},
				filterTarget:function(card,player,target){
					if(get.position(ui.selected.cards[0])!='s'&&lib.filter.cardDiscardable(ui.selected.cards[0],player,'snjs_boss_tianshucaoeguose')&&target.hasJudge('lebu')) return true;
					if(player==target) return false;
					if(!game.checkMod(ui.selected.cards[0],player,'unchanged','cardEnabled2',player)) return false;
					return player.canUse({name:'lebu',cards:ui.selected.cards},target);
				},
				check:function(card){
					return 7-get.value(card);
				},
				content:function(){
					if(target.hasJudge('lebu')){
						player.discard(cards);
						target.discard(target.getJudge('lebu'));
					}
					else{
						player.useCard({name:'lebu'},target,cards).audio=false;
					}
					player.draw();
				},
				ai:{
					threaten:1.5,
					result:{
						target:function(player,target){
							if(target.hasJudge('lebu')) return -get.effect(target,{name:'lebu'},player,target);
							return get.effect(target,{name:'lebu'},player,target);
						},
					},
					order:9,
				},
			},
			snjs_boss_tianshucaoejizhi:{
				audio:"ext:神怒降世:1",
				trigger:{
					player:"useCard",
				},
				frequent:true,
				preHidden:true,
				filter:function(event){
					return (get.type(event.card)=='trick'&&event.card.isCard);
				},
				content:function(){
					player.draw();
				},
				ai:{
					threaten:1,
				},
			},
			snjs_boss_tianshushaohaoshenen:{
				audio:"ext:神怒降世:1",
				global:"snjs_boss_tianshushaohaoshenen2",
				trigger:{
					global:"phaseDrawBegin",
				},
				forced:true,
				filter:function(event,player){
					return event.player!=player&&!event.player.isFriendsOf(player)&&!event.numFixed;
				},
				logTarget:function(event){
					return event.player;
				},
				content:function(){
					trigger.num--;
				},
				ai:{
					threaten:1,
				},
			},
			snjs_boss_tianshushaohaoshenen2:{
				audio:"ext:神怒降世:1",
				mod:{
					maxHandcardBase:function(player,num){
						if(game.hasPlayer(function(current){
							return current.hasSkill('snjs_boss_tianshushaohaoshenen')&&(current==player||current.isFriendsOf(player));
						})) return num+1;
					},
					targetInRange:function(card,player){
						if(game.hasPlayer(function(current){
							return current.hasSkill('snjs_boss_tianshushaohaoshenen')&&(current==player||current.isFriendsOf(player));
						})) return true;
					},
				},
			},
			snjs_boss_tianshushaohaobaiyi:{
				audio:"ext:神怒降世:1",
				trigger:{
					player:"phaseZhunbeiBegin",
					global:"damageBegin4",
				},
				filter:function(event,player,name){
					if(name=="phaseZhunbeiBegin") return game.roundNumber%5==0&&game.hasPlayer(function(current){
						return current!=player&&!current.isFriendsOf(player);
					});
					else return event.nature=='thunder'&&(event.player==player||event.player.isFriendsOf(player));
				},
				forced:true,
				direct:true,
				content:function(){
					"step 0"
					if(event.triggername=="phaseZhunbeiBegin"){
						event.mubiao=game.filterPlayer(function(current){
							return current!=player&&!current.isFriendsOf(player);
						});
					}
					else{
						player.logSkill('snjs_boss_tianshushaohaobaiyi',trigger.player);
						trigger.cancel();
						event.finish();
					}
					"step 1"
					if(event.mubiao.length>0){
						player.logSkill('snjs_boss_tianshushaohaobaiyi',event.mubiao);
						for(var i=0;i<event.mubiao.length;i++){
							event.mubiao[i].damage(2,'thunder','nocard');
						}
					}
				},
				ai:{
					nothunder:true,
					effect:{
						target:function(card,player,target,current){
							if(get.tag(card,'thunderDamage')) return 'zerotarget';
						},
					},
					threaten:1,
				},
			},
			snjs_boss_tianshuhanbafenshi:{
				audio:"ext:神怒降世:1",
				trigger:{
					player:"phaseZhunbeiBegin",
				},
				filter:function(event,player){
					return player.countCards('h')!=player.hp;
				},
				forced:true,
				content:function(){
					"step 0"
					if(player.countCards('h')<player.hp){
						player.draw(player.hp-player.countCards('h'));
						event.finish();
					}
					else{
						event.num=Math.min(player.countCards('h')-player.hp,game.countPlayer(function(current){
							return current!=player&&!current.isFriendsOf(player);
						}));
					}
					"step 1"
					if(event.num>0){
						event.mubiao=game.filterPlayer(function(current){
							return current!=player&&!current.isFriendsOf(player);
						}).randomGets(event.num);
					}
					else event.finish();
					"step 2"
					if(event.mubiao.length>0){
						player.line(event.mubiao);
						for(var i=0;i<event.mubiao.length;i++){
							event.mubiao[i].damage('fire','nocard');
						}
					}
				},
				ai:{
					threaten:2,
				},
			},
			snjs_boss_tianshuhanbazhiri:{
				audio:"ext:神怒降世:1",
				trigger:{
					global:"useCard",
				},
				filter:function(event,player){
					return get.type(event.card)=='trick'&&get.color(event.card)=='red';
				},
				forced:true,
				content:function(){
					player.draw(3);
				},
				ai:{
					threaten:1.5,
				},
			},
			snjs_boss_tianshuhanbaxinji:{
				audio:"ext:神怒降世:1",
				trigger:{
					player:"loseAfter",
				},
				filter:function(event,player){
					if(event.type!='discard'||_status.currentPhase==player||_status.currentPhase.isFriendsOf(player)) return false;
					var evt=event.getl(player);
					return evt&&evt.hs&&evt.hs.length;
				},
				forced:true,
				logTarget:function(event){
					return _status.currentPhase;
				},
				content:function(){
					_status.currentPhase.damage('nocard');
				},
				ai:{
					threaten:1,
				},
			},
			snjs_boss_tianshushenqu:{
				audio:"ext:神怒降世:2",
				trigger:{
					player:"damageEnd",
				},
				forced:true,
				direct:true,
				content:function(){
					"step 0"
					event.num=trigger.num;
					"step 1"
					var skillname='snjs_boss_tianshushenqu_female';
					if(player.sex=='male') skillname='snjs_boss_tianshushenqu_male';
					if(trigger.source!=undefined){
						if(!trigger.source.isFriendsOf(player)) player.logSkill(skillname,trigger.source);
						else player.logSkill(skillname);
					}
					else player.logSkill(skillname);
					"step 2"
					event.card=get.bottomCards(1);
					var card=event.card.pop();
					card.fix();
					ui.cardPile.insertBefore(card,ui.cardPile.firstChild);
					game.updateRoundNumber();
					"step 3"
					player.judge(function(card){
						if(get.color(card)=='red') return 2;
						return -1;
					});
					"step 4"
					if(result.color=='red'){
						player.draw();
						if(trigger.source!=undefined){
							if(!trigger.source.isFriendsOf(player)&&trigger.source.countCards('he')>0) trigger.source.chooseToDiscard("〖神躯〗：弃置一张牌","he",true);
						}
					}
					"step 5"
					event.num--;
					"Step 6"
					if(event.num>0) event.goto(1);
				},
				subSkill:{
					male:{
						audio:"ext:神怒降世:1",
						sub:true,
					},
					female:{
						audio:"ext:神怒降世:1",
						sub:true,
					},
				},
			},
			snjs_boss_tianshuxuannvdishi:{
				audio:"ext:神怒降世:1",
				trigger:{
					player:"useCard",
				},
				direct:true,
				filter:function(event,player){
					if(!event.targets) return false;
					return (event.card.name=='sha'||get.type(event.card)=='trick')&&(event.targets.length==1||event.targets.length>1);
				},
				content:function(){
					"step 0"
					if(trigger.targets.length==1){
						player.chooseTarget(get.prompt('snjs_boss_tianshuxuannvdishi'),'<center>为'+get.translation(trigger.card)+'增加一个目标</center>',function(card,player,target){
							var player=_status.event.player;
							if(_status.event.targets.contains(target)) return false;
							return lib.filter.targetEnabled2(_status.event.card,player,target)&&player!=target;
						}).set('ai',function(target){
							var trigger=_status.event.getTrigger();
							var player=_status.event.player;
							return get.effect(target,trigger.card,player,player);
						}).set('targets',trigger.targets).set('card',trigger.card);
					}
					else{
						player.chooseTarget(get.prompt('snjs_boss_tianshuxuannvdishi'),'<center>为'+get.translation(trigger.card)+'减少一个目标</center>',function(card,player,target){
							return _status.event.targets.contains(target);
						}).set('ai',function(target){
							var trigger=_status.event.getTrigger();
							return -get.effect(target,trigger.card,trigger.player,_status.event.player);
						}).set('targets',trigger.targets);
					}
					"step 1"
					if(result.bool){
						if(!event.isMine()) game.delayx();
						event.target=result.targets[0];
					}
					else{
						event.finish();
					}
					"step 2"
					if(event.target){
						player.logSkill('snjs_boss_tianshuxuannvdishi',event.target);
						if(trigger.targets.length==1) trigger.targets.push(event.target);
						else{
							event.target.addTempSkill('snjs_boss_tianshuxuannvdishi2');
							event.target.storage.snjs_boss_tianshuxuannvdishi2=trigger.card;
						}
					}
				},
				ai:{
					threaten:1.5,
				},
			},
			snjs_boss_tianshuxuannvdishi2:{
				trigger:{
					target:"useCardToTarget",
				},
				filter:function(event,player){
					return player.storage.snjs_boss_tianshuxuannvdishi2==event.card;
				},
				firstDo:true,
				silent:true,
				unique:true,
				forced:true,
				popup:false,
				content:function(){
					trigger.getParent().excluded.add(player);
					delete player.storage.snjs_boss_tianshuxuannvdishi2;
					player.removeSkill('snjs_boss_tianshuxuannvdishi2');
				},
			},
			snjs_boss_tianshuxuannvjiutian:{
				audio:"ext:神怒降世:1",
				trigger:{
					player:"phaseZhunbeiBegin",
				},
				filter:function(event,player){
					return game.hasPlayer(function(current){
						return current!=player&&!current.isFriendsOf(player)&&current.countCards('h')>2;
					});
				},
				forced:true,
				direct:true,
				content:function(){
					"step 0"
					event.mubiao2=[];
					event.huodepai=[];
					event.huaseshu=[];
					event.mubiao=game.filterPlayer(function(current){
						return current!=player&&!current.isFriendsOf(player)&&current.countCards('h')>2;
					});
					if(event.mubiao.length>0) event.count=0;
					else event.finish();
					"step 1"
					event.suits=[];
					event.cards=event.mubiao[event.count].getCards('h');
					for(var i=0;i<event.cards.length;i++){
						if(!event.suits.contains(get.suit(event.cards[i]))) event.suits.push(get.suit(event.cards[i]));
					}
					"step 2"
					if(event.suits.length>2){
						event.huodepai.push(event.mubiao[event.count].getCards('h').randomGet());
						event.mubiao2.push(event.mubiao[event.count]);
					}
					"step 3"
					event.count++;
					"step 4"
					if(event.count<event.mubiao.length) event.goto(1);
					"step 5"
					if(event.mubiao2.length>0&&event.huodepai.length>0){
						player.logSkill('snjs_boss_tianshuxuannvjiutian',event.mubiao2);
						for(var i=0;i<event.mubiao2.length;i++){
							player.gain(event.huodepai[i],event.mubiao2[i],'giveAuto');
							if(!event.huaseshu.contains(get.suit(event.huodepai[i]))) event.huaseshu.push(get.suit(event.huodepai[i]));
						}
					}
					else event.finish();
					"step 6"
					if(event.huaseshu.length==event.mubiao2.length){
						for(var i=0;i<event.mubiao2.length;i++){
							event.mubiao2[i].damage('nocard');
						}
					}
				},
				ai:{
					threaten:1.5,
				},
			},
			snjs_boss_tianshuxuannvxuanlie:{
				audio:"ext:神怒降世:1",
				global:"snjs_boss_tianshuxuannvxuanlie2",
				trigger:{
					player:"phaseJieshuBegin",
				},
				filter:function(event,player){
					return game.hasPlayer(function(current){
						return current!=player&&current.hasSkill('snjs_boss_tianshuxuannvxuanlie3');
					});
				},
				forced:true,
				logTarget:function(event,player){
					var mubiao=game.filterPlayer(function(current){
						return current!=player&&current.hasSkill('snjs_boss_tianshuxuannvxuanlie3');
					});
					return mubiao;
				},
				content:function(){
					"step 0"
					event.mubiao=game.filterPlayer(function(current){
						return current!=player&&current.hasSkill('snjs_boss_tianshuxuannvxuanlie3');
					});
					"step 1"
					if(event.mubiao.length){
						for(var i=0;i<event.mubiao.length;i++){
							event.mubiao[i].damage('nocard');
						}
					}
				},
				ai:{
					threaten:1.5,
				},
			},
			snjs_boss_tianshuxuannvxuanlie2:{
				trigger:{
					global:"gainEnd",
				},
				filter:function(event,player){
					if(player==event.player||player.hasSkill('snjs_boss_tianshuxuannvxuanlie3')) return false;
					if(!event.player.hasSkill('snjs_boss_tianshuxuannvxuanlie')) return false;
					if(_status.currentPhase!=event.player) return false;
					var evt=event.getl(player);
					return evt&&evt.cards2&&evt.cards2.length>0;
				},
				firstDo:true,
				silent:true,
				unique:true,
				forced:true,
				popup:false,
				content:function(){
					player.addTempSkill('snjs_boss_tianshuxuannvxuanlie3');
				},
			},
			snjs_boss_tianshuxuannvxuanlie3:{
				mod:{},
				firstDo:true,
				silent:true,
				unique:true,
				forced:true,
				popup:false,
			},
			snjs_boss_tianshukuafuzhuri:{
				audio:"ext:神怒降世:1",
				trigger:{
					player:"phaseZhunbeiBegin",
				},
				forced:true,
				content:function(){
					"step 0"
					player.judge(function(card){
						if(get.color(card)=='red') return 1;
						return 1;
					});
					"step 1"
					if(result.color=='red'){
						player.addTempSkill('snjs_boss_tianshukuafuzhuri_red');
					}
					else player.addTempSkill('snjs_boss_tianshukuafuzhuri_black');
				},
				subSkill:{
					red:{
						mark:true,
						intro:{
							name:"逐日",
							content:"本回合使用的红牌结算后，将其置于牌堆底",
						},
						trigger:{
							player:"useCardAfter",
						},
						filter:function(event,player,name){
							if(event.cards.filterInD().length<=0) return false;
							return get.color(event.card)=='red';
						},
						silent:true,
						unique:true,
						forced:true,
						content:function(){
							"step 0"
							event.cards=trigger.cards.filterInD();
							if(event.cards.length>1){
								player.chooseButton(true,event.cards.length,['按顺序将卡牌置于牌堆顶（后选择的在牌堆底）',event.cards]).set('ai',function(button){
									var value=get.value(button.link);
									if(_status.event.reverse) return value;
									return -value;
								}).set('reverse',((_status.currentPhase&&_status.currentPhase.next)?get.attitude(player,_status.currentPhase.next)>0:false))
							}
							"step 1"
							if(result.bool&&result.links&&result.links.length) cards=result.links.slice(0);
							while(cards.length){
								var card=cards.pop();
								if(get.position(card,true)=='o'){
									card.fix();
									ui.cardPile.appendChild(card);
									game.log(player,'将',card,'置于牌堆底');
								}
							}
							game.updateRoundNumber();
						},
						sub:true,
					},
					black:{
						mark:true,
						intro:{
							name:"逐日",
							content:"本回合使用黑牌时，摸一张牌",
						},
						trigger:{
							player:"useCard",
						},
						filter:function(event,player){
							return get.color(event.card)=='black';
						},
						silent:true,
						unique:true,
						forced:true,
						content:function(){
							player.draw();
						},
						sub:true,
					},
				},
				ai:{
					threaten:1.5,
				},
			},
			snjs_boss_tianshukuafuyinjiang:{
				audio:"ext:神怒降世:1",
				trigger:{
					player:"drawEnd",
				},
				filter:function(event,player){
					return player.isPhaseUsing();
				},
				forced:true,
				content:function(){
					"step 0"
					event.card=get.bottomCards(1);
					player.gain(event.card,'log','gain2');
					"step 1"
					if(get.color(event.card)=='red'){
						event.mubiao=game.filterPlayer(function(current){
							return current!=player&&!current.isFriendsOf(player);
						}).randomGets(1);
					}
					else event.finish();
					"step 2"
					if(event.mubiao.length){
						player.line(event.mubiao[0]);
						event.mubiao[0].damage('nocard');
					}
				},
				ai:{
					threaten:2,
				},
			},
			snjs_boss_tianshukuafulieben:{
				audio:"ext:神怒降世:1",
				shaRelated:true,
				trigger:{
					player:"useCard",
				},
				filter:function(event,player){
					return event.card.name=='sha';
				},
				forced:true,
				content:function(){
					"step 0"
					event.card=get.bottomCards(1);
					var card=event.card.pop();
					card.fix();
					ui.cardPile.insertBefore(card,ui.cardPile.firstChild);
					game.updateRoundNumber();
					"step 1"
					player.judge(function(card){
						if(get.color(card)=='red') return 3;
						return -1;
					});
					"step 2"
					if(result.color=='red'){
						if(trigger.addCount!==false){
							trigger.addCount=false;
							trigger.player.getStat().card.sha--;
						}
						trigger.baseDamage++;
					}
				},
				ai:{
					threaten:1.5,
				},
			},
			
			snjs_tianshuluandou_tiaoxin:{
				audio:"ext:神怒降世:2",
				enable:'phaseUse',
				usable:2,
				filter:function(event,player){
					if(player.getStat('skill').snjs_tianshuluandou_tiaoxin) return !player.hasSkill('snjs_tianshuluandou_tiaoxin2');
					return true;
				},
				filterTarget:function(card,player,target){
					return target!=player&&target.countCards('he')>0;
				},
				content:function(){
					"step 0"
					target.chooseToUse(function(card,player,event){
						if(get.name(card)!='sha') return false;
						return lib.filter.filterCard.apply(this,arguments);
					},'〖挑衅〗：对'+get.translation(player)+'使用一张杀，或令其弃置你的一张牌').set('targetRequired',true).set('complexSelect',true).set('filterTarget',function(card,player,target){
						if(target!=_status.event.sourcex&&!ui.selected.targets.contains(_status.event.sourcex)) return false;
						return lib.filter.filterTarget.apply(this,arguments);
					}).set('sourcex',player);
					"step 1"
					if(result.bool&&player.getHistory('damage',function(evt){
						return evt.getParent().type=='card'&&evt.getParent(4)==event;
					}).length>0) player.addTempSkill('snjs_tianshuluandou_tiaoxin2','phaseUseEnd');
					else if(target.countDiscardableCards(player,'he')>0) player.discardPlayerCard(target,'he',true).boolline=true;
				},
				ai:{
					order:4,
					expose:0.2,
					result:{
						target:-1,
						player:function(player,target){
							if(target.countCards('h')==0) return 0;
							if(target.countCards('h')==1) return -0.1;
							if(player.hp<=2) return -2;
							if(player.countCards('h','shan')==0) return -1;
							return -0.5;
						}
					},
					threaten:1.1
				}
			},
			snjs_tianshuluandou_tiaoxin2:{},
			snjs_tianshuluandou_jiuchi:{
				mod:{
					cardUsable:function(card,player,num){
						if(card.name=='jiu') return Infinity;
					},
				},
				audio:"ext:神怒降世:2",
				enable:'chooseToUse',
				filterCard:function(card){
					return get.suit(card)=='spade';
				},
				viewAs:{name:'jiu'},
				position:'hs',
				viewAsFilter:function(player){
					if(!player.countCards('hs',{suit:'spade'})) return false;
					return true;
				},
				prompt:'将一张♠手牌当酒使用',
				check:function(cardx,player){
					if(player&&player==cardx.player) return true;
					if(_status.event.type=='dying') return 1;
					var player=_status.event.player;
					var shas=player.getCards('hs',function(card){
						return card!=cardx&&get.name(card,player)=='sha';
					});
					if(!shas.length) return -1;
					if(shas.length>1&&(player.getCardUsable('sha')>1||player.countCards('hs','zhuge'))){
						return 0;
					}
					shas.sort(function(a,b){
						return get.order(b)-get.order(a);
					});
					var card=false;
					if(shas.length){
						for(var i=0;i<shas.length;i++){
							if(shas[i]!=cardx&&lib.filter.filterCard(shas[i],player)){
								card=shas[i];break;
							}
						}
					}
					if(card){
						if(game.hasPlayer(function(current){
							return (get.attitude(player,current)<0&&
							!current.hasShan()
							&&current.hp+current.countCards('h',{name:['tao','jiu']})>1+(player.storage.jiu||0)
							&&player.canUse(card,current,true,true)&&
							!current.hasSkillTag('filterDamage',null,{
								player:player,
								card:card,
								jiu:true,
							})&&
							get.effect(current,card,player)>0);
						})){
							return 4-get.value(cardx);
						}
					}
					return -1;
				},
				ai:{
					threaten:1.5,
				},
			},
			snjs_tianshuluandou_quhu:{
				audio:"ext:神怒降世:2",
				enable:'phaseUse',
				usable:1,
				filter:function(event,player){
					if(player.countCards('h')==0) return false;
					return game.hasPlayer(function(current){
						return current.countCards('h')&&current!=player;
					});
				},
				filterTarget:function(card,player,target){
					return player.canCompare(target)&&target!=player;
				},
				content:function(){
					"step 0"
					player.chooseToCompare(target);
					"step 1"
					if(result.bool){
						if(game.hasPlayer(function(player){
							return player!=target&&target.inRange(player);
						})){
							player.chooseTarget(function(card,player,target){
								var source=_status.event.source;
								return target!=source&&source.inRange(target);
							},true).set('ai',function(target){
								return get.damageEffect(target,_status.event.source,player);
							}).set('source',target);
						}
						else{
							event.finish();
						}
					}
					else{
						player.damage(target);
						event.finish();
					}
					"step 2"
					if(result.bool&&result.targets&&result.targets.length){
						target.line(result.targets[0],'green');
						result.targets[0].damage(target);
					}
				},
				ai:{
					order:0.5,
					result:{
						target:function(player,target){
							var att=get.attitude(player,target);
							var oc=(target.countCards('h')==1);
							if(att>0&&oc) return 0;
							var players=game.filterPlayer();
							for(var i=0;i<players.length;i++){
								if(players[i]!=target&&players[i]!=player&&
									target.inRange(players[i])){
									if(get.damageEffect(players[i],target,player)>0){
										return att>0?att/2:att-(oc?5:0);
									}
								}
							}
							return 0;
						},
						player:function(player,target){
							if(target.hasSkillTag('jueqing',false,target)) return -10;
							var mn=1;
							var hs=player.getCards('h');
							for(var i=0;i<hs.length;i++){
								mn=Math.max(mn,hs[i].number);
							}
							if(mn<=11&&player.hp<2) return -20;
							var max=player.maxHp-hs.length;
							var players=game.filterPlayer();
							for(var i=0;i<players.length;i++){
								if(get.attitude(player,players[i])>2){
									max=Math.max(Math.min(5,players[i].hp)-players[i].countCards('h'),max);
								}
							}
							switch(max){
								case 0:return mn==13?0:-20;
								case 1:return mn>=12?0:-15;
								case 2:return 0;
								case 3:return 1;
								default:return max;
							}
						}
					},
					expose:0.2
				}
			},
			snjs_tianshuluandou_pojun:{
				shaRelated:true,
				audio:"ext:神怒降世:2",
				group:'repojun3',
				trigger:{player:'useCardToPlayered'},
				direct:true,
				filter:function(event,player){
					return event.card.name=='sha'&&event.target.hp>0&&event.target.countCards('he')>0;
				},
				content:function(){
					'step 0'
					var next=player.choosePlayerCard(trigger.target,'he',[1,Math.min(trigger.target.hp,trigger.target.countCards('he'))],get.prompt('snjs_tianshuluandou_pojun',trigger.target));
					next.set('ai',function(button){
						if(!_status.event.goon) return 0;
						var val=get.value(button.link);
						if(button.link==_status.event.target.getEquip(2)) return 2*(val+3);
						return val;
					});
					next.set('goon',get.attitude(player,trigger.target)<=0);
					next.set('forceAuto',true);
					'step 1'
					if(result.bool){
						event.cards=result.cards;
						var target=trigger.target;
						player.logSkill('snjs_tianshuluandou_pojun',trigger.target);
						target.addSkill('snjs_tianshuluandou_pojun2');
						target.markAuto('snjs_tianshuluandou_pojun2',result.cards);
						target.lose(result.cards,ui.special,'toStorage');
						target.markSkill('snjs_tianshuluandou_pojun2');
						game.log(target,'失去了'+get.cnNumber(result.cards.length)+'张牌');;
					}
					else event.finish();
					'step 2'
					var discard=false,draw=false;
					for(var i of cards){
						var type=get.type2(i);
						if(type=='equip') discard=true;
						if(type=='trick') draw=true;
					}
					if(discard){
						event.equip=true;
						player.chooseButton(['〖破军〗：选择一张牌置入弃牌堆',cards.filter(function(card){
							return get.type(card)=='equip';
						})],true).set('ai',function(button){
							return get.value(button.link,_status.event.getTrigger().target);
						});
					}
					if(draw) event.draw=true;
					'step 3'
					if(event.equip&&result.links&&result.links.length){
						trigger.target.unmarkAuto('snjs_tianshuluandou_pojun2',result.links);
						trigger.target.$throw(result.links,1000);
						game.log(player,'将',result.links,'置入了弃牌堆');
						game.cardsDiscard(result.links);
						if(!event.draw) game.delayx();
					}
					if(event.draw) player.draw();
				},
				ai:{
					unequip_ai:true,
					directHit_ai:true,
					skillTagFilter:function(player,tag,arg){
						if(get.attitude(player,arg.target)>0) return false;
						if(tag=='directHit_ai') return arg.target.hp>=Math.max(1,arg.target.countCards('h')-1);
						if(arg&&arg.name=='sha'&&arg.target.getEquip(2)) return true;
						return false;
					}
				},
			},
			snjs_tianshuluandou_pojun2:{
				init:function(player){
					if(!player.storage.snjs_tianshuluandou_pojun2) player.storage.snjs_tianshuluandou_pojun2=[];
				},
				trigger:{
					global:"phaseEnd",
					player:"dieBegin",
				},
				forced:true,
				popup:false,
				charlotte:true,
				filter:function(event,player,name){
					if(name=="phaseEnd") return player.storage.snjs_tianshuluandou_pojun2&&player.storage.snjs_tianshuluandou_pojun2.length>0;
					else return true;
				},
				content:function(){
					"step 0"
					if(event.triggername=="phaseEnd"){
						game.log(player,'收回了'+get.cnNumber(player.gain(player.storage.snjs_tianshuluandou_pojun2,'draw','fromStorage').cards.length)+'张〖破军〗牌');
					}
					else{
						var qipaile=player.storage.snjs_tianshuluandou_pojun2;
						player.$throw(qipaile,1000);
						game.delayx();
						game.cardsDiscard(qipaile);
						game.log(qipaile,'被置入了弃牌堆');
					}
					"step 1"
					player.storage.snjs_tianshuluandou_pojun2.length=0;
					player.removeSkill('snjs_tianshuluandou_pojun2');
				},
				marktext:"破军",
				intro:{
					name:"破军",
					onunmark:function(storage,player){
						if(storage&&storage.length){
							player.$throw(storage,1000);
							game.cardsDiscard(storage);
							game.log(storage,'被置入了弃牌堆');
							storage.length=0;
						}
					},
					content:'cardCount',
				},
			},
			snjs_tianshuluandou_xingri:{
				audio:"ext:神怒降世:1",
				trigger:{
					source:"damageBegin1",
				},
				filter:function(event,player){
					return player==event.source;
				},
				forced:true,
				content:function(){
					"step 0"
					trigger.nature="fire";
					"step 1"
					if(trigger.nature=="fire") player.draw();
				},
				ai:{
					fireAttack:true,
				},
			},
			snjs_tianshuluandou_kuimu:{
				audio:"ext:神怒降世:1",
				trigger:{
					source:"damageSource",
				},
				filter:function(event,player){
					if(!event.card) return false;
					if(event.card.name!='sha') return false;
					return game.hasPlayer(function(current){
						return current!=player&&!current.isFriendsOf(player);
					});
				},
				forced:true,
				logTarget:function(event,player){
					var mubiao=game.filterPlayer(function(current){
						return current!=player&&!current.isFriendsOf(player);
					});
					return mubiao;
				},
				content:function(){
					"step 0"
					event.mubiao=game.filterPlayer(function(current){
						return current!=player&&!current.isFriendsOf(player);
					});
					"step 1"
					if(event.mubiao.length){
						for(var i=0;i<event.mubiao.length;i++){
							event.mubiao[i].damage('nocard');
						}
					}
				},
			},
			snjs_tianshuluandou_nutao:{
				audio:"ext:神怒降世:1",
				trigger:{
					player:"phaseZhunbeiBegin",
				},
				filter:function(event,player){
					return game.hasPlayer(function(current){
						return current!=player&&!current.isFriendsOf(player);
					});
				},
				forced:true,
				logTarget:function(event,player){
					var mubiao=game.filterPlayer(function(current){
						return current!=player&&!current.isFriendsOf(player);
					});
					return mubiao;
				},
				content:function(){
					"step 0"
					event.mubiao=game.filterPlayer(function(current){
						return current!=player&&!current.isFriendsOf(player);
					});
					"step 1"
					if(event.mubiao.length){
						for(var i=0;i<event.mubiao.length;i++){
							event.mubiao[i].damage('thunder','nocard');
						}
					}
				},
				ai:{
					thunderAttack:true,
				},
			},
			snjs_tianshuluandou_yujian:{
				audio:"ext:神怒降世:1",
				trigger:{
					source:"damageBegin1",
				},
				filter:function(event,player){
					if(!event.card) return false;
					return event.card.name=='sha';
				},
				forced:true,
				content:function(){
					trigger.num++;
				},
			},
			snjs_tianshuluandou_kangjin:{
				audio:"ext:神怒降世:1",
				trigger:{
					target:"useCardToTarget",
				},
				filter:function(event,player){
					return get.type(event.card)=='trick'&&game.hasPlayer(function(current){
						return current==player||current.isFriendsOf(player);
					});
				},
				forced:true,
				logTarget:function(event,player){
					var mubiao=game.filterPlayer(function(current){
						return current==player||current.isFriendsOf(player);
					});
					return mubiao;
				},
				content:function(){
					"step 0"
					event.mubiao=game.filterPlayer(function(current){
						return current==player||current.isFriendsOf(player);
					});
					"step 1"
					if(event.mubiao.length) game.asyncDraw(event.mubiao);
				},
			},
			snjs_tianshuluandou_yihuo:{
				audio:"ext:神怒降世:1",
				trigger:{
					source:["damageBegin1","damageSource"],
				},
				filter:function(event,player,name){
					if(name=="damageSource") return event.nature=="fire"&&player==event.source&&!event.player.isFriendsOf(player)&&game.hasPlayer(function(current){
						return current!=player&&!current.isFriendsOf(player);
					});
					return player==event.source;
				},
				direct:true,
				forced:true,
				content:function(){
					"step 0"
					if(event.triggername=="damageSource"){
						event.mubiao=game.filterPlayer(function(current){
							return current!=player&&!current.isFriendsOf(player);
						});
					}
					else{
						player.logSkill('snjs_tianshuluandou_yihuo');
						trigger.nature="fire";
						event.finish();
					}
					"step 1"
					if(event.mubiao.length){
						player.logSkill('snjs_tianshuluandou_yihuo',event.mubiao);
						for(var i=0;i<event.mubiao.length;i++){
							if(event.mubiao[i].countCards('he')){
								var card=event.mubiao[i].getCards('he').randomGet();
								event.mubiao[i].discard(card);
							}
						}
					}
				},
				ai:{
					fireAttack:true,
				},
			},
			snjs_tianshuluandou_yehuo:{
				audio:"ext:神怒降世:1",
				trigger:{
					player:"phaseJieshuBegin",
				},
				filter:function(event,player){
					return game.hasPlayer(function(current){
						return current!=player&&!current.isFriendsOf(player);
					});
				},
				direct:true,
				content:function(){
					"step 0"
					player.chooseTarget(get.prompt('snjs_tianshuluandou_yehuo'),function(card,player,target){
						return target!=player;
					}).ai=function(target){
						return get.damageEffect(target,_status.event.player,_status.event.player,'fire');
					};
					"step 1"
					if(result.bool){
						player.logSkill('snjs_tianshuluandou_yehuo',result.targets[0]);
						result.targets[0].damage(2,'fire','nocard');
					}
				},
				ai:{
					fireAttack:true,
				},
			},
			snjs_tianshuluandou_jinniu:{
				audio:"ext:神怒降世:1",
				trigger:{
					player:"phaseJieshuBegin",
				},
				forced:true,
				content:function(){
					if(player.isDamaged()) player.recover();
					player.draw(2);
				},
			},
			snjs_tianshuluandou_jiaomu:{
				audio:"ext:神怒降世:1",
				trigger:{
					player:"useCard",
				},
				filter:function(event,player){
					return get.type(event.card)=='trick'&&game.hasPlayer(function(current){
						return current==player||current.isFriendsOf(player);
					});
				},
				forced:true,
				logTarget:function(event,player){
					var mubiao=game.filterPlayer(function(current){
						return current==player||current.isFriendsOf(player);
					});
					return mubiao;
				},
				content:function(){
					"step 0"
					event.mubiao=game.filterPlayer(function(current){
						return current==player||current.isFriendsOf(player);
					});
					"step 1"
					if(event.mubiao.length) game.asyncDraw(event.mubiao);
				},
			},
			snjs_tianshuluandou_canshui:{
				audio:"ext:神怒降世:1",
				trigger:{
					source:"damageSource",
				},
				filter:function(event,player){
					if(!event.card) return false;
					if(event.card.name!='sha') return false;
					return game.hasPlayer(function(current){
						return current==player||current.isFriendsOf(player);
					});
				},
				forced:true,
				logTarget:function(event,player){
					var mubiao=game.filterPlayer(function(current){
						return current==player||current.isFriendsOf(player);
					});
					return mubiao;
				},
				content:function(){
					"step 0"
					event.mubiao=game.filterPlayer(function(current){
						return current==player||current.isFriendsOf(player);
					});
					"step 1"
					if(event.mubiao.length){
						for(var i=0;i<event.mubiao.length;i++){
							if(event.mubiao[i].isDamaged()) event.mubiao[i].recover();
						}
					}
				},
			},
			snjs_tianshuluandou_weiyue:{
				audio:"ext:神怒降世:1",
				trigger:{
					player:["loseEnd","gainEnd","phaseDrawBegin"],
				},
				filter:function(event,player,name){
					if(name=="phaseDrawBegin") return true;
					else{
						if(player.hasSkill('snjs_tianshuluandou_weiyue_jilu2')||player.hasSkill('snjs_tianshuluandou_weiyue_jilu')) return false;
						var evt=event.getl(player);
						if(name=="loseEnd") return evt&&evt.hs&&evt.hs.length;
						return true;
					}
				},
				direct:true,
				content:function(){
					"step 0"
					if(event.triggername!="phaseDrawBegin"){
						player.chooseTarget(get.prompt('snjs_tianshuluandou_weiyue'),function(card,player,target){
							return target!=player;
						}).ai=function(target){
							return get.damageEffect(target,_status.event.player,_status.event.player);
						};
					}
					else{
						player.addTempSkill('snjs_tianshuluandou_weiyue_jilu2',{player:'phaseDrawEnd'});
						event.finish();
					}
					"step 1"
					if(result.bool){
						player.addTempSkill('snjs_tianshuluandou_weiyue_jilu');
						player.logSkill('snjs_tianshuluandou_weiyue',result.targets[0]);
						result.targets[0].damage('nocard');
					}
				},
				subSkill:{
					jilu:{
						silent:true,
						unique:true,
						forced:true,
						sub:true,
						popup:false,
					},
					jilu2:{
						silent:true,
						unique:true,
						forced:true,
						sub:true,
						popup:false,
					},
				},
			},
			snjs_tianshuluandou_doumu:{
				audio:"ext:神怒降世:1",
				trigger:{
					player:["loseEnd","gainEnd","phaseDrawBegin"],
				},
				filter:function(event,player,name){
					if(name=="phaseDrawBegin") return true;
					else{
						if(player.hasSkill('snjs_tianshuluandou_doumu_jilu2')||player.hasSkill('snjs_tianshuluandou_doumu_jilu')) return false;
						var evt=event.getl(player);
						if(name=="loseEnd") return evt&&evt.hs&&evt.hs.length;
						return true;
					}
				},
				direct:true,
				content:function(){
					"step 0"
					if(event.triggername!="phaseDrawBegin"){
						player.chooseTarget(get.prompt('snjs_tianshuluandou_doumu'),function(card,player,target){
							return target!=player;
						}).ai=function(target){
							return get.effect(target,{name:'juedou'},target,_status.event.player);
						};
					}
					else{
						player.addTempSkill('snjs_tianshuluandou_doumu_jilu2',{player:'phaseDrawEnd'});
						event.finish();
					}
					"step 1"
					if(result.bool){
						player.addTempSkill('snjs_tianshuluandou_doumu_jilu');
						player.logSkill('snjs_tianshuluandou_doumu',result.targets[0]);
						var card=result.targets[0].getCards('he').randomGet();
						result.targets[0].discard(card);
						player.useCard({name:'juedou',isCard:true},result.targets[0]);
					}
				},
				subSkill:{
					jilu:{
						silent:true,
						unique:true,
						forced:true,
						sub:true,
						popup:false,
					},
					jilu2:{
						silent:true,
						unique:true,
						forced:true,
						sub:true,
						popup:false,
					},
				},
			},
        	},
				characterIntro:{
            "snjs_shen_zhangfei":"张飞（？—221年），字益德（《华阳国志》作翼德），涿郡（今河北保定涿州市）人，三国时期蜀汉名将。张飞勇武过人，与结拜兄弟关羽并称为“万人敌”。关羽年长数岁，张飞兄事之。公元184年黄巾起义爆发，刘备在涿县组织起了一支义勇军参与扑灭黄巾军的战争，张飞与关羽一起加入，随刘备辗转各地。三人情同兄弟，寝则同床，刘备出席各种宴会时，和关羽终日侍立在刘备身旁。公元196年因交恶曹豹而被吕布所破。吕布败亡之后，张飞被任命为中郎将。公元200年刘备衣带诏事情泄漏，率领关羽、张飞逃走，杀徐州刺史车胄。后刘备战败，关羽被擒，刘备与张飞投奔袁绍。公元208年刘备于长坂坡败退时，张飞仅率二十骑断后，据当阳桥厉声大喝，曹军无人敢逼近，刘备因此得以免难。 刘备入蜀后，张飞与诸葛亮、赵云进军西川，分定郡县。在抵达江州时义释了刘璋手下的巴郡太守严颜。在巴西之战中，击败魏国名将张郃。在武都之战中，兵败而还。刘备称帝后，张飞晋升为车骑将军、领司隶校尉，封西乡侯。同年，张飞因为暴而无恩，被部将范强、张达杀害，年仅五十五岁。谥曰桓侯。",
            "snjs_sp_shen_sunce":"孙策（175年～200年5月5日），字伯符，吴郡富春（今浙江省杭州市富阳区）人。破虏将军孙坚长子、吴大帝孙权长兄。东汉末年割据江东一带的军阀，汉末群雄之一，孙吴政权的奠基者之一。 为继承父亲孙坚的遗业而屈事袁术，兴平二年（195年），孙策征得袁术许可，东渡长江，进攻樊能、于糜，又在当利口袭击张英。并以曲阿为据点，与扬州刺史刘繇进行决战，大败刘繇。建安元年（196年），率兵进攻会稽王朗和吴郡严白虎。建安二年（197年），袁术僭越称帝后，孙策与袁术决裂；同年夏，被朝廷任命为骑都尉，袭父爵乌程侯，兼任会稽太守。建安三年（198年），朝廷任命孙策为讨逆将军，并封为吴侯。建安四年（199年），孙策击败庐江太守刘勋及刘表部将黄祖。建安五年（200年）初，在夺取豫章郡后统一江东；同年4月，正当孙策准备发兵北上之时，在丹徒狩猎时为许贡三门客所伤，不久后身亡，年仅二十六岁。其弟孙权接掌孙策势力，并于称帝后，追谥孙策为长沙桓王。",
            "snjs_shen_liuyan":"刘焉（？－194年），字君郎（《华阳国志》又作君朗）。江夏郡竟陵县（今湖北省天门市）人。东汉末年宗室、军阀，汉末群雄之一，西汉鲁恭王刘余之后。 刘焉初以汉朝宗室身份，拜为中郎，历任雒阳令、冀州刺史、南阳太守、宗正、太常等官。因益州刺史郄俭在益州大肆聚敛，贪婪成风，加上当时天下大乱。刘焉欲取得一安身立命之所，割据一方，于是向朝廷求为益州牧，封阳城侯，前往益州整饬吏治。郄俭为黄巾军所杀，刘焉进入益州，派张鲁盘踞汉中，张鲁截断交通，斩杀汉使，从此益州与中央道路不通。刘焉进一步对内打击地方豪强，巩固自身势力，益州因而处于半独立的状态。 兴平元年（194年），刘焉因背疮迸发而逝世，其子刘璋继领益州牧。",
            "snjs_re_shen_guanyu":"关羽（？~220年），字云长，小字长生，河东郡解县（今山西省运城市盐湖区解州镇）人。汉末三国时期名将。 早年犯事，流落到涿郡，和刘备、张飞情同兄弟。参与镇压黄巾起义，跟随刘备颠沛流离。雄壮威猛，号称“万人敌”、雅号“美髯公”。徐州战败后，暂时投靠曹操，亲自斩杀颜良，受封汉寿亭侯。离开曹操，回到刘备身边。赤壁之战后，参与攻取荆州地区。刘备入川后，奉命镇守荆州，加号前将军。建安二十四年，水陆并进，围攻襄阳和樊城。水淹七军，全歼于禁援军，威震华夏，使得曹操一度产生迁都想法。面对孙权部下吕蒙、陆逊袭击后方，曹操部将徐晃正面夹击的局面，进退失据，兵败被杀。后主刘禅即位，追谥壮缪。 关羽去世后，民间尊为“关公”，历代朝廷多有褒封。清朝雍正时期，尊为“武圣”，与“文圣” 孔子地位等同。在小说《三国演义》中，名列“五虎上将”之首，使用青龙偃月刀。毛宗岗称其为《演义》三绝中的“义绝”。",
            "snjs_shen_machao":"马超（176年－222年），字孟起，扶风茂陵人（今陕西省兴平市），汉伏波将军马援的后人，马腾的儿子，少年成名，曹操曾多次征召马超入京为官，但都被马超拒绝。而后马腾入京被封为卫尉，马超就统领了马腾的部队。 建安十六年（211年），曹操治兵关中，马超联合关中诸侯韩遂等抵抗曹操，曾一度对曹操造成了极大的威胁，但被曹操用离间计击败退走，而后聚拢部队再次攻取陇上诸郡，失败后依附汉中张鲁。 刘备攻打刘璋时，马超投降刘备，与刘备军合围成都，汉中之战后联名上书尊刘备为汉中王。蜀汉建立后，马超官至骠骑将军、斄乡侯。章武二年（222年）马超病死，终年四十七岁，刘禅时期被追谥为威侯。有一女嫁于安平王刘理。有剑术“出手法”流传后世。",
            "snjs_re_shen_zhangliao":"张辽（169年～222年），字文远，雁门马邑（今山西省朔州市）人。汉末三国时期曹魏名将，聂壹的后人。 起初，担任雁门郡吏。又先后跟随丁原、何进、董卓、吕布，恪尽职守，历尽坎坷。吕布败亡后，张辽归属曹操。此后，立下众多显赫的功勋。洞察敌情而劝降昌豨。攻袁氏而转战河北。在白狼山之战率领先锋大破乌桓并斩杀乌桓单于蹋顿。驱逐辽东大将柳毅。以静制动平定军中谋反。进军江淮击灭陈兰、梅成。此后，长期镇守合肥。 建安二十年（215年），合肥之战，张辽率领八百将士冲击东吴十万大军，一直冲杀到孙权的主帅旗下，令东吴军队披靡溃败、闻风丧胆。又率领追兵，大破孙权、甘宁、凌统等人，差点活捉孙权。经此一役，张辽威震江东。 “张辽止啼”成为流传千古的典故。 黄初元年（220年），张辽进封晋阳侯。染病之后，依旧令孙权非常忌惮。黄初三年（222年），张辽抱病击破吴将吕范。同年，病逝于江都，谥曰刚侯。张辽为历代所推崇，成为古今六十四名将之一。",
            "snjs_sp_shen_guojia":"郭嘉（170年－207年），字奉孝，颍川阳翟（今河南禹州）人。东汉末年曹操帐下著名谋士。 郭嘉原为袁绍部下，后转投曹操，为曹操统一中国北方立下了功勋，官至军师祭酒，封洧阳亭侯。在曹操征伐乌丸时病逝，年仅三十八岁。谥号贞侯。 史书上称他“才策谋略，世之奇士”。曹操称赞他见识过人，是自己的“奇佐”。",
            "snjs_re_shen_zhouyu":"周瑜（175年-210年），字公瑾，庐江舒人 。东汉末年名将，出身庐江周氏，洛阳令周异之子，堂祖父周景、堂叔周忠，都官至太尉。长壮有姿貌、精音律，江东有“曲有误，周郎顾”之语。 周瑜少与孙策交好，21岁起随孙策奔赴战场平定江东，后孙策遇刺身亡，孙权继任，周瑜将兵赴丧，以中护军的身份与长史张昭共掌众事。建安十三年 （208年），周瑜率军与刘备联合，于赤壁之战中大败曹操，由此奠定了“三分天下”的基础。又率军大破曹仁，拜偏将军领南郡太守。建安十五年（210年）病逝于巴丘，年仅36岁。 正史上周瑜“性度恢廓”“实奇才也”，孙权称赞周瑜有“王佐之资\"，范成大誉之为“世间豪杰英雄士、江左风流美丈夫”。宋徽宗时追尊其为平虏伯。位列唐武庙六十四将、宋武庙七十二将之一。",
            "snjs_re_shen_lvmeng":"吕蒙（178年～220年），字子明，汝南郡富陂县（今安徽省阜南县王化镇吕家岗）人。东汉末年名将。早年依附姊夫邓当，跟随孙策征战，以胆气著称。邓当死后，吕蒙统领其部众，拜别部司马。孙权统事后，吕蒙渐受重用，从破黄祖作先登，封横野中郎将。从破曹仁于南郡，从破朱光于皖城，累功拜庐江太守。进占荆州南部三郡，并计擒郝普。在逍遥津之战掩护孙权逃生。在濡须抵御魏军。官拜左护军、虎威将军。鲁肃去世后，吕蒙代守陆口，袭取荆州西部三郡，彻底击败蜀汉名将关羽，拜南郡太守，封孱陵侯，受勋殊隆。 建安二十四年（219年）的年末（220年初），因病去世，享年四十二岁。 吕蒙是东吴攻灭关羽的最早倡议者。吕蒙针对于关羽所督的荆州，215年夺取三郡，219年再夺三郡，最终使得东吴国土面积大增，实现了“全据长江”的宿愿。其发愤勤学的事迹，成为中国古代将勤补拙、笃志力学的代表，相关典故“士别三日”、“刮目相待”、“吴下阿蒙”等。",
            "snjs_re_shen_lvbu":"吕布（？～199年2月7日），字奉先，并州五原郡九原县人。东汉末年群雄之一。 善于骑射，骁勇尚武，号称“飞将”，时称“人中吕布，马中赤兔”。初为并州牧丁原部将，授骑都尉、河内主簿。杀死丁原，成为董卓的义子，授中郎将。受到董卓猜疑，在司徒王允唆使，诛杀董卓，迁奋武将军、开府仪同三司，进封温县侯。旋即被董卓旧部击败，便逃离长安。先投袁术，被袁术拒绝。改投袁绍，被袁绍猜忌。于是去依附张杨。 兴平元年（194年），吕布趁曹操攻打陶谦时与陈宫等联络而进入兖州，占据濮阳，与曹操血战两年，曾使曹操数战不利，但最终被曹操击败转而去依附徐州刘备。又趁刘备与袁术作战时袭取了徐州，与刘备时而和好，时而相互攻伐。期间，以辕门射戟化解刘备与纪灵的争斗。 建安三年（198年），吕布遣将击败刘备与夏侯惇后，曹操亲自出马征讨吕布，水淹下邳。吕布被部下叛变，于十二月癸酉（199年2月7日）城破被俘，被处死。 吕布以勇武闻名，号称“飞将”，时有“人中吕布，马中赤兔”之说。吕布所用的实战武器为矛。在《三国演义》及民间其他艺术形象，吕布多被塑造成三国第一猛将。其武器也被虚构为方天画戟。",
            "snjs_re_shen_caocao":"魏武帝曹操（155年～220年），字孟德，小名阿瞒、吉利，沛国谯县（今安徽省亳州市）人。中国古代杰出的政治家、军事家、文学家、书法家、诗人。东汉末年宰相，太尉曹嵩之子，曹魏政权的奠基者。 东汉末年，面对天下大乱，以汉献帝刘协名义征讨四方，对内消灭二袁、吕布、刘表、马超、韩遂等割据势力，对外降服南匈奴、乌桓、鲜卑等，统一中国北方地区，扩大屯田、兴修水利、奖励农桑、重视手工业、安置流民、实行“租调制”，促进中原地区经济生产和社会稳定。建安十八年（213年），获封魏公，建立魏国，定都邺城。建安二十一年（216年），册封魏王，权位在诸王之上。 建安二十五年（220年3月15日），去世，谥号为武，安葬于高陵。其子曹丕称帝，追封皇帝，谥号为武，庙号太祖。曹操喜欢用诗歌、散文抒发政治抱负，反映民生疾苦，是东汉文学的代表人物，被鲁迅称赞“改造文章的祖师”。擅长书法，被唐朝张怀瓘《书断》评为“妙品”。",
            "snjs_re_shen_zhugeliang":"诸葛亮（181年~234年10月8日），字孔明，号卧龙，琅琊阳都（今山东省沂南县）人，三国时期蜀汉丞相，中国古代杰出的政治家、军事家、文学家、改革家。 早年随叔父诸葛玄到荆州，诸葛玄死后，诸葛亮就在隆中隐居。后刘备三顾茅庐请出诸葛亮，联合东吴孙权于赤壁之战大败曹军。形成三国鼎足之势，又夺占荆州。建安十六年（211年），攻取益州。继又击败曹军，夺得汉中。蜀章武元年（221年），刘备在成都建立蜀汉政权，诸葛亮被任命为丞相，主持朝政。后主刘禅继位，诸葛亮被封为武乡侯，领益州牧。勤勉谨慎，大小政事必亲自处理，赏罚严明；与东吴联盟，改善和西南各族的关系；实行屯田政策，加强战备。前后五次北伐中原，多以粮尽无功。终因积劳成疾，于蜀建兴十二年（234年）病逝于五丈原（今陕西省宝鸡市岐山境内），享年五十四岁。刘禅追谥他为忠武侯，后世常以武侯尊称诸葛亮。东晋桓温追封他为武兴王。诸葛亮散文代表作有《出师表》《诫子书》等。曾发明木牛流马、孔明灯等，并改造连弩，叫做诸葛连弩，可一弩十矢俱发。诸葛亮一生“鞠躬尽瘁、死而后已”，是中国传统文化中忠臣与智者的代表人物。",
            "snjs_dianweicaoang":"典韦（？－197年），陈留己吾（今河南商丘市宁陵县己吾城村）人。东汉末年名将，曹操部将，相貌魁梧，膂力过人。本属张邈，曾单手举起牙门旗。后转投曹操，在曹操征讨吕布时被募为陷阵，表现英勇，被拜为校尉，宿卫曹操。建安二年（197年），张绣背叛曹操，典韦为保护曹操而率十余人挡叛军，击杀多人，但最终因寡不敌众而战死。 典韦武艺卓越，被史学家潘眉评价为：雄武壮烈，不在张辽、许褚之下。</br>曹昂（？～197年），字子脩，沛国谯县（今安徽省亳州市）人。曹操的长子，刘氏所生，但生母早亡是以由正室丁氏抚养大。二十岁时被举为孝廉。建安二年（197年）随曹操出征张绣，张绣降而复叛，曹昂为救曹操被杀。魏文帝黄初二年（221年），追封谥号丰悼公，黄初五年（224年）又进一步追封为丰悼王。太和三年（229年）年改谥号丰愍王。",
            "snjs_wenchou":"文丑（？~200年），东汉末年袁绍部将。 文丑为一夫之勇。建安五年（200年），带领左将军刘备进驻延津，误中曹操军师荀攸的“饵敌”之计，其麾下“五六千骑”惨败于“不满六百”的曹军骑兵。文丑本人也死于乱军之中，葬于河南省禹州市。 明代小说《三国演义》将此段历史改编为关羽斩文丑。",
            "snjs_yanliang":"颜良（？~200年），安平郡堂阳县（今河北省新河县）人。东汉末年袁绍部将。 颜良性格促狭，虽骁勇不可独任，为一夫之勇。官渡之战，袁绍令颜良进攻白马（今河南滑县）。司空曹操采用军师荀攸“声东击西、轻兵掩袭”之计，亲自率军兼行，击破颜良军。颜良本人也被关羽亲自斩杀死，白马之围遂解。 明代小说《三国演义》只保留了亲斩颜良的关羽之勇，而忽略了奠定胜局的荀攸之谋。",
            "snjs_sp_liubei":"汉昭烈帝刘备（161年－223年6月10日），字玄德，涿郡涿县（今河北省涿州市）人，西汉中山靖王刘胜之后，蜀汉开国皇帝、政治家。史家多称其为先主。 刘备少年时拜卢植为师，而后参与镇压黄巾起义、讨伐董卓等活动。因为自身实力有限，刘备在诸侯混战过程中屡屡遭受失败，所以先后依附公孙瓒、陶谦、曹操、袁绍、刘表等多个诸侯。但因其始终坚持以德服人的行为准则，受到了海内外名士的尊敬，至有陶谦、刘表等放弃让自己的儿子继承基业，而是选择将自己的领地徐州、荆州让给刘备统领。 通过坚持不懈的努力，刘备于赤壁之战后，先后拿下荆州、益州，建立了蜀汉政权。而后因为关羽被东吴所害，刘备不听群臣劝阻，执意发动对吴国的战争，结果兵败夷陵，最终于章武三年（223年）病逝于白帝城，终年六十三岁，谥号昭烈皇帝，《晋书·王弥传》称之为烈祖，葬惠陵。 刘备弘毅宽厚，知人待士，百折不挠，其临死前举国托付给诸葛亮的行为被陈寿赞为古今之盛轨，后世众多文艺作品以刘备为主角。成都武侯祠有昭烈庙为之纪念。",
            "snjs_re_shen_liubei":"汉昭烈帝刘备（161年－223年6月10日），字玄德，涿郡涿县（今河北省涿州市）人，西汉中山靖王刘胜之后，蜀汉开国皇帝、政治家。史家多称其为先主。 刘备少年时拜卢植为师，而后参与镇压黄巾起义、讨伐董卓等活动。因为自身实力有限，刘备在诸侯混战过程中屡屡遭受失败，所以先后依附公孙瓒、陶谦、曹操、袁绍、刘表等多个诸侯。但因其始终坚持以德服人的行为准则，受到了海内外名士的尊敬，至有陶谦、刘表等放弃让自己的儿子继承基业，而是选择将自己的领地徐州、荆州让给刘备统领。 通过坚持不懈的努力，刘备于赤壁之战后，先后拿下荆州、益州，建立了蜀汉政权。而后因为关羽被东吴所害，刘备不听群臣劝阻，执意发动对吴国的战争，结果兵败夷陵，最终于章武三年（223年）病逝于白帝城，终年六十三岁，谥号昭烈皇帝，《晋书·王弥传》称之为烈祖，葬惠陵。 刘备弘毅宽厚，知人待士，百折不挠，其临死前举国托付给诸葛亮的行为被陈寿赞为古今之盛轨，后世众多文艺作品以刘备为主角。成都武侯祠有昭烈庙为之纪念。",
            "snjs_shen_zhangxiu":"张绣（？—207年），武威郡祖厉（今甘肃靖远县）人也。骠骑将军张济的从子。东汉末年割据宛城的军阀，汉末群雄之一。曹魏时期，与段煨、贾诩、明元郭氏皇后是同乡，也是凉州豪族集团的代表人物。 初随张济征伐，张济死后与刘表联合。后降曹操，因不满其言行而突袭曹操，复与刘表连和。官渡之战前夕，听从贾诩的建议再次投降曹操，参加官渡之战，官至破羌将军，封宣威侯。 从征南皮而击破袁谭。后与曹操联姻，成为皇亲国戚。在北征乌桓（207年）途中因病去世，谥定侯。《三国演义》中称“北地枪王”。",
            "snjs_jiachong":"贾充（217年—282年），字公闾，平阳襄陵（今山西襄汾）人，魏晋时期大臣，曹魏豫州刺史贾逵之子。西晋王朝的开国元勋。 贾充曾参与镇压淮南二叛和弑杀魏帝曹髦，因此深得司马氏信任，其女儿贾褒（一名荃）及贾南风分别嫁予司马炎弟司马攸及次子司马衷，与司马氏结为姻亲，地位显赫。晋朝建立后，转任车骑将军、散骑常侍、尚书仆射，后升任司空、太尉等要职。更封鲁郡公。咸宁末，为使持节、假黄钺、大都督征讨吴国。吴国平定后，增邑八千户。 太康三年（282年），贾充去世。西晋朝廷追赠他为太宰，礼官议谥曰荒，司马炎不采纳，改谥为武。有集五卷。",
            "snjs_xiahouen":"夏侯恩是古典小说《三国演义》中的人物，为曹操随身之背剑心腹。曹操有宝剑二口：一名“倚天剑”，一名“青釭剑”。倚天剑镇威，青釭剑杀人。倚天剑曹操自佩之，青釭剑令夏侯恩佩之。那青釭剑削铁如泥，锋利无比。《三国演义》第四十一回《刘玄德携民渡江 赵子龙单骑救主》中描写：当时夏侯恩自恃勇力，背着曹操，只顾引人抢夺掳掠。不想撞着赵云，被他一枪刺死。青釭剑自此归赵云所有。",
            "snjs_houcheng":"侯成，东汉末年吕布帐下名将。曹操围下邳三个月之后，侯成与宋宪、魏续缚陈宫、高顺，率众降曹操。 在小说《三国演义》中，为吕布的八健将之一，吕布被酒色所伤故下禁酒令，侯成不知，献酒于吕布被吕布所打，遂降曹操。 偏传中曾记载侯成投降曹操后，在收复黄巾一战中，侯成斩杀黄巾大将高干。在官渡之战中魏续与宋宪被颜良所斩后，侯成放一冷箭射中颜良之袍。在赤壁之战一战中击退张昭之子张休。",
            "snjs_bianxi":"卞喜是小说《三国演义》中的文学人物。善使流星锤。本为黄巾党，后降曹操，为汜水关守关将。关羽千里寻兄之时途经汜水关，卞喜假意款待，实欲于席间谋杀关羽。关羽得到镇国寺僧人普净的警告而有所防备，尽杀刀斧手，卞喜也被关羽所斩。",
            "snjs_liuli":"刘刕，字三刀。生年不详，卒于汉献帝初平元年（公元190年）。东汉末年南阳淯阳人，祖籍中山魏昌（今河北无极东北），西汉中山靖王刘胜的后裔。其先人已不可考，东汉末著名将领，风流名士，海内所瞻。少与陈郡潘凤齐名，然名胜于潘凤。父亲早逝，少孤贫，侨居帝都南阳。生性冲约有远识，寡欲能让，尤善谈论。其所不知，则默如也。桥玄常引与谈论，自叹不如。陈蕃为太尉，举为秀才。陈蕃又荐之于何进，遂辟尚书郎，转太子舍人。累迁南蛮校尉，后转征西将军从事舍人。为政无当时功誉，然每去职，人常思其遗爱。后因名气大胜，决战吕布前惹二袁嫉妒，设计死于虎牢关前。",
            "snjs_guosheng":"郭胜，南阳宛（今河南南阳）人。汉灵帝时为中常侍，与张让、赵忠等狼狈为奸，并皆封侯。曾助同乡何进、何太后贵幸。后被袁绍等人率兵诛灭。",
            "snjs_jianshuo":"蹇硕（？—189年），东汉末宦官。中平五年（188年），蹇硕为上军校尉，汉灵帝以蹇硕壮健而有武略，对其特别信任，并以其为西园军元帅，领导袁绍、曹操等八校尉，以监督司隶校尉以下诸官。蹇硕虽然握有兵权，但对何进非常畏忌，曾和宦官们一起说服灵帝派遣何进西击边章、韩遂。中平六年（189年），灵帝在病重时将刘协托给蹇硕。灵帝去世后，蹇硕想先杀何进再立刘协为天子，但因手下司马潘隐与何进有旧对何进使眼色而失败。刘辩继承帝位后，蹇硕与中常侍赵忠、郭胜等写信欲合谋除去何进兄弟，因郭胜与何进为同郡且何进及何皇后发迹亦有其功劳于是亲信何氏便怂恿赵忠等人不听蹇硕之计，且将蹇硕的书信告知何进，何进于是便派黄门将之诛杀，其部下士兵亦被何进所领。",
            "snjs_chengkuang":"程旷（？——189）东汉宦官，十常侍之一。演义虚构人物。第一回 宴桃园豪杰三结义　斩黄巾英雄首立功 后张让、赵忠、封谞、段珪、曹节、侯览、蹇硕、程旷、夏恽、郭胜十人朋比为奸，号为“十常侍”。 第三回 议温明董卓叱丁原　馈金珠李肃说吕布 袁绍、曹操斩关入内。赵忠、程旷、夏恽、郭胜四个被赶至翠花楼前，剁为肉泥。",
            "snjs_fengxu":"封谞，东汉宦官。汉灵帝中平元年为中常侍，信黄巾道。约为黄巾起义的内应，事情败露被杀。演义中十常侍之一。结连黄巾军为内应，后张角弟子唐周叛变，大将军何进调兵擒马元义，斩之。次收封谞等一干人，下狱。",
            "snjs_duangui":"段珪（？—189），东汉宦官，“十常侍”之一。初为小黄门，珪在济阴，与中常侍侯览并立田业，近济北界，仆从宾客侵犯百姓，劫掠行旅。济北相滕延一切收捕，杀数十人，陈尸路衢。览、珪大怨，以事诉帝，延坐多杀无辜，征诣廷尉，免。后珪等为中常侍，封侯贵宠，父兄子弟布列州郡，所在贪贱，为人蠹害。中平六年八月，大将军何进谋诛宦官，张让等使人潜听，具闻其语，乃率常侍珪、毕岚等数十人，持兵窃自侧闼入，伏省中，及进出，因诈以太后诏召进，杀之。进部将见进首，引军入，珪等劫太后，尚书卢植执戈于阁道窗下，仰数段珪。段珪等惧，乃释太后。让、珪等困迫，遂将帝与陈留王数十人步出穀门，奔小平津。河南中部掾闵贡随植后。贡至，手剑斩数人，余皆投河而死。",
            "snjs_xiayun":"夏恽（？—189），东汉宦官。汉灵帝中平初为中常侍，宗亲依势横行于州郡。时中常侍吕强清忠奉公，为平息人民对朝廷不满情绪，建议汉灵帝先诛左右贪浊者、大赦党人。夏恽以吕强主张危及自身利益，遂与同僚赵忠等诬陷吕强与党人联合，诽谤朝廷。汉灵帝不察，致使吕强自杀，宗亲财产没入官府。",
            "snjs_houlan":"侯览（？—172年），山阳防东（今山东单县东北）人，东汉宦官。延熹年间赐爵为关内侯。因诛梁冀有功，进封高乡侯，后迁为长乐太仆。任官期间，专横跋扈，贪婪放纵，大肆抢掠官民财物。先后夺民田地一百一十八顷，宅第三百八十一所，模仿宫苑兴建府第十六处。他还掠夺妇女，肆虐百姓。为其母大起冢墓，督邮张俭破其家宅，藉没资财。侯览为了报复，诬张俭与长乐少府李膺、太仆杜密等为党人，造成历史上有名的党锢之祸，先后被杀被流放者三百余人，被囚禁者六、七百人。 熹平元年（172年），有司举奏侯览专权骄奢，下诏收其印绶，随即自杀身亡。其阿附者皆免官。",
            "snjs_caojie":"曹节（？―181年），字汉丰，南阳育阳（今河南省南阳市宛城区瓦店镇）人。东汉宦官。 因事入宫，累迁西园骑。汉顺帝时期，迁小黄门。汉桓帝继位，迁中常侍，加任奉车都尉。拥戴汉灵帝有功，册封长安乡侯。联合长乐五官史朱瑀等矫朝诛杀窦武、陈蕃等人，升任长乐卫尉，进封育阳县侯。建宁二年（169年），加位特进、大长秋。权倾朝野，诬害勃海王刘悝，累迁尚书令。 光和四年（181年），曹节去世，获赠车骑将军。",
            "snjs_sp_zhaozhong":"赵忠（？—189年），安平人，东汉末年宦官，赵延之兄。桓帝、灵帝时，历为小黄门、中常侍、大长秋、车骑将军等职，封都乡侯。在职时以搜刮暴敛、骄纵贪婪见称，灵帝极为宠信，常谓“赵常侍是我母”。中平六年（189年），何进谋诛宦官，事泄，他和其余几个常侍设计伏杀何进，袁绍、袁术等人闻何进被杀，入宫杀尽宦官，捕杀后赵忠。",
            "snjs_sp_zhangrang":"张让（？—189年9月24日），东汉宦官，颍川（今河南禹州）人。桓帝、灵帝时，历为小黄门、中常侍等职，封列侯。在职时以搜刮暴敛、骄纵贪婪见称，灵帝极为宠信，常谓“张常侍是我父”。中平六年（189年），何进谋诛宦官，事泄，他和其余几个常侍设计伏杀何进。袁绍、袁术等人闻何进被杀，入宫杀尽宦官，张让走投无路，投水自尽。",
            "snjs_gouan":"苟安，《三国演义》中的虚构人物。是李严手下都尉，被派遣解送粮草到祁山大寨。因为好酒，解送粮草延误十天，诸葛亮十分愤怒，欲斩之。在杨仪求情下，才改为杖责八十，苟安怀恨在心，投魏国司马懿。后司马懿派他去成都散布谣言，刘禅听信谣言，下诏召回了诸葛亮，导致蜀汉第四次北伐失败。",
            "snjs_sp_zhangning":"张宁（176年－？），钜鹿（治今河北省邢台市巨鹿县）人。东汉末年大贤良师张角的女儿，该人物不见于演义和正史。是民间或网游虚构的人物。",
            "snjs_re_shen_zhaoyun":"赵云（？－229年），字子龙，常山真定人。身长八尺，姿颜雄伟，三国时期蜀汉名将。 汉末军阀混战，赵云受本郡推举，率领义从加入公孙瓒。期间结识了汉室皇亲刘备，但不久之后，赵云因为兄长去世而离开。赵云离开公孙瓒大约七年后，在邺城与刘备相见，从此追随刘备。 赵云跟随刘备将近三十年，先后参加过博望坡之战、长坂坡之战、江南平定战，独自指挥过入川之战、汉水之战、箕谷之战，都取得了非常好的战果。除了四处征战，赵云还先后以偏将军任桂阳太守，以留营司马留守公安，以翊军将军督江州。除此之外，赵云于平定益州时引霍去病故事劝谏刘备将田宅归还百姓，又于关羽、张飞被害之后劝谏刘备不要伐吴，被后世赞为有大臣局量的儒将，甚至被认为是三国时期的完美人物 。 赵云去世后，于蜀汉景耀四年（261年）被追谥为“顺平侯”，其“常胜将军”的形象在后世被广为流传。",
            "snjs_wangchong":"王冲(?~190)，公孙瓒曾这样描述自己的部下王冲：“我有北海勇将王冲，他早就想刀劈吕布，夺下赤兔马做他的坐骑了！”",
            "snjs_yushe":"俞涉，袁术部下的骁将。十八路诸侯讨伐董卓时，华雄出汜水关挑战，俞涉主动请战，但战不三合即被华雄所斩。",
            "snjs_zhaoang":"赵昂，字伟章（一作伟璋），天水冀人。汉末时曹操部下。初为羌道令，建安中转参军事徒居州治冀城。 建安十八年，马超围冀城多天，城中饥困，凉州刺史韦康不愿百姓再受苦而打算投降，赵昂进劝但不为所纳。后马超背信弃义杀韦康并劫其子赵月为人质，把他送至南郑。欲以此要迫使赵昂为己所用。后与梁宽、赵衢、庞恭、杨阜等结谋为康报仇，并举兵讨伐马超。马超兵败遂弃城，投奔张鲁。得张鲁之援后马超于建安十九年复寇，赵昂与妻子王异坚守祁山三十天至夏侯渊的救兵解围，其子赵月终为马超斩杀。自冀城之难，至于祁山，赵昂出九奇策。",
            "snjs_sp_fanyufeng":"樊夫人，东汉末年人物，昔桂阳太守赵范寡嫂。赵云随刘备平定江南四郡后，刘备以赵云为桂阳太守。赵范居心叵测，要将自己的嫂嫂樊氏嫁给赵云，但遭到赵云的拒绝。后来，赵范逃走，樊氏也下落不明。樊夫人 (樊氏)，常山人，东汉桂阳太守赵范之嫂。建安十三年（公元208年）的赤壁之战后，赵云跟随刘备平定荆州四郡。刘备任命赵云为偏将军，并取代投降的赵范，兼任桂阳太守。赵范归降，要把\"有国色\"的寡嫂樊氏许嫁赵云，赵云婉拒，理由是“相与同姓，汝嫂即吾嫂也，固不敢取”，后来旁人也觉得是件美事，而\"劝云娶之\"，赵云认为赵范归降只是为情势所迫，并非真心，“天下女子不少”，于是此事作罢。后来“范果逃去，云无纤芥”。 汉末纷乱，“二桥流离，甄氏披发，樊氏把酒，冯氏涕泣。”此五女皆是乱世国色红颜，然古评四大美人于此时却是貂蝉闭月。",
            "snjs_simayan":"司马炎（236年～290年），字安世，河内郡温县（今河南省温县）人。晋朝开国皇帝（265年～290年在位），晋宣帝司马懿的孙子，晋文帝司马昭嫡长子，晋元帝司马睿的堂伯，母为文明皇后王元姬。 凭借门荫入仕，册封北平亭侯。迎立魏元帝曹奂，授中抚军，进封新昌乡侯，拜抚军大将军、晋国世子。 咸熙二年（265），担任相国，袭封晋王。咸熙二年十二月丙寅（266年2月8日），司马炎逼迫魏元帝曹奂禅让，即位为帝，定国号为晋，改元泰始。 在位初期，革新政治，振兴经济。厉行节俭，推行法治， 颁行户调式，促进人口增殖，使得经济社会呈现繁荣景象，史称“太康之治”。咸宁五年（279），发动“晋灭吴之战”，实现全国统一。此后，骄奢淫逸，怠惰政事，分封诸王，为“八王之乱”埋下隐患。 太熙元年（290年5月16日），司马炎病逝，时年五十五岁，谥号为武，庙号世祖，安葬于峻阳陵。",
            "snjs_zhangchu":"张楚，张角的女儿，张宁的姐姐，在逃亡途中被刘备捕获。之后在诸葛亮的建议下，张楚被囚禁。张楚随着刘备入了西川，并被软禁在成都。夷陵之战后，刘备大败，全国主力外出用以支援刘备，朝内空虚，张楚趁机逃跑。",
            "snjs_re_shen_ganning":"甘宁（？—215年？220年？存疑），字兴霸，巴郡临江（今重庆忠县）人，三国时期孙吴名将，官至西陵太守，折冲将军。 甘宁少年时在地方上为非作歹，组成渠师抢夺船只财物，崇尚奢华，人称锦帆贼。青年时停止抢劫，熟读诸子。曾任蜀郡丞，后历仕于刘表和黄祖麾下，未受重用。建安十三年（208年），甘宁率部投奔孙权，开始建功立业。曾经力劝孙权攻破黄祖占据楚关，随周瑜攻曹仁夺取夷陵，随鲁肃镇益阳对峙关羽，随孙权攻皖城擒获朱光。率百余人夜袭曹营，斩得数十首级而回。在逍遥津之战，他保护孙权蹴马趋津，死里逃生。孙权曾说：“孟德有张辽，孤有甘兴霸，足相敌也”。吕蒙曾说：“天下未定，斗将如宁难得，宜容忍之。”甘宁虽然粗野凶狠，暴躁嗜杀，甚至违反承诺、违抗命令，但是，开朗豪爽，有勇有谋，轻视钱财，敬重士人，厚待士卒，并深得士卒拥戴。陈寿在史书中将他列为“江表之虎臣”。",
            "snjs_sp_zhangjiao":"张角（？－184年），钜鹿（秦治今河北平乡、东汉治今河北宁晋）人。中国东汉末年农民起义军“黄巾军”的领袖。 张角修太平道，利用其中的某些宗教观念和社会政治思想，组织群众，约于灵帝建宁（168年-172年）初传道。 中平元年（184年），张角以“苍天已死，黄天当立，岁在甲子，天下大吉”为口号，自称“天公将军”，率领群众发动起义，史称“黄巾起义”。不久张角病死，起义军也很快被汉朝所镇压。",
            "snjs_huangjinbing":"黄巾起义，是东汉晚期的农民战争，也是中国历史上规模最大的一次宗教形式组织的民变之一，开始于汉灵帝光和七年（公元184年），当时朝廷腐败、宦官外戚争斗不止、边疆战事不断，国势日趋疲弱，又因全国大旱，颗粒不收而赋税不减，走投无路的贫苦农民在巨鹿人张角的号令下，纷纷揭竿而起，他们头扎黄巾，高喊“苍天已死，黄天当立，岁在甲子，天下大吉”的口号，向官僚地主发动了猛烈攻击，并对东汉朝廷的统治产生了巨大的冲击，为平息叛乱，各地拥兵自重，虽最终起义以失败而告终，但军阀割据、东汉名存实亡的局面也不可挽回，最终导致三国局面的形成。",
            "snjs_zhangjv":"张举，东汉末年流寇。原渔阳郡的土豪。本为泰山太守，因不获张温重用而心生不愤。与张纯等联合发动叛乱，自称为天子，有武装九千人。曾与孟益、公孙瓒等官军展开激战。后幽州牧刘虞悬红张纯等人，张举出奔塞外，自此下落不明。中平四年（187年），张纯因不获张温重用而心生不愤，与张举及乌桓丘力居等人叛乱。张举与张纯领军劫略蓟中，杀护乌桓校尉公綦稠、右北平太守刘政、辽东太守阳终等人，聚众至十余万人，屯兵肥如，掠夺幽州、冀州。张举自称天子。 中平五年（188年），朝廷派遣中郎将孟益率领骑都尉公孙瓒讨伐张纯等人，公孙瓒与张纯战于石门，初时公孙瓒大胜，但公孙瓒过于深入，后援无以为继，反为丘力居等围于辽西管子城二百余日，公孙瓒粮尽，士兵溃散。 中平六年（189年），幽州州牧刘虞悬红张纯等人。丘力居因为刘虞之名投降，张举出奔塞外，自此下落不明。",
            "snjs_zhangchun":"张纯曾为中山太守。灵帝光和中，逃入辽西乌丸丘力居部中，自号弥天将军、安定王、弥天安定王，为三郡乌丸元帅，寇略青、徐、幽、冀四州，杀掠吏民，所至残破。灵帝末，以刘虞为幽州牧，募胡人斩纯首，北州乃定。",
            "snjs_zhangjvzhangchun":"张举，东汉末年流寇。原渔阳郡的土豪。本为泰山太守，因不获张温重用而心生不愤。与张纯等联合发动叛乱，自称为天子，有武装九千人。曾与孟益、公孙瓒等官军展开激战。后幽州牧刘虞悬红张纯等人，张举出奔塞外，自此下落不明。中平四年（187年），张纯因不获张温重用而心生不愤，与张举及乌桓丘力居等人叛乱。张举与张纯领军劫略蓟中，杀护乌桓校尉公綦稠、右北平太守刘政、辽东太守阳终等人，聚众至十余万人，屯兵肥如，掠夺幽州、冀州。张举自称天子。中平五年（188年），朝廷派遣中郎将孟益率领骑都尉公孙瓒讨伐张纯等人，公孙瓒与张纯战于石门，初时公孙瓒大胜，但公孙瓒过于深入，后援无以为继，反为丘力居等围于辽西管子城二百余日，公孙瓒粮尽，士兵溃散。</br>中平六年（189年），幽州州牧刘虞悬红张纯等人。丘力居因为刘虞之名投降，张举出奔塞外，自此下落不明。</br>张纯曾为中山太守。灵帝光和中，逃入辽西乌丸丘力居部中，自号弥天将军、安定王、弥天安定王，为三郡乌丸元帅，寇略青、徐、幽、冀四州，杀掠吏民，所至残破。灵帝末，以刘虞为幽州牧，募胡人斩纯首，北州乃定。",
            "snjs_zhangyan":"张燕，本姓褚，生卒年不详，常山真定（今河北正定南）人，东汉末年黑山军首领。张燕剽捍，敏捷过人，军中称为“飞燕”。官渡之战时投降曹操，被任命为平北将军，封安国亭侯。死后其子张方袭爵。张燕原名褚燕。中平元年（184年），黄巾起义爆发，褚燕聚集一帮少年为强盗，在山水间转战出击，待回到真定时，部众已经达到一万多人。中平二年（185年），当时博陵（今河北蠡县）人张牛角也聚集起一伙人，自称将军，与褚燕合兵一处。褚燕推举张牛角为首领，进兵攻打瘿陶（今河北宁晋县），张牛角被流箭射中，身受重伤，临死之前，命令他的部下尊奉褚燕为首领。张牛角死后，众人一起拥戴褚燕为首领，于是褚燕改姓张，唤作张燕。",
            "snjs_dengmao":"邓茂，黄巾军将领，于《三国演义》第1回登场。为程远志副将，随之引兵五万进犯涿郡。幽州刺史刘焉令校尉邹靖引刘备、关羽、张飞三人，统兵五百，前去破敌。在大兴山下，两军交战，邓茂被张飞一回合刺于马下。小说《三国演义》中的虚构人物，不见于正史记载。于小说第一回以黄巾贼将的身份登场。 光和七年（西元184年），黄巾军起义，程远志与副将邓茂统兵五万进犯涿郡。刘焉令邹靖与刘备兄弟三人，前去迎战。两军在大兴山相对。最后邓茂被张飞以丈八蛇矛给刺死，程远志被关羽以青龙偃月刀给劈为两半。而在正史中，有提及幽州广阳黄巾军杀死太守刘卫及刺史郭勋，但未明言统率此黄巾军的将领是谁。",
            "snjs_bocai":"波才，黄巾军高级将领，统领东方黄巾军部队。曾在黄巾起义初期取得一定战果，但在长社之战败北。184年2月，黄巾军首领张角遣马元义至荆州等地召集波才等人，准备发动起义。起义提前开始，汉庭派遣右中郎将朱隽攻击波才，波才击败了朱隽，将朱隽围困在长社。汉庭另一位将领皇甫嵩前来支援朱隽，进驻长社。波才围攻长社，兵力多于汉将皇甫嵩，汉军十分恐惧。波才依靠草地结扎营寨，被皇甫嵩发现，恰巧这天大风不止，皇甫嵩便奇袭波才营寨，纵火焚烧，波才军溃退。汉庭骑都尉曹操正好前来救援皇甫嵩等人，便会合皇甫嵩，击破波才。波才军伤亡数万人，波才退走阳翟。皇甫嵩等人于长社胜利后，乘胜追击，于阳翟击破波才，又在西华击破了彭脱。波才、彭脱失败后，东方的黄巾军势力便被摧毁。",
            "snjs_chengyuanzhi":"程远志，小说《三国演义》中的虚构人物，不见于正史记载。黄巾军将领，于小说第一回登场，被关羽斩于马下。光和七年（西元184年），黄巾军起义，程远志与副将邓茂统兵五万进犯涿郡。刘焉令邹靖与刘备兄弟三人，前去迎战。两军在大兴山相对。最后副将邓茂被张飞以丈八蛇矛给刺死，程远志本人也被关羽以青龙偃月刀给劈为两半。而在正史中，有提及幽州广阳黄巾军杀死太守刘卫及刺史郭勋，但未明言统率此黄巾军的将领是谁。",
            "snjs_guanhai":"管亥（生卒年不详），青州黄巾军渠帅，率军侵略北海，围北海相孔融于都昌。孔融派遣太史慈突围而出，前往平原向刘备求援，刘备率军来到，击退管亥。青州黄巾军渠帅，率军侵略北海郡，北海相孔融屯兵都昌县城，被黄巾军围城。孔融派遣太史慈突围而出，向平原相刘备求救。刘备派兵三千随太史慈前去解围，围城的黄巾军听说救兵到来，解围散走。管亥于小说《三国演义》第十一回中也有出场，率兵数万进犯北海郡索粮。北海太守孔融出城与之战，部将宗宝被其斩杀，管亥分兵围城。孔融忧虑之时，幸得太史慈突围而出，去平原相刘备处求救。刘备率关羽、张飞引兵来救，管亥被关羽斩杀，余众溃散。",
            "snjs_guanyuzhangfei":"关羽（？~220年），字云长，小字长生，河东郡解县（今山西省运城市盐湖区解州镇）人。汉末三国时期名将。 早年犯事，流落到涿郡，和刘备、张飞情同兄弟。参与镇压黄巾起义，跟随刘备颠沛流离。雄壮威猛，号称“万人敌”、雅号“美髯公”。徐州战败后，暂时投靠曹操，亲自斩杀颜良，受封汉寿亭侯。离开曹操，回到刘备身边。赤壁之战后，参与攻取荆州地区。刘备入川后，奉命镇守荆州，加号前将军。建安二十四年，水陆并进，围攻襄阳和樊城。水淹七军，全歼于禁援军，威震华夏，使得曹操一度产生迁都想法。面对孙权部下吕蒙、陆逊袭击后方，曹操部将徐晃正面夹击的局面，进退失据，兵败被杀。后主刘禅即位，追谥壮缪。 关羽去世后，民间尊为“关公”，历代朝廷多有褒封。清朝雍正时期，尊为“武圣”，与“文圣” 孔子地位等同。在小说《三国演义》中，名列“五虎上将”之首，使用青龙偃月刀。毛宗岗称其为《演义》三绝中的“义绝”。</br>张飞（？—221年），字益德（《华阳国志》作翼德），涿郡（今河北保定涿州市）人，三国时期蜀汉名将。张飞勇武过人，与结拜兄弟关羽并称为“万人敌”。关羽年长数岁，张飞兄事之。公元184年黄巾起义爆发，刘备在涿县组织起了一支义勇军参与扑灭黄巾军的战争，张飞与关羽一起加入，随刘备辗转各地。三人情同兄弟，寝则同床，刘备出席各种宴会时，和关羽终日侍立在刘备身旁。公元196年因交恶曹豹而被吕布所破。吕布败亡之后，张飞被任命为中郎将。公元200年刘备衣带诏事情泄漏，率领关羽、张飞逃走，杀徐州刺史车胄。后刘备战败，关羽被擒，刘备与张飞投奔袁绍。公元208年刘备于长坂坡败退时，张飞仅率二十骑断后，据当阳桥厉声大喝，曹军无人敢逼近，刘备因此得以免难。 刘备入蜀后，张飞与诸葛亮、赵云进军西川，分定郡县。在抵达江州时义释了刘璋手下的巴郡太守严颜。在巴西之战中，击败魏国名将张郃。在武都之战中，兵败而还。刘备称帝后，张飞晋升为车骑将军、领司隶校尉，封西乡侯。同年，张飞因为暴而无恩，被部将范强、张达杀害，年仅五十五岁。谥曰桓侯。",
            "snjs_xiahouzie":"血蔷薇·夏侯子萼，三国杀集换式卡牌游戏《阵面对决》中的裂土系列卡牌。游卡桌游官方原创的三国时期女性角色。",
            "snjs_zhangwei":"血骑教习·张葳，三国杀集换式卡牌游戏《阵面对决》中的帝畿系列卡牌。游卡桌游官方原创的三国时期女性角色。",
            "snjs_fanqiangzhangda":"蜀汉章武元年，刘备伐吴，张飞率军从阆中前往江州，出发前，张达与范强杀死张飞，带着张飞的首级投奔了东吴。演义里刘备率军讨伐东吴，东吴交出了范强与张达，张达与范强被张飞之子张苞所杀祭父。",
            "snjs_wuban":"吴班，字元雄，生卒年不详，兖州陈留郡（治今河南省开封市）人。三国时期蜀汉将领。为领军，随刘备参加伐吴之战，后又随蜀汉丞相诸葛亮参加北伐曹魏的战争，并于公元231年（建兴九年）的北伐中大破司马懿。官至骠骑将军，封绵竹侯。吴班以豪爽侠义著称于当时，又因族妹吴氏是蜀汉穆皇后，在蜀汉将领中有较高的地位。",
            "snjs_haomeng":"郝萌（？－196年），东汉末年吕布帐下名将。 建安元年（196年），郝萌在袁术的怂恿下反叛吕布，被其部将曹性以及吕布部将高顺阻止，并最终为高顺所杀。演义结局，吕布被围下邳时，护送许汜王楷回城时，被张飞袭击被曹操所杀。",
            "snjs_re_shen_luxun":"陆逊（183年－245年3月19日），本名陆议，字伯言，吴郡吴县人。三国时期吴国政治家、军事家。 建安八年（203年）入孙权幕府，历任海昌屯田都尉、定威校尉、帐下右部督。因受孙权赏识得以发挥卓越的军事才能，地位渐至隆崇。建安二十四年（219年），陆逊参与袭取荆州。蜀章武二年（222年），孙权以陆逊为大都督，在夷陵之战中火烧连营击败刘备。吴黄武七年（228年），陆逊取得石亭之战的胜利。黄龙元年（229年），孙权称帝后，以陆逊为上大将军、辅佐太子孙登并掌管陪都武昌事宜。赤乌七年（244年）拜为丞相、荆州牧、右都护、总领三公事务，领武昌事。孙和、孙霸二宫之争时卷入孙权父子相争中，次年去世，终年六十三岁，追谥“昭”。 陆逊跟随孙权四十余年，统领吴国军政二十余年。其为人深谋远虑，忠诚耿直。一生出将入相，被赞为“社稷之臣”。",
            "snjs_re_shen_simayi":"司马懿（179年—251年9月7日），字仲达，河内郡温县孝敬里（今河南省焦作市温县）人。三国时期曹魏政治家、军事谋略家、权臣，西晋王朝的奠基人之一。 司马懿自幼聪明多大略，博学洽闻，伏膺儒教。因汉室被曹氏所控制，司马懿一度拒绝曹操授予的官职，但建安十三年（208年），曹操任丞相后，强行辟司马懿为文学掾。因司马懿曾支持曹操称帝，所以逐渐赢得了曹操的信任。曹操封魏王后，以司马懿为太子中庶子以佐助曹丕，帮助曹丕在储位之争中获得胜利。曹丕临终时，令司马懿与曹真等为辅政大臣，辅佐魏明帝曹叡。明帝时，司马懿屡迁抚军大将军、大将军、太尉等重职。明帝崩，托孤幼帝曹芳于司马懿和曹爽。曹芳继位后，司马懿遭到曹爽排挤，升官为无实权的太傅。正始十年（249年），司马懿趁曹爽陪曹芳离洛阳至高平陵祭陵，起兵政变并控制京都洛阳。自此，曹魏的军政权力落入司马氏手中，史称高平陵事变。司马懿善谋奇策，多次征伐有功，曾率军擒斩孟达，两次率大军成功抵御诸葛亮北伐，远征平定辽东。对屯田、水利等农耕经济发展有重要贡献。 嘉平三年（251年），司马懿病逝，享年七十三岁，辞郡公和殊礼，葬于首阳山，谥号宣文。其次子司马昭封晋王后，追谥司马懿为宣王；其孙司马炎称帝后，追尊司马懿为宣皇帝，庙号高祖。",
            "snjs_sp_fushirenmifang":"傅士仁（生卒年不详），字君义，幽州广阳郡（今北京市）人，刘备手下将领。受到刘备的重用，但被关羽轻慢。在吕蒙袭击荆州时，与麋芳一同不战而降，间接导致关羽被俘身亡。</br>麋芳（生卒年不详），字子方，东海郡朐县（今江苏省连云港市）人。汉末三国时期蜀国将领，刘备糜夫人的兄弟。 麋芳本为徐州牧陶谦部下，曾被曹操表为彭城相。后来辞官，随刘备从徐州辗转至邺城、汝南、新野、长坂坡、江夏等地，奔波多年。 刘备称汉中王时，糜芳为南郡太守，但受到关羽的轻慢。后来，因未完成供给军资的任务而被关羽责骂，心中不安。吕蒙袭取荆州时，将已经投降的傅士仁展示给糜芳，麋芳于是选择投降，导致关羽兵败被杀。 此后，在吴国担任将军，并且为吴征伐。",
            "snjs_shen_sunshangxiang":"孙尚香（？—约223），吴郡富春（今浙江省杭州市富阳区）人，东汉末年讨虏将军孙权之妹，曾为左将军刘备之妻。史书《三国志》称之为孙夫人。民间戏剧称之为孙尚香。 为巩固孙刘联盟，孙夫人嫁给刘备三年，后来大归回吴，夹在两国之间，有着与传统女性截然不同的桀骜不驯的个性，是有名的侠女，孙夫人在许多小说，戏剧和影视里被不断描绘。",
            "snjs_sp_lvbu":"吕布（？～199年2月7日），字奉先，并州五原郡九原县人。东汉末年群雄之一。 吕布因为骁武被并州牧丁原授骑都尉、河内主簿等职。杀死丁原后，成为董卓的义子，授中郎将。受到董卓猜疑，在司徒王允唆使，诛杀董卓，迁奋武将军、开府仪同三司，进封温县侯。旋即被董卓旧部击败，便逃离长安。先投袁术，被袁术拒绝。改投袁绍，被袁绍猜忌。于是去依附张杨。 兴平元年（194年），吕布趁曹操攻打陶谦时与陈宫等联络而进入兖州，占据濮阳，与曹操血战两年，曾使曹操数战不利，但最终被曹操击败转而去依附徐州刘备。又趁刘备与袁术作战时袭取了徐州，与刘备时而和好，时而相互攻伐。期间，以辕门射戟化解刘备与纪灵的争斗。 建安三年（198年），吕布遣将击败刘备与夏侯惇后，曹操亲自出马征讨吕布，水淹下邳。吕布被部下叛变，于十二月癸酉（199年2月7日）城破被俘，被处死。 吕布以勇武闻名，号称“飞将”，时有“人中吕布，马中赤兔”之说。吕布所用的实战武器为矛。《三国演义》及民间其他艺术形象，吕布多被塑造成三国第一猛将。其武器也被虚构为方天画戟。",
            "snjs_sp_xvjing":"许靖（？—222年），字文休。汝南郡平舆县（今河南省平舆县）人。东汉末年至三国时期蜀汉时期重臣、名士、评论家。 许靖因与从弟许邵俱以品评人物而闻名于世。后被刘翊推举为孝廉，任尚书郎。曾先后投奔孔伷、陈祎、许贡、王朗等人，于孙策攻王朗前与家属俱避难交州，受到交趾太守士燮礼待。 其后受益州牧刘璋邀请，相继为巴郡、广汉、蜀郡太守。于刘备包围成都时欲越墙叛逃，为刘璋所获。刘备定蜀后欲将其弃用，在法正的建议下方以其为左将军长史。 建安二十三年（218年），刘备称汉中王，任命许靖为汉中王傅。章武元年（221年），刘备称帝，任命许靖为司徒，位列三公。章武二年（222年），去世。有文集二卷。",
            "snjs_pengqi":"彭绮，三国时期吴国鄱阳郡（今江西鄱阳）宗贼大帅。吴大帝黄武年间自称将军，攻破数县，后为太守周鲂、解烦督胡综所破，战败被擒。",
            "snjs_penghu":"彭虎，生卒年不详，东汉末年鄱阳起义军首领，后为孙权部将董袭所败。",
            "snjs_yuanshi":"袁氏（？－？），汝南郡汝阳县（今河南商水）人，袁术之女，孙权妃嫔。袁夫人出身世家大族汝南袁氏，其父袁术败亡后不久为孙权所得，入吴宫拜为夫人，以节操品行著称。",
            "snjs_sp_zhouche":"周妃（210年或之前—？），一说本名周彻。周妃出身庐江周氏，周瑜独女，相传其生母为东吴美女小乔，因嫁孙登为太子妃，故称周妃。周瑜英年早逝，其遗孤都得到孙权厚遇，除却她本人在黄武四年（225年）嫁予太子外，兄长周循亦娶孙权长女孙鲁班为妻。",
            "snjs_zhucaizhuji":"朱才，字君业，丹杨故鄣（今浙江安吉）人。三国时期东吴将领，朱治的嫡亲长子。其父死后袭爵为毗陵侯，官至偏将军，因病死亡，有一子朱琬。</br>朱纪，扬州丹阳郡故鄣(浙江湖州市）人，东吴将领朱治次子，孙权将孙策的女儿嫁给他，以校尉领兵。",
			"snjs_zhuzhizhuranzhuhuan":"朱治（156年－224年），字君理。丹杨郡故鄣县（今浙江安吉）人。东汉末年至三国时期吴国将领。朱治初为县吏、州从事等职，后随孙坚、孙策征战，累拜吴郡太守。孙策死后，与张昭等共尊奉孙权嗣位，为稳定江东局势作出了卓著的贡献。建安七年（202年），改授九真太守、行扶义将军。黄武元年（222年），封毗陵侯。朱治署理郡政时，勤于理事，自奉俭约，深为孙权所礼遇。晚年自请屯守故鄣，以镇抚山越。黄武二年（223年），拜安国将军，配金印紫绶，改封故鄣侯，旋即返回吴郡。于黄武三年（224年）病卒，年六十九。</br>朱然（182年—249年），原名施然，字义封，丹阳故鄣（今浙江安吉）人。三国时期吴国名将，毗陵侯朱治的外甥。朱然早年被朱治收为养子，并在读书期间和孙权相交甚笃。孙权统事后，朱然历任、馀姚长、山阴令、临川太守，加折冲校尉，率军平定山贼。曾随吕蒙擒杀关羽，以功迁昭武将军，封西安乡侯。吕蒙死后，朱然代替吕蒙镇守江陵。夷陵之战中，与陆逊合力大破刘备，拜征北将军，封永安侯。魏国果然趁机攻吴，朱然坚守不出，曹真、夏侯尚、张郃等魏将围攻江陵六月之久，朱然从此“名震敌国”。之后，朱然先后攻打江夏和樊城，都未成功；而两次出征柤中均有所斩获。最后官至左大司马、右军师。赤乌十二年（249年），朱然病逝，年六十八。孙权为其素服举哀。</br>朱桓（177年－238年），字休穆，吴郡吴县（今江苏苏州）人，三国时期吴国名将，骠骑将军朱据从兄、镇南将军朱异之父。朱桓官至前将军、青州牧，假节，封为嘉兴侯。出身江东吴郡四大姓之一吴郡朱氏。东汉建安五年（200年），朱桓成为余姚长，为当地人民解决瘟疫，又招募士卒，讨伐当地山贼，所到之处，山贼都平定。后来代替周泰成为濡须督。在夷陵之战后，曹仁率领几万步骑出征濡须。朱桓手下只有五千军队，诸将都十分恐惧。朱桓鼓舞士气，又设计引诱曹仁派兵攻城。于是，朱桓火攻曹泰，又转攻常雕，并斩常雕，擒王双，重挫曹仁的军队。周鲂引诱曹休出兵皖城，朱桓为右督，助陆逊破曹休，吴军斩获万余人。朱桓又献计阻塞曹休退路，进图寿春，但陆逊认为不可行，于是没有实施。庐江主簿打算开城迎接吴军，全琮和朱桓率军接应，但事情败露，被迫退军。退军时吴军渡河，魏军打算出击拦截，但见到朱桓押后，于是不敢出击。后来朱桓狂病发作，回建业治病，并于第二年（赤乌元年）病死，时年六十二岁。朱桓为人高傲，不喜欢为人所驱使，而又善养士卒，轻财重义，与人一见，数十年不忘，死时部下无不哭啼。",
			"snjs_xianyufu":"鲜于辅（生卒年不详），幽州渔阳（今北京密云县）人。汉末三国时期魏国将领。原为幽州牧刘虞从事，初平四年，公孙瓒杀害刘虞，遂与刘和、乌桓峭王、麴义一起合兵大败公孙瓒。公孙瓒败亡后，听从田豫劝告，投顺曹操，封为建忠将军，都督幽州六郡。官渡之战后，拜左度辽将军，进封亭侯。曹魏建立后，拜虎牙将军，封昌乡县侯。曾持节到蜀汉劝降诸葛亮，累迁为辅国将军。",
			"snjs_sp_chenzhen":"陈震（？—公元235年），字孝起。荆州南阳郡（今河南南阳）人。三国时期蜀汉官员。刘备领荆州牧时，辟陈震为从事。后随刘备入蜀，为蜀郡北部都尉、汶山太守、犍为太守。建兴三年（225年），拜尚书，迁尚书令。建兴七年（229年），孙权称帝。蜀汉以陈震为卫尉，前往祝贺，与孙权开坛歃盟，交分天下。还蜀，封城阳亭侯。建兴十三年（235年），卒。",
			"snjs_sp_sunyi":"孙翊（184年－204年），又名孙俨，字叔弼，是孙坚的第三子，孙策、孙权的弟弟。曾被大臣推荐为继承者。孙权继位后，孙翊任丹杨太守，后被身边的人边鸿刺杀。",
			"snjs_sunyu":"孙瑜（177年－215年），字仲异，吴郡富春（今浙江富阳）人，孙坚之弟孙静的次子，孙权的堂兄。官至奋威将军、丹杨太守。孙瑜初以恭义校尉的身份统领士兵，曾跟随周瑜、孙权等人征战，擅于安抚部下、招降纳顺。孙瑜爱读古籍，又请学者马普来为将领官员的子弟讲学，于是东吴开始设立学官。215年，孙瑜去世，时年三十九岁。",
			"snjs_re_dingfeng":"丁奉（？－271年），字承渊。庐江安丰（今安徽省霍邱县）人。三国时期吴国名将。丁奉年少时骁勇善战，先后从属于甘宁、陆逊、潘璋麾下，官至偏将军。太元二年（252年）的东兴之战，丁奉雪中奋短兵大破魏军前屯，迁灭寇将军。吴景帝孙休在位时，丁奉计除权臣孙綝，替孙休夺回皇权，官拜大将军、都护、徐州牧，开始掌握吴国军政大权。孙皓继位后，迁右大司马、左军师。建衡三年（271年），丁奉去世。丁奉一生统兵与北方政权征战，从曹操时代交战到司马炎时代，侍奉了孙权、孙亮、孙休、孙皓四位吴国君主，见证了三国兴衰存亡。",
			"snjs_shen_caozhi":"曹植（192年－232年12月27日），字子建，沛国谯县（今安徽省亳州市）人，是曹操与武宣卞皇后所生第三子，生前曾为陈王，去世后谥号“思”，因此又称陈思王。曹植是三国时期著名文学家，作为建安文学的代表人物之一与集大成者，他在两晋南北朝时期，被推尊到文章典范的地位。其代表作有《洛神赋》《白马篇》《七哀诗》等。后人因其文学上的造诣而将他与曹操、曹丕合称为“三曹”。其诗以笔力雄健和词采华美见长，留有集三十卷，已佚，今存《曹子建集》为宋人所编。曹植的散文同样亦具有“情兼雅怨，体被文质”的特色，加上其品种的丰富多样，使他在这方面取得了卓越的成就。南朝宋文学家谢灵运有“天下才有一石，曹子建独占八斗”的评价。文学批评家钟嵘亦赞曹植“骨气奇高，词彩华茂，情兼雅怨，体被文质，粲溢今古，卓尔不群。”并在《诗品》中把他列为品第最高的诗人。王士祯尝论汉魏以来二千年间诗家堪称“仙才”者，曹植、李白、苏轼三人耳。",
			"snjs_baoxin":"鲍信（151年－192年），泰山平阳（今山东新泰）人。东汉末年济北相，讨伐董卓的诸路人马之一。鲍信受何进征召在外募兵，回到洛阳时适逢董卓进京，鲍信劝袁绍除掉董卓，袁绍不同意。后袁绍、曹操等人起兵对抗董卓，鲍信也起兵响应。后联盟破裂，鲍信劝戒曹操静观其变。青州黄巾军进攻兖州，刺史刘岱不听鲍信所劝贸然出战，兵败战死。鲍信便把曹操迎立为兖州牧。在与黄巾军交战期间，鲍信为救曹操不幸战死，曹操后来追记功绩，赐封其子。",
			"snjs_chezhou":"车胄（？－200）(chē zhòu) 字公鍪（gōng móu），东汉末年武将，官至徐州刺史。为曹操所置之徐州刺史，于公元200年1月被刘备袭杀。《三国演义》里，曹操置车骑将军、徐州刺史。建安四年十二月（公元200年1月），奉太祖命加害刘备，与陈登商议，登暗送信于备，胄为关羽所斩，全家亦为张飞杀尽。",
			"snjs_caohua":"曹华，东汉末年人物，曹操之女，为汉献帝妃嫔。建安十八年（213年），曹操进为魏公，把曹宪、曹节、曹华三个女儿，一齐都送给汉献帝刘协做了妃子，皆封为夫人，聘以束帛五万匹，年龄尚小者在魏公国待年长而聘。",
			"snjs_caoxian":"曹宪（生卒年不详），女，沛国谯县（今安徽省亳州市）人。东汉末年历史人物，汉献帝刘协嫔妃，魏武帝曹操女儿。建安十八年，嫁给汉献帝刘协，受封为贵人。黄初元年（220年），兄弟曹丕称帝后，汉献帝成为山阳公，不知所终。",
			"snjs_shen_zhugeguo":"诸葛果，为《历代神仙通鉴》中诸葛亮女儿的名字，《历代神仙通鉴》记录从上古到明代的神仙，因此诸葛果不见于任何史书。成都西南有朝真观，即乘烟观。相传，诸葛果在这里修行后成仙升天。",
			"snjs_gaoxiang":"高翔（又作高详、高祥）（生卒年不详），荆州南郡（治今湖北省公安县）人，三国时期蜀汉将领，官至杂号大将军，封玄乡侯。曾随刘备攻打汉中，后又随蜀汉丞相诸葛亮参加北伐曹魏的战争。建兴九年（公元231年）的北伐中大破司马懿。",
			"snjs_sp_lvlingqi":"吕玲绮，为吕布与严氏所生之女孩。虽为吕布于为李傕所败，逃离长安之时遭遗留，但为庞舒藏匿后平安护送至吕布之处。尔后，虽与袁术之子曾有政治婚姻之提议，但于前往寿春途中被带回。当吕布于下邳遭曹操包围之时，联姻之事再次提及，但却为曹操及刘备所阻止。吕布死后，家眷被迁往许昌。",
			"snjs_shen_weiyan":"魏延（？－234年），字文长，义阳人。三国时期蜀汉名将，深受刘备器重。刘备入川时，魏延因数有战功，升为牙门将军。刘备攻下汉中，拔为镇远将军、汉中太守，成为独当一方的大将，镇守汉中十年。刘备即位后，拜镇北将军。随同诸葛亮北伐，拜凉州刺史，封都亭侯，曾在阳溪大破费瑶和郭淮。打算亲率兵马由子午道袭取关中，仿效韩信故事，与诸葛亮会师潼关，遭到谨慎的诸葛亮反对。魏延作战勇猛，性格孤傲，与长史杨仪不和。诸葛亮死后，两人矛盾激化，相互争权，魏延败逃，为马岱所追斩，并被夷灭三族。",
			"snjs_shen_sunquan":"孙权，字仲谋，谥号大皇帝（吴大帝），庙号太祖（182年－252年5月21日）。吴郡富春县（今浙江省杭州市富阳区）人。三国时期孙吴的建立者（229年－252年5月21日在位）。孙权晚年在继承人问题上反复无常，引致群下党争，朝局不稳。于神凤元年（252年）病逝，享年七十一岁，在位二十四年，葬于蒋陵。孙权的父亲孙坚和兄长孙策，在东汉末年群雄割据中打下了江东基业。建安五年（200年），孙策遇刺身亡，孙权继之掌事，成为一方诸侯。建安十三年（208年），与刘备建立孙刘联盟，并于赤壁之战中击败曹操，奠定三国鼎立的基础。建安二十四年（219年），派吕蒙成功袭取刘备的荆州，使领土面积大大增加。黄武元年（222年），孙权被魏文帝曹丕册封为吴王，建立吴国。同年，在夷陵之战中大败刘备。黄龙元年（229年），在武昌正式称帝，国号吴，不久后迁都建业。孙权称帝后，设置农官，实行屯田，设置郡县，并继续剿抚山越，促进了江南经济的发展。黄龙二年（230年），所派将军卫温、诸葛直抵达夷州（今台湾）。孙权亦善书，唐代张怀瓘在《书估》中将其书法列为第三等。",
			"snjs_shen_zhoutai":"周泰，字幼平，九江下蔡（今安徽凤台）人。三国时期孙吴武将。孙策平定江东时与同郡蒋钦一起加入孙策军，随孙策左右，从征刘繇、严白虎、王朗等人，数有战功。后来，孙权爱其为人，向孙策请求让周泰跟随自己。周泰多次于战乱当中保护孙权的安危，身上受的伤多达几十处，就像在皮肤上雕画一样。从征黄祖，在赤壁之战抵御曹操，皆有战功。后来，孙权为了表彰周泰为了东吴出生入死的功绩，而赐给他青罗伞盖，使他留督濡须，吴将朱然、徐盛等因此对其拜服。官至汉中太守、奋威将军，封陵阳侯。死于黄武中期。其子周邵，亦数有战功，死于黄龙二年。周邵的弟弟周承继承了兵权和爵位。陈寿将周泰列为“江表之虎臣”。",
			"snjs_shen_xuchu":"许褚（chǔ），字仲康，谯郡谯县（今安徽亳州市古城镇）人。东汉末年曹操部下猛将。容貌雄毅，勇力绝人。早年聚亲朋数千户共同抵御贼寇。后来，率众归顺曹操。负责曹操的护卫工作，累迁武卫中郎将，赐号“虎侯”。在潼关之战中，许褚吓退马超。为人谨慎奉法，并因此拒绝曹仁的邀请。曹操去世时，哭至吐血。魏文帝曹丕即位后，迁武卫将军，册封万岁亭侯，负责宫中安全。魏明帝曹叡继位时，册封牟乡侯，卒于任上，谥号为壮。",
			"snjs_shen_dianwei":"典韦（？－197年），陈留己吾（今河南商丘市宁陵县己吾城村）人。东汉末年名将。典韦相貌魁梧，膂力过人。本属张邈，曾单手举起牙门旗。后转投曹操，在曹操征讨吕布时被募为陷阵，表现英勇，被拜为校尉，宿卫曹操。建安二年（197年），张绣背叛曹操，典韦为保护曹操而率十余人挡叛军，击杀多人，但最终因寡不敌众而战死。典韦武艺卓越，被史学家潘眉评价为：雄武壮烈，不在张辽、许褚之下。",
			"snjs_guodian":"郭典，字君业，东汉冀州巨鹿太守，司隶冯翊人。黄巾起义时，临危受命任巨鹿太守，协助皇甫嵩平定冀州黄巾叛乱。曾给董卓献计，但不被采用，董卓后败给黄巾军，被撤职。《江表传》曰：郭典字君业，为钜鹿太守，与中郎将董卓攻黄巾贼张宝于下曲阳。典作围堑而卓不肯。典曰：“受诏攻贼，有死而已。”使诸将引兵屯东，典独於西当贼之冲，昼夜进攻。宝由是城守不敢出。时为之语曰：“郭君围堑，董将不许，几令狐狸，化为豺虎。赖我郭君，不畏强御，转机之间，敌为穷虏。猗猗惠君，实邈疆土。",
			"snjs_shen_caoren":"曹仁（168年－223年5月6日），字子孝，沛国谯县（今安徽省亳州市）人，汉末三国时期曹魏名将，魏武帝曹操从弟，陈穆侯曹炽之子。曹仁少时喜好弓马弋猎，不修行检。领军之后，奉法守令。跟从曹操征战四方，破袁术、攻陶谦、擒吕布、败刘备，参加官渡之战，立下汗马功劳。赤壁之战后，镇守江陵，抵御周瑜的进攻，最终弃城而走。又督诸将据守潼关，破苏伯、田银于河间，灭侯音于宛城。在襄樊之战中，誓死镇守樊城，挡住关羽的围攻。曹丕嗣位后，曹仁拜车骑将军、都督荆扬益州诸军事、荆州刺史，晋封陈侯。黄初二年，拜大将军、大司马，执掌军事大权。黄初四年，曹仁率兵进攻濡须口，不听蒋济所劝，惨败于吴将朱桓，郁郁而终，时年五十六，谥号为忠，配享曹操庙庭。",
			"snjs_sp_dongbai":"董白（176年 - 192年），陇西郡临洮县（今甘肃省岷县）人，东汉相国董卓的孙女，渭阳君。熹平五年（176年），生于太原郡晋阳县（今山西省太原市），其祖父董卓时任并州刺史。初平元年（190年），封渭阳君。初平三年（192年），王允诛杀董卓，派皇甫嵩进攻董卓族人所居住的郿坞，董旻、董璜的部下造反，董氏一族都被杀死。",
			"snjs_al_guanyu":"异格关羽",
			"snjs_caoyuee":"曹月娥原是曹府的使女，被曹操收为义女，许配给关羽。但是，关羽与她同床异梦，终于辞曹出走。曹月娥闻讯追赶，恳求同行。关羽不允，曹月娥便拔剑自尽。情怀壮烈，是一出颇有特色的悲剧。",
			"snjs_sp_zhangxiu":"张绣（？—207年），武威郡祖厉（今甘肃省靖远县）人也。骠骑将军张济的从子。东汉末年割据宛城的军阀，汉末群雄之一。曹魏时期，与段煨、贾诩、明元郭氏皇后是同乡，也是凉州豪族集团的代表人物。初随张济征伐，张济死后与刘表联合。后降曹操，因不满其言行而突袭曹操，复与刘表连和。官渡之战前夕，听从贾诩的建议再次投降曹操，参加官渡之战，官至破羌将军，封宣威侯。从征南皮而击破袁谭。后与曹操联姻，成为皇亲国戚。在北征乌桓（207年）途中因病去世，谥定侯。",
			"snjs_al_chenqian":"异格陈骞",
			"snjs_jiangwan":"蒋琬（？～246年），字公琰。零陵郡湘乡县人。三国时期蜀汉宰相，与诸葛亮、董允、费祎合称“蜀汉四相”。蒋琬最初随刘备入蜀，为广都县长。因其不理政事，惹怒刘备，在诸葛亮的劝说下才免于一死。后重获启用，受到诸葛亮的悉心培养，累官丞相长史兼抚军将军。建兴十二年（234年），诸葛亮去世，蒋琬继其执政，拜尚书令，又加行都护、假节，领益州刺史，再迁大将军，录尚书事，封安阳亭侯。延熙元年（238年），受命开府，加大司马，总揽蜀汉军政。曾制定由水路进攻曹魏的计划，但未被采纳。延熙九年（246年），蒋琬病逝，谥号为恭。",
			"snjs_chenqian":"陈骞（qiān）（201年－281年12月22日，一作212年—292年），字休渊。临淮东阳（今安徽天长）人。曹魏司徒陈矫之子，西晋开国功臣。自幼为人朴实稳重，颇有智谋。初为尚书郎，历任中山太守、安平太守，任内均以良好治绩闻名。后被征为相国司马、长史，再迁御史中丞、再迁尚书，获封安国亭侯。又以尚书行征蜀将军，击破蜀汉军。诸葛诞叛乱时，再以尚书为安东将军，率军将其讨平。事后，拜持节、都督淮北诸军事，再迁安东将军，进爵广陵侯，再转都督豫州诸军事、豫州刺史。先后转都督江南诸军事及荆州诸军事、征南大将军，封郯侯。西晋建立后，迁车骑将军，封高平郡公。后迁侍中、大将军，出为都督扬州诸军事、假黄钺。累升为太尉、大司马，晚年屡请逊位，于咸宁三年（277年）入朝。太康二年（281年），陈骞去世，年八十一，追赠太傅，谥号“武”。陈骞为西晋佐命元勋，与安平王司马孚等人并称西晋开国八公。他少年时就有度量，宽容大度，能包涵别人的缺点，每次任官都能把治地管理得相当称职，深得士民之心。与贾充、石苞、裴秀同为司马炎的心腹，但他的智计让贾充等人都自愧不如。",
			"snjs_shen_zuoci":"左慈（156？--289？），字元放，庐江人，汉族，自号乌角先生，东汉末年著名方士，少居天柱山，研习炼丹之术。明五经，兼通星纬，明六甲，传说能役使鬼神，坐致行厨。《后汉书》说他少有神道。据记载他的一只眼睛是盲的，并且他与甘始、郤俭自称自己有几百岁。",
			"snjs_shen_dongzhuo":"董卓（？－192年5月22日），字仲颖，陇西临洮（今甘肃省岷县）人。东汉末年权臣，因废汉少帝立汉献帝并挟持号令，东汉政权从此名存实亡。董卓成长于凉州，好结交羌人。汉桓帝末年，董卓被授为羽林郎，跟随护匈奴中郎将张奂讨伐汉阳羌人，粗猛有谋，力建战功，拜郎中，历任广武县令、蜀郡北部都尉、西域戊己校尉，因事免职。得到司徒袁隗征辟，出任并州刺史。参与镇压黄巾起义、凉州之乱，颇有功勋。中平六年（189年），董卓受大将军何进征召，进京讨伐十常侍。遇到京中动乱，在北芒山立下了救驾大功，开始掌权。又招揽吕布，杀掉丁原，实力大增。废杀汉少帝及何太后，拥立汉献帝刘协即位，出任太师。选用名士蔡邕等人，专断朝政，威震天下。初平元年（190年），受到袁绍组织的关东联军讨伐，遭到孙坚击败，退守长安，自封相国，册封郿侯，广布亲信，呼召三台。初平三年（192年5月22日），司徒王允施展反间计，为部下吕布所杀。",
			"snjs_ju_sunquan":"孙权，字仲谋，谥号大皇帝（吴大帝），庙号太祖（182年－252年5月21日）。吴郡富春县（今浙江省杭州市富阳区）人。三国时期孙吴的建立者（229年－252年5月21日在位）。孙权晚年在继承人问题上反复无常，引致群下党争，朝局不稳。于神凤元年（252年）病逝，享年七十一岁，在位二十四年，葬于蒋陵。孙权的父亲孙坚和兄长孙策，在东汉末年群雄割据中打下了江东基业。建安五年（200年），孙策遇刺身亡，孙权继之掌事，成为一方诸侯。建安十三年（208年），与刘备建立孙刘联盟，并于赤壁之战中击败曹操，奠定三国鼎立的基础。建安二十四年（219年），派吕蒙成功袭取刘备的荆州，使领土面积大大增加。黄武元年（222年），孙权被魏文帝曹丕册封为吴王，建立吴国。同年，在夷陵之战中大败刘备。黄龙元年（229年），在武昌正式称帝，国号吴，不久后迁都建业。孙权称帝后，设置农官，实行屯田，设置郡县，并继续剿抚山越，促进了江南经济的发展。黄龙二年（230年），所派将军卫温、诸葛直抵达夷州（今台湾）。孙权亦善书，唐代张怀瓘在《书估》中将其书法列为第三等。",
			"snjs_shen_yuanshao":"袁绍（？－202年6月28日），字本初，汝南汝阳（今河南省商水县）人。东汉末年军阀，汉末群雄之一，司空袁逢的儿子。袁绍出身“汝南袁氏”，四世三公。料。起家大将军（何进）掾，历任中军校尉、司隶校尉，参与指挥诛杀宦官。怒斥董卓，出任渤海太守，册封邟乡侯。初平元年（190年），担任关东联军首领，带兵讨伐董卓，自号车骑将军。励精图治，先后占据冀州、青州、并州、幽州地区，统一河北地区，交好北方少数民族，势力达到顶点。建安五年（200年），发动官渡之战，兵败于曹操。建安七年（202年），平定冀州叛乱之后，病逝于家中。",
			"snjs_zhanghong":"张纮（153年～212年），字子纲，徐州广陵（江苏省扬州市广陵区人）人。东汉末年吴国谋士，和张昭一起合称“二张”。他曾被大将军何进、太尉朱儁、司空荀爽辟为掾属，皆不就，避难江东。孙策平定江东前，亲自多次登门邀请，张纮出仕为官。孙权即位时，建议孙权迁都秣陵。建安十七年（212年），病逝，时年六十岁，孙权为之流涕。",
			"snjs_boss_hulaojieduan111":"李傕（jué，一说“傕”读音“què”）（？—198年），字稚然。北地郡泥阳县（今陕西省耀县）人，汉末群雄之一。东汉末年汉献帝时的军阀、权臣，官至大司马、车骑将军、开府、领司隶校尉、假节。李傕本为董卓部将，后被董卓的女婿牛辅派遣至中牟与朱儁交战，大破朱儁，进而至陈留、颍川等地劫掠。初平三年（192年）董卓和牛辅被杀后，李傕归无所依，于是采用贾诩之谋，伙同郭汜、张济、樊稠等原董卓部曲将攻向长安。击败吕布，杀死王允等人，占领长安，把持朝廷大权。后诸将不和，李傕在会议上杀死了樊稠，又与郭汜分别劫持了汉献帝和众臣，相互交战，张济率兵赶来和解，于是二人罢兵，李傕出屯池阳黄白城，郭汜、张济等人随汉献帝东归前往弘农。此后，李傕、郭汜、张济反悔，联合起来追击汉献帝，与杨奉、董承等人几番交战。汉献帝一路逃亡，狼狈不堪，到达安邑，与李傕等人讲和。不久，汉献帝被曹操迎往许都。随后，曹操派谒者仆射裴茂召集关西诸将段煨等人征讨李傕，灭其三族。建安三年（198年），李傕在黄白城被梁兴等人破斩，传首许都。在小说《三国演义》中，李傕是董卓手下的排名第一的凉州系心腹大将，统领董卓的西凉精锐部队“飞熊军”。",
			"snjs_boss_hulaojieduan112":"郭汜（？－公元197年），本名郭多，凉州张掖（今甘肃张掖）人。东汉末年割据军阀。郭汜出身马贼，投靠董卓部下，善于用兵。董卓被杀后，采用谋臣贾诩计策，和李傕联兵攻破长安，击败温侯吕布，杀死司徒王允，占领长安。挟持汉献帝，加号扬烈将军。初平三年（公元192年），迁后将军，册封美阳县侯。护送汉献帝东归洛阳，加号车骑将军。建安二年（公元197年），郭汜被部将伍习杀死。",
			"snjs_boss_hulaojieduan113":"樊稠（？—195年），凉州金城（治今甘肃永靖西北）人。东汉末年军阀、将领。官至右将军，封万年侯。原为董卓部将，董卓死后，伙同李傕、郭汜、张济等人合众十余万反扑长安，败吕布、杀王允，把持朝政。后马腾因与李傕有隙，于是联合韩遂举兵进攻，李傕派樊稠、郭汜等与其交战，大败马腾、韩遂于长平观下。樊稠追至陈仓，与韩遂友好罢兵，却遭李傕猜疑。兴平二年（195年），李傕让外甥骑都尉胡封在会议上将樊稠刺死（一说趁醉用杖击杀）。",
			"snjs_boss_hulaojieduan114":"张济（？－196年），字号不详，武威郡祖厉县（今甘肃省靖远县）人。东汉末年割据军阀，破羌将军张绣的叔父。初为董卓部将，骁勇善战。董卓被杀后，联合李傕攻破长安，出任羽林中郎将。初平三年（192年），升任镇东将军，册封平阳侯，屯兵于弘农。张济支持汉献帝东迁，升任骠骑将军。后来因不睦于董承、杨奉，便与李傕、郭汜一同追赶献帝。建安元年（196年），面对军队缺粮，进攻穰城，中箭身亡。死后，部队由侄儿张绣接管。",
			"snjs_boss_hulaojieduan121":"EX程度：★☆☆☆☆",
			"snjs_boss_hulaojieduan122":"EX程度：★★☆☆☆",
			"snjs_boss_hulaojieduan123":"EX程度：★★★★★",
			"snjs_boss_hulaojieduan124":"EX程度：★★★★☆",
			"snjs_boss_hulaojieduan125":"EX程度：★☆☆☆☆",
			"snjs_boss_hulaojieduan126":"EX程度：★★★☆☆",
			"snjs_boss_hulaojieduan211":"华[huà]雄（?－191），中国东汉末年董卓部下的武将，为董卓帐下都督。公元191年，关东军阀联合讨伐董卓，董卓派大将胡轸统率华雄等进攻时任长沙太守的孙坚，结果被孙坚大败，华雄在此战中被孙坚枭首。明·罗贯中所著历史小说《三国演义》中则对这段历史作了改动，描写华雄连诛杀盟军二将，战场耀武扬威之时被刘备二弟名不经传的关羽所杀，这段被称为“温酒斩华雄”的故事情节也流传于后世。",
			"snjs_boss_hulaojieduan221":"曹性，东汉末年吕布帐下武将，史载他曾与身为自己上司的反叛者郝萌交战，并砍去郝萌一臂，受到吕布的嘉奖。在罗贯中所著古典小说《三国演义》中，见同僚高顺被夏侯惇追赶，在乱军之中放箭射瞎夏侯惇左目，而曹性也随即被暴怒的夏侯惇所杀。",
			"snjs_boss_hulaojieduan222":"陈宫（？－199年2月7日），字公台，东汉末年吕布帐下首席谋士，东郡东武阳（今山东莘县）人。性情刚直，足智多谋，年少时与海内知名之士相互结交。192年，兖州刺史刘岱在讨伐青州黄巾时战死，陈宫等人主张曹操接任兖州牧因而被曹操视为心腹。后来，陈宫游说张邈背叛曹操迎吕布入兖州，辅助吕布攻打曹操并先后取得兖州与徐州。下邳城中，吕布不听陈宫两面互补之计，以致失败。陈宫战败后，随吕布等一同被曹操所擒，拒绝曹操招降，决意赴死。",
			"snjs_boss_hulaojieduan223":"高顺（？－199年2月7日），东汉末年吕布帐下中郎将。史载高顺为人清白有威严，不好饮酒，所统率的部队精锐非常，号称“陷阵营”，平定吕布部将郝萌的反叛。屡次进谏忠言于吕布，吕布虽知其忠而不能用。曾与张辽一起连破夏侯惇、刘备。曹操击破吕布后，高顺被曹操所杀。",
			"snjs_boss_hulaojieduan224":"董卓之女，牛辅之妻。",
			"snjs_boss_hulaolvbu1":"吕布（？～199年2月7日），字奉先，并州五原郡九原县人。东汉末年群雄之一。吕布因为骁武被并州牧丁原授骑都尉、河内主簿等职。杀死丁原后，成为董卓的义子，授中郎将。受到董卓猜疑，在司徒王允唆使，诛杀董卓，迁奋武将军、开府仪同三司，进封温县侯。旋即被董卓旧部击败，便逃离长安。先投袁术，被袁术拒绝。改投袁绍，被袁绍猜忌。于是去依附张杨。兴平元年（194年），吕布趁曹操攻打陶谦时与陈宫等联络而进入兖州，占据濮阳，与曹操血战两年，曾使曹操数战不利，但最终被曹操击败转而去依附徐州刘备。又趁刘备与袁术作战时袭取了徐州，与刘备时而和好，时而相互攻伐。期间，以辕门射戟化解刘备与纪灵的争斗。建安三年（198年），吕布遣将击败刘备与夏侯惇后，曹操亲自出马征讨吕布，水淹下邳。吕布被部下叛变，于十二月癸酉（199年2月7日）城破被俘，被处死。吕布以勇武闻名，号称“飞将”，时有“人中吕布，马中赤兔”之说。吕布所用的实战武器为矛。在《三国演义》及民间其他艺术形象，吕布多被塑造成三国第一猛将。其武器也被虚构为方天画戟。",
			"snjs_boss_hulaolvbu2":"吕布（？～199年2月7日），字奉先，并州五原郡九原县人。东汉末年群雄之一。吕布因为骁武被并州牧丁原授骑都尉、河内主簿等职。杀死丁原后，成为董卓的义子，授中郎将。受到董卓猜疑，在司徒王允唆使，诛杀董卓，迁奋武将军、开府仪同三司，进封温县侯。旋即被董卓旧部击败，便逃离长安。先投袁术，被袁术拒绝。改投袁绍，被袁绍猜忌。于是去依附张杨。兴平元年（194年），吕布趁曹操攻打陶谦时与陈宫等联络而进入兖州，占据濮阳，与曹操血战两年，曾使曹操数战不利，但最终被曹操击败转而去依附徐州刘备。又趁刘备与袁术作战时袭取了徐州，与刘备时而和好，时而相互攻伐。期间，以辕门射戟化解刘备与纪灵的争斗。建安三年（198年），吕布遣将击败刘备与夏侯惇后，曹操亲自出马征讨吕布，水淹下邳。吕布被部下叛变，于十二月癸酉（199年2月7日）城破被俘，被处死。吕布以勇武闻名，号称“飞将”，时有“人中吕布，马中赤兔”之说。吕布所用的实战武器为矛。在《三国演义》及民间其他艺术形象，吕布多被塑造成三国第一猛将。其武器也被虚构为方天画戟。",
			"snjs_boss_hulaolvbu3":"吕布（？～199年2月7日），字奉先，并州五原郡九原县人。东汉末年群雄之一。吕布因为骁武被并州牧丁原授骑都尉、河内主簿等职。杀死丁原后，成为董卓的义子，授中郎将。受到董卓猜疑，在司徒王允唆使，诛杀董卓，迁奋武将军、开府仪同三司，进封温县侯。旋即被董卓旧部击败，便逃离长安。先投袁术，被袁术拒绝。改投袁绍，被袁绍猜忌。于是去依附张杨。兴平元年（194年），吕布趁曹操攻打陶谦时与陈宫等联络而进入兖州，占据濮阳，与曹操血战两年，曾使曹操数战不利，但最终被曹操击败转而去依附徐州刘备。又趁刘备与袁术作战时袭取了徐州，与刘备时而和好，时而相互攻伐。期间，以辕门射戟化解刘备与纪灵的争斗。建安三年（198年），吕布遣将击败刘备与夏侯惇后，曹操亲自出马征讨吕布，水淹下邳。吕布被部下叛变，于十二月癸酉（199年2月7日）城破被俘，被处死。吕布以勇武闻名，号称“飞将”，时有“人中吕布，马中赤兔”之说。吕布所用的实战武器为矛。在《三国演义》及民间其他艺术形象，吕布多被塑造成三国第一猛将。其武器也被虚构为方天画戟。",
            "snjs_boss_qihuanguosheng":"郭胜，南阳宛（今河南南阳）人。汉灵帝时为中常侍，与张让、赵忠等狼狈为奸，并皆封侯。曾助同乡何进、何太后贵幸。后被袁绍等人率兵诛灭。",
            "snjs_jianshuo":"蹇硕（？—189年），东汉末宦官。中平五年（188年），蹇硕为上军校尉，汉灵帝以蹇硕壮健而有武略，对其特别信任，并以其为西园军元帅，领导袁绍、曹操等八校尉，以监督司隶校尉以下诸官。蹇硕虽然握有兵权，但对何进非常畏忌，曾和宦官们一起说服灵帝派遣何进西击边章、韩遂。中平六年（189年），灵帝在病重时将刘协托给蹇硕。灵帝去世后，蹇硕想先杀何进再立刘协为天子，但因手下司马潘隐与何进有旧对何进使眼色而失败。刘辩继承帝位后，蹇硕与中常侍赵忠、郭胜等写信欲合谋除去何进兄弟，因郭胜与何进为同郡且何进及何皇后发迹亦有其功劳于是亲信何氏便怂恿赵忠等人不听蹇硕之计，且将蹇硕的书信告知何进，何进于是便派黄门将之诛杀，其部下士兵亦被何进所领。",
            "snjs_boss_qihuanchengkuang":"程旷（？——189）东汉宦官，十常侍之一。演义虚构人物。第一回 宴桃园豪杰三结义　斩黄巾英雄首立功 后张让、赵忠、封谞、段珪、曹节、侯览、蹇硕、程旷、夏恽、郭胜十人朋比为奸，号为“十常侍”。 第三回 议温明董卓叱丁原　馈金珠李肃说吕布 袁绍、曹操斩关入内。赵忠、程旷、夏恽、郭胜四个被赶至翠花楼前，剁为肉泥。",
            "snjs_boss_qihuanfengxu":"封谞，东汉宦官。汉灵帝中平元年为中常侍，信黄巾道。约为黄巾起义的内应，事情败露被杀。演义中十常侍之一。结连黄巾军为内应，后张角弟子唐周叛变，大将军何进调兵擒马元义，斩之。次收封谞等一干人，下狱。",
            "snjs_boss_qihuanduangui":"段珪（？—189），东汉宦官，“十常侍”之一。初为小黄门，珪在济阴，与中常侍侯览并立田业，近济北界，仆从宾客侵犯百姓，劫掠行旅。济北相滕延一切收捕，杀数十人，陈尸路衢。览、珪大怨，以事诉帝，延坐多杀无辜，征诣廷尉，免。后珪等为中常侍，封侯贵宠，父兄子弟布列州郡，所在贪贱，为人蠹害。中平六年八月，大将军何进谋诛宦官，张让等使人潜听，具闻其语，乃率常侍珪、毕岚等数十人，持兵窃自侧闼入，伏省中，及进出，因诈以太后诏召进，杀之。进部将见进首，引军入，珪等劫太后，尚书卢植执戈于阁道窗下，仰数段珪。段珪等惧，乃释太后。让、珪等困迫，遂将帝与陈留王数十人步出穀门，奔小平津。河南中部掾闵贡随植后。贡至，手剑斩数人，余皆投河而死。",
            "snjs_boss_qihuanxiayun":"夏恽（？—189），东汉宦官。汉灵帝中平初为中常侍，宗亲依势横行于州郡。时中常侍吕强清忠奉公，为平息人民对朝廷不满情绪，建议汉灵帝先诛左右贪浊者、大赦党人。夏恽以吕强主张危及自身利益，遂与同僚赵忠等诬陷吕强与党人联合，诽谤朝廷。汉灵帝不察，致使吕强自杀，宗亲财产没入官府。",
            "snjs_boss_qihuanhoulan":"侯览（？—172年），山阳防东（今山东单县东北）人，东汉宦官。延熹年间赐爵为关内侯。因诛梁冀有功，进封高乡侯，后迁为长乐太仆。任官期间，专横跋扈，贪婪放纵，大肆抢掠官民财物。先后夺民田地一百一十八顷，宅第三百八十一所，模仿宫苑兴建府第十六处。他还掠夺妇女，肆虐百姓。为其母大起冢墓，督邮张俭破其家宅，藉没资财。侯览为了报复，诬张俭与长乐少府李膺、太仆杜密等为党人，造成历史上有名的党锢之祸，先后被杀被流放者三百余人，被囚禁者六、七百人。 熹平元年（172年），有司举奏侯览专权骄奢，下诏收其印绶，随即自杀身亡。其阿附者皆免官。",
            "snjs_boss_qihuancaojie":"曹节（？―181年），字汉丰，南阳育阳（今河南省南阳市宛城区瓦店镇）人。东汉宦官。 因事入宫，累迁西园骑。汉顺帝时期，迁小黄门。汉桓帝继位，迁中常侍，加任奉车都尉。拥戴汉灵帝有功，册封长安乡侯。联合长乐五官史朱瑀等矫朝诛杀窦武、陈蕃等人，升任长乐卫尉，进封育阳县侯。建宁二年（169年），加位特进、大长秋。权倾朝野，诬害勃海王刘悝，累迁尚书令。 光和四年（181年），曹节去世，获赠车骑将军。",
            "snjs_boss_qihuanzhaozhong":"赵忠（？—189年），安平人，东汉末年宦官，赵延之兄。桓帝、灵帝时，历为小黄门、中常侍、大长秋、车骑将军等职，封都乡侯。在职时以搜刮暴敛、骄纵贪婪见称，灵帝极为宠信，常谓“赵常侍是我母”。中平六年（189年），何进谋诛宦官，事泄，他和其余几个常侍设计伏杀何进，袁绍、袁术等人闻何进被杀，入宫杀尽宦官，捕杀后赵忠。",
            "snjs_boss_qihuanzhangrang":"张让（？—189年9月24日），东汉宦官，颍川（今河南禹州）人。桓帝、灵帝时，历为小黄门、中常侍等职，封列侯。在职时以搜刮暴敛、骄纵贪婪见称，灵帝极为宠信，常谓“张常侍是我父”。中平六年（189年），何进谋诛宦官，事泄，他和其余几个常侍设计伏杀何进。袁绍、袁术等人闻何进被杀，入宫杀尽宦官，张让走投无路，投水自尽。",
            "snjs_boss_qihuanhejin":"何进（？～189年），字遂高，南阳郡宛县（今河南省南阳市）人。东汉时期外戚、大臣，灵思皇后之兄。初以妹妹何氏有宠，拜为郎中，后历任虎贲中郎将、颍川太守、侍中、将作大匠、河南尹等职。黄巾起义爆发时，拜为大将军，总镇京师，发现并镇压马元义的密谋，因功封为慎侯。为张大威望，在京师讲武结营，置西园八校尉。汉灵帝驾崩后，粉碎了中常侍蹇硕拥立皇子刘协的图谋，听从袁绍之言，博征智谋之士，内借元舅之资，外据辅政之权，独揽朝中大权。中平六年（189），不纳曹操和陈琳的劝谏，阴结军阀董卓来谋诛宦竖。事情败露后，为中常侍张让等人所杀，其后代是魏晋高门士族南阳何氏。",
            "snjs_boss_qihuanhetaihou":"灵思皇后何氏（？～189年9月30日），南阳宛县（今河南省南阳市）人，汉灵帝刘宏第二任皇后，汉少帝刘辩生母，追封舞阳侯何真之女，大将军何进和车骑将军何苗之妹。出身南阳何氏，屠户之家。选入掖庭，得到汉灵帝临幸，生下皇子刘辩，因此受封贵人。光和三年（180年），册立为皇后。中平六年（189年），汉灵帝去世后，其子刘辩即位，尊为皇太后。同年，率军进京的董卓废黜刘辩，母子全部毒杀。",
            "snjs_boss_zhuoguibaowei":"豹尾，管理兽类亡灵的冥帅，也是我国古代方术中虚拟的岁神名，常与岁神黄幡相对。",
            "snjs_boss_zhuoguihuangfeng":"黄蜂，管理昆虫亡灵的冥帅。",
            "snjs_boss_zhuoguiniaozui":"鸟嘴，管理鸟类亡灵的冥帅。",
            "snjs_boss_zhuoguiyusai":"鱼鳃，管理鱼类亡灵的冥帅。",
            "snjs_boss_zhuoguiniutou":"牛头，冥府的勾魂使者。",
            "snjs_boss_zhuoguimamian":"马面，冥府的勾魂使者。",
            "snjs_boss_zhuoguiniutoumamian":"牛头马面，二者皆为冥府的勾魂使者。",
            "snjs_boss_zhuoguiriyoushenyeyoushen":"日游神夜游神，东岳大帝、阎罗王、城隍爷等阴间神明的部下，分别于日间、夜间监督人间的善恶。",
            "snjs_boss_zhuoguibaiwuchang":"白无常，名为谢必安，对恭敬神明之人以好运，属阳，对男性吸其阴魂，对女性散其阴魄。",
            "snjs_boss_zhuoguiheiwuchang":"黑无常，名为犯无救，对违抗法令身负罪过者一概无赦，属阴，对女性吸其阳魂，对男性散其阳魄。",
            "snjs_boss_zhuoguiheiwuchangbaiwuchang":"黑无常，名为犯无救，对违抗法令身负罪过者一概无赦，属阴，对女性吸其阳魂，对男性散其阳魄。白无常，名为谢必安，对恭敬神明之人以好运，属阳，对男性吸其阴魂，对女性散其阴魄。",
            "snjs_boss_zhuoguiguiwang":"鬼王，传说六道中鬼世界之王，又泛指鬼的头目，为地府的中层管理。",
            "snjs_boss_zhuoguimengpo":"孟婆，冥府中的阴使，常驻在奈何桥边，为所有前往投胎的灵体提供孟婆汤，以消除鬼魂的记忆。",
            "snjs_boss_zhuoguiyanluowang":"阎罗王，冥界之王，统领阴间十八层地狱，主要工作是管理生灵的阳寿和阴寿，拥有掌管着三界万物生死存亡的至高权力，既是鬼又是神，名包拯。",
            "snjs_ex_machao":"马超（176年～222年），字孟起，扶风茂陵（今陕西省兴平市）人，汉伏波将军马援的后人，马腾的儿子，少年成名，曹操曾多次征召马超入京为官，但都被马超拒绝。而后马腾入京被封为卫尉，马超就统领了马腾的部队。建安十六年（211年），曹操治兵关中，马超联合关中诸侯韩遂等抵抗曹操，曾一度对曹操造成了极大的威胁，但被曹操用离间计击败退走，而后聚拢部队再次攻取陇上诸郡，失败后依附汉中张鲁。刘备攻打刘璋时，马超投降刘备，与刘备军合围成都，汉中之战后联名上书尊刘备为汉中王。蜀汉建立后，马超官至骠骑将军、斄乡侯。章武二年（222年），马超病逝，享年四十七岁，刘禅时期被追谥为威侯。有一女嫁于安平王刘理。有剑术“出手法”流传后世。",
            "snjs_ex_guojia":"郭嘉（170年－207年），字奉孝，颍川阳翟（今河南禹州）人。东汉末年曹操帐下著名谋士。郭嘉出身颍川郭氏。原为袁绍部下，后转投曹操，为曹操统一中国北方立下了功勋，官至军师祭酒，封洧阳亭侯。在曹操征伐乌丸时病逝，年仅三十八岁。谥号贞侯。史书上称他“才策谋略，世之奇士”。曹操称赞他见识过人，是自己的“奇佐”。",
            "snjs_ex_huanggai":"黄盖（生卒年不详），字公覆，零陵泉陵（今湖南省永州市零陵区）人。东汉末年名将，历仕孙坚、孙策、孙权三任，为人严肃，善于训练士卒，每每征讨，他的部队皆勇猛善战。早年为郡吏，后追随孙坚走南闯北。孙坚遇难后，黄盖跟随孙策、孙权“擐甲周旋，蹈刃屠城”。诸山越不宾，黄盖活跃在镇抚山越的一线，前后九县，所在悉平，迁丹杨都尉。建安十三年（208年）赤壁之战时，黄盖前往曹营诈降，并趁机以火攻大破曹操的军队，是赤壁之战主要功臣之一，以功拜武锋中郎将，他也因为此事迹而被后人广为传颂，罗贯中长篇小说《三国演义》在刻画黄盖这一人物时描写了“苦肉计”的故事。不久武陵蛮夷反，攻打城邑，黄盖以五百人，放其半入，拦腰截击，大破诸贼。春去夏来，寇乱尽平。后又平讨长沙益阳县山贼，加偏将军。官至偏将军、武陵太守。有一子黄柄。",
            "snjs_ex_zhangliao":"张辽（169年～222年），字文远，雁门马邑（今山西省朔州市）人。汉末三国时期曹魏名将，聂壹的后人。起初，担任雁门郡吏。又先后跟随丁原、何进、董卓、吕布，恪尽职守，历尽坎坷。吕布败亡后，张辽归属曹操。此后，立下众多显赫的功勋。洞察敌情而劝降昌豨。攻袁氏而转战河北。在白狼山之战率领先锋大破乌桓并斩杀乌桓单于蹋顿。驱逐辽东大将柳毅。以静制动平定军中谋反。进军江淮击灭陈兰、梅成。此后，长期镇守合肥。建安二十年（215年），合肥之战，张辽率领八百将士冲击东吴十万大军，一直冲杀到孙权的主帅旗下，令东吴军队披靡溃败、闻风丧胆。又率领追兵，大破孙权、甘宁、凌统等人，差点活捉孙权。经此一役，张辽威震江东。 “张辽止啼”成为流传千古的典故。黄初元年（220年），张辽进封晋阳侯。染病之后，依旧令孙权非常忌惮。黄初三年（222年），张辽抱病击破吴将吕范。同年，病逝于江都，谥曰刚侯。张辽为历代所推崇，成为古今六十四名将之一。",
            "snjs_ex_sunce":"孙策（175年～200年5月5日），字伯符，吴郡富春（今浙江省杭州市富阳区）人。破虏将军孙坚长子、吴大帝孙权长兄。东汉末年割据江东一带的军阀，汉末群雄之一，孙吴政权的奠基者之一。 为继承父亲孙坚的遗业而屈事袁术，兴平二年（195年），孙策征得袁术许可，东渡长江，进攻樊能、于糜，又在当利口袭击张英。并以曲阿为据点，与扬州刺史刘繇进行决战，大败刘繇。建安元年（196年），率兵进攻会稽王朗和吴郡严白虎。建安二年（197年），袁术僭越称帝后，孙策与袁术决裂；同年夏，被朝廷任命为骑都尉，袭父爵乌程侯，兼任会稽太守。建安三年（198年），朝廷任命孙策为讨逆将军，并封为吴侯。建安四年（199年），孙策击败庐江太守刘勋及刘表部将黄祖。建安五年（200年）初，在夺取豫章郡后统一江东；同年4月，正当孙策准备发兵北上之时，在丹徒狩猎时为许贡三门客所伤，不久后身亡，年仅二十六岁。其弟孙权接掌孙策势力，并于称帝后，追谥孙策为长沙桓王。",
            "snjs_ex_sunjian":"孙坚（155年～约191年），字文台，汉族，吴郡富春（今浙江省杭州市富阳区）人。东汉末年将领、军阀，东吴政权的奠基人之一。据传为春秋时期军事家孙武的后裔。史书说他“容貌不凡，性阔达，好奇节”。曾参与讨伐黄巾军的战役以及讨伐董卓的战役。后与刘表作战时阵亡。因官至破虏将军，又称“孙破虏”。其子孙权即为孙吴的开国皇帝。孙权称帝后，追谥孙坚为武烈皇帝，庙号始祖。",
            "snjs_ex_ganning":"甘宁（？—215年？220年？存疑），字兴霸，巴郡临江（今重庆忠县）人，三国时期孙吴名将，官至西陵太守，折冲将军。 甘宁少年时在地方上为非作歹，组成渠师抢夺船只财物，崇尚奢华，人称锦帆贼。青年时停止抢劫，熟读诸子。曾任蜀郡丞，后历仕于刘表和黄祖麾下，未受重用。建安十三年（208年），甘宁率部投奔孙权，开始建功立业。曾经力劝孙权攻破黄祖占据楚关，随周瑜攻曹仁夺取夷陵，随鲁肃镇益阳对峙关羽，随孙权攻皖城擒获朱光。率百余人夜袭曹营，斩得数十首级而回。在逍遥津之战，他保护孙权蹴马趋津，死里逃生。孙权曾说：“孟德有张辽，孤有甘兴霸，足相敌也”。吕蒙曾说：“天下未定，斗将如宁难得，宜容忍之。”甘宁虽然粗野凶狠，暴躁嗜杀，甚至违反承诺、违抗命令，但是，开朗豪爽，有勇有谋，轻视钱财，敬重士人，厚待士卒，并深得士卒拥戴。陈寿在史书中将他列为“江表之虎臣”。",
            "snjs_ex_zhouyu":"周瑜（175年-210年），字公瑾，庐江舒人 。东汉末年名将，出身庐江周氏，洛阳令周异之子，堂祖父周景、堂叔周忠，都官至太尉。长壮有姿貌、精音律，江东有“曲有误，周郎顾”之语。 周瑜少与孙策交好，21岁起随孙策奔赴战场平定江东，后孙策遇刺身亡，孙权继任，周瑜将兵赴丧，以中护军的身份与长史张昭共掌众事。建安十三年 （208年），周瑜率军与刘备联合，于赤壁之战中大败曹操，由此奠定了“三分天下”的基础。又率军大破曹仁，拜偏将军领南郡太守。建安十五年（210年）病逝于巴丘，年仅36岁。 正史上周瑜“性度恢廓”“实奇才也”，孙权称赞周瑜有“王佐之资\"，范成大誉之为“世间豪杰英雄士、江左风流美丈夫”。宋徽宗时追尊其为平虏伯。位列唐武庙六十四将、宋武庙七十二将之一。",
            "snjs_ex_luxun":"陆逊（183年－245年3月19日），本名陆议，字伯言，吴郡吴县人。三国时期吴国政治家、军事家。 建安八年（203年）入孙权幕府，历任海昌屯田都尉、定威校尉、帐下右部督。因受孙权赏识得以发挥卓越的军事才能，地位渐至隆崇。建安二十四年（219年），陆逊参与袭取荆州。蜀章武二年（222年），孙权以陆逊为大都督，在夷陵之战中火烧连营击败刘备。吴黄武七年（228年），陆逊取得石亭之战的胜利。黄龙元年（229年），孙权称帝后，以陆逊为上大将军、辅佐太子孙登并掌管陪都武昌事宜。赤乌七年（244年）拜为丞相、荆州牧、右都护、总领三公事务，领武昌事。孙和、孙霸二宫之争时卷入孙权父子相争中，次年去世，终年六十三岁，追谥“昭”。 陆逊跟随孙权四十余年，统领吴国军政二十余年。其为人深谋远虑，忠诚耿直。一生出将入相，被赞为“社稷之臣”。",
            "snjs_ex_huangzhong":"黄忠（？－220年），字汉升（一作“汉叔”），南阳（今河南南阳）人。汉末三国时期蜀汉名将。本为刘表部下中郎将，后归刘备，并助刘备攻破益州刘璋。建安二十四年（219年），定军山之战中，黄忠阵斩曹操部下名将夏侯渊，拜征西将军。刘备称汉中王后，加封后将军，赐关内侯。次年，黄忠病逝。景耀三年（260年），追谥为刚侯。黄忠在后世多以勇猛的老将形象出现于各类文学艺术作品中。《三国演义》里，刘备称汉中王后，将其封为“五虎上将”之一，而黄忠的名字在中国也逐渐成为了老当益壮的代名词。",
            "snjs_ex_guanyu":"关羽（？~220年），字云长，小字长生，河东郡解县（今山西省运城市盐湖区解州镇）人。汉末三国时期名将。 早年犯事，流落到涿郡，和刘备、张飞情同兄弟。参与镇压黄巾起义，跟随刘备颠沛流离。雄壮威猛，号称“万人敌”、雅号“美髯公”。徐州战败后，暂时投靠曹操，亲自斩杀颜良，受封汉寿亭侯。离开曹操，回到刘备身边。赤壁之战后，参与攻取荆州地区。刘备入川后，奉命镇守荆州，加号前将军。建安二十四年，水陆并进，围攻襄阳和樊城。水淹七军，全歼于禁援军，威震华夏，使得曹操一度产生迁都想法。面对孙权部下吕蒙、陆逊袭击后方，曹操部将徐晃正面夹击的局面，进退失据，兵败被杀。后主刘禅即位，追谥壮缪。 关羽去世后，民间尊为“关公”，历代朝廷多有褒封。清朝雍正时期，尊为“武圣”，与“文圣” 孔子地位等同。在小说《三国演义》中，名列“五虎上将”之首，使用青龙偃月刀。毛宗岗称其为《演义》三绝中的“义绝”。",
            "snjs_ex_zhangfei":"张飞（？—221年），字益德（《华阳国志》作翼德），涿郡（今河北保定涿州市）人，三国时期蜀汉名将。张飞勇武过人，与结拜兄弟关羽并称为“万人敌”。关羽年长数岁，张飞兄事之。公元184年黄巾起义爆发，刘备在涿县组织起了一支义勇军参与扑灭黄巾军的战争，张飞与关羽一起加入，随刘备辗转各地。三人情同兄弟，寝则同床，刘备出席各种宴会时，和关羽终日侍立在刘备身旁。公元196年因交恶曹豹而被吕布所破。吕布败亡之后，张飞被任命为中郎将。公元200年刘备衣带诏事情泄漏，率领关羽、张飞逃走，杀徐州刺史车胄。后刘备战败，关羽被擒，刘备与张飞投奔袁绍。公元208年刘备于长坂坡败退时，张飞仅率二十骑断后，据当阳桥厉声大喝，曹军无人敢逼近，刘备因此得以免难。 刘备入蜀后，张飞与诸葛亮、赵云进军西川，分定郡县。在抵达江州时义释了刘璋手下的巴郡太守严颜。在巴西之战中，击败魏国名将张郃。在武都之战中，兵败而还。刘备称帝后，张飞晋升为车骑将军、领司隶校尉，封西乡侯。同年，张飞因为暴而无恩，被部将范强、张达杀害，年仅五十五岁。谥曰桓侯。",
            "snjs_ex_zhaoyun":"赵云（？－229年），字子龙，常山真定人。身长八尺，姿颜雄伟，三国时期蜀汉名将。 汉末军阀混战，赵云受本郡推举，率领义从加入公孙瓒。期间结识了汉室皇亲刘备，但不久之后，赵云因为兄长去世而离开。赵云离开公孙瓒大约七年后，在邺城与刘备相见，从此追随刘备。 赵云跟随刘备将近三十年，先后参加过博望坡之战、长坂坡之战、江南平定战，独自指挥过入川之战、汉水之战、箕谷之战，都取得了非常好的战果。除了四处征战，赵云还先后以偏将军任桂阳太守，以留营司马留守公安，以翊军将军督江州。除此之外，赵云于平定益州时引霍去病故事劝谏刘备将田宅归还百姓，又于关羽、张飞被害之后劝谏刘备不要伐吴，被后世赞为有大臣局量的儒将，甚至被认为是三国时期的完美人物 。 赵云去世后，于蜀汉景耀四年（261年）被追谥为“顺平侯”，其“常胜将军”的形象在后世被广为流传。",
            "snjs_ex_liubei":"汉昭烈帝刘备（161年－223年6月10日），字玄德，涿郡涿县（今河北省涿州市）人，西汉中山靖王刘胜之后，蜀汉开国皇帝、政治家。史家多称其为先主。 刘备少年时拜卢植为师，而后参与镇压黄巾起义、讨伐董卓等活动。因为自身实力有限，刘备在诸侯混战过程中屡屡遭受失败，所以先后依附公孙瓒、陶谦、曹操、袁绍、刘表等多个诸侯。但因其始终坚持以德服人的行为准则，受到了海内外名士的尊敬，至有陶谦、刘表等放弃让自己的儿子继承基业，而是选择将自己的领地徐州、荆州让给刘备统领。 通过坚持不懈的努力，刘备于赤壁之战后，先后拿下荆州、益州，建立了蜀汉政权。而后因为关羽被东吴所害，刘备不听群臣劝阻，执意发动对吴国的战争，结果兵败夷陵，最终于章武三年（223年）病逝于白帝城，终年六十三岁，谥号昭烈皇帝，《晋书·王弥传》称之为烈祖，葬惠陵。 刘备弘毅宽厚，知人待士，百折不挠，其临死前举国托付给诸葛亮的行为被陈寿赞为古今之盛轨，后世众多文艺作品以刘备为主角。成都武侯祠有昭烈庙为之纪念。",
            "snjs_ex_simayi":"司马懿（179年～251年9月7日），字仲达，河内郡温县孝敬里（今河南省焦作市温县）人。三国时期曹魏政治家、军事谋略家、权臣，西晋王朝的奠基人之一。司马懿自幼聪明多大略，博学洽闻，伏膺儒教。因汉室被曹氏所控制，司马懿一度拒绝曹操授予的官职，但建安十三年（208年），曹操任丞相后，强行辟司马懿为文学掾。因司马懿曾支持曹操称帝，所以逐渐赢得了曹操的信任。曹操封魏王后，以司马懿为太子中庶子以佐助曹丕，帮助曹丕在储位之争中获得胜利。曹丕临终时，令司马懿与曹真等为辅政大臣，辅佐魏明帝曹叡。明帝时，司马懿屡迁抚军大将军、大将军、太尉等重职。明帝崩，托孤幼帝曹芳于司马懿和曹爽。曹芳继位后，司马懿遭到曹爽排挤，升官为无实权的太傅。正始十年（249年），司马懿趁曹爽陪曹芳离洛阳至高平陵祭陵，起兵政变并控制京都洛阳。自此，曹魏的军政权力落入司马氏手中，史称高平陵事变。司马懿善谋奇策，多次征伐有功，曾率军擒斩孟达，两次率大军成功抵御诸葛亮北伐，远征平定辽东。对屯田、水利等农耕经济发展有重要贡献。嘉平三年（251年），司马懿病逝，享年七十三岁，辞郡公和殊礼，葬于首阳山，谥号宣文。其次子司马昭封晋王后，追谥司马懿为宣王；其孙司马炎称帝后，追尊司马懿为宣皇帝，庙号高祖。",
            "snjs_ex_xuchu":"许褚（chǔ），字仲康，谯郡谯县（今安徽亳州市古城镇）人。东汉末年曹操部下猛将。容貌雄毅，勇力绝人。早年聚亲朋数千户共同抵御贼寇。后来，率众归顺曹操。负责曹操的护卫工作，累迁武卫中郎将，赐号“虎侯”。在潼关之战中，许褚吓退马超。为人谨慎奉法，并因此拒绝曹仁的邀请。曹操去世时，哭至吐血。魏文帝曹丕即位后，迁武卫将军，册封万岁亭侯，负责宫中安全。魏明帝曹叡继位时，册封牟乡侯，卒于任上，谥号为壮。",
            "snjs_ex_xiahoudun":"夏侯惇（？－220年6月13日），字元让，沛国谯县（今安徽省亳州市）人。汉末三国时期曹魏名将，西汉开国元勋夏侯婴的后代。少年时以勇气闻名于乡里。曹操起兵，夏侯惇是其最早的将领之一。与吕布军交战时，曾一度被擒为人质，又被流矢射瞎左眼。多次为曹操镇守后方，曾率军民阻断太寿河水，筑陂塘灌溉农田，使百姓受益，功勋卓著。官至大将军，封高安乡侯。追谥忠侯（《史记·谥法解》云：“危身奉上曰忠。险不辞难。”）。青龙元年（233年），得以配享太祖（曹操）庙庭。夏侯惇一生多在军旅，仍不忘治学。他常亲自迎师，虚心求教。他为人俭朴，所得赏赐全部分给将士。一生不置产业，至死家无余财。",
            "snjs_ex_dianwei":"典韦（？－197年），陈留己吾（今河南商丘市宁陵县己吾城村）人。东汉末年名将。典韦相貌魁梧，膂力过人。本属张邈，曾单手举起牙门旗。后转投曹操，在曹操征讨吕布时被募为陷阵，表现英勇，被拜为校尉，宿卫曹操。建安二年（197年），张绣背叛曹操，典韦为保护曹操而率十余人挡叛军，击杀多人，但最终因寡不敌众而战死。典韦武艺卓越，被史学家潘眉评价为：雄武壮烈，不在张辽、许褚之下。",
            "snjs_ex_gaoshun":"高顺（？－199年2月7日），东汉末年吕布帐下中郎将。史载高顺为人清白有威严，不好饮酒，所统率的部队精锐非常，号称“陷阵营”，平定吕布部将郝萌的反叛。屡次进谏忠言于吕布，吕布虽知其忠而不能用。曾与张辽一起连破夏侯惇、刘备。曹操击破吕布后，高顺被曹操所杀。",
            "snjs_ex_huaxiong":"华[huà]雄（?－191），中国东汉末年董卓部下的武将，为董卓帐下都督。公元191年，关东军阀联合讨伐董卓，董卓派大将胡轸统率华雄等进攻时任长沙太守的孙坚，结果被孙坚大败，华雄在此战中被孙坚枭首。明·罗贯中所著历史小说《三国演义》中则对这段历史作了改动，描写华雄连诛杀盟军二将，战场耀武扬威之时被刘备二弟名不经传的关羽所杀，这段被称为“温酒斩华雄”的故事情节也流传于后世。",
            "snjs_re_chengong":"陈宫（？－199年2月7日），字公台，东汉末年吕布帐下首席谋士，东郡东武阳（今山东莘县）人。性情刚直，足智多谋，年少时与海内知名之士相互结交。192年，兖州刺史刘岱在讨伐青州黄巾时战死，陈宫等人主张曹操接任兖州牧因而被曹操视为心腹。后来，陈宫游说张邈背叛曹操迎吕布入兖州，辅助吕布攻打曹操并先后取得兖州与徐州。下邳城中，吕布不听陈宫两面互补之计，以致失败。陈宫战败后，随吕布等一同被曹操所擒，拒绝曹操招降，决意赴死。",
            "snjs_ex_lvbu":"吕布（？～199年2月7日），字奉先，并州五原郡九原县人。东汉末年群雄之一。吕布因为骁武被并州牧丁原授骑都尉、河内主簿等职。杀死丁原后，成为董卓的义子，授中郎将。受到董卓猜疑，在司徒王允唆使，诛杀董卓，迁奋武将军、开府仪同三司，进封温县侯。旋即被董卓旧部击败，便逃离长安。先投袁术，被袁术拒绝。改投袁绍，被袁绍猜忌。于是去依附张杨。兴平元年（194年），吕布趁曹操攻打陶谦时与陈宫等联络而进入兖州，占据濮阳，与曹操血战两年，曾使曹操数战不利，但最终被曹操击败转而去依附徐州刘备。又趁刘备与袁术作战时袭取了徐州，与刘备时而和好，时而相互攻伐。期间，以辕门射戟化解刘备与纪灵的争斗。建安三年（198年），吕布遣将击败刘备与夏侯惇后，曹操亲自出马征讨吕布，水淹下邳。吕布被部下叛变，于十二月癸酉（199年2月7日）城破被俘，被处死。吕布以勇武闻名，号称“飞将”，时有“人中吕布，马中赤兔”之说。吕布所用的实战武器为矛。在《三国演义》及民间其他艺术形象，吕布多被塑造成三国第一猛将。其武器也被虚构为方天画戟。",
            "snjs_sp_shen_guanyu":"关羽（？~220年），字云长，小字长生，河东郡解县（今山西省运城市盐湖区解州镇）人。汉末三国时期名将。 早年犯事，流落到涿郡，和刘备、张飞情同兄弟。参与镇压黄巾起义，跟随刘备颠沛流离。雄壮威猛，号称“万人敌”、雅号“美髯公”。徐州战败后，暂时投靠曹操，亲自斩杀颜良，受封汉寿亭侯。离开曹操，回到刘备身边。赤壁之战后，参与攻取荆州地区。刘备入川后，奉命镇守荆州，加号前将军。建安二十四年，水陆并进，围攻襄阳和樊城。水淹七军，全歼于禁援军，威震华夏，使得曹操一度产生迁都想法。面对孙权部下吕蒙、陆逊袭击后方，曹操部将徐晃正面夹击的局面，进退失据，兵败被杀。后主刘禅即位，追谥壮缪。 关羽去世后，民间尊为“关公”，历代朝廷多有褒封。清朝雍正时期，尊为“武圣”，与“文圣” 孔子地位等同。在小说《三国演义》中，名列“五虎上将”之首，使用青龙偃月刀。毛宗岗称其为《演义》三绝中的“义绝”。",
            "snjs_shen_zhangjiao":"张角（？－184年），钜鹿（秦治今河北平乡、东汉治今河北宁晋）人。中国东汉末年农民起义军“黄巾军”的领袖。 张角修太平道，利用其中的某些宗教观念和社会政治思想，组织群众，约于灵帝建宁（168年-172年）初传道。 中平元年（184年），张角以“苍天已死，黄天当立，岁在甲子，天下大吉”为口号，自称“天公将军”，率领群众发动起义，史称“黄巾起义”。不久张角病死，起义军也很快被汉朝所镇压。",
            "snjs_shen_jiaxu":"贾诩（147年－223年8月11日），字文和，武威郡姑臧县（今甘肃武威市）人。汉末至三国时期军事战略家，曹魏开国功臣，轻骑将军贾龚之子。贾诩以举孝廉出身，起家拜郎官。后成为董卓部将。董卓死后，先后依附于李傕、郭汜、段煨、张绣，两次献计打败曹操。建安四年（199年）随张绣归降曹操。官渡之战时，力主决战。在赤壁之战前，主张先安楚地，后图江东，没有得到采纳。曹操与关中联军相持渭南时，献上离间计瓦解马超、韩遂，一举平定关中。在曹操继承人的确定上，以袁绍、刘表为例，暗示曹操不可废长立幼，支持曹丕成为世子。黄初元年（220年），曹丕称帝后，拜太尉，册封寿乡侯。反对曹丕征吴，没有得到采纳，无功而返。黄初四年（223年），贾诩去世，享年七十七岁，谥号为肃，配享魏文帝庙庭。《唐会要》尊其为魏晋八君子之首。",
            "snjs_re_beimihu":"卑弥呼（约159年-约247年，有的史书也写成“俾弥呼”）是日本弥生时代邪马台国的女王，在《三国志·魏书·倭人传》中有关于她的记载。关于她的真实身份一直众说纷纭，是个极具神秘色彩的古代女性统治者。亦是日本古代宗教鬼道教的发源者。",
            "snjs_chenshou":"陈寿（233年～297年），字承祚。巴西郡安汉县（今四川省南充市）人。三国时蜀汉及西晋时著名史学家。陈寿少时好学，师事同郡学者谯周，在蜀汉时曾任卫将军主簿、东观秘书郎、观阁令史、散骑黄门侍郎等职。当时，宦官黄皓专权，大臣都曲意附从。陈寿因为不肯屈从黄皓，所以屡遭遣黜。蜀降晋后，历任著作郎、长广太守、治书待御史、太子中庶子等职。晚年多次被贬，屡次受人非议。元康七年（297年）病逝，享年六十五岁。太康元年（280年），晋灭吴结束了分裂局面后，陈寿历经十年的艰辛，终于完成了纪传体史学巨著《三国志》。此书完整地记叙了自汉末至晋初近百年间中国由分裂走向统一的历史全貌，与《史记》《汉书》《后汉书》并称“前四史”。",
            "snjs_sp_yanghu":"羊祜（221年－278年12月27日），字叔子，兖州泰山郡南城县人。西晋时期杰出的战略家、政治家、文学家，曹魏上党太守羊衜之子，汉末才女蔡文姬的外甥。羊祜出身“泰山羊氏”，博学能文，清廉正直。曹魏时期，接受公车征辟，出任中书郎，迁给事黄门侍郎。姐姐嫁给大将军司马师，投靠司马氏家族，仕途平步青云。魏元帝曹奂即位，出任秘书监、相国从事中郎、中领军，统领御林军，兼管内外政事，册封钜平县子。西晋建立后，迁中军将军、散骑常侍、郎中令，册封钜平侯。泰始五年（269年），出任车骑将军、开府仪同三司，都督荆州诸军事，坐镇襄阳，屯田兴学，以德怀柔，深得军民之心；扩充军备，训练士兵，全力准备灭亡孙吴，累迁征南大将军，册封南城侯。咸宁四年（278年），羊祜去世，临终前举荐杜预接任职务。死后获赠侍中、太傅，谥号为“成”。唐宋时期，配享武庙。",
            "snjs_sp_lusu":"鲁肃（172年－217年），字子敬，汉族，临淮郡东城县（今安徽省滁州市定远县人），东汉末年杰出战略家、外交家。鲁肃出生于一士族家庭。幼年丧父，由祖母抚养长大。他体貌魁伟，性格豪爽，喜读书、好骑射。东汉末年，他眼见朝廷昏庸，官吏腐败，社会动荡，常召集乡里青少年练兵习武。他还仗义疏财，深得乡人敬慕。当时，周瑜为居巢长，因缺粮向鲁肃求助，鲁肃将一仓三千斛粮食慷慨赠给周瑜。从此，二人结为好友，共谋大事。建安五年（200年），在周瑜的引荐下鲁肃率领部属投奔孙权，为其提出鼎足江东的战略规划，因此得到孙权的赏识。建安十三年（208年），曹操率大军南下。孙权部下多主降，而鲁肃与周瑜力排众议，坚决主战。结果，孙刘联军大败曹军于赤壁，从此，奠定了三国鼎立格局。赤壁大战后，鲁肃常被孙权比作东汉开国元勋之首——邓禹。孙权专门为鲁肃而设立赞军校尉一职。周瑜逝世后，孙权采纳周瑜生前建议，令鲁肃代周瑜职务领兵四千人，因鲁肃治军有方，军队很快发展到万余人。孙权根据当时政治军事形势需要，又任命鲁肃为汉昌太守，授偏将军；鲁肃随从孙权破皖城后，被授为横江将军，守陆口。此后，东吴夺取了荆州三郡，鲁肃率兵抵御关羽，并邀荆州守将关羽相。在单刀赴会时，鲁肃口若悬河，令关羽无言以对。建安二十二年（217年），鲁肃去世，终年46岁，孙权亲自为鲁肃发丧，诸葛亮亦为其发哀。",
            "snjs_zhangsu":"张肃（生卒年不详），字君矫（《华阳国志》作君矫），蜀郡（今成都一带）人，张松之兄，张表的伯父（《华阳国志》，一说为张表之父）汉末益州牧刘璋部下，官至广汉太守。",
            "snjs_shen_zhangsong":"张松（？－212年），字子乔（字永年为演义混淆，实为蜀中另一位名臣彭羕的字）。蜀郡成都（今四川成都）人。建安十三年（208年），为益州牧刘璋别驾从事，被派遣至曹操处而不为其所存录，因而怀怨恨。回蜀后，劝刘璋与曹操断绝关系，并说璋连好刘备；其后，又说璋迎备以击张鲁，皆为璋所采纳。建安十七年（212年），暗助刘备，为其兄张肃所告发，刘璋怒而将他斩杀。",
            "snjs_shen_fazheng":"法正（176年－220年），字孝直。扶风郿（今陕西省眉县小法仪镇）人。东汉末年刘备帐下谋士，名士法真之孙。原为刘璋部下，刘备围成都时劝说刘璋投降，而后又与刘备进取汉中，献计将曹操大将夏侯渊斩首。法正善奇谋，深受刘备信任和敬重。建安二十四年（219年），刘备进位汉中王，封法正为尚书令、护军将军。次年，法正去世，终年四十五岁。法正之死令刘备十分感伤，连哭数日。被追谥为翼侯，是刘备时代唯一一位有谥号的大臣。法正善于奇谋，被陈寿称赞为可比曹操帐下的程昱和郭嘉。《全三国文》辑录有其文一篇。",
            "snjs_zhuhao":"朱皓，（约156－195年），字文明（《献帝春秋》载字文渊），会稽上虞（今浙江绍兴上虞）人。汉豫章太守。父朱儁，汉大司农。皓有父风，亦有才行。初，豫章太守周术病卒，刘表上诸葛玄为豫章太守，治南昌。汉朝闻周术死，遣皓代玄。皓从扬州刺史刘繇求兵击玄，玄退屯西城，皓入南昌。兴平二年，繇屯彭泽，又使融助皓讨刘表所用太守诸葛玄。许劭以融出军，不顾名义者也。朱皓善推诚以信人，宜使密防之。后融到，果诈杀皓，代领郡事。 皓先于父亡。",
            "snjs_sp_zumao":"祖茂（生卒年不详），东汉末年武将。孙坚的心腹将领。孙坚常著赤罽帻，乃脱帻令亲近将祖茂著之。卓骑争逐茂，故坚从间道得免。茂困迫，下马，以帻冠冢闲烧柱，因伏草中。卓骑望见，围绕数重，定近觉是柱，乃去。《三国演义》中说祖茂字大荣，《三国志·吴书·孙破虏传》中有记载。",
            "snjs_re_mayunlu":"马超的妹妹，自幼习武，女中无双。在为马腾复仇的战事中跟随马超来到中原，与赵云一见钟情，闪电结婚。个性纯真率直，有时会十分调皮，故意使坏，让赵云不知所措。对于在战场厮杀的赵云来说，云騄不小心流露出来的温情，也给了困境中的赵云许多慰藉。",
            "snjs_ex_madai":"马岱，生卒年不详，扶风茂陵（今陕西省兴平市）人。三国时期蜀汉名将，马超的从弟。早年追随马超大战曹操，反攻陇上，围攻成都，汉中之战等。后在诸葛亮病逝后受杨仪派遣斩杀了蜀将魏延。曾率领军队出师北伐，被魏将牛金击败而退还。官至平北将军、陈仓侯。",
            "snjs_sp_mizhu":"麋竺（又作糜竺）（？～约221年），字子仲。东海郡朐县（今江苏连云港西南）人。东汉末年刘备帐下重臣。麋竺原为徐州富商，后被徐州牧陶谦辟为别驾从事。陶谦病死后，奉其遗命迎接刘备，成为其幕客。更与其弟麋芳拒绝曹操的任命，跟随刘备周旋。在刘备潦倒时，麋竺给予他很大的帮助，使之重新振作。刘备入主益州后，拜麋竺为安汉将军，位列刘备手下众臣之首。吕蒙袭取荆州，麋芳举城投降，导致关羽兵败身亡，麋竺面缚请罪，刘备劝慰麋竺，对他待遇如初，但不久后他即因惭恨病死。麋竺雍容大方，敦厚文雅，擅骑射，虽然从未统领军队，但一直被刘备待以上宾之礼。",
            "snjs_re_caochong":"曹冲（196年－208年），字仓舒，东汉末年人物，东汉豫州刺史部谯（今亳州）人，曹操和环夫人之子。从小聪明仁爱，与众不同，深受曹操喜爱。留有“曹冲称象”的典故。曹操几次对群臣夸耀他，有让他继嗣之意。曹冲还未成年就病逝，年仅十三岁。",
            "snjs_re_caoang":"曹昂（？～197年），字子脩，沛国谯县（今安徽省亳州市）人。曹操的长子，刘氏所生，但生母早亡是以由正室丁氏抚养大。二十岁时被举为孝廉。建安二年（197年）随曹操出征张绣，张绣降而复叛，曹昂为救曹操被杀。魏文帝黄初二年（221年），追封谥号丰悼公，黄初五年（224年）又进一步追封为丰悼王。太和三年（229年）年改谥号丰愍王。",
            "snjs_sp_xushao":"许劭（150年～195年），字子将，汝南平舆（今河南省平舆县）人。东汉末年著名人物评论家。少有名节，善于评价，定期举办“月旦评”。举孝廉出身，出任汝南郡功曹。拒绝司空杨彪征召，投靠扬州牧刘繇。刘繇被孙策击败后，逃往豫章郡。东汉兴平二年，去世，时年四十六岁。",
            "snjs_old_caoren":"曹仁（168年－223年5月6日），字子孝，沛国谯县（今安徽省亳州市）人，汉末三国时期曹魏名将，魏武帝曹操从弟，陈穆侯曹炽之子。曹仁少时喜好弓马弋猎，不修行检。领军之后，奉法守令。跟从曹操征战四方，破袁术、攻陶谦、擒吕布、败刘备，参加官渡之战，立下汗马功劳。赤壁之战后，镇守江陵，抵御周瑜的进攻，最终弃城而走。又督诸将据守潼关，破苏伯、田银于河间，灭侯音于宛城。在襄樊之战中，誓死镇守樊城，挡住关羽的围攻。曹丕嗣位后，曹仁拜车骑将军、都督荆扬益州诸军事、荆州刺史，晋封陈侯。黄初二年，拜大将军、大司马，执掌军事大权。黄初四年，曹仁率兵进攻濡须口，不听蒋济所劝，惨败于吴将朱桓，郁郁而终，时年五十六，谥号为忠，配享曹操庙庭。",
            "snjs_old_zhoutai":"周泰，字幼平，九江下蔡（今安徽凤台）人。三国时期孙吴武将。孙策平定江东时与同郡蒋钦一起加入孙策军，随孙策左右，从征刘繇、严白虎、王朗等人，数有战功。后来，孙权爱其为人，向孙策请求让周泰跟随自己。周泰多次于战乱当中保护孙权的安危，身上受的伤多达几十处，就像在皮肤上雕画一样。从征黄祖，在赤壁之战抵御曹操，皆有战功。后来，孙权为了表彰周泰为了东吴出生入死的功绩，而赐给他青罗伞盖，使他留督濡须，吴将朱然、徐盛等因此对其拜服。官至汉中太守、奋威将军，封陵阳侯。死于黄武中期。其子周邵，亦数有战功，死于黄龙二年。周邵的弟弟周承继承了兵权和爵位。",
            "snjs_ex_sunquan":"孙权，字仲谋，谥号大皇帝（吴大帝），庙号太祖（182年－252年5月21日）。吴郡富春县（今浙江省杭州市富阳区）人。三国时期孙吴的建立者（229年－252年5月21日在位）。孙权晚年在继承人问题上反复无常，引致群下党争，朝局不稳。于神凤元年（252年）病逝，享年七十一岁，在位二十四年，葬于蒋陵。孙权的父亲孙坚和兄长孙策，在东汉末年群雄割据中打下了江东基业。建安五年（200年），孙策遇刺身亡，孙权继之掌事，成为一方诸侯。建安十三年（208年），与刘备建立孙刘联盟，并于赤壁之战中击败曹操，奠定三国鼎立的基础。建安二十四年（219年），派吕蒙成功袭取刘备的荆州，使领土面积大大增加。黄武元年（222年），孙权被魏文帝曹丕册封为吴王，建立吴国。同年，在夷陵之战中大败刘备。黄龙元年（229年），在武昌正式称帝，国号吴，不久后迁都建业。孙权称帝后，设置农官，实行屯田，设置郡县，并继续剿抚山越，促进了江南经济的发展。黄龙二年（230年），所派将军卫温、诸葛直抵达夷州（今台湾）。孙权亦善书，唐代张怀瓘在《书估》中将其书法列为第三等。",
            "snjs_ex_caocao":"魏武帝曹操（155年～220年），字孟德，小名阿瞒、吉利，沛国谯县（今安徽省亳州市）人。中国古代杰出的政治家、军事家、文学家、书法家、诗人。东汉末年宰相，太尉曹嵩之子，曹魏政权的奠基者。 东汉末年，面对天下大乱，以汉献帝刘协名义征讨四方，对内消灭二袁、吕布、刘表、马超、韩遂等割据势力，对外降服南匈奴、乌桓、鲜卑等，统一中国北方地区，扩大屯田、兴修水利、奖励农桑、重视手工业、安置流民、实行“租调制”，促进中原地区经济生产和社会稳定。建安十八年（213年），获封魏公，建立魏国，定都邺城。建安二十一年（216年），册封魏王，权位在诸王之上。 建安二十五年（220年3月15日），去世，谥号为武，安葬于高陵。其子曹丕称帝，追封皇帝，谥号为武，庙号太祖。曹操喜欢用诗歌、散文抒发政治抱负，反映民生疾苦，是东汉文学的代表人物，被鲁迅称赞“改造文章的祖师”。擅长书法，被唐朝张怀瓘《书断》评为“妙品”。",
            "snjs_jibu":"汲布，是电视剧《大军师司马懿之军师联盟》的人物。身份为武功高强的校事府校尉，曹丕的得力手下。年少时是独行剑侠，黄巾之乱时偶遇张春华，对她一见倾心。多年后张春华嫁入司马府，他将对她的爱恋转化为守候，多次救司马家于危难之中。在电视剧大军师司马懿之军师联盟剧情介绍中，汲布其实是校事府的一名校事。曹操在得知董承等人要刺杀他以后，便在月旦评设防，而刺杀曹操的死士混在人群中，汲布则是曹操设置在人群中的人，让他假意先出手刺杀，其他的死士便会都动手，那样就可以将死士引蛇出洞。",
            "snjs_xiahoulan":"夏侯岚，阵面对决中的虚构人物，设定为刘备的女儿，在大战中走失，被曹纯拾得带回魏国，后被夏侯渊收养，起名为夏侯岚。嫁与曹纯之子曹演，诸葛亮北伐时与姜维一起投降蜀国。",
            "snjs_sunhuan":"孙桓（198年－223年），字叔武，吴郡富春（今浙江杭州富阳区）人，三国时期吴国建武将军。孙河第三子。仪容端正，器怀聪明，博学强记，能论议应对，孙权常称为“宗室颜渊”。初擢为武卫都尉。建安二十四年（219年），参与由吕蒙指挥的袭击荆州行动，从讨关羽于华容，招揽关羽余众，得五千人以及大量牛马器械。黄武元年（222年），孙桓二十五岁，拜安东中郎将，跟随陆逊抗击进攻东吴的刘备。当时刘备率领众多兵众进攻，满山都是蜀军，孙桓奋战，与陆逊等协力击破蜀军。刘备兵败逃走，孙桓截击，“斩上夔道，扼要径”，差点生擒刘备。战后孙桓因功拜建武将军，封丹徒侯，督牛渚，修筑横江坞，期间逝世。",
            "snjs_sp_xunyu":"荀彧（xún yù）（163年－212年），字文若。颍川郡颍阴县（今河南许昌）人。东汉末年政治家、战略家，曹操统一北方的首席谋臣和功臣。荀彧早年被称为“王佐之才”，举孝廉出身，任守宫令。董卓执政后弃官归乡，率领宗族避难冀州，被袁绍待为上宾。后投奔曹操，官至侍中、守尚书令，封万岁亭侯，居中持重达十数年，处理军国事务，被人敬称为“荀令君”。后因反对曹操称魏公，被调离中枢，于寿春忧郁而亡（一说服毒自尽），享年五十岁。获谥为“敬”。魏咸熙二年（265年）被赠为太尉。荀彧在战略方面为曹操规划制定了统一北方的蓝图和军事路线，多次修正曹操的战略方针而获其赞赏，包括“深根固本以制天下”、“迎奉天子”；战术上，面对吕布叛乱而保全兖州三城，奇谋扼制袁绍于官渡，险出宛、叶而间行轻进以掩其不意奇袭荆州等诸多建树；政治上，为曹操举荐了钟繇、荀攸、陈群、杜袭、戏志才、郭嘉等大量人才。荀彧在建计、密谋、匡弼、举人等方面多有建树，被曹操称为“吾之子房”。",
			"snjs_ex_zhenji":"文昭甄皇后（183年1月26日—221年8月4日），名不明，相传为甄宓（fú），实则无记载。史称甄夫人，中山郡无极县（今河北无极）人，上蔡令甄逸之女。魏文帝曹丕的妻子，魏明帝曹叡的生母。甄氏三岁丧父。建安中期，袁绍为次子袁熙纳之为妻。建安四年（199年）袁熙出任幽州刺史，甄氏留在冀州侍奉袁绍的妻子刘氏。建安九年（204年），曹操率军攻下邺城，甄氏因为姿貌绝伦，被曹丕所纳，甚得宠爱，生下儿子曹叡和女儿曹氏（即东乡公主）。延康元年（220年），曹丕继位魏王，六月率军南征，甄氏被留在邺城。黄初元年（220年），曹丕称帝，山阳公刘协进献二女为曹丕妃嫔，后宫中文德郭皇后，李贵人和阴贵人都得到宠幸，甄氏愈发失意，流露出一些怨恨的话语，曹丕大怒，黄初二年（221年）六月，遣使赐死甄氏，葬于邺城。黄初七年（226年）五月，曹丕病重，立甄氏的儿子平原王曹叡为太子。曹叡即位后，追谥甄氏曰文昭皇后。太和四年十二月辛未日（231年2月17日），魏明帝曹叡将甄氏改葬于朝阳陵。",
			"snjs_ex_zhugeliang":"诸葛亮（181年—234年10月8日），字孔明，号卧龙，徐州琅琊阳都（今山东省沂南县）人，三国时期蜀汉丞相，中国古代杰出的政治家、军事家、发明家、文学家。诸葛亮早年随叔父诸葛玄到荆州，诸葛玄死后，诸葛亮就在隆中隐居。后刘备三顾茅庐请出诸葛亮，联合东吴孙权于赤壁之战大败曹军，形成三国鼎足之势，又夺占荆州。建安十九年（214年），攻取益州。继又击败曹军，夺得汉中。章武元年（221年），刘备在成都建立蜀汉政权，诸葛亮被任命为丞相。后主刘禅继位，诸葛亮被封为武乡侯，领益州牧。勤勉谨慎，大小政事必亲自处理，赏罚严明；与东吴联盟，改善和西南各族的关系；实行屯田政策，加强战备。前后五次北伐中原，未能实现兴复汉室的目标。终因积劳成疾，于建兴十二年（234年）病逝于五丈原（今陕西省宝鸡市岐山境内），享年五十四岁。后主刘禅追谥为忠武侯，后世常以武侯尊称。东晋桓温追封为武兴王。诸葛亮散文代表作有《出师表》《诫子书》等。曾发明木牛流马、孔明灯等，并改造连弩，叫做诸葛连弩，可一弩十矢俱发。诸葛亮一生“鞠躬尽瘁、死而后已”，是中国传统文化中忠臣与智者的代表人物。",
			"snjs_ex_sunshangxiang":"孙尚香（？—约223），吴郡富春（今浙江省杭州市富阳区）人，东汉末年讨虏将军孙权之妹，曾为左将军刘备之妻。史书《三国志》称之为孙夫人。民间戏剧称之为孙尚香。 为巩固孙刘联盟，孙夫人嫁给刘备三年，后来大归回吴，夹在两国之间，有着与传统女性截然不同的桀骜不驯的个性，是有名的侠女，孙夫人在许多小说，戏剧和影视里被不断描绘。",
			"snjs_zhangbiao":"张表（？年~261年），字伯达，蜀郡成都县人，张松的儿子。为人仪表威重，举止风度，年少知名，累任尚书。蜀汉朝廷以张表为庲降都督，加拜安南将军，出镇南中。张表在南中期间，清高的名望超过了马忠。",
			"snjs_xinping":"辛评（？－204年），字仲治，颍川阳翟人辛毗之兄。原是韩馥部下，韩馥逃亡后转而辅佐袁绍。袁绍死后，辛评、郭图欲立袁谭为主，与审配等不和。后来曹操破邺，其弟辛毗在城下劝降，审配怒遣手下将辛评全家杀害。",
			"snjs_wangtao":"王桃是在《花关索传》中登场的虚拟人物，盗贼王令公的两个女儿之一，王悦的姐姐，与妹妹都是关索之妻。姐妹俩原为卢塘寨山贼，以武艺与美貌而闻名，被众多男性求婚却皆不与理睬。她们在关索回西川认父途中与关索交手时不敌，因意气投合而一齐下嫁。夫妻三人共同守护葭萌关，共同参与诸葛亮之南蛮征伐。",
			"snjs_wangyue":"王悦是在《花关索传》中登场的虚拟人物，盗贼王令公的两个女儿之一，王桃的妹妹，与姐姐都是关索之妻。姐妹俩原为卢塘寨山贼，以武艺与美貌而闻名，被众多男性求婚却皆不与理睬。她们在关索回西川认父途中与关索交手时不敌，因意气投合而一齐下嫁。夫妻三人共同守护葭萌关，共同参与诸葛亮之南蛮征伐。",
			"snjs_yuanshang":"袁尚（？－207年），字显甫，汝南郡汝阳县（今河南省商水县）人。袁绍的第三子，容颜俊美，受到父亲袁绍的偏爱。继承袁绍的官爵，招致长兄袁谭的怨恨，兄弟相残，均被曹操所败，带着袁熙逃往辽西，投奔乌丸首领蹋顿。曹操平定乌丸后，投奔辽东太守公孙康。遭到处死，首级传送于曹操之处。",
			"snjs_yuantan":"袁谭（？－205年），字显思（《东光世系》中字显恩，一说显忠），汝南郡汝阳县（今河南商水）人。大将军袁绍长子，击败田楷、孔融，完全占据青州，任青州刺史。袁绍去世后，审配等伪立遗令，拥立袁尚为继承人，袁谭不能继位，心怀愤恨。后袁谭、袁尚二人的矛盾彻底爆发，袁谭联合曹操共同攻打袁尚。建安十年，曹操兴兵进攻南皮，袁谭奋力抵抗，终于在曹操急攻之下战败，为曹纯麾下虎豹骑所杀。",
			"snjs_guotu":"郭图（？－205年），字公则，颍川（治今河南省禹州市）人。东汉末年袁绍帐下谋士。官渡之战时力主趁机偷袭曹营，在此计失败后为免于责罚而归罪于率军偷袭曹营的张郃、高览，致使二人背袁投曹。袁绍死后为其长子袁谭效力。",
			"snjs_pangji":"逄纪（？-202年，逄音páng，古“逄”字），字元图，南阳人。东汉末年袁绍部下谋臣。建安七年，袁绍去世，逄纪、审配私下改袁绍遗命，立袁尚继位。袁谭不能继位，自称车骑将军，屯黎阳。袁尚不给袁谭多兵，使逄纪随之。袁谭要求配兵为审配拒绝，一怒之下杀了逄纪。",
			"snjs_liuxun":"东汉末益州牧刘璋之子。刘备为取益州进围雒城，循率军抵抗，坚守近一年。城破被俘，刘备封他为奉车中郎将。",
			"snjs_pangxi":"庞羲，生卒年不详，司隶河南（治今河南洛阳）人。汉末三国时期人物。汉灵帝时担任议郎。 初事刘焉，后事刘璋，嫁女于璋长子循为妻，为璋亲厚。数与张鲁战，任巴西太守，遂专权势。好士，招合部曲以备乱。璋疑之，羲厚陈谢璋，方为无事。刘备定成都后，任其为左将军府司马。",
			"snjs_feiguan":"费观（191～228)，字宾伯，为刘璋的女婿，是蜀汉四相之一费祎的族父。以参军随李严据守绵竹，后与李严一同投降刘备。后为巴郡太守、江州都督。建兴元年封都亭侯，加振威将军，为人善於交接。常用钱财资助施与他人，既有义气又有原则，很受人亲信。费观小李严二十余岁，跟李严交往时却像同辈一样。卒年三十七岁。",
			"snjs_fazhen":"法真（100年－188年），字高卿，右扶风郡郿县（今陕西宝鸡市眉县）人。东汉时期名学者，南郡太守法雄的儿子。他对于诸子百家经典以及谶纬之学都颇有造诣，以清高而著称。于中平五年去世，时年八十九岁。",
			"snjs_sp_hanfu":"韩馥（？—191年），字文节，颍川郡（今河南禹州）人。东汉末年的诸侯，曾任御史中丞，被董卓推举为冀州牧，后参与讨伐董卓。袁绍用计夺取冀州，韩馥被迫投靠张邈；之后张邈与袁绍的使者见面，韩馥误以为是要来杀害自己的，于是在厕所中以刻书用的小刀自杀。",
			
            "snjs_xiaosha":"三国杀虚拟偶像。(并非原版技能，技能已经过个人调整，原版技能是为PVE助战而设计的)",
            "snjs_xiaoshan":"三国杀虚拟偶像。(并非原版技能，技能已经过个人调整，原版技能是为PVE助战而设计的)",
            "snjs_xiaojiu":"三国杀虚拟偶像。(并非原版技能，技能已经过个人调整，原版技能是为PVE助战而设计的)",
            "snjs_xiaotao":"三国杀虚拟偶像。(并非原版技能，技能已经过个人调整，原版技能是为PVE助战而设计的)",
            "snjs_xiaole":"三国杀虚拟偶像。(并非原版技能，技能已经过个人调整，原版技能是为PVE助战而设计的)",
            "snjs_tszz_xiaosha":"强度：★★★★★",
            "snjs_tszz_xiaoshan":"强度：★☆☆☆☆（你很倒霉）",
            "snjs_tszz_xiaojiu":"强度：★★★★★",
            "snjs_tszz_xiaotao":"强度：★★☆☆☆（至少能救人）",
            "snjs_tszz_xiaole":"强度：★☆☆☆☆（你很倒霉）",
				},
				translate:{
					"snjs_shen_zhangfei":"神张飞",
					"snjs_sp_shen_sunce":"SP神孙策",
					"snjs_shen_liuyan":"神刘焉",
					"snjs_re_shen_guanyu":"界神关羽",
					"snjs_shen_machao":"神马超",
					"snjs_re_shen_zhangliao":"界神张辽",
					"snjs_sp_shen_guojia":"SP神郭嘉",
					"snjs_re_shen_zhouyu":"界神周瑜",
					"snjs_re_shen_lvmeng":"界神吕蒙",
					"snjs_re_shen_lvbu":"界神吕布",
					"snjs_re_shen_caocao":"界神曹操",
					"snjs_re_shen_zhugeliang":"界神诸葛亮",
					"snjs_dianweicaoang":"典韦曹昂",
					"snjs_wenchou":"文丑",
					"snjs_yanliang":"颜良",
					"snjs_sp_liubei":"SP刘备",
					"snjs_re_shen_liubei":"界神刘备",
					"snjs_shen_zhangxiu":"神张绣",
					"snjs_jiachong":"贾充",
					"snjs_xiahouen":"夏侯恩",
					"snjs_houcheng":"侯成",
					"snjs_bianxi":"卞喜",
					"snjs_liuli":"刘刕",
					"snjs_guosheng":"郭胜",
					"snjs_jianshuo":"蹇硕",
					"snjs_chengkuang":"程旷",
					"snjs_fengxu":"封谞",
					"snjs_duangui":"段珪",
					"snjs_xiayun":"夏恽",
					"snjs_houlan":"侯览",
					"snjs_caojie":"曹节",
					"snjs_sp_zhaozhong":"SP赵忠",
					"snjs_sp_zhangrang":"SP张让",
					"snjs_gouan":"苟安",
					"snjs_sp_zhangning":"SP张宁",
					"snjs_re_shen_zhaoyun":"界神赵云",
					"snjs_wangchong":"王冲",
					"snjs_yushe":"俞涉",
					"snjs_zhaoang":"赵昂",
					"snjs_sp_fanyufeng":"SP樊玉凤",
					"snjs_simayan":"司马炎",
					"snjs_zhangchu":"张楚",
					"snjs_re_shen_ganning":"界神甘宁",
					"snjs_sp_zhangjiao":"SP张角",
					"snjs_huangjinbing":"黄巾兵",
					"snjs_zhangjv":"张举",
					"snjs_zhangchun":"张纯",
					"snjs_zhangjvzhangchun":"张举张纯",
					"snjs_zhangyan":"张燕",
					"snjs_dengmao":"邓茂",
					"snjs_bocai":"波才",
					"snjs_chengyuanzhi":"程远志",
					"snjs_guanhai":"管亥",
					"snjs_guanyuzhangfei":"关羽张飞",
					"snjs_xiahouzie":"夏侯子萼",
					"snjs_zhangwei":"张葳",
					"snjs_fanqiangzhangda":"范强张达",
					"snjs_wuban":"吴班",
					"snjs_haomeng":"郝萌",
					"snjs_re_shen_luxun":"界神陆逊",
					"snjs_re_shen_simayi":"界神司马懿",
					"snjs_sp_fushirenmifang":"SP傅士仁麋芳",
					"snjs_shen_sunshangxiang":"神孙尚香",
					"snjs_sp_lvbu":"SP吕布",
					"snjs_sp_xvjing":"SP许靖",
					"snjs_pengqi":"彭绮",
					"snjs_penghu":"彭虎",
					"snjs_yuanshi":"袁氏",
					"snjs_sp_zhouche":"SP周彻",
					"snjs_zhucaizhuji":"朱才朱纪",
					"snjs_zhuzhizhuranzhuhuan":"朱治朱然朱桓",
					"snjs_xianyufu":"鲜于辅",
					"snjs_sp_chenzhen":"SP陈震",
					"snjs_sp_sunyi":"SP孙翊",
					"snjs_sunyu":"孙瑜",
					"snjs_re_dingfeng":"界丁奉",
					"snjs_shen_caozhi":"神曹植",
					"snjs_baoxin":"鲍信",
					"snjs_chezhou":"车胄",
					"snjs_caohua":"曹华",
					"snjs_caoxian":"曹宪",
					"snjs_shen_zhugeguo":"神诸葛果",
					"snjs_gaoxiang":"高翔",
					"snjs_sp_lvlingqi":"SP吕玲绮",
					"snjs_shen_weiyan":"神魏延",
					"snjs_shen_sunquan":"神孙权",
					"snjs_shen_zhoutai":"神周泰",
					"snjs_shen_xuchu":"神许褚",
					"snjs_shen_dianwei":"神典韦",
					"snjs_guodian":"郭典",
					"snjs_shen_caoren":"神曹仁",
					"snjs_sp_dongbai":"SP董白",
					"snjs_al_guanyu":"异关羽",
					"snjs_caoyuee":"曹月娥",
					"snjs_sp_zhangxiu":"SP张绣",
					"snjs_al_chenqian":"异陈骞",
					"snjs_jiangwan":"蒋琬",
					"snjs_chenqian":"陈骞",
					"snjs_shen_zuoci":"神左慈",
					"snjs_shen_dongzhuo":"神董卓",
					"snjs_ju_sunquan":"少孙权",
					"snjs_shen_yuanshao":"神袁绍",
					"snjs_zhanghong":"张纮",
					"snjs_ex_machao":"极马超",
					"snjs_ex_guojia":"极郭嘉",
					"snjs_ex_huanggai":"极黄盖",
					"snjs_ex_zhangliao":"极张辽",
					"snjs_ex_sunce":"极孙策",
					"snjs_ex_sunjian":"极孙坚",
					"snjs_ex_ganning":"极甘宁",
					"snjs_ex_zhouyu":"极周瑜",
					"snjs_ex_luxun":"极陆逊",
					"snjs_ex_huangzhong":"极黄忠",
					"snjs_ex_guanyu":"极关羽",
					"snjs_ex_zhangfei":"极张飞",
					"snjs_ex_zhaoyun":"极赵云",
					"snjs_ex_liubei":"极刘备",
					"snjs_ex_simayi":"极司马懿",
					"snjs_ex_xuchu":"极许褚",
					"snjs_ex_xiahoudun":"极夏侯惇",
					"snjs_ex_dianwei":"极典韦",
					"snjs_ex_gaoshun":"极高顺",
					"snjs_ex_huaxiong":"极华雄",
					"snjs_re_chengong":"界陈宫",
					"snjs_ex_lvbu":"极吕布",
					"snjs_sp_shen_guanyu":"SP神关羽",
					"snjs_shen_zhangjiao":"神张角",
					"snjs_shen_jiaxu":"神贾诩",
					"snjs_re_beimihu":"界卑弥呼",
					"snjs_chenshou":"陈寿",
					"snjs_sp_yanghu":"SP羊祜",
					"snjs_sp_lusu":"SP鲁肃",
					"snjs_zhangsu":"张肃",
					"snjs_shen_zhangsong":"神张松",
					"snjs_shen_fazheng":"神法正",
					"snjs_zhuhao":"朱皓",
					"snjs_sp_zumao":"SP祖茂",
					"snjs_re_mayunlu":"界马云騄",
					"snjs_ex_madai":"极马岱",
					"snjs_sp_mizhu":"SP麋竺",
					"snjs_re_caochong":"界曹冲",
					"snjs_re_caoang":"界曹昂",
					"snjs_sp_xushao":"SP许劭",
					"snjs_old_caoren":"旧曹仁",
					"snjs_old_zhoutai":"旧周泰",
					"snjs_ex_sunquan":"极孙权",
					"snjs_ex_caocao":"极曹操",
					"snjs_jibu":"汲布",
					"snjs_xiahoulan":"夏侯岚",
					"snjs_sunhuan":"孙桓",
					"snjs_sp_xunyu":"SP荀彧",
					"snjs_ex_zhenji":"极甄姬",
					"snjs_ex_zhugeliang":"极诸葛亮",
					"snjs_ex_sunshangxiang":"极孙尚香",
					"snjs_zhangbiao":"张表",
					"snjs_xinping":"辛评",
					"snjs_wangtao":"王桃",
					"snjs_wangyue":"王悦",
					"snjs_yuanshang":"袁尚",
					"snjs_yuantan":"袁谭",
					"snjs_guotu":"郭图",
					"snjs_pangji":"逄纪",
					"snjs_liuxun":"刘循",
					"snjs_pangxi":"庞羲",
					"snjs_feiguan":"费观",
					"snjs_fazhen":"法真",
					"snjs_sp_hanfu":"SP韩馥",
					
					"snjs_xiaosha":"小杀",
					"snjs_xiaoshan":"小闪",
					"snjs_xiaojiu":"小酒",
					"snjs_xiaotao":"小桃",
					"snjs_xiaole":"小乐",
					"snjs_tszz_xiaosha":"助战小杀",
					"snjs_tszz_xiaoshan":"助战小闪",
					"snjs_tszz_xiaojiu":"助战小酒",
					"snjs_tszz_xiaotao":"助战小桃",
					"snjs_tszz_xiaole":"助战小乐",
					
            szfyb:"疑兵",
            "szfyb_info":"<span style='color: #40E0D0'>锁定技</span>，每回合限一次，任意角色使用的【杀】结算后，你将之置于「疑兵」中。",
            szfyb2:"疑兵",
            "szfyb2_info":"<span style='color: #40E0D0'>锁定技</span>，每回合限一次，任意角色使用的【杀】结算后，你获得之。",
            szfpx:"咆哮",
            "szfpx_info":"①<span style='color: #40E0D0'>锁定技</span>，你使用【杀】无<span style='color: #FFFF00'>次数</span>限制，你于此<span style='color: #E3CF57'>出牌阶段</span>内使用过【杀】，则你本回合内使用【杀】没有<span style='color: #FFFF00'>距离</span>限制。②<span style='color: #40E0D0'>锁定技</span>，当你使用的【杀】被【闪】抵消时，你获得一枚「咆哮」，当你因【杀】造成<span style='color: #FF7D40'>伤害</span>时，你弃置所有「咆哮」并令<span style='color: #FF7D40'>伤害</span>值+X（X为「哮」的数量）。<span style='color: #E3CF57'>回合结束</span>后，你弃置所有「咆哮」。",
            szffq:"奋起",
            "szffq_info":"<span style='color: #FF6347'>觉醒技</span>，<span style='color: #E3CF57'>出牌阶段</span>开始，若你的「疑兵」不少于你的<span style='color: #00FF00'>体力值</span>，你<span style='color: #00FF00'>回复</span>「疑兵」-<span style='color: #00FF00'>体力值</span>点<span style='color: #00FF00'>体力</span>并获得「疑兵」中的所有牌，然后修改技能〖疑兵〗。",
            szfzh:"战吼",
            "szfzh_info":"<span style='color: #E3CF57'>准备阶段</span>，你可以令一名其他角色展示其所有<span style='color: #FF00FF'>手牌</span>，若其中有【闪】，其选择弃置其中的所有【闪】或受到1点<span style='color: #FF7D40'>伤害</span>。",
            slyts:"图射",
            "slyts_info":"当你使用<span style='color: #F4A460'>非装备牌</span>指定目标后，若你没有<span style='color: #808069'>基本牌</span>，则你可以摸X张牌。（X为此牌指定的目标数）。",
            slylm:"立牧",
            "slylm_info":"你可以将一张<span style='color: #FF0000'>♦</span>牌当做【乐不思蜀】对自己使用，然后<span style='color: #00FF00'>回复</span>1点<span style='color: #00FF00'>体力</span>。只要你的<span style='color: #9933FA'>判定区</span>内有牌，你对<span style='color: #C76114'>攻击范围</span>内的其他角色使用牌便没有<span style='color: #FFFF00'>次数</span>和<span style='color: #FFFF00'>距离</span>限制。",
            slyzf:"自封",
            "slyzf_info":"<span style='color: #FFD700'>限定技</span>，<span style='color: #E3CF57'>出牌阶段</span>，若你已通过〖图射〗累计摸了18张牌，你可以获得【丈八蛇矛】。",
            slypa:"偏安",
            "slypa_info":"①<span style='color: #E3CF57'>出牌阶段</span>限一次，你可以将所有<span style='color: #FF00FF'>手牌</span>当作【五谷丰登】使用，然后将你的武将牌<span style='color: #990033'>翻面</span>。②当你的武将牌<span style='color: #990033'>翻回正面</span>后，你可以弃置一名角色<span style='color: #9933FA'>区域内</span>的一张牌。",
            jsgysm:"噬命",
            "jsgysm_info":"<span style='color: #40E0D0'>锁定技</span>：①你于回合内使用<span style='color: #FF0000'>红</span>【杀】对一名角色造成<span style='color: #FF7D40'>伤害</span>后，令该角色减少等于<span style='color: #FF7D40'>伤害量</span>的<span style='color: #00C78C'>体力上限</span>，若该角色没有「噬命」标记，令其获得「噬命」标记。②拥有「噬命」标记的角色<span style='color: #00FF00'>回复</span><span style='color: #00FF00'>体力</span>时，改为获得等量的<span style='color: #00C78C'>体力上限</span>，并移除「噬命」标记。",
            jsgyzh:"追魂",
            "jsgyzh_info":"①<span style='color: #40E0D0'>锁定技</span>，当你使用的【杀】被目标角色使用的【闪】抵消时，你摸一张牌且可以对其使用一张【杀】(无<span style='color: #FFFF00'>距离</span>限制)。②当你受到<span style='color: #FF7D40'>伤害</span>后，你摸一张牌且可以对<span style='color: #FF7F50'>伤害来源</span>使用一张【杀】。",
            jsgyly:"戾魇",
            "jsgyly_info":"<span style='color: #40E0D0'>锁定技</span>，当你造成<span style='color: #FF7D40'>伤害</span>后，获得X枚「戾魇」标记(X为<span style='color: #FF7D40'>伤害量</span>)。当你死亡时，若「戾魇」标记数量不小于你的<span style='color: #00C78C'>体力上限</span>，你移除所有「戾魇」标记，然后减少1点<span style='color: #00C78C'>体力上限</span>并<span style='color: #00FF00'>回复</span>所有<span style='color: #00FF00'>体力</span>，最后令<span style='color: #FF00FF'>手牌</span>等于你的<span style='color: #00FF00'>体力值</span>。",
            jsgygs:"鬼神",
            "jsgygs_info":"<span style='color: #40E0D0'>锁定技</span>，你的<span style='color: #FF0000'>红牌</span>皆视为<span style='color: #FF8000'>火</span>【杀】。",
            smczm:"追命",
            "smczm_info":"①你的回合内，任意其他角色<span style='color: #BC8F8F'>失去</span>一张牌后，其本回合不能使用或打出该花色的牌。②每回合限一次，你使用的【杀】结算后，你可以令此【杀】的目标弃置一张其本回合未<span style='color: #BC8F8F'>失去</span>过的花色的牌，直到其无法以此法弃置任何牌，然后若其本回合<span style='color: #BC8F8F'>失去</span>的花色数大于2，你对其造成1点<span style='color: #FF7D40'>伤害</span>。",
            smcwf:"武伐",
            "smcwf_info":"你可以将任意张【杀】当作【杀】使用。<span style='color: #40E0D0'>锁定技</span>：①你使用的【杀】的<span style='color: #FF7D40'>伤害</span>+X(X为组成此【杀】的卡牌数量-1)；②当你使用【杀】造成<span style='color: #FF7D40'>伤害</span>后，你摸<span style='color: #FF7D40'>伤害量</span>张牌。",
            smcsj:"神驹",
            "smcsj_info":"<span style='color: #40E0D0'>锁定技</span>，当你与其他角色计算<span style='color: #FFFF00'>距离</span>时，始终为1。",
            smctw:"天威",
            "smctw_info":"<span style='color: #E3CF57'>准备阶段</span>，你可以令一名角色交给你一张【杀】，若其未交给你牌，则该角色本回合所有<span style='color: #F4A460'>非锁定技</span><span style='color: #8B864E'>失效</span>且视为你对其使用一张【杀】(不计入出【杀】<span style='color: #FFFF00'>次数</span>)。",
            jszldr:"夺锐",
            "jszldr_info":"每回合限一次，当你对一名没有「夺锐」标记的其他角色造成<span style='color: #FF7D40'>伤害</span>时，你可以选择该角色的一个技能(特殊技能除外)做出以下选择后获得之：①替换一个以此法获得的技能；②减少1点<span style='color: #00C78C'>体力上限</span>。若此做，直到<span style='color: #E3CF57'>该角色回合结束</span>，其该技能<span style='color: #8B864E'>失效</span>。",
            jszltx:"突袭",
            "jszltx_info":"<span style='color: #E3CF57'>摸牌阶段</span>摸牌时，你可以少摸任意张牌，然后获得等量的角色的各一张<span style='color: #FF00FF'>手牌</span>。<span style='color: #E3CF57'>摸牌阶段</span>结束时，你可以重铸X张牌(X为你通过〖夺锐〗获得的技能数)。",
            jszlzt:"止啼",
            "jszlzt_info":"<span style='color: #40E0D0'>锁定技</span>，你<span style='color: #C76114'>攻击范围</span>内受伤的其他角色<span style='color: #FFC0CB'>手牌上限</span>减1。",
            sscwl:"武略",
            "sscwl_info":"<span style='color: #E3CF57'>摸牌阶段</span>，你可以展示一张<span style='color: #FF00FF'>手牌</span>，然后所有其他角色可以依次展示一张<span style='color: #FF00FF'>手牌</span>：①若<span style='color: #228B23'>点数</span>不小于你，视为对你使用一张【杀】；②若<span style='color: #228B23'>点数</span>比你小，则你<span style='color: #E3CF57'>摸牌阶段</span>摸牌数量+1，且获得一枚「武略」；③若没展示<span style='color: #FF00FF'>手牌</span>须弃置一张牌。你的<span style='color: #E3CF57'>回合开始</span>时，若存活的势力数量大于2，则移除所有「武略」。<span style='color: #40E0D0'>锁定技</span>，你的<span style='color: #FFC0CB'>手牌上限</span>+X(X为你「武略」的数量)。",
            sscyy:"鹰扬",
            "sscyy_info":"<span style='color: #40E0D0'>锁定技</span>，<span style='color: #E3CF57'>准备阶段</span>，你从3张<span style='color: #7FFF00'>吴势力</span>武将牌中选择并获得一个技能(<span style='color: #FFD700'>限定技</span>、<span style='color: #FF6347'>觉醒技</span>、<span style='color: #8B0000'>主公技</span>除外)，直到<span style='color: #E3CF57'>回合结束</span>。",
            sscyg:"勇冠",
            "sscyg_info":"以你拥有的「武略」数量获得以下效果：①0枚以上，每当你使用(指定目标后)或被使用(成为目标后)【决斗】或<span style='color: #FF0000'>红</span>【杀】时，你可以摸一张牌；②1枚以上，当你成为其他角色<span style='color: #FF0000'>红牌</span>的目标时，你可以摸一张牌；③2枚以上，当你使用<span style='color: #FF0000'>红牌</span>时，你可以摸一张牌。",
            spsgjyc:"遗策",
            "spsgjyc_info":"当你死亡时，可以令一名其他角色增加1点<span style='color: #00C78C'>体力上限</span>、<span style='color: #00FF00'>回复</span>1点<span style='color: #00FF00'>体力</span>并摸两张牌，然后获得〖遗计〗。",
            jszysz:"神姿",
            "jszysz_info":"<span style='color: #40E0D0'>锁定技</span>，你的<span style='color: #FFC0CB'>手牌上限</span>为你的<span style='color: #00C78C'>体力上限</span>。<span style='color: #E3CF57'>回合开始</span>你可以对自己造成1点<span style='color: #FF8000'>火焰</span><span style='color: #FF7D40'>伤害</span>。",
            jszyyy:"业炎",
            "jszyyy_info":"<span style='color: #FFD700'>限定技</span>，<span style='color: #E3CF57'>出牌阶段</span>，你可以弃置1~3张<span style='color: #FF0000'>红牌</span>，并将X点<span style='color: #FF8000'>火焰</span><span style='color: #FF7D40'>伤害</span>分配给至多X名其他角色，然后对自身造成X-1点<span style='color: #FF8000'>火焰</span><span style='color: #FF7D40'>伤害</span>(X为弃牌数量)，你于<span style='color: #E3CF57'>下个回合开始</span>时获得技能〖业火〗。",
            jszyhl:"红莲",
            "jszyhl_info":"<span style='color: #40E0D0'>锁定技</span>，每当你受到<span style='color: #FF8000'>火焰</span><span style='color: #FF7D40'>伤害</span>时，你可以防止该<span style='color: #FF7D40'>伤害</span>或摸2X张牌(X等于<span style='color: #FF7D40'>伤害量</span>)。",
            jszyyh:"业火",
            "jszyyh_info":"<span style='color: #E3CF57'>出牌阶段</span>限一次，若你已受伤，你可以弃置至多X张<span style='color: #FF0000'>红牌</span>，对至多X名角色各造成1点<span style='color: #FF8000'>火焰</span><span style='color: #FF7D40'>伤害</span>(X为你已损失的<span style='color: #00FF00'>体力值</span>)。",
            jszyqy:"琴音",
            "jszyqy_info":"<span style='color: #E3CF57'>弃牌阶段</span>结束时选择一项：1. 令所有角色各<span style='color: #00FF00'>回复</span>1点<span style='color: #00FF00'>体力</span>；2. 令所有角色各受到1点<span style='color: #FF8000'>火焰</span><span style='color: #FF7D40'>伤害</span>。",
            jslmsl:"涉猎",
            "jslmsl_info":"<span style='color: #E3CF57'>摸牌阶段</span>，你可以改为从牌堆顶亮出六张牌，然后选择获得不同花色的牌各一张。",
            jslmgx:"攻心",
            "jslmgx_info":"<span style='color: #E3CF57'>出牌阶段</span>限一次，你可以观看一名其他角色的<span style='color: #FF00FF'>手牌</span>，并可以获得其中一张牌，若获得牌的花色为<span style='color: #FF0000'>♥</span>，你摸一张牌。",
            jslmkj:"克己",
            "jslmkj_info":"<span style='color: #E3CF57'>弃牌阶段</span>开始时，若你于本回合的<span style='color: #E3CF57'>出牌阶段</span>内没有过使用或打出过【杀】，则你可以跳过此阶段。",
            jslmbt:"博图",
            "jslmbt_info":"<span style='color: #E3CF57'>回合结束</span>时，若你本回合<span style='color: #E3CF57'>出牌阶段</span>内使用的牌包含四种花色，则你可以进行一个额外回合。",
            spsgjss:"十胜",
            "spsgjss_info":"<span style='color: #E3CF57'>出牌阶段</span>限一次：①若你的「十胜」小于十，你可以令自己或一名没有「十胜」的角色依次猜牌堆顶的十张牌，猜中对应项目执行：1.该角色与你各获得一枚「十胜」(每名角色至多拥有十枚「十胜」);2.其获得该牌(此项对自己不生效);3.其弃置一名角色<span style='color: #9933FA'>区域内</span>的一张牌;4.你摸一张牌。②若你的「十胜」等于十，你可以令一名拥有「十胜」的角色展示牌堆顶的十张牌，并获得其中的X张牌(X为该角色的「十胜」数量,若目标是自己X为5)，最后弃置你与该角色的所有「十胜」且你减少1点<span style='color: #00C78C'>体力上限</span>。",
            jslbwm:"无谋",
            "jslbwm_info":" <span style='color: #40E0D0'>锁定技</span>：<span style='color: #FA8072'>〔表〕»</span> 你的[具有/不具有]“<span style='color: #FF7D40'>伤害</span>”标签的<span style='color: #FCE6C9'>锦囊</span>视为[【决斗】/【杀】]。<span style='color: #8470FF'>〔里〕»</span> 任意角色使用<span style='color: #FCE6C9'>锦囊牌</span>时，须弃置一张牌。",
            jslbsf:"神愤",
            "jslbsf_info":"①<span style='color: #E3CF57'>出牌阶段</span>限一次，你可以弃置5枚「暴怒」，令所有其他角色[<span style='color: #FA8072'>〔表〕»</span> 受到1点<span style='color: #FF7D40'>伤害</span>/<span style='color: #8470FF'>〔里〕»</span> 弃置所有牌]，然后你将武将牌<span style='color: #990033'>翻面</span>。②<span style='color: #E3CF57'>结束阶段</span>，你可以弃置2枚「暴怒」并将武将牌<span style='color: #990033'>翻面</span>。③<span style='color: #40E0D0'>锁定技</span>，当你[造成或受到1点<span style='color: #FF7D40'>伤害</span>后/武将牌<span style='color: #990033'>翻面</span>时]，你[获得1枚「暴怒」/改为<span style='color: #FA8072'>切</span><span style='color: #8470FF'>换</span><span style='color: #FA8072'>形</span><span style='color: #8470FF'>态</span>并摸两张牌]。",
            jslbws:"无双",
            "jslbws_info":"<span style='color: #40E0D0'>锁定技</span>：①当你使用【杀】指定目标后，响应此【杀】需要的【闪】数量+1；②你使用的【决斗】不能被目标响应，你成为【决斗】的目标时，取消之并对使用者造成1点<span style='color: #FF7D40'>伤害</span>。",
            jslbwq:"无前",
            "jslbwq_info":"<span style='color: #40E0D0'>锁定技</span>：你使用牌无视<span style='color: #DA70D6'>防具</span>。<span style='color: #FA8072'>〔表〕»</span> 你使用【杀】或【决斗】可以指定至多三个目标；你计算与其他角色的<span style='color: #FFFF00'>距离</span>时始终-1。<span style='color: #8470FF'>〔里〕»</span> <span style='color: #E3CF57'>摸牌阶段</span>多摸两张牌；使用【杀】的<span style='color: #FFFF00'>次数</span>+2。",
            jsccgx:"归心",
            "jsccgx_info":"当你受到1点<span style='color: #FF7D40'>伤害</span>后，你可以获得每名其他角色区域里的一张牌，然后你<span style='color: #990033'>翻面</span>。",
            jsccfy:"飞影",
            "jsccfy_info":"<span style='color: #40E0D0'>锁定技</span>，其他角色计算与你的<span style='color: #FFFF00'>距离</span>时+1。",
            jsccxx:"雄心",
            "jsccxx_info":"当你的武将牌<span style='color: #990033'>翻回正面</span>后，若你是<span style='color: #00FF00'>体力</span>最低的角色，进行一次<span style='color: #03A89E'>判定</span>，为<span style='color: #FF0000'>红色</span>则<span style='color: #00FF00'>回复</span>1点<span style='color: #00FF00'>体力</span>。",
            jscccx:"称雄",
            "jscccx_info":"<span style='color: #FF6347'>觉醒技</span>，<span style='color: #E3CF57'>准备阶段</span>，若存活角色少于5，则你获得1点<span style='color: #00C78C'>体力上限</span>并<span style='color: #00FF00'>回复</span>1点<span style='color: #00FF00'>体力</span>，然后获得技能〖奸雄〗。",
            jsccjx:"奸雄",
            "jsccjx_info":"当你受到<span style='color: #FF7D40'>伤害</span>后，你可以获得对你造成<span style='color: #FF7D40'>伤害</span>的牌并摸一张牌。",
            dwcaqx:"强袭",
            "dwcaqx_info":"<span style='color: #E3CF57'>出牌阶段</span>限一次，若你没有受伤则<span style='color: #BC8F8F'>失去</span>1点<span style='color: #00FF00'>体力</span>，若你已受伤则你减少1点<span style='color: #00C78C'>体力上限</span>，然后对你<span style='color: #C76114'>攻击范围</span>内的一名其他角色造成1点<span style='color: #FF7D40'>伤害</span>。",
            dwcakk:"慷慨",
            "dwcakk_info":"当一名角色成为【杀】的目标后，若你至该角色的<span style='color: #FFFF00'>距离</span>为1，你可以摸一张牌。若如此做，你交给其一张牌并展示之。若为<span style='color: #DA70D6'>装备牌</span>，该角色可以使用此牌。",
            jszglqx:"七星",
            "jszglqx_info":"①<span style='color: #40E0D0'>锁定技</span>，游戏开始时将牌堆底的7张牌置于你的武将牌上称为「星」，你至多拥有7张「星」，你的<span style='color: #FFC0CB'>手牌上限</span>等于「星」的数量；每回合限两次，你的<span style='color: #E3CF57'>回合开始</span>与<span style='color: #E3CF57'>结束阶段</span>、任意角色受到<span style='color: #FF7D40'>伤害</span>后或<span style='color: #03A89E'>判定</span>结算后，你从牌堆底获得1张「星」。②<span style='color: #E3CF57'>摸牌阶段</span>，你可以改为将<span style='color: #FF00FF'>手牌</span>摸至与「星」相等。③游戏开始时、<span style='color: #E3CF57'>摸牌阶段</span>结束时、<span style='color: #E3CF57'>弃牌阶段</span>开始时，你可用任意数量的<span style='color: #FF00FF'>手牌</span>交换等量的「星」。",
            jszglgx:"观星",
            "jszglgx_info":"任意角色<span style='color: #03A89E'>判定</span>前、任意角色摸牌前，你可以观看牌堆顶的X张牌(X为你「星」的数量)，并将其以任意顺序置于牌堆项或牌堆底，然后将一张「星」里的牌交给自己或该角色。",
            jszglkf:"狂风",
            "jszglkf_info":"<span style='color: #E3CF57'>出牌阶段</span>限一次，你可以弃置两张花色相同的<span style='color: #FF0000'>红牌</span>并获得「星」里的两张牌，然后对一名角色造成1点<span style='color: #FF8000'>火焰</span><span style='color: #FF7D40'>伤害</span>或令其获得「狂风」标记(直到你的下个<span style='color: #E3CF57'>回合开始</span>)。",
            jszgldw:"大雾",
            "jszgldw_info":"<span style='color: #E3CF57'>结束阶段</span>，你可以令至多X名角色获得「大雾」标记(直到你的下个<span style='color: #E3CF57'>回合开始</span>)，然后你弃置2X张「星」(X为你「星」数量的一半，X向下取整)。",
            ylyj:"勇决",
            "ylyj_info":"①每当你<span style='color: #228B22'>拼点</span>结束后，若结果为：胜，你获得一张【杀】并摸一张牌(若牌堆中没有【杀】，改为摸两张牌)，然后视为对<span style='color: #228B22'>拼点目标</span>使用一张【决斗】；平，你与<span style='color: #228B22'>拼点目标</span>各摸一张牌；负，无事发生。②<span style='color: #E3CF57'>出牌阶段</span>限一次，你可以与一名角色<span style='color: #228B22'>拼点</span>。",
            wcjm:"决命",
            "wcjm_info":"①回合内限一次，当你对其他角色造成<span style='color: #FF7D40'>伤害</span>后，你可以弃一张<span style='color: #FF00FF'>手牌</span>，然后视为你对其使用一张【决斗】。②当你于回合外受到其他角色造成的<span style='color: #FF7D40'>伤害</span>后(【决斗】造成的<span style='color: #FF7D40'>伤害</span>除外)，你可以获得一张【杀】，若<span style='color: #FF7D40'>伤害量</span>大于1，你再摸<span style='color: #FF7D40'>伤害量</span>-1张牌(若牌堆中没有【杀】，改为摸<span style='color: #FF7D40'>伤害量</span>张牌)，然后视为你对其使用一张【决斗】。",
            splbyw:"乐舞",
            "splbyw_info":"<span style='color: #E3CF57'>出牌阶段</span>限一次，摸两张牌，然后所有其他角色摸一张牌。",
            splbxl:"享乐",
            "splbxl_info":"<span style='color: #40E0D0'>锁定技</span>，当其他角色使用【杀】指定你为目标时，其需弃置一张<span style='color: #808069'>基本牌</span>，否则此【杀】对你无效。",
            szxxl:"雄乱",
            "szxxl_info":"<span style='color: #E3CF57'>出牌阶段</span>限一次，若你没有被废除的<span style='color: #9933FA'>装备栏</span>你可以废除你的所有<span style='color: #9933FA'>装备栏</span>，然后指定一名其他角色。直到<span style='color: #E3CF57'>回合结束</span>，你对其使用牌无<span style='color: #FFFF00'>距离</span>和<span style='color: #FFFF00'>次数</span>限制，其<span style='color: #F4A460'>非锁定技"+"</span><span style='color: #8B864E'>失效</span>且不能使用和打出<span style='color: #FF00FF'>手牌</span>。",
            szxxx:"枭雄",
            "szxxx_info":"<span style='color: #40E0D0'>锁定技</span>，当你受到<span style='color: #FF7D40'>伤害</span>后，将牌堆中的X张【杀】置于「枭雄」中(X为<span style='color: #FF7D40'>伤害量</span>)，若你有被废除的<span style='color: #9933FA'>装备栏</span>，你恢复一个<span style='color: #9933FA'>装备栏</span>，然后若你没有被废除的<span style='color: #9933FA'>装备栏</span>，你获得「枭雄」中的所有【杀】。",
            szxcj:"从谏",
            "szxcj_info":"当你成为<span style='color: #FCE6C9'>锦囊牌</span>的目标时，若此牌的目标数大于1，则你可以交给其中一名其他目标角色一张牌，然后摸两张牌。",
            jslbln:"龙怒",
            "jslbln_info":"<span style='color: #DA70D6'>转换技"+"</span>&<span style='color: #40E0D0'>锁定技</span>。阴：<span style='color: #E3CF57'>出牌阶段</span>开始时，摸一张牌，然后本回合内你的<span style='color: #FF0000'>红色</span><span style='color: #FF00FF'>手牌</span>均视为<span style='color: #FF8000'>火</span>【杀】且无<span style='color: #FFFF00'>距离</span>限制。阳：<span style='color: #E3CF57'>出牌阶段</span>开始时，摸一张牌，然后本回合你的<span style='color: #FCE6C9'>锦囊牌</span>均视为<span style='color: #0000FF'>雷</span>【杀】且无使用<span style='color: #FFFF00'>次数</span>限制。",
            jslbjy:"结营",
            "jslbjy_info":"<span style='color: #40E0D0'>锁定技</span>，游戏开始时或当你的武将牌重置时，你<span style='color: #A0522D'>横置</span>；所有已<span style='color: #A0522D'>横置</span>的角色<span style='color: #FFC0CB'>手牌上限</span>+2；<span style='color: #E3CF57'>结束阶段</span>，你<span style='color: #A0522D'>横置</span>一名其他角色。",
            jcys:"炎殇",
            "jcys_info":"",
            jckx:"克陷",
            "jckx_info":"<span style='color: #40E0D0'>锁定技</span>，<span style='color: #E3CF57'>准备阶段</span>，进行一次<span style='color: #03A89E'>判定</span>，根据结果获得技能(直到<span style='color: #E3CF57'>下回合开始</span>)：<span style='color: #666666'>♠</span>〖雷霆〗、<span style='color: #FF0000'>♥</span>〖炎殇〗、<span style='color: #666666'>♣</span>〖毒祸〗、<span style='color: #FF0000'>♦</span>〖寒燠〗。",
            jcbs:"悖弑",
            "jcbs_info":"<span style='color: #E3CF57'>结束阶段</span>：1.你是<span style='color: #00FF00'>体力值</span>最低的角色；2.你是<span style='color: #FF00FF'>手牌数</span>最少的角色；3.你于<span style='color: #E3CF57'>弃牌阶段</span>弃置了至少两张牌。满足以上任意一项，则你可以对一名<span style='color: #00FF00'>体力值</span>不低于你的其他角色造成1点<span style='color: #FF7D40'>伤害</span>。",
            jclt:"雷霆",
            "jclt_info":"",
            jcdh:"毒祸",
            "jcdh_info":"",
            jchy:"寒燠",
            "jchy_info":"",
            jczys:"炎殇",
            "jczys_info":"<span style='color: #40E0D0'>锁定技</span>，你造成的<span style='color: #FF7D40'>伤害</span>视为<span style='color: #FF8000'>火焰</span><span style='color: #FF7D40'>伤害</span>。造成<span style='color: #FF7D40'>伤害</span>后，若没有触发「雷霆」、「毒祸」或「寒燠」标记，则令目标获得「炎殇」标记。",
            jczlt:"雷霆",
            "jczlt_info":"<span style='color: #40E0D0'>锁定技</span>，你造成的<span style='color: #FF7D40'>伤害</span>视为<span style='color: #0000FF'>雷电</span><span style='color: #FF7D40'>伤害</span>。造成<span style='color: #FF7D40'>伤害</span>后，若没有触发「炎殇」、「毒祸」或「寒燠」标记，则令目标获得「雷霆」标记。",
            jczdh:"毒祸",
            "jczdh_info":"<span style='color: #40E0D0'>锁定技</span>，防止你即将造成的<span style='color: #FF7D40'>伤害</span>，令目标<span style='color: #BC8F8F'>失去</span>1点<span style='color: #00FF00'>体力</span>。若没有触发「雷霆」、「炎殇」或「寒燠」标记，则令目标获得「毒祸」标记。",
            jczhy:"寒燠",
            "jczhy_info":"<span style='color: #40E0D0'>锁定技</span>，防止你即将造成的<span style='color: #FF7D40'>伤害</span>，弃置目标两张牌。若没有触发「雷霆」、「炎殇」或「毒祸」标记，则令目标获得「寒燠」标记。",
            xhell:"掳掠",
            "xhell_info":"<span style='color: #E3CF57'>出牌阶段</span>限一次，你可以将两张<span style='color: #FF00FF'>手牌</span>当做【顺手牵羊】使用。",
            xhepj:"佩剑",
            "xhepj_info":"<span style='color: #40E0D0'>锁定技</span>，游戏开始与<span style='color: #E3CF57'>准备阶段</span>开始时，若你的<span style='color: #9933FA'>装备区</span>里没有【青釭剑】，你装备之；杀死你的角色获得【青釭剑】。<span style='color: #E3CF57'>出牌阶段</span>限一次，你可以将自己<span style='color: #9933FA'>装备区</span>里的【青釭剑】置于一名其他角色的<span style='color: #9933FA'>装备区</span>，然后你与其各摸一张牌。",
            hcdm:"盗马",
            "hcdm_info":"①每当其他角色在你的回合外使用<span style='color: #DA70D6'>坐骑牌</span>后，你可以弃一张牌并获得该<span style='color: #DA70D6'>坐骑牌</span>。②每当其他角色弃置<span style='color: #DA70D6'>坐骑牌</span>后，你可以获得该<span style='color: #DA70D6'>坐骑牌</span>。",
            hcxm:"献马",
            "hcxm_info":"<span style='color: #E3CF57'>出牌阶段</span>，你可以将一张<span style='color: #DA70D6'>坐骑牌</span>置于一名角色<span style='color: #9933FA'>装备区</span>里，其摸两张牌并<span style='color: #00FF00'>回复</span>1点<span style='color: #00FF00'>体力</span>(不得替换原<span style='color: #DA70D6'>装备</span>;若选择的角色为自己,则重铸该<span style='color: #DA70D6'>坐骑牌</span>)。",
            bxfh:"伏害",
            "bxfh_info":"<span style='color: #E3CF57'>出牌阶段</span>限一次，选择一名其他角色：1.若你的<span style='color: #00FF00'>体力值</span>低于该角色,你摸一张牌;2.若你的<span style='color: #00FF00'>体力值</span>高于该角色,其弃置你一张牌;3.若你的<span style='color: #00FF00'>体力值</span>等于该角色,其弃置你一张<span style='color: #FF00FF'>手牌</span>,你摸一张牌；然后视为你对其使用一张【杀】(不计入出【杀】<span style='color: #FFFF00'>次数</span>)。",
            bxlx:"流星",
            "bxlx_info":"<span style='color: #40E0D0'>锁定技</span>，若你的<span style='color: #9933FA'>装备区</span>有牌，则你使用【杀】指定目标后，该角色响应此杀所需的【闪】数量+1。",
            llhy:"悍勇",
            "llhy_info":"<span style='color: #40E0D0'>锁定技</span>，每当你使用的【杀】对目标造成<span style='color: #FF7D40'>伤害</span>后，令目标获得一枚「悍勇」标记，拥有三枚「悍勇」标记的角色会直接死亡且你<span style='color: #00FF00'>回复</span>1点<span style='color: #00FF00'>体力</span>并<span style='color: #BC8F8F'>失去</span>技能〖悍勇〗；当你与其他角色计算<span style='color: #FFFF00'>距离</span>时-X，你可以多使用X张【杀】(X等于你已损失的<span style='color: #00FF00'>体力值</span>)。",
            gshm:"黑幕",
            "gshm_info":"每当其他角色使用<span style='color: #666666'>黑色</span><span style='color: #808069'>基本牌</span>时，你可以摸一张牌；每当你使用<span style='color: #666666'>黑牌</span>时，你可以令一名其他角色弃一张牌。",
            gshd:"黑邸",
            "gshd_info":"你的<span style='color: #03A89E'>判定牌</span>生效时，若为<span style='color: #666666'>黑色</span>，你可以对一名其他角色造成1点<span style='color: #FF7D40'>伤害</span>。",
            jsjb:"集兵",
            "jsjb_info":"<span style='color: #40E0D0'>锁定技</span>：①<span style='color: #E3CF57'>回合结束</span>时，你须选择一项：1.<span style='color: #BC8F8F'>失去</span>1点<span style='color: #00FF00'>体力</span>、2.减少1点<span style='color: #00C78C'>体力上限</span>。②每当你<span style='color: #BC8F8F'>失去</span><span style='color: #00FF00'>体力</span>时，你摸X张牌；每当你的<span style='color: #00C78C'>体力上限</span>减少时，你对一名其他角色造成X点<span style='color: #FF7D40'>伤害</span>。(X等于本次你<span style='color: #BC8F8F'>失去</span>的<span style='color: #00FF00'>体力值</span>或减少的<span style='color: #00C78C'>体力上限</span>)",
            snjs_huanshi:"宦势",
            "snjs_huanshi_info":"<span style='color: #40E0D0'>锁定技</span>，当你成为其他角色<span style='color: #9C661F'>延时</span><span style='color: #FCE6C9'>锦囊牌</span>的目标后，进行一次<span style='color: #03A89E'>判定</span>，若为<span style='color: #666666'>黑色</span>，将此牌置入弃牌堆。",
            ckbr:"蔽日",
            "ckbr_info":"<span style='color: #40E0D0'>锁定技</span>，受到来自其他角色的<span style='color: #FF7D40'>伤害</span>时，<span style='color: #FF7F50'>伤害来源</span>可以弃置X张牌(X至多为3)，然后你摸3-X张牌，若其没有弃牌，此<span style='color: #FF7D40'>伤害</span>-1。",
            ckad:"暗毒",
            "ckad_info":"其他角色的<span style='color: #E3CF57'>回合结束</span>时，若其<span style='color: #00FF00'>体力值</span>不小于你，你可以弃置一张<span style='color: #666666'>黑牌</span>令其<span style='color: #BC8F8F'>失去</span>1点<span style='color: #00FF00'>体力</span>。",
            fxlx:"雷袭",
            "fxlx_info":"当于回合外使用或打出【杀】或【闪】时，你进行一次<span style='color: #03A89E'>判定</span>：①<span style='color: #FF0000'>红色</span>，你可以弃置一名其他角色一张牌；②<span style='color: #666666'>黑色</span>，你可以对一名其他角色造成1点<span style='color: #0000FF'>雷电</span><span style='color: #FF7D40'>伤害</span>。",
            fxhj:"黄结",
            "fxhj_info":"<span style='color: #40E0D0'>锁定技</span>，你于<span style='color: #E3CF57'>出牌阶段</span>使用牌时，若此牌的目标是自己，你摸一张牌。",
            ssctn:"讨逆",
            "ssctn_info":"<span style='color: #E3CF57'>出牌阶段</span>每项限一次，你可以移除一枚「武略」：①视为对一名其他角色使用一张【决斗】；②对一名其他角色发动一次〖英魂〗。",
            dgsx:"速袭",
            "dgsx_info":"当你造成<span style='color: #FF7D40'>伤害</span>后，你可以弃置一张牌，令你<span style='color: #C76114'>攻击范围</span>内的一名其他角色<span style='color: #BC8F8F'>失去</span>1点<span style='color: #00FF00'>体力</span>(不得是受到<span style='color: #FF7D40'>伤害</span>的目标)。",
            dgcb:"持匕",
            "dgcb_info":"<span style='color: #40E0D0'>锁定技</span>，<span style='color: #E3CF57'>回合结束</span>时，若你的<span style='color: #FF00FF'>手牌</span>中没有【杀】，则你获得两张【杀】。",
            xyjf:"嫉富",
            "xyjf_info":"①<span style='color: #E3CF57'>摸牌阶段</span>，可改为获得<span style='color: #FF00FF'>手牌数</span>不小于你的其他角色一张牌，可重复此步骤直到你的<span style='color: #FF00FF'>手牌数</span>为全场唯一最多，你每有一个「嫉富」标记便可以无视<span style='color: #FF00FF'>手牌数</span>额外重复一次以上步骤。②当你受到来自其他角色的<span style='color: #FF7D40'>伤害</span>后，获得<span style='color: #FF7D40'>伤害量</span>的「嫉富」标记。",
            xypj:"贫窭",
            "xypj_info":"",
            hllc:"揽财",
            "hllc_info":"<span style='color: #40E0D0'>锁定技</span>，<span style='color: #E3CF57'>出牌阶段</span>开始，你将<span style='color: #FF00FF'>手牌</span>摸至<span style='color: #00C78C'>体力上限</span>。",
            hljs:"惊蛇",
            "hljs_info":"",
            hlyd:"远遁",
            "hlyd_info":"",
            cjhb:"荒暴",
            "cjhb_info":"<span style='color: #E3CF57'>出牌阶段</span>限一次，你可以弃置一张<span style='color: #666666'>黑牌</span>，视为对至多三名其他角色使用【南蛮入侵】，若此【南蛮入侵】没有造成<span style='color: #FF7D40'>伤害</span>，你摸等于目标数量的牌。",
            hlbh:"避祸",
            "hlbh_info":"<span style='color: #40E0D0'>锁定技</span>，回合外受到来自其他角色的<span style='color: #FF7D40'>伤害</span>后，直到当前角色的<span style='color: #E3CF57'>回合结束</span>其不能使用牌，且你不能成为所有角色使用牌的目标，若此<span style='color: #FF7D40'>伤害</span>超过1点，你<span style='color: #00FF00'>回复</span><span style='color: #FF7D40'>伤害量</span>-1点<span style='color: #00FF00'>体力</span>。",
            spzzlh:"连祸",
            "spzzlh_info":"<span style='color: #E3CF57'>游戏开始时</span>与<span style='color: #E3CF57'>回合结束</span>时，你可以令一名其他角色获得「连祸」标记。受到<span style='color: #FF7D40'>伤害</span>后，拥有「连祸」标记的角色也会承受此<span style='color: #FF7D40'>伤害</span>，然后其摸一张牌并移除「连祸」标记。",
            spzzhk:"惶恐",
            "spzzhk_info":"当你受到<span style='color: #FF7D40'>伤害</span>或<span style='color: #BC8F8F'>失去</span>所有<span style='color: #FF00FF'>手牌</span>后，你可以获得一张其他角色的<span style='color: #FF00FF'>手牌</span>或摸一张牌。",
            "spzzlh2":"连祸",
            "spzzlh2_info":"",
            spzrhl:"祸乱",
            "spzrhl_info":"每回合限一次，当其他角色使用的<span style='color: #666666'>黑色</span><span style='color: #FCE6C9'>锦囊牌</span>结算后，你可以摸一张牌然后交给其一张牌，若此做你获得该<span style='color: #666666'>黑色</span><span style='color: #FCE6C9'>锦囊牌</span>。",
            gatj:"贪酒",
            "gatj_info":"<span style='color: #40E0D0'>锁定技</span>，当你使用【酒】时，<span style='color: #BC8F8F'>失去</span>1点<span style='color: #00FF00'>体力</span>。",
            gayl:"运粮",
            "gayl_info":"你选择一名其他角色(X为其<span style='color: #00FF00'>体力值</span>,Y为你到其的<span style='color: #FFFF00'>距离</span>,Z为两者之差)，1.若X大于Y，你令其摸X-Y张牌；2.若X小于Y，你令其弃置Y-X张牌。若Z大于2，视为你使用一张【酒】。",
            zntp:"太平",
            "zntp_info":"当你使用牌时，若此牌不是【闪】、【无懈可击】或<span style='color: #9C661F'>延时</span><span style='color: #FCE6C9'>锦囊</span>，你可以将此牌改为由另一名角色使用；当你使用【闪】、【无懈可击】，或打出【杀】、【闪】时，你可以将此牌交给一名其他角色，然后你摸一张牌。",
            zntd:"天道",
            "zntd_info":"你可以获得<span style='color: #03A89E'>判定牌</span>。",
            jszysq:"神躯",
            "jszysq_info":"<span style='color: #40E0D0'>锁定技</span>，当你的<span style='color: #FF00FF'>手牌数</span>小于4时，你将<span style='color: #FF00FF'>手牌</span>摸至4张。",
            jszylh:"龙魂",
            "jszylh_info":"你可以将同花色的一至两张牌按下列规则使用或打出：<span style='color: #666666'>♠</span>当作【无懈可击】，<span style='color: #FF0000'>♥</span>当作【桃】，<span style='color: #666666'>♣</span>当作【闪】，<span style='color: #FF0000'>♦</span>当作【杀】。若你以此法使用了两张<span style='color: #FF0000'>红色</span>牌，则此牌<span style='color: #00FF00'>回复值</span>或<span style='color: #FF7D40'>伤害值</span>+1。若你以此法使用了两张<span style='color: #666666'>黑色</span>牌，则你弃置当前回合角色一张牌。",
            jszysw:"神威",
            "jszysw_info":"<span style='color: #40E0D0'>锁定技</span>，你使用的<span style='color: #FF0000'>红</span>【杀】视为<span style='color: #FF8000'>火</span>【杀】且无<span style='color: #FFFF00'>距离</span>限制，你使用的<span style='color: #666666'>黑</span>【杀】视为<span style='color: #0000FF'>雷</span>【杀】且在指定目标后可以获得目标的一张牌。",
            jszyjj:"绝境",
            "jszyjj_info":"<span style='color: #DA70D6'>转换技"+"</span>&<span style='color: #40E0D0'>锁定技</span>。①阳，回合内，拥有技能〖神威〗。阴，回合外，拥有技能〖神躯〗；②你的<span style='color: #FFC0CB'>手牌上限</span>+1。",
            wcfx:"奋先",
            "wcfx_info":"<span style='color: #FFD700'>限定技</span>&<span style='color: #40E0D0'>锁定技</span>，游戏从你的回合开始，本回合你使用牌无<span style='color: #FFFF00'>次数</span>与<span style='color: #FFFF00'>距离</span>限制；且每当你使用【杀】指定目标时，可以重铸至多为目标<span style='color: #00FF00'>体力值</span>数量的牌，若此做，目标可以重铸至多为其已损失<span style='color: #00FF00'>体力值</span>数量的牌；击杀任意一名角色后本回合不能再使用牌。",
            wcpb:"疲敝",
            "wcpb_info":"",
            ysxm:"骁猛",
            "ysxm_info":"<span style='color: #40E0D0'>锁定技</span>，当你造成<span style='color: #FF7D40'>伤害</span>时，此<span style='color: #FF7D40'>伤害</span>有50%的几率+1，否则你摸一张牌且此<span style='color: #FF7D40'>伤害</span>-1。",
            zaql:"奇略",
            "zaql_info":"当有角色<span style='color: #BC8F8F'>失去</span><span style='color: #00FF00'>体力</span>后，你可以摸该角色已损失<span style='color: #00FF00'>体力值</span>数量的牌，并将任意数量的牌交给该角色。",
            zajs:"坚守",
            "zajs_info":"当你成为其他角色使用牌的目标时，你可以弃置一张<span style='color: #228B23'>点数</span>大于此牌的<span style='color: #FF00FF'>手牌</span>，令此牌对你无效。",
            spfyfyl:"玉鸾",
            "spfyfyl_info":"任意角色使用或打出转化牌时，你可以选择一项：1.令其摸一张牌；2.使用:令此牌无效并摸一张牌 / 打出:你摸一张牌。",
            spfyfgz:"瑰姿",
            "spfyfgz_info":"每当你使用或打出牌时，会用「瑰姿」记录该牌的花色和<span style='color: #228B23'>点数</span>，你可以将<span style='color: #228B23'>点数</span>比「瑰姿」大且花色不同的牌当作【闪】使用或打出，或将<span style='color: #228B23'>点数</span>比「瑰姿」小且花色不同的牌当作【杀】使用或打出。",
            smyts:"泰始",
            "smyts_info":"<span style='color: #E3CF57'>出牌阶段</span>限一次，你从牌堆底摸两张牌，然后将两张<span style='color: #FF00FF'>手牌</span>依次置于牌堆底，然后你可以选择一名角色，该角色下一次摸牌时改为从牌堆底摸牌。",
            smynf:"南伐",
            "smynf_info":"任意角色从牌堆底摸牌后，你可以对其造成1点<span style='color: #FF7D40'>伤害</span>。",
            zctq:"天谴",
            "zctq_info":"<span style='color: #E3CF57'>出牌阶段</span>限一次，你可以将一张<span style='color: #666666'>♠</span>牌当做【闪电】使用。",
            zctx:"天贤",
            "zctx_info":"当你成为<span style='color: #9C661F'>延时</span><span style='color: #FCE6C9'>锦囊牌</span>的目标时，你可以修改此牌的目标然后摸一张牌。当任意角色的<span style='color: #03A89E'>判定牌</span>生效后，若结果为<span style='color: #666666'>黑色</span>，你可以摸一张牌。",
            "smyts2":"泰始",
            "smyts2_info":"",
            spzrlz:"乱政",
            "spzrlz_info":"<span style='color: #E3CF57'>出牌阶段</span>限一次，你可以弃置任意数量花色相同的牌，然后从牌堆获得此数量的<span style='color: #666666'>黑色</span><span style='color: #FCE6C9'>锦囊牌</span>。",
            jslblw:"龙威",
            "jslblw_info":"<span style='color: #40E0D0'>锁定技</span>，当你受到1点<span style='color: #FF7D40'>伤害</span>或你使用的【杀】被抵消时，获得一个「龙威」标记，<span style='color: #E3CF57'>回合开始与结束</span>时移除所有「龙威」标记并摸等量的牌。",
            jslbtg:"托孤",
            "jslbtg_info":"当你死亡时，可以令一名其他角色获得〖观星〗和〖放权〗。",
            szxws:"完杀",
            "szxws_info":"<span style='color: #40E0D0'>锁定技</span>，你的回合内，除你以外，非濒死的角色不能使用【桃】。",
            "szxws2":"完杀",
            "szxws2_info":"",
            "drlt_szxxl1":"雄乱",
            "drlt_szxxl1_info":"",
            "drlt_szxxl2":"雄乱",
            "drlt_szxxl2_info":"",
            "szxnj":"纳计",
            "szxnj_info":"回合内限一次，当其他角色进入濒死状态时，你可以减少1点<span style='color: #00C78C'>体力上限</span>，然后获得技能〖完杀〗直到该角色死亡、脱离濒死状态或回合结束。",
            "jszlzt2":"止啼",
            "jszlzt2_info":"",
            "drlt_jszldr1":"夺锐",
            "drlt_jszldr1_info":"",
            jszlxt:"刑天",
            "jszlxt_info":"其他角色<span style='color: #E3CF57'>结束阶段</span>，若其本回合造成至少2点<span style='color: #FF7D40'>伤害</span>，你可以选择一项：1.获得1点<span style='color: #00C78C'>体力上限</span>(若<span style='color: #00C78C'>体力上限</span>不小于5，此项不可选)；2.对一名其他角色造成1点<span style='color: #0000FF'>雷电</span><span style='color: #FF7D40'>伤害</span>。",
            jsgnpx:"魄袭",
            "jsgnpx_info":"<span style='color: #E3CF57'>出牌阶段</span>限一次，你可以观看一名其他角色的<span style='color: #FF00FF'>手牌</span>，然后你可以弃置你与其<span style='color: #FF00FF'>手牌</span>中的四张花色不同的牌，依此法弃置自己的牌数量为：0.减1点<span style='color: #00C78C'>体力上限</span>;1.你结束<span style='color: #E3CF57'>出牌阶段</span>且本回合<span style='color: #FFC0CB'>手牌上限</span>-1;3.你<span style='color: #00FF00'>回复</span>1点<span style='color: #00FF00'>体力</span>;4.你摸四张牌。",
            jsgnjj:"极境",
            "jsgnjj_info":"<span style='color: #FFD700'>限定技</span>，若你的<span style='color: #FF00FF'>手牌数</span>、<span style='color: #00FF00'>体力值</span>与<span style='color: #9933FA'>装备栏</span>中的<span style='color: #DA70D6'>装备牌</span>数量皆为全场最少，将你的<span style='color: #00C78C'>体力上限</span>修改为4，并与一名其他角色交换<span style='color: #FF00FF'>手牌</span>、<span style='color: #00FF00'>体力值</span>与<span style='color: #9933FA'>装备栏</span>中的<span style='color: #DA70D6'>装备牌</span>，然后修改〖袭劫〗。",
            jsgnxj:"袭劫",
            "jsgnxj_info":"<span style='color: #E3CF57'>结束阶段</span>，你可以令一名其他角色获得技能〖神魄〗，<span style='color: #E3CF57'>其回合结束</span>时<span style='color: #BC8F8F'>失去</span>技能〖神魄〗，且你可以获得其所有<span style='color: #FF00FF'>手牌</span>。",
            "jsgnxj1":"袭劫",
            "jsgnxj1_info":"",
            jsgnsp:"神魄",
            "jsgnsp_info":"<span style='color: #40E0D0'>锁定技</span>，<span style='color: #E3CF57'>摸牌阶段</span>多模一张牌，使用【杀】的<span style='color: #FFFF00'>次数</span>+1，<span style='color: #FFC0CB'>手牌上限</span>+1。",
            "jsgnxj2":"袭劫",
            "jsgnxj2_info":"<span style='color: #E3CF57'>结束阶段</span>，你可以令一名其他角色获得技能〖神魄〗(<span style='color: #E3CF57'>其回合结束</span>时<span style='color: #BC8F8F'>失去</span>技能〖神魄〗)，然后你可以使一名其他角色获得「袭劫」标记，拥有「袭劫」标记的角色<span style='color: #E3CF57'>回合结束</span>，你获得其所有<span style='color: #FF00FF'>手牌</span>。",
            spzjlh:"六合",
            "spzjlh_info":"<span style='color: #40E0D0'>锁定技</span>，每当群雄势力的角色造成或受到1点<span style='color: #FF7D40'>伤害</span>，你获得1个「六合」标记。<span style='color: #FF6347'>觉醒技</span>，一名角色<span style='color: #E3CF57'>回合结束</span>时，若你拥有6个「六合」标记，你<span style='color: #00FF00'>回复</span>所有<span style='color: #00FF00'>体力</span>并将<span style='color: #FF00FF'>手牌</span>摸至<span style='color: #00C78C'>体力上限</span>，然后获得技能〖雷击〗〖鬼道〗和〖黄天〗。",
            spzjjy:"举义",
            "spzjjy_info":"<span style='color: #FFD700'>限定技</span>，当其他角色死亡时，你可以根据你的身份修改其身份并弃置其所有牌，然后将其武将牌替换为『黄巾兵』并令其<span style='color: #00FF00'>回复</span>所有<span style='color: #00FF00'>体力</span>且将<span style='color: #FF00FF'>手牌</span>摸至<span style='color: #00C78C'>体力上限</span>。",
            snjs_baodong:"暴动",
            "snjs_baodong_info":"<span style='color: #E3CF57'>出牌阶段</span>开始时，你可以从<span style='color: #FF00FF'>手牌</span>中使用一张【杀】(此【杀】不计入出【杀】<span style='color: #FFFF00'>次数</span>)。",
            zjzctf:"天罚",
            "zjzctf_info":"<span style='color: #FF6347'>觉醒技</span>，当你对<span style='color: #A0522D'>横置</span>的角色造成<span style='color: #8A2BE2'>属性</span><span style='color: #FF7D40'>伤害</span>时，将你的武将牌替换为『张举张纯』。",
            zyfy:"飞燕",
            "zyfy_info":"<span style='color: #E3CF57'>出牌阶段</span>限一次，你可以获得一名<span style='color: #00FF00'>体力值</span>不大于你的角色的一张牌。",
            zyyy:"游勇",
            "zyyy_info":"你使用牌无<span style='color: #FFFF00'>距离</span>限制。",
            dmhc:"横冲",
            "dmhc_info":"<span style='color: #40E0D0'>锁定技</span>，你的【闪】皆视为【杀】。",
            bcsc:"首冲",
            "bcsc_info":"<span style='color: #40E0D0'>锁定技</span>，回合内限一次，你造成<span style='color: #FF7D40'>伤害</span>后会使你本回合下一次造成的<span style='color: #FF7D40'>伤害</span>+1。",
            ghqx:"侵袭",
            "ghqx_info":"<span style='color: #40E0D0'>锁定技</span>，回合内限一次，当你造成<span style='color: #FF7D40'>伤害</span>后，获得「侵袭」标记。<span style='color: #E3CF57'>出牌阶段</span>限一次，若你拥有「侵袭」标记，你可以<span style='color: #BC8F8F'>失去</span>1点<span style='color: #00FF00'>体力</span>并对一名其他角色造成1点<span style='color: #FF7D40'>伤害</span>。",
            cyzsz:"首志",
            "cyzsz_info":"当你使用【杀】造成<span style='color: #FF7D40'>伤害</span>时，你可以令此【杀】的<span style='color: #FF7D40'>伤害</span>+1，若此做直到你的<span style='color: #E3CF57'>回合开始</span>你下一次受到来自【杀】的<span style='color: #FF7D40'>伤害</span>+1。",
            zwxq:"血骑",
            "zwxq_info":"<span style='color: #E3CF57'>出牌阶段</span>限一次，你可以弃置所有<span style='color: #FF00FF'>手牌</span>，然后从牌堆里获得一张<span style='color: #FF0000'>红色</span>的【杀】。若此做：①本回合出【杀】<span style='color: #FFFF00'>次数</span>+1。②本回合下一张【杀】无<span style='color: #FFFF00'>距离</span>限制且不能被响应，且造成<span style='color: #FF7D40'>伤害</span>后，令受伤角色在其<span style='color: #E3CF57'>出牌阶段</span>开始时弃置X张牌(X为你本次因〖血骑〗弃置牌的数量)，否则<span style='color: #BC8F8F'>失去</span>1点<span style='color: #00FF00'>体力</span>，且<span style='color: #E3CF57'>其回合结束</span>时你摸Y张牌(Y为你已损失的<span style='color: #00FF00'>体力值</span>)。",
            /*"zwxq2":"血骑",
            "zwxq2_info":"",*/
            xhzeqw:"蔷薇",
            "xhzeqw_info":"当你使用<span style='color: #FF0000'>红色</span>的【杀】对目标造成<span style='color: #FF7D40'>伤害</span>后，你可以摸一张牌，并令该角色直到<span style='color: #E3CF57'>其回合结束</span><span style='color: #F4A460'>非锁定技"+"</span><span style='color: #8B864E'>失效</span>。",
            xhzeps:"婆娑",
            "xhzeps_info":"你可以将两张<span style='color: #FF0000'>红牌</span>当作【杀】使用或打出，且你转化的【杀】无<span style='color: #FFFF00'>距离</span>与<span style='color: #FFFF00'>次数</span>限制。",
            fqzdyc:"夜刺",
            "fqzdyc_info":"<span style='color: #E3CF57'>其他角色回合结束</span>时，你可以观看其所有<span style='color: #FF00FF'>手牌</span>，若该角色<span style='color: #FF00FF'>手牌</span>中有【杀】，你须对其使用其<span style='color: #FF00FF'>手牌</span>中的一张【杀】。",
            wbxz:"袭寨",
            "wbxz_info":"<span style='color: #E3CF57'>出牌阶段</span>限一次，选择一名其他角色，将你的<span style='color: #FF00FF'>手牌</span>摸至与该角色相等(至多摸5张)，然后本回合你对其使用牌无<span style='color: #FFFF00'>距离</span>与<span style='color: #FFFF00'>次数</span>限制。",
            "wbxz2":"袭寨",
            "wbxz2_info":"",
            /*"zwxq3":"血骑",
            "zwxq3_info":"",*/
            hmfg:"反骨",
            "hmfg_info":"当你受到<span style='color: #FF7D40'>伤害</span>后，你可以弃置<span style='color: #FF7F50'>伤害来源</span>一张牌，并对其使用一张【杀】，若你没有【杀】，则摸一张牌。",
            jslxzh:"绽火",
            "jslxzh_info":"①<span style='color: #FFD700'>限定技</span>，<span style='color: #E3CF57'>出牌阶段</span>你可以移去全部「绽火」，<span style='color: #A0522D'>横置</span>至多等量的角色(若目标已<span style='color: #A0522D'>横置</span>则取消其<span style='color: #A0522D'>横置</span>状态)，然后你对所有已<span style='color: #A0522D'>横置</span>的其他角色造成1点<span style='color: #FF8000'>火焰</span><span style='color: #FF7D40'>伤害</span>并弃置他们所有<span style='color: #9933FA'>装备区</span>内的牌。②<span style='color: #40E0D0'>锁定技</span>，当你造成或受到<span style='color: #FF8000'>火焰</span><span style='color: #FF7D40'>伤害</span>时，获得等于<span style='color: #FF7D40'>伤害量</span>的「绽火」标记。",
            jslxjl:"军略",
            "jslxjl_info":"<span style='color: #40E0D0'>锁定技</span>，当你受到或造成<span style='color: #FF7D40'>伤害</span>后，你获得等于<span style='color: #FF7D40'>伤害量</span>的「军略」标记。<span style='color: #E3CF57'>出牌阶段</span>开始时，若「军略」数量为：<span style='color: #228B23'>奇数</span>，你可以对一名角色造成1点<span style='color: #FF8000'>火焰</span><span style='color: #FF7D40'>伤害</span>；<span style='color: #228B23'>偶数</span>，你可以<span style='color: #A0522D'>横置</span>一名角色并弃置其<span style='color: #9933FA'>区域内</span>的一张牌。然后，若「军略」的数量超过7个，你可以移去全部「军略」并对所有其他角色造成1点<span style='color: #FF8000'>火焰</span><span style='color: #FF7D40'>伤害</span>。",
            jslxck:"摧克",
            "jslxck_info":"①一名被<span style='color: #A0522D'>横置</span>的角色<span style='color: #E3CF57'>摸牌阶段</span>开始时，你可以令其少摸一张牌。②<span style='color: #E3CF57'>出牌阶段</span>限四次，当你使用牌指定被<span style='color: #A0522D'>横置</span>的角色时，你可以从牌堆中获得一张随机花色的牌(不得是本回合以此法获得过的花色)。",
            jssmyrj:"忍戒",
            "jssmyrj_info":"<span style='color: #40E0D0'>锁定技</span>，当你受到1点<span style='color: #FF7D40'>伤害</span>或于回合内弃置/回合外<span style='color: #BC8F8F'>失去</span>1张牌后，你获得一枚「忍戒」标记。",
            jssmylp:"连破",
            "jssmylp_info":"一名角色的<span style='color: #E3CF57'>回合结束</span>时，若你本回合内杀死过角色，则你可以进行一个额外的回合。",
            jssmyby:"拜印",
            "jssmyby_info":"<span style='color: #FF6347'>觉醒技</span>，<span style='color: #E3CF57'>准备阶段</span>，若你的「忍戒」标记数不小于4，你减1点<span style='color: #00C78C'>体力上限</span>，并从〖制衡〗〖集智〗〖放逐〗〖鬼才〗〖完杀〗中选择并获得其中X个技能(X为「忍戒」标记数-3)，然后<span style='color: #BC8F8F'>失去</span>技能〖忍戒〗，若以上技能未全部获得则获得技能〖极略〗。",
            jssmyjl:"极略",
            "jssmyjl_info":"当你造成或受到<span style='color: #FF7D40'>伤害</span>后，你可以从〖制衡〗〖集智〗〖放逐〗〖鬼才〗〖完杀〗中选择并获得一个尚未获得的技能，当你获得以上所有技能后<span style='color: #BC8F8F'>失去</span>技能〖极略〗。",
            jssmyfz:"放逐",
            "jssmyfz_info":"当你受到<span style='color: #FF7D40'>伤害</span>后，你可令一名其他角色摸X张牌（X为你已损失的<span style='color: #00FF00'>体力值</span>），然后该角色将武将牌<span style='color: #990033'>翻面</span>。",
            jssmygc:"鬼才",
            "jssmygc_info":"在任意角色的<span style='color: #03A89E'>判定牌</span>生效前，你可以打出一张牌代替之。",
            jssmyjz:"集智",
            "jssmyjz_info":"当你使用<span style='color: #FCE6C9'>锦囊牌</span>时，你可以摸一张牌。若此牌为<span style='color: #808069'>基本牌</span>，则你可以弃置之，然后令本回合<span style='color: #FFC0CB'>手牌上限</span>+1。",
            jssmyws:"完杀",
            "jssmyws_info":"<span style='color: #40E0D0'>锁定技</span>，你的回合内，除你以外，非濒死的角色不能使用【桃】。",
            "jssmyws2":"完杀",
            "jssmyws2_info":"",
            jssmyzh:"制衡",
            "jssmyzh_info":"<span style='color: #E3CF57'>出牌阶段</span>限一次，你可以弃置任意张牌并摸等量的牌，若你在每回合第一次发动〖制衡〗时弃置了所有<span style='color: #FF00FF'>手牌</span>，则你多摸一张牌且本回合可以额外发动一次〖制衡〗。",
            spfsrmfxw:"降吴",
            "spfsrmfxw_info":"<span style='color: #FFD700'>限定技</span>，在其他<span style='color: #7FFF00'>吴势力</span>角色的<span style='color: #E3CF57'>回合开始</span>时，你可以将所有<span style='color: #FF00FF'>手牌</span>交给该角色，然后你摸X张牌(X为你依此法给出的牌的数量)，最后将你的势力修改为“<span style='color: #7FFF00'>吴</span>”。",
            spfsrmfjz:"军资",
            "spfsrmfjz_info":"你可以获得以任意形式(除<span style='color: #03A89E'>判定</span>以外不来自自己的牌)即将进入弃牌堆的<span style='color: #DA70D6'>装备牌</span>。",
            sssxyj:"御剑",
            "sssxyj_info":"<span style='color: #40E0D0'>锁定技</span>：①游戏开始时，废除你的<span style='color: #DA70D6'>武器栏</span>和<span style='color: #DA70D6'>防具栏</span>。②你视为拥有<span style='color: #FF00FF'>手牌</span>中所有<span style='color: #DA70D6'>武器</span>和<span style='color: #DA70D6'>防具</span>的技能。③<span style='color: #E3CF57'>游戏开始</span>、<span style='color: #E3CF57'>回合开始</span>、当你获得<span style='color: #DA70D6'>武器</span>或<span style='color: #DA70D6'>防具</span>，展示你<span style='color: #FF00FF'>手牌</span>中的所有<span style='color: #DA70D6'>武器</span>与<span style='color: #DA70D6'>防具</span>。④你的<span style='color: #DA70D6'>武器</span>和<span style='color: #DA70D6'>防具</span>不计入<span style='color: #FFC0CB'>手牌上限</span>。⑤你的<span style='color: #C76114'>攻击范围</span>+X(X为你<span style='color: #FF00FF'>手牌</span>与<span style='color: #9933FA'>装备区</span>中的<span style='color: #DA70D6'>装备</span>数量)。",
            sssxjw:"剑舞",
            "sssxjw_info":"每当你从<span style='color: #FF00FF'>手牌</span>或<span style='color: #9933FA'>装备区</span>中<span style='color: #BC8F8F'>失去</span>一张<span style='color: #DA70D6'>装备牌</span>，你可以摸两张牌。",
            sssxjx:"剑仙",
            "sssxjx_info":"<span style='color: #E3CF57'>出牌阶段</span>限一次，你可以弃置一张<span style='color: #DA70D6'>装备牌</span>，令一名角色<span style='color: #00FF00'>回复</span>1点<span style='color: #00FF00'>体力</span>或对其造成1点<span style='color: #FF7D40'>伤害</span>。",
            sssxxj:"枭姬",
            "sssxxj_info":"<span style='color: #FFD700'>限定技</span>，<span style='color: #E3CF57'>出牌阶段</span>，若你没有<span style='color: #DA70D6'>装备牌</span>，你可以从牌堆中获得四张<span style='color: #DA70D6'>装备牌</span>。",
            splbsf:"弑父",
            "splbsf_info":"①<span style='color: #40E0D0'>锁定技</span>，<span style='color: #E3CF57'>准备阶段</span>，若你没有「义父」，你须认一位「义父」；若你已有「义父」，你可以弃一张牌换一位「义父」。②你的「义父」<span style='color: #E3CF57'>出牌阶段</span>限一次，你的「义父」可以弃置一张牌，然后其令一名「义子」对一名与你的「义父」无父子关系的角色发起【决斗】。③<span style='color: #40E0D0'>锁定技</span>，你使用的【杀】对你「义父」造成的<span style='color: #FF7D40'>伤害</span>+1。④<span style='color: #40E0D0'>锁定技</span>，根据你「义父」的势力更改自己的势力。",
            splbyf:"义父",
            "splbyf_info":"",
            splbws:"无双",
            "splbws_info":"<span style='color: #40E0D0'>锁定技</span>，当你使用【杀】或【决斗】指定目标后，你令此牌需要依次使用或打出两张【闪】或【杀】响应。",
            xjpj:"评鉴",
            "xjpj_info":"在任意角色的<span style='color: #03A89E'>判定牌</span>或<span style='color: #228B22'>拼点牌</span>生效前，你可以打出一张颜色不同的牌替换之。",
            xjjx:"荐贤",
            "xjjx_info":"任意一名其他角色<span style='color: #E3CF57'>出牌阶段</span>开始时，你可以与另一名角色<span style='color: #228B22'>拼点</span>：①胜，当前回合的角色摸两张牌，你摸一张牌；②负，你摸一张牌。",
            gyzfws:"武圣",
            "gyzfws_info":"你可以将一张<span style='color: #FF0000'>红色</span>牌当做【杀】使用或打出。你使用的<span style='color: #FF0000'>♥</span>【杀】<span style='color: #FF7D40'>伤害</span>+1，你使用的<span style='color: #FF0000'>♦</span>【杀】没有<span style='color: #FFFF00'>距离</span>限制",
            gyzfpx:"咆哮",
            "gyzfpx_info":"①<span style='color: #40E0D0'>锁定技</span>，你使用【杀】无<span style='color: #FFFF00'>次数</span>限制。②<span style='color: #40E0D0'>锁定技</span>，当你使用的【杀】被【闪】抵消时，你获得一枚「咆」，当你因【杀】造成<span style='color: #FF7D40'>伤害</span>时，你弃置所有「咆」并令<span style='color: #FF7D40'>伤害</span>值+X（X为「咆」的数量）。<span style='color: #E3CF57'>回合结束</span>后，你弃置所有「咆」。",
            zczjsy:"施义",
            "zczjsy_info":"<span style='color: #E3CF57'>出牌阶段</span>结束，你可以将任意数量的<span style='color: #FF00FF'>手牌</span>交给一名本回合没有依此法获得过你<span style='color: #FF00FF'>手牌</span>的角色。若该角色获得这些牌后<span style='color: #FF00FF'>手牌数</span>不大于<span style='color: #00FF00'>体力值</span>，你摸X张牌(X为你本次依此法给出的牌的数量)，且你可以再次发动〖施义〗。",
            zczjtb:"统兵",
            "zczjtb_info":"<span style='color: #E3CF57'>摸牌阶段</span>，你可以放弃摸牌，改为将<span style='color: #FF00FF'>手牌</span>摸至当前<span style='color: #00FF00'>体力值</span>。",
            ysjj:"洁己",
            "ysjj_info":"<span style='color: #40E0D0'>锁定技</span>，<span style='color: #E3CF57'>摸牌阶段</span>多摸X张牌(X为拥有「沐染」标记的角色和与自己势力相同的角色数量之和,且至多为4)。",
            ysmr:"沐染",
            "ysmr_info":"<span style='color: #FFD700'>限定技</span>，<span style='color: #E3CF57'>出牌阶段</span>，你可以令一名其他角色(若你的身份为“<span style='color: #228B22'>反贼</span>”,则不能选择“<span style='color: #E3170D'>主公</span>”)获得技能〖洁己〗，然后你们获得「沐染」标记(任意拥有「沐染」标记的角色死亡，所有拥有「沐染」标记的角色也会死亡)。",
            "ysmr2":"沐染",
            "ysmr2_info":"",
            phyj:"义军",
            "phyj_info":"<span style='color: #40E0D0'>锁定技</span>：①摸牌时摸牌数量翻倍。②你使用<span style='color: #808069'>基本牌</span>/<span style='color: #FCE6C9'>锦囊牌</span>时，若<span style='color: #FF00FF'>手牌数</span>大于<span style='color: #00FF00'>体力值</span>，须弃置一张同名的<span style='color: #FF00FF'>手牌</span>/须弃置X张<span style='color: #FF00FF'>手牌</span>(X取: <span style='color: #FF00FF'>手牌数</span>-<span style='color: #00FF00'>体力值</span> 与 <span style='color: #00FF00'>体力值</span> 之中的较小者)。",
            pqqp:"巧破",
            "pqqp_info":"当你使用【杀】指定单个目标时，你可以令目标与另一名在你<span style='color: #C76114'>攻击范围</span>内的角色展示一张牌，若两张牌的类型不同，二者皆为此【杀】的目标，若两张牌的类型相同，此【杀】不能被响应。",
            pqqy:"倩影",
            "pqqy_info":"<span style='color: #E3CF57'>回合结束</span>时，你可以摸X张牌或直到<span style='color: #E3CF57'>你下回合开始</span>其他角色与你计算<span style='color: #FFFF00'>距离</span>时+X。(X为你本回合造成的<span style='color: #FF7D40'>伤害</span>,且至多为5)",
            zjzcyl:"野掠",
            "zjzcyl_info":"<span style='color: #E3CF57'>回合结束</span>时，若你于本回合造成过<span style='color: #FF7D40'>伤害</span>，你可以对一名其他角色造成1点<span style='color: #0000FF'>雷电</span><span style='color: #FF7D40'>伤害</span>。",
            zjzcmt:"弥天",
            "zjzcmt_info":"当你使用、打出或弃置【闪】时，可以<span style='color: #A0522D'>横置</span>X名角色(未受伤时，X=1；受伤时，X=2)。",
            spzcyl:"业莲",
            "spzcyl_info":"<span style='color: #E3CF57'>任意角色回合结束</span>时，你可以对本回合内所有受到过<span style='color: #FF7F50'>伤害来源</span>不为你的<span style='color: #FF8000'>火焰</span><span style='color: #FF7D40'>伤害</span>或<span style='color: #FCE6C9'>锦囊牌</span><span style='color: #FF7D40'>伤害</span>的其他角色造成1点<span style='color: #FF8000'>火焰</span><span style='color: #FF7D40'>伤害</span>。",
            spzclr:"烈蕊",
            "spzclr_info":"<span style='color: #E3CF57'>出牌阶段</span>开始时，你可以展示牌堆中的3+X张<span style='color: #FF0000'>红色</span><span style='color: #FCE6C9'>锦囊牌</span>(若牌堆中没有<span style='color: #FF0000'>红色</span><span style='color: #FCE6C9'>锦囊牌</span>,你摸一张牌)，你可以使用其中的1+X张牌，然后弃置剩余的牌。(X为你已损失的<span style='color: #00FF00'>体力值</span>)",
            "spzcyl2":"业莲",
            "spzcyl2_info":"",
			zzzrzhmm:"名门",
            "zzzrzhmm_info":"<span style='color: #FF6347'>多重觉醒技</span>：①当你于<span style='color: #00FF00'>体力值</span>/<span style='color: #9933FA'>装备区</span>内的牌/<span style='color: #FF00FF'>手牌数</span>为全场最少时<span style='color: #00FF00'>回复</span><span style='color: #00FF00'>体力</span>/使用<span style='color: #DA70D6'>装备牌</span>/摸牌时，获得技能〖安国〗。②当你在任意回合第二次成为<span style='color: #808069'>基本牌</span>或<span style='color: #FCE6C9'>锦囊牌</span>的目标时，获得技能〖胆守〗。③<span style='color: #E3CF57'>准备阶段</span>，若你的<span style='color: #00FF00'>体力值</span>、<span style='color: #9933FA'>装备区</span>内的牌与<span style='color: #FF00FF'>手牌数</span>之中任意一者为全场最多，获得技能〖奋励〗。④<span style='color: #E3CF57'>回合结束</span>，若你本回合跳过了任意阶段，获得技能〖平寇〗。(每回合只能获得一个技能,获得所有技能后减少1点<span style='color: #00C78C'>体力上限</span>)",
			xyfcj:"仇决",
			"xyfcj_info":"①<span style='color: #E3CF57'>出牌阶段</span>限一次，你可以<span style='color: #BC8F8F'>失去</span>1点<span style='color: #00FF00'>体力</span>并摸一张【杀】，然后令一名其他角色<span style='color: #BC8F8F'>失去</span>一个技能。②每当你受到1点<span style='color: #FF7D40'>伤害</span>后，你可以摸一张牌，并令<span style='color: #FF7F50'>伤害来源</span><span style='color: #BC8F8F'>失去</span>一个技能。③你与所有因〖仇决〗有<span style='color: #BC8F8F'>失去</span>技能的角色计算<span style='color: #FFFF00'>距离</span>时离始终为1。④任意角色<span style='color: #E3CF57'>回合结束</span>时，若本回合因〖仇决〗有<span style='color: #BC8F8F'>失去</span>技能的任意角色受到过<span style='color: #FF7D40'>伤害</span>，其获得所有因〖仇决〗<span style='color: #BC8F8F'>失去</span>的技能。",
			spczsm:"歃盟",
			"spczsm_info":"<span style='color: #E3CF57'>出牌阶段</span>限一次，你可以将两张<span style='color: #FF00FF'>手牌</span>交给任意其他角色，然后你摸两张牌，该角色<span style='color: #E3CF57'>出牌阶段</span>开始时其交给你两张<span style='color: #FF00FF'>手牌</span>并摸两张牌。",
			"spczsm2":"歃盟",
			"spczsm2_info":"",
			spczjf:"交分",
			"spczjf_info":"当你获得其他角色的牌后，你可以选择一项：1.弃置<span style='color: #FF00FF'>手牌数</span>大于你的一名角色的一张<span style='color: #FF00FF'>手牌</span>；2.令<span style='color: #FF00FF'>手牌数</span>小于你的一名角色摸一张牌。然后若该角色<span style='color: #FF00FF'>手牌数</span>等于其<span style='color: #00FF00'>体力值</span>，则你摸一张牌。",
			syxh:"骁悍",
			"syxh_info":"<span style='color: #E3CF57'>出牌阶段</span>限一次，你可以展示牌堆底的一张牌：1.不为【杀】，你获得之；2.为【杀】，完成以下步骤后将此牌置入弃牌堆，你视为对任意一名角色使用一张【杀】，你可以<span style='color: #BC8F8F'>失去</span>1点<span style='color: #00FF00'>体力</span>令此【杀】不可被响应，此【杀】无<span style='color: #FFFF00'>距离</span>限制且不计入出【杀】<span style='color: #FFFF00'>次数</span>，若展示的【杀】为<span style='color: #FF0000'>红色</span>此【杀】<span style='color: #FF7D40'>伤害</span>+1。",
			sygl:"果烈",
			"sygl_info":"<span style='color: #40E0D0'>锁定技</span>，你使用的实体【杀】结算后，将其置于牌堆底。",
			sykk:"克堪",
			"sykk_info":"一名角色受到<span style='color: #FF7D40'>伤害</span>后，你可以令其摸一张牌。",
			syjr:"厥任",
			"syjr_info":"<span style='color: #DA70D6'>转换技"+"</span>&<span style='color: #40E0D0'>锁定技</span>。阳：你视为拥有技能〖制衡〗。阴：你视为拥有技能〖英姿〗。",
			jdfdb:"短兵",
			"jdfdb_info":"当你使用<span style='color: #808069'>基本牌</span>和普通<span style='color: #FCE6C9'>锦囊牌</span>时可以多选择一名除自身以外<span style='color: #FFFF00'>距离</span>为1的角色为目标。",
			jdffx:"奋迅",
			"jdffx_info":"<span style='color: #E3CF57'>出牌阶段</span>开始时，你可以：1.选择一名其他角色，本回合你计算于其的<span style='color: #FFFF00'>距离</span>为1；2.摸X张牌（X为你到其<span style='color: #FFFF00'>距离</span>为1的角色数）。",
			sczqb:"七步",
			"sczqb_info":"<span style='color: #40E0D0'>锁定技</span>：①你始终跳过<span style='color: #E3CF57'>判定阶段</span>和<span style='color: #E3CF57'>摸牌阶段</span>且不能成为<span style='color: #9C661F'>延时</span><span style='color: #FCE6C9'>锦囊</span>的目标，<span style='color: #E3CF57'>回合开始</span>摸七张牌并将你的武将牌<span style='color: #990033'>翻面</span>。②若你已<span style='color: #990033'>翻面</span>，则你使用牌无<span style='color: #FFFF00'>次数</span>限制。③<span style='color: #E3CF57'>出牌阶段</span>，你每使用一张牌，本回合内获得一枚「诗」，你至多拥有7枚「诗」。④使用<span style='color: #666666'>♣</span>牌时，摸一张牌并弃置一枚「诗」。⑤<span style='color: #E3CF57'>弃牌阶段</span>结束，若「诗」等于7，则将你的武将牌<span style='color: #990033'>翻回正面</span>。⑥<span style='color: #E3CF57'>回合结束</span>，若「诗」小于7，则你<span style='color: #BC8F8F'>失去</span>7-「诗」点<span style='color: #00FF00'>体力</span>。⑦当你处于<span style='color: #E3CF57'>濒死状态</span>时，你可以将<span style='color: #DA70D6'>装备牌</span>当作【酒】使用。",
			sczlj:"浪羁",
			"sczlj_info":"<span style='color: #40E0D0'>锁定技</span>：①若你已<span style='color: #990033'>翻面</span>且本回合已使用过7张牌，则你的<span style='color: #C76114'>攻击范围</span>-1；②若你已<span style='color: #990033'>翻面</span>，则其他角色与你计算<span style='color: #FFFF00'>距离</span>时-1。",
			bxgy:"刚毅",
			"bxgy_info":"当一名角色受到<span style='color: #FF7D40'>伤害</span>时，若<span style='color: #FF7F50'>伤害来源</span>不是你，且你在<span style='color: #FF7F50'>伤害来源</span>的<span style='color: #C76114'>攻击范围</span>内，你可以代替成为受伤目标，然后摸X张牌或弃置<span style='color: #FF7F50'>伤害来源</span>X张牌(X为<span style='color: #FF7D40'>伤害量</span>)。",
			bxym:"义谋",
			"bxym_info":"你死亡时，你可以令一名角色将<span style='color: #00FF00'>体力</span><span style='color: #00FF00'>回复</span>至X，<span style='color: #FF00FF'>手牌</span>摸至X，装备X张<span style='color: #DA70D6'>装备牌</span>。(X为你受到过的<span style='color: #FF7D40'>伤害</span>，且最多为4)。",
            czdr:"锭刃",
            "czdr_info":"当你使用【杀】对目标造成<span style='color: #FF7D40'>伤害</span>时，你可以展示其一张<span style='color: #FF00FF'>手牌</span>，若颜色与此【杀】一致，你获得之，并令此【杀】<span style='color: #FF7D40'>伤害</span>+1。",
            czkb:"溃败",
            "czkb_info":"<span style='color: #40E0D0'>锁定技</span>，与你<span style='color: #FFFF00'>距离</span>为1的角色的<span style='color: #FF0000'>红牌</span>只能以你为目标，且你受到<span style='color: #FF0000'>♥</span>【杀】的<span style='color: #FF7D40'>伤害</span>+1。",
            chdk:"豆蔻",
            "chdk_info":"<span style='color: #40E0D0'>锁定技</span>，<span style='color: #00FF00'>体力值</span>大于你的角色对你造成的<span style='color: #FF7D40'>伤害</span>-1。",
            chrh:"容华",
            "chrh_info":"<span style='color: #40E0D0'>锁定技</span>，<span style='color: #E3CF57'>准备阶段</span>，你从牌堆顶获得X张牌置于你的武将牌上(X为你的<span style='color: #00C78C'>体力上限</span>)，称作「容华」，然后若你的<span style='color: #00C78C'>体力上限</span>：①小于3，则你获得1点<span style='color: #00C78C'>体力上限</span>，且<span style='color: #E3CF57'>出牌阶段</span>结束时，你可以将大于<span style='color: #00FF00'>体力值</span>部分的<span style='color: #FF00FF'>手牌</span>交给一名其他角色。②不小于3，则你使一名角色获得所有「容华」，然后你<span style='color: #00FF00'>回复</span>所有<span style='color: #00FF00'>体力</span>、<span style='color: #BC8F8F'>失去</span>〖豆蔻〗并修改〖容华〗(若获得所有「容华」的是自己，则<span style='color: #BC8F8F'>失去</span>〖容华〗)。",
            "chrh2":"容华",
            "chrh2_info":"<span style='color: #E3CF57'>出牌阶段</span>，你可以选择一名其他角色，你获得「容华」内的至多X张牌(X为你已损失的<span style='color: #00FF00'>体力值</span>，且至少为1)，然后你须将「容华」内的至少一张牌交给该角色。<span style='color: #40E0D0'>锁定技</span>，<span style='color: #E3CF57'>准备阶段</span>，你将「容华」摸至Y张(Y为你的<span style='color: #00C78C'>体力上限</span>)。",
            cxzy:"卓约",
            "cxzy_info":"每名角色每回合限一次，当有角色<span style='color: #BC8F8F'>失去</span>所有<span style='color: #FF00FF'>手牌</span>后，你可以令其摸两张牌。",
            cxym:"玉貌",
            "cxym_info":"<span style='color: #E3CF57'>出牌阶段</span>限一次，你可以获得一名其他角色的所有<span style='color: #FF00FF'>手牌</span>，然后将等量的<span style='color: #FF00FF'>手牌</span>交给该角色。",
            szggyh:"羽化",
            "szggyh_info":"<span style='color: #40E0D0'>锁定技</span>：①<span style='color: #E3CF57'>摸牌阶段</span>额外从牌堆中获得一张<span style='color: #FCE6C9'>锦囊牌</span>。②你的<span style='color: #F4A460'>非基本牌</span>不计入<span style='color: #FFC0CB'>手牌上限</span>。",
            szggqr:"祈禳",
            "szggqr_info":"<span style='color: #DA70D6'>转换技"+"</span>&<span style='color: #40E0D0'>锁定技</span>(<span style='color: #E3CF57'>回合开始</span>自动转换)。阴：若你于<span style='color: #E3CF57'>出牌阶段</span>使用的牌的<span style='color: #228B23'>点数</span>与本<span style='color: #E3CF57'>出牌阶段</span>使用的上一张牌的<span style='color: #228B23'>点数</span>皆为<span style='color: #228B23'>奇数</span>，你可以从牌堆中获得一张<span style='color: #666666'>黑色</span><span style='color: #FCE6C9'>锦囊牌</span>。阳：若你于<span style='color: #E3CF57'>出牌阶段</span>使用的牌的<span style='color: #228B23'>点数</span>与本<span style='color: #E3CF57'>出牌阶段</span>使用的上一张牌的<span style='color: #228B23'>点数</span>皆为<span style='color: #228B23'>偶数</span>，你可以从牌堆中获得一张<span style='color: #FF0000'>红色</span><span style='color: #FCE6C9'>锦囊牌</span>。",
            szggsx:"升仙",
            "szggsx_info":"<span style='color: #40E0D0'>锁定技</span>，<span style='color: #E3CF57'>回合结束</span>时刷新牌堆。",
            szggxc:"仙辰",
            "szggxc_info":"<span style='color: #FFD700'>限定技</span>，<span style='color: #E3CF57'>出牌阶段</span>你可以将全部角色<span style='color: #9933FA'>区域内</span>的所有牌收集起来，依次为每位角色随机分发(分到<span style='color: #DA70D6'>装备牌</span>时，若该角色没有同类型的<span style='color: #DA70D6'>装备</span>则直接使用)，直到将收集的所有牌分配完。",
            gxdp:"胆破",
            "gxdp_info":"当你对其他角色造成<span style='color: #FF7D40'>伤害</span>后，你可以使其在<span style='color: #E3CF57'>本回合结束</span>时弃置其<span style='color: #FF00FF'>手牌</span>中的所有<span style='color: #FF0000'>红色</span><span style='color: #808069'>基本牌</span>。",
            gxqd:"气夺",
            "gxqd_info":"当你使用【杀】指定目标后，你可以弃置一张<span style='color: #808069'>基本牌</span>令此【杀】不能被响应，若弃置的牌为<span style='color: #FF0000'>红色</span>，则你摸一张牌。",
            llqfp:"父魄",
            "llqfp_info":"<span style='color: #40E0D0'>锁定技</span>，当你使用【杀】指定目标后，目标用于响应的【闪】的<span style='color: #228B23'>点数</span>须比此【杀】大。与你【决斗】的角色每次打出的【杀】的<span style='color: #228B23'>点数</span>须比你在此【决斗】中打出的上一张【杀】的<span style='color: #228B23'>点数</span>大。",
            llqfj:"飞将",
            "llqfj_info":"你的<span style='color: #666666'>♠</span>【杀】<span style='color: #FF7D40'>伤害</span>+1、<span style='color: #FF0000'>♥</span>【杀】造成<span style='color: #FF7D40'>伤害</span>后<span style='color: #00FF00'>回复</span>1点<span style='color: #00FF00'>体力</span>、<span style='color: #666666'>♣</span>【杀】可以多指定2个目标、<span style='color: #FF0000'>♦</span>【杀】无<span style='color: #FFFF00'>距离</span>与<span style='color: #FFFF00'>次数</span>限制。",
            llqjw:"继武",
            "llqjw_info":"<span style='color: #FF6347'>觉醒技</span>，<span style='color: #E3CF57'>回合结束</span>时，若你本回合使用【杀】或【决斗】造成过<span style='color: #FF7D40'>伤害</span>，你<span style='color: #00FF00'>回复</span>1点<span style='color: #00FF00'>体力</span>，并获得【方天画戟】与技能〖飞将〗。",
			swykg:"狂骨",
			"swykg_info":"当你对<span style='color: #FFFF00'>距离</span>1以内的一名角色造成1点<span style='color: #FF7D40'>伤害</span>后，你可以摸一张牌，然后你可以弃置一张牌<span style='color: #00FF00'>回复</span>1点<span style='color: #00FF00'>体力</span>。",
			swybx:"奔袭",
			"swybx_info":"<span style='color: #40E0D0'>锁定技</span>：①你的回合内，你每使用一张牌后，你本回合计算与其他角色的<span style='color: #FFFF00'>距离</span>-1。②你的回合内，若你至所有角色的<span style='color: #FFFF00'>距离</span>均为1，则你使用的【杀】与普通<span style='color: #FCE6C9'>锦囊牌</span>指定唯一目标后可以额外指定一个目标。",
			swyca:"持傲",
			"swyca_info":"<span style='color: #40E0D0'>锁定技</span>，当你于回合内<span style='color: #BC8F8F'>失去</span>牌后，用「持傲」记录该牌的花色，若「持傲」集齐四种花色，你清空「持傲」并令一名其他角色直到<span style='color: #E3CF57'>回合结束</span>不能使用或打出牌响应你使用的牌。",
			swyqm:"奇谋",
			"swyqm_info":"<span style='color: #E3CF57'>出牌阶段</span>开始时，你可以弃置至多X张牌并<span style='color: #BC8F8F'>失去</span>等量的<span style='color: #00FF00'>体力</span>然后摸等量的牌(X为你的<span style='color: #00FF00'>体力值</span>)，然后直到<span style='color: #E3CF57'>回合结束</span>，你可以多使用Y张【杀】(Y为你本次依此法弃置的牌中的花色数)。",
			ssqwk:"围困",
			"ssqwk_info":"<span style='color: #40E0D0'>锁定技</span>：①<span style='color: #E3CF57'>摸牌阶段</span>改为将<span style='color: #FF00FF'>手牌</span>摸至10张，且本回合你至多使用X张牌(X为场上除你以外的角色数量)。②当你对一名角色造成1点<span style='color: #FF7D40'>伤害</span>后，该角色获得你的一张<span style='color: #FF00FF'>手牌</span>。③你使用牌没有<span style='color: #FFFF00'>次数</span>限制，你的<span style='color: #FFC0CB'>手牌上限</span>为10。",
			szthq:"虎躯",
			"szthq_info":"<span style='color: #40E0D0'>锁定技</span>，你每次受到<span style='color: #FF7D40'>伤害</span>时，至多承受1点<span style='color: #FF7D40'>伤害</span>。",
			sztsz:"死战",
			"sztsz_info":"<span style='color: #40E0D0'>锁定技</span>：①你无法<span style='color: #00FF00'>回复</span><span style='color: #00FF00'>体力</span>；②你不能成为【桃】的目标；③其他角色与你计算<span style='color: #FFFF00'>距离</span>时始终为1。",
			sztfq:"赴躯",
			"sztfq_info":"<span style='color: #DA70D6'>转换技</span>，阳：当一名其他角色受到<span style='color: #FF7D40'>伤害</span>时，若其到你的<span style='color: #FFFF00'>距离</span>为1，你可以代替成为受伤目标。阴：当一名角色的<span style='color: #FF00FF'>手牌</span>被其他角色弃置或获得后，你可以<span style='color: #BC8F8F'>失去</span>1点<span style='color: #00FF00'>体力</span>，然后令该角色摸两张牌。",
			sxcly:"裸衣",
			"sxcly_info":"<span style='color: #40E0D0'>锁定技</span>：①游戏开始时，废除你的<span style='color: #DA70D6'>防具栏</span>和<span style='color: #DA70D6'>防御马栏</span>，并弃置所有<span style='color: #FF00FF'>手牌</span>；②你的<span style='color: #FFC0CB'>手牌上限</span>为0，且你使用的【杀】或【决斗】造成<span style='color: #FF7D40'>伤害</span>时，此<span style='color: #FF7D40'>伤害</span>+1。",
			sxccb:"赤膊",
			"sxccb_info":"<span style='color: #40E0D0'>锁定技</span>，每当你摸/获得牌时，取消之：①每回合限两次，若X不大于2，你可以对一名其他角色使用一张不计入<span style='color: #FFFF00'>使用次数</span>的【杀】；②每回合限两次，若X大于2，你可以对一名其他角色使用一张【决斗】。(X等于原本应当摸/获得的牌的数量)",
			sxchc:"虎痴",
			"sxchc_info":"回合内限4次，回合外无<span style='color: #FFFF00'>次数</span>限制，当你需要使用或打出一张牌时(<span style='color: #FCE6C9'>锦囊牌</span>仅限主动使用)，你可以观看牌堆底的X张牌(X等于3+你已损失的<span style='color: #00FF00'>体力值</span>)，若你观看的牌中有可以使用或打出的牌，你可以使用打出之。",
			sxchc2:'虎痴',
			sxchc2_backup:'虎痴',
			sxchc3:'虎痴',
			sxchh:"虎侯",
			"sxchh_info":"当你受到<span style='color: #FF7D40'>伤害</span>后，你可以弃置牌堆底X张牌中的Y张牌(X等于3+你已损失的<span style='color: #00FF00'>体力值</span>，Y等于<span style='color: #FF7D40'>伤害量</span>)。",
			sdwqx:"强袭",
			"sdwqx_info":"①<span style='color: #E3CF57'>出牌阶段</span>限一次，你可以将一张<span style='color: #DA70D6'>武器牌</span>置于一名其他角色的武将牌上称作「袭」，也可以选择一名其他角色后<span style='color: #BC8F8F'>失去</span>1点<span style='color: #00FF00'>体力</span>或<span style='color: #00C78C'>体力上限</span>。然后对其造成1点<span style='color: #FF7D40'>伤害</span>，若其拥有「袭」，则此<span style='color: #FF7D40'>伤害</span>+1。②你与拥有「袭」的角色计算<span style='color: #FFFF00'>距离</span>时始终为1。③当你使用牌对拥有「袭」的角色造成<span style='color: #FF7D40'>伤害</span>时，你可以获得其的「袭」。④<span style='color: #E3CF57'>你的回合结束</span>时，拥有「袭」的角色获得其对应的「袭」。",
			sdwlk:"凛坤",
			"sdwlk_info":"<span style='color: #40E0D0'>锁定技</span>，当你造成<span style='color: #FF7D40'>伤害</span>后：①目标角色存活，若此<span style='color: #FF7D40'>伤害</span>大于1且你已受伤，你<span style='color: #00FF00'>回复</span>1点<span style='color: #00FF00'>体力</span>，若你没受伤，你获得1点<span style='color: #00C78C'>体力上限</span>；②目标死亡，你获得1点<span style='color: #00C78C'>体力上限</span>并<span style='color: #00FF00'>回复</span>1点<span style='color: #00FF00'>体力</span>。",
			sdwpn:"睥睨",
			"sdwpn_info":"<span style='color: #40E0D0'>锁定技</span>，每回合限一次，当你受到<span style='color: #FF7D40'>伤害</span>后，若此时不是你的回合，则有X的概率在<span style='color: #E3CF57'>本回合结束</span>后你执行一个额外回合。(X=100%，且每成功发动一次此技能该概率降低10%)",
			gdyq:"御强",
			"gdyq_info":"<span style='color: #E3CF57'>出牌阶段</span>限一次，你可以弃置场上的一张<span style='color: #DA70D6'>装备牌</span>。",
			gdyh:"猗惠",
			"gdyh_info":"当你成为【杀】的目标后，你可以摸一张牌。",
			scrtb:"铁壁",
			"scrtb_info":"<span style='color: #40E0D0'>锁定技</span>：①游戏开始或当你成为牌的目标时，若你<span style='color: #9933FA'>装备区</span>里的<span style='color: #DA70D6'>装备</span>为全场最少，则随机将一张<span style='color: #DA70D6'>装备牌</span>置入你的<span style='color: #9933FA'>装备区</span>；②当你受到<span style='color: #FF7D40'>伤害</span>时，若此时不是<span style='color: #FF7F50'>伤害来源</span>的回合，你防止此<span style='color: #FF7D40'>伤害</span>。",
			scrhd:"撼敌",
			"scrhd_info":"<span style='color: #E3CF57'>摸牌阶段</span>，你可以弃置一张牌或少摸一张牌，然后移动场上的一张牌。",
			scrjt:"金汤",
			"scrjt_info":"<span style='color: #40E0D0'>锁定技</span>，<span style='color: #E3CF57'>结束阶段</span>，你可以摸X张牌，然后令至多X名角色各获得1枚「金汤」，且你可以将至多X张<span style='color: #FF00FF'>手牌</span>交给这些角色(X等于你<span style='color: #9933FA'>装备区</span>中的<span style='color: #DA70D6'>装备</span>数量，每名角色至多拥有4枚「金汤」，拥有「金汤」的角色视为拥有技能〖固守〗)。",
			scrgs:"固守",
			"scrgs_info":"当你需要使用或打出一张【杀】、【闪】、【桃】或【无懈可击】时，你可以将一张牌当作该牌使用或打出(每种牌每轮限一次)并弃置一枚「金汤」。",
			scrgs2:"固守",
			"scrgs2_info":"当你需要使用或打出一张【杀】、【闪】、【桃】或【无懈可击】时，你可以将一张牌当作该牌使用或打出(每种牌每轮限一次)并弃置一枚「金汤」。",
			spdbxh:"黠慧",
			"spdbxh_info":"<span style='color: #E3CF57'>出牌阶段</span>限一次，你可以对在你<span style='color: #C76114'>攻击范围</span>内的一名角色造成1点<span style='color: #FF7D40'>伤害</span>。当你使用一张牌后<span style='color: #7FFFD4'>复原</span>此技能。若任意角色因此法进入<span style='color: #E3CF57'>濒死状态</span>且存活，其<span style='color: #00FF00'>回复</span>1点<span style='color: #00FF00'>体力</span>，且本回合〖黠慧〗无法<span style='color: #7FFFD4'>复原</span>；若任意角色因此法死亡，你<span style='color: #BC8F8F'>失去</span>1点<span style='color: #00FF00'>体力</span>，且本回合〖黠慧〗无法<span style='color: #7FFFD4'>复原</span>。",
			spdblz:"连诛",
			"spdblz_info":"<span style='color: #40E0D0'>锁定技</span>，当你受到来自【杀】的<span style='color: #FF7D40'>伤害</span>时，取消之，改为减少等于<span style='color: #FF7D40'>伤害量</span>的<span style='color: #00C78C'>体力上限</span>。",
			algyws:"武圣",
			"algyws_info":"你可以将一张<span style='color: #FF0000'>红色</span>牌当做【杀】使用或打出。你使用的<span style='color: #FF0000'>♥</span>【杀】<span style='color: #FF7D40'>伤害</span>+1，你使用<span style='color: #FF0000'>♦</span>【杀】没有<span style='color: #FFFF00'>距离</span>限制。",
			algyyj:"义绝",
			"algyyj_info":"<span style='color: #E3CF57'>出牌阶段</span>限一次，你可以展示一名其他角色的一张<span style='color: #FF00FF'>手牌</span>。若此牌为<span style='color: #666666'>黑色</span>，则该角色不能使用或打出牌且<span style='color: #F4A460'>非锁定技</span><span style='color: #8B864E'>失效</span>直到<span style='color: #E3CF57'>回合结束</span>。若此牌为<span style='color: #FF0000'>红色</span>，则你获得此牌，然后可以令其摸一张牌并<span style='color: #00FF00'>回复</span>1点<span style='color: #00FF00'>体力</span>。",
			cyeym:"异梦",
			"cyeym_info":"<span style='color: #FFD700'>限定技</span>，<span style='color: #E3CF57'>出牌阶段</span>，你可以将你<span style='color: #9933FA'>区域内</span>的所有牌交给一名其他角色，令其获得技能〖蕙心〗并跳过下一个<span style='color: #E3CF57'>判定阶段</span>，然后你死亡且令其执行一个额外回合。",
			cyehx:"蕙心",
			"cyehx_info":"①当一名角色使用【杀】造成<span style='color: #FF7D40'>伤害</span>后，你可以令其从牌堆中获得一张<span style='color: #FCE6C9'>锦囊牌</span>。②当一名角色获得其他角色的牌后，你可以令其从牌堆中获得一张<span style='color: #808069'>基本牌</span>。",
			spzxpy:"破袁",
			"spzxpy_info":"当一名其他角色使用牌指定的目标数量大于1时，你可以摸X张牌，若X大于3，你减少1点<span style='color: #00C78C'>体力上限</span>(X为该牌指定的目标数量)。",
			spzxyw:"扬武",
			"spzxyw_info":"当一名其他角色于其<span style='color: #E3CF57'>出牌阶段</span>获得或摸牌后，若其<span style='color: #FF00FF'>手牌数</span>大于其<span style='color: #00FF00'>体力值</span>，你可以令其选择：①将<span style='color: #FF00FF'>手牌</span>弃至等于<span style='color: #00FF00'>体力值</span>；②本回合<span style='color: #F4A460'>非锁定技</span><span style='color: #8B864E'>失效</span>。(若其本回合已选择过②，则只能选择①)",
			alcqzm:"佐命",
			"alcqzm_info":"<span style='color: #40E0D0'>锁定技</span>，游戏开始时，随机记录牌堆中一半的【杀】、【桃】、<span style='color: #DA70D6'>装备牌</span>与<span style='color: #FCE6C9'>锦囊牌</span>(向下取整)，在本局游戏剩余的时间里任意角色：①使用【杀】，若实体卡牌中包含被记录的【杀】(由实体卡牌组成的转化牌也包括在内)，令目标<span style='color: #BC8F8F'>失去</span>1点<span style='color: #00FF00'>体力</span>；②使用【桃】，若实体卡牌中包含被记录的【桃】(由实体卡牌组成的转化牌也包括在内)，取消之并令目标<span style='color: #BC8F8F'>失去</span>1点<span style='color: #00FF00'>体力</span>；③不能使用被记录的<span style='color: #DA70D6'>装备牌</span>和【无懈可击】，且每<span style='color: #BC8F8F'>失去</span>一张被记录的<span style='color: #DA70D6'>装备牌</span>或【无懈可击】，须弃置一张牌；④使用<span style='color: #FCE6C9'>锦囊牌</span>，若实体卡牌中包含被记录的<span style='color: #FCE6C9'>锦囊牌</span>(由实体卡牌组成的转化牌也包括在内)，取消之。",
			alcqwz:"望重",
			"alcqwz_info":"当任意角色<span style='color: #BC8F8F'>失去</span><span style='color: #00FF00'>体力</span>后，你可以令一名角色摸一张牌。",
			jwsc:"守成",
			"jwsc_info":"当一名角色于其回合外<span style='color: #BC8F8F'>失去</span><span style='color: #FF00FF'>手牌</span>时，若其没有<span style='color: #FF00FF'>手牌</span>，你可以观看牌堆顶的X张牌并可以任意改变顺序(X为你的<span style='color: #00C78C'>体力上限</span>)，然后可以令该角色摸一张牌。",
			jwhc:"划策",
			"jwhc_info":"每名角色每轮限一次，当一名角色<span style='color: #FF7D40'>伤害</span>时，你可以令其选择是否弃置所有<span style='color: #FF00FF'>手牌</span>以防止此<span style='color: #FF7D40'>伤害</span>，若其弃置的牌大于两张，你令其摸一张牌。",
			cqzm:"佐命",
			"cqzm_info":"<span style='color: #FFD700'>限定技</span>，<span style='color: #E3CF57'>出牌阶段</span>，你可以移除角色A武将牌上的一个技能，并使角色B获得该技能，然后你获得技能〖望重〗。若A的身份为“<span style='color: #E3170D'>主公</span>”：则A减少1点<span style='color: #00C78C'>体力上限</span>，B获得1点<span style='color: #00C78C'>体力上限</span>。",
			cqwz:"望重",
			"cqwz_info":"当A(因〖佐命〗<span style='color: #BC8F8F'>失去</span>技能的角色)受到<span style='color: #FF7D40'>伤害</span>后，你与A摸<span style='color: #FF7D40'>伤害量</span>张牌；当B(因〖佐命〗获得技能的角色)造成<span style='color: #FF7D40'>伤害</span>后，你与B摸<span style='color: #FF7D40'>伤害量</span>张牌。",
			szcxf:"仙法",
			"szcxf_info":"<span style='color: #40E0D0'>锁定技</span>：①游戏开始、<span style='color: #E3CF57'>回合开始</span>、<span style='color: #E3CF57'>回合结束</span>时，你可以从你所选势力的随机4个武将和1个随机神将中选择并获得至多3个技能直到<span style='color: #E3CF57'>本回合结束</span>/你的下个<span style='color: #E3CF57'>回合开始</span>。②你的<span style='color: #FFC0CB'>手牌上限</span>为5。",
			sdzzf:"诛伐",
			"sdzzf_info":"<span style='color: #40E0D0'>锁定技</span>：①每当其他角色使用、打出、弃置牌时，你<span style='color: #BC8F8F'>失去</span>X点<span style='color: #00FF00'>体力</span>(X为对应的实体卡牌数量)。②当你造成<span style='color: #FF7D40'>伤害</span>时，你可以弃置<span style='color: #9933FA'>区域内</span>的一张牌，若此做，令目标弃置其<span style='color: #9933FA'>区域内</span>的一张牌。③你始终跳过<span style='color: #E3CF57'>摸牌阶段</span>，且你的<span style='color: #FFC0CB'>手牌上限</span>等于除你以外当前<span style='color: #FF00FF'>手牌数</span>最多的角色的<span style='color: #FF00FF'>手牌数</span>。",
			sdzey:"恶业",
			"sdzey_info":"<span style='color: #40E0D0'>锁定技</span>：①每当因其他角色使用、打出、弃置即将有牌进入弃牌堆时，你将这些对应的实体卡牌置于你的武将牌上，称为「恶业」。②<span style='color: #E3CF57'>准备阶段</span>，你将<span style='color: #00C78C'>体力上限</span>调整至与你的<span style='color: #00FF00'>体力</span>相等，然后获得「恶业」中所有<span style='color: #DA70D6'>武器</span>与具有“<span style='color: #FF7D40'>伤害</span>”标签的牌，然后弃置「恶业」中其余的牌。③你使用【杀】的<span style='color: #FFFF00'>次数</span>等于发动②效果的<span style='color: #FFFF00'>次数</span>。",
			jusqty:"讨遗",
			"jusqty_info":"<span style='color: #E3CF57'>出牌阶段</span>限一次，你可以与一名角色<span style='color: #228B22'>拼点</span>：①胜，该角色交给你X张牌；②负，摸X张牌。(X为<span style='color: #228B23'>点数</span>之差，且X最大为3)最后，视为其对你使用一张【杀】。",
			jusqcx:"才学",
			"jusqcx_info":"当你获得其他角色的牌后，本回合<span style='color: #FFC0CB'>手牌上限</span>+3。",
			syslj:"乱击",
			"syslj_info":"你可以将两张花色相同的牌当做【万箭齐发】使用。每当你使用【万箭齐发】时，你可以为此牌减少一个目标。",
			syssm:"率盟",
			"syssm_info":"①游戏开始时，你获得18枚「盟」。②每回合限六次，当你造成<span style='color: #FF7D40'>伤害</span>时，你可以弃置1枚「盟」并摸一张牌，且本回合<span style='color: #FFC0CB'>手牌上限</span>+1，当你<span style='color: #BC8F8F'>失去</span>最后的「盟」时，〖名冠〗<span style='color: #8B864E'>失效</span>。③若你本回合已通过〖率盟〗获得了6张牌，则不能使用或打出任何牌。",
			sysmg:"名冠",
			"sysmg_info":"<span style='color: #40E0D0'>锁定技</span>，<span style='color: #E3CF57'>结束阶段</span>，若你本回合造成了至少X点<span style='color: #FF7D40'>伤害</span>(X为<span style='color: #E3CF57'>本回合开始</span>时存活的角色数且最大为5)，则令所有本回合受到过来自于你至少2点<span style='color: #FF7D40'>伤害</span>且存活的角色<span style='color: #00FF00'>回复</span>1点<span style='color: #00FF00'>体力</span>。否则你将<span style='color: #FF00FF'>手牌</span>摸至<span style='color: #FFC0CB'>手牌上限</span>。",
			sysms:"名嗣",
			"sysms_info":"<span style='color: #FFD700'>限定技</span>，<span style='color: #E3CF57'>出牌阶段</span>开始时，你可以令<span style='color: #00FF00'>体力值</span>唯一最高的角色<span style='color: #BC8F8F'>失去</span>若干点<span style='color: #00FF00'>体力</span>直到其<span style='color: #00FF00'>体力值</span>不为唯一最高。",
			syssx:"失效",
			zhgz:"固政",
			"zhgz_info":"其他角色的<span style='color: #E3CF57'>弃牌阶段</span>结束时，你可以令其获得本阶段内进入弃牌堆的牌中的一张，然后你获得其余的牌。",
			zhjl:"经略",
			"zhjl_info":"每回合限一次，当你摸或获得牌后，你可以将两张名称相同的<span style='color: #FF00FF'>手牌</span>当作任意一张<span style='color: #FCE6C9'>锦囊牌</span>使用(每种<span style='color: #FCE6C9'>锦囊牌</span>每轮限一次)。",
			exmctj:"铁骑",
			"exmctj_info":"当你使用【杀】指定一名角色为目标后，你可以令该角色本回合所有<span style='color: #F4A460'>非锁定技</span><span style='color: #8B864E'>失效</span>，且你进行一次<span style='color: #03A89E'>判定</span>，除非该角色弃置一张与<span style='color: #03A89E'>判定</span>结果花色相同的牌，否则此【杀】<span style='color: #FF7D40'>伤害</span>+1且不能使用【闪】抵消此【杀】(若<span style='color: #03A89E'>判定</span>结果为【杀】，则此【杀】必定不能被响应)，最后你获得为【杀】的<span style='color: #03A89E'>判定牌</span>和该角色弃置的牌。",
			exwuhu:"五虎",
			"exwuhu_info":"<span style='color: #40E0D0'>锁定技</span>，你的至多两张【杀】不计入<span style='color: #FFC0CB'>手牌上限</span>。",
			exgjtd:"天妒",
			"exgjtd_info":"①<span style='color: #E3CF57'>出牌阶段</span>开始时，你可以弃置一张牌，然后进行一次<span style='color: #03A89E'>判定</span>：结果为<span style='color: #666666'>黑色</span>，你受到1点<span style='color: #FF7D40'>伤害</span>。②当你的<span style='color: #03A89E'>判定牌</span>生效后，你可以获得之。",
			exgjyj:"遗计",
			"exgjyj_info":"当你受到<span style='color: #FF7D40'>伤害</span>时，你可以摸2X张牌，然后可以将至多2X张牌交给其他角色(X为<span style='color: #FF7D40'>伤害量</span>)。所有角色通过〖遗计〗获得的牌不计入<span style='color: #FFC0CB'>手牌上限</span>。",
			exgjyj2:"遗计",
			"exgjyj2_info":"当你受到<span style='color: #FF7D40'>伤害</span>时，你可以摸2X张牌并从牌堆中获得X张<span style='color: #FCE6C9'>锦囊牌</span>，然后可以将至多2X张牌交给其他角色(X为<span style='color: #FF7D40'>伤害量</span>)。所有角色通过〖遗计〗获得的牌不计入<span style='color: #FFC0CB'>手牌上限</span>。",
			exgjyc:"遗策",
			"exgjyc_info":"①当你首次脱离<span style='color: #E3CF57'>濒死状态</span>后，<span style='color: #00FF00'>回复</span>1点<span style='color: #00FF00'>体力</span>并修改〖遗计〗。②你死亡时，若你已触发过①效果，你可以令一名其他角色获得〖遗计〗(修改后的)。",
			exhgkr:"苦肉",
			"exhgkr_info":"<span style='color: #E3CF57'>出牌阶段</span>，你可以弃置一张牌，然后<span style='color: #BC8F8F'>失去</span>1点<span style='color: #00FF00'>体力</span>。",
			exhgzx:"诈降",
			"exhgzx_info":"<span style='color: #40E0D0'>锁定技</span>，每当你<span style='color: #BC8F8F'>失去</span>1点<span style='color: #00FF00'>体力</span>后，你摸三张牌。若此时是你的<span style='color: #E3CF57'>出牌阶段</span>，则直到<span style='color: #E3CF57'>回合结束</span>，你使用<span style='color: #FF0000'>红</span>【杀】无<span style='color: #FFFF00'>距离</span>限制且不能被【闪】响应，你可以额外使用一张【杀】。",
			exzltx:"突袭",
			"exzltx_info":"每当你摸牌时，你可以少摸任意张牌，然后获得等量的其他角色的各一张牌。",
			exzlck:"催枯",
			"exzlck_info":"①每当一名其他角色于其<span style='color: #E3CF57'>出牌阶段</span>内摸牌后，你可以摸一张牌。②你的<span style='color: #E3CF57'>弃牌阶段</span>结束时，你可以摸等于此阶段内所弃置的牌数量一半的牌(向下取整)。",
			exscja:"激昂",
			"exscja_info":"每当你使用(指定目标后)或被使用(成为目标后)一张【决斗】或<span style='color: #FF0000'>红</span>【杀】（若你是<span style='color: #00FF00'>体力值</span>最少的角色，成为【杀】的目标时无视颜色判断），你可以摸一张牌。",
			exschz:"魂姿",
			"exschz_info":"<span style='color: #FF6347'>觉醒技</span>，当你的<span style='color: #00FF00'>体力值</span>变化后，若你的<span style='color: #00FF00'>体力值</span>大于0且不大于2，你摸一张牌，然后获得技能〖英姿〗和〖英魂〗，并可以立刻发动一次〖英魂〗。",
			exsczb:"制霸",
			"exsczb_info":"<span style='color: #8B0000'>主公技</span>：①其他<span style='color: #7FFF00'>吴势力</span>的角色的<span style='color: #E3CF57'>出牌阶段</span>限一次，其可以与你<span style='color: #228B22'>拼点</span>（你可拒绝此<span style='color: #228B22'>拼点</span>），若其没赢，你可以获得两张<span style='color: #228B22'>拼点牌</span>；②你的<span style='color: #E3CF57'>出牌阶段</span>限一次，你可以和一名<span style='color: #7FFF00'>吴势力</span>角色<span style='color: #228B22'>拼点</span>，若你赢，你获得两张<span style='color: #228B22'>拼点牌</span>。",
			exsczb2:"制霸",
			exscyz:"英姿",
			"exscyz_info":"<span style='color: #40E0D0'>锁定技</span>：①<span style='color: #E3CF57'>摸牌阶段</span>摸牌时，你额外摸一张牌；②你的<span style='color: #FFC0CB'>手牌上限</span>为你的<span style='color: #00C78C'>体力上限</span>。",
			exscyh:"英魂",
			"exscyh_info":"<span style='color: #E3CF57'>准备阶段</span>开始时或当你受到<span style='color: #FF7D40'>伤害</span>后，你可令一名角色(若你是<span style='color: #FF00FF'>手牌</span>最多的角色，则不能选择自己)执行一项：①摸X张牌，然后弃置一张牌；②摸一张牌，然后弃置X张牌。(X为你已损失的<span style='color: #00FF00'>体力值</span>)",
			exsjyh:"英魂",
			"exsjyh_info":"<span style='color: #E3CF57'>准备阶段</span>开始时或当你受到<span style='color: #FF7D40'>伤害</span>后，你可令一名角色(若你是<span style='color: #FF00FF'>手牌</span>最多的角色，则不能选择自己)执行一项：①摸X张牌，然后弃置一张牌；②摸一张牌，然后弃置X张牌。(X为你已损失的<span style='color: #00FF00'>体力值</span>)你的<span style='color: #FFC0CB'>手牌上限</span>等于你的<span style='color: #00FF00'>体力值</span>与已损失的<span style='color: #00FF00'>体力值</span>中的较大者。",
			exsjwl:"武烈",
			"exsjwl_info":"<span style='color: #FFD700'>限定技</span>，<span style='color: #E3CF57'>结束阶段</span>，你可以受到任意点<span style='color: #FF7D40'>伤害</span>并指定等量的其他角色，这些角色各获得一枚「武烈」。有「武烈」的角色受到<span style='color: #FF7D40'>伤害</span>时，其移去一枚「武烈」，然后防止此<span style='color: #FF7D40'>伤害</span>。",
			exsjpl:"破虏",
			"exsjpl_info":"<span style='color: #8B0000'>主公技</span>，当一名其他角色死亡时，你可以令一名其他角色摸X+1张牌。(X为你此前发动过〖破虏〗的次数，且至多为2)。",
			exgnqx:"奇袭",
			"exgnqx_info":"①你可以将一张<span style='color: #666666'>黑色</span>牌当做【过河拆桥】使用。②在你的回合内，每当你第<span style='color: #228B23'>偶数</span>次使用<span style='color: #666666'>黑色</span>牌并指定唯一目标时，若你的<span style='color: #FF00FF'>手牌数</span>[不大于/大于]该角色，你可以摸[两/一]张牌。",
			exgnfw:"奋威",
			"exgnfw_info":"每轮限一次，当一名角色使用的<span style='color: #FCE6C9'>锦囊牌</span>指定了至少两名角色为目标时，你可以令此牌对其中任意名角色无效。",
			exzyyz:"英姿",
			"exzyyz_info":"<span style='color: #40E0D0'>锁定技</span>：①每当你摸牌时，你从牌堆中获得一张<span style='color: #FCE6C9'>锦囊牌</span>，若牌堆中没有<span style='color: #FCE6C9'>锦囊牌</span>，改为从弃牌堆中获得一张<span style='color: #FCE6C9'>锦囊牌</span>；②你的<span style='color: #FFC0CB'>手牌上限</span>等于你的<span style='color: #00C78C'>体力上限</span>+1。",
			exzyfj:"反间",
			"exzyfj_info":"<span style='color: #E3CF57'>出牌阶段</span>限一次，你可以令一名其他角色展示所有<span style='color: #FF00FF'>手牌</span>，然后你可以将一张<span style='color: #FF00FF'>手牌</span>交给该角色并摸一张牌，该角色选择一项：①弃置所有与此牌花色相同的牌；②<span style='color: #BC8F8F'>失去</span>1点<span style='color: #00FF00'>体力</span>。",
			exlxqx:"谦逊",
			"exlxqx_info":"每当一张<span style='color: #9C661F'>延时</span><span style='color: #FCE6C9'>锦囊</span>或其他角色使用的普通<span style='color: #FCE6C9'>锦囊牌</span>生效时，若你是此牌的唯一目标，你可以将所有<span style='color: #FF00FF'>手牌</span>置于你的武将牌上，若如此做，此<span style='color: #E3CF57'>回合结束</span>时，你获得你武将牌上的所有牌。",
			exlxly:"连营",
			"exlxly_info":"当你<span style='color: #BC8F8F'>失去</span><span style='color: #FF00FF'>手牌</span>时，若你的<span style='color: #FF00FF'>手牌数</span>等于你的<span style='color: #00FF00'>体力值</span>或你没有<span style='color: #FF00FF'>手牌</span>，你可以令至多X名角色各摸一张牌(X为你此次<span style='color: #BC8F8F'>失去</span>的<span style='color: #FF00FF'>手牌数</span>)。",
			exhzlg:"烈弓",
			"exhzlg_info":"①你使用【杀】无<span style='color: #FFFF00'>距离</span>限制；②当你使用【杀】指定一个目标后你可以令此【杀】不能被【闪】响应，若其<span style='color: #00FF00'>体力值</span>不小于你，此【杀】<span style='color: #FF7D40'>伤害</span>+1，若其的<span style='color: #FF00FF'>手牌数</span>大于你，其将<span style='color: #FF00FF'>手牌</span>弃至与你的<span style='color: #FF00FF'>手牌数</span>相等，每回合限一次：增加<span style='color: #FF7D40'>伤害</span>与弃牌之中每少触发一项，你便摸一张牌。",
			exgyws:"武圣",
			"exgyws_info":"你可以将一张<span style='color: #FF0000'>红色</span>牌当做【杀】使用或打出。你使用的<span style='color: #FF0000'>♥</span>【杀】<span style='color: #FF7D40'>伤害</span>+1，你使用<span style='color: #FF0000'>♦</span>【杀】没有<span style='color: #FFFF00'>距离</span>限制。",
			exgyyj:"义绝",
			"exgyyj_info":"<span style='color: #E3CF57'>出牌阶段</span>限一次，你可以展示并获得一名其他角色的一张牌，然后你执行一项：①你可以弃置一张颜色与此牌不同的牌并摸一张牌，若如此做，则你计算与其的<span style='color: #FFFF00'>距离</span>为1且该角色不能使用或打出牌且<span style='color: #F4A460'>非锁定技</span><span style='color: #8B864E'>失效</span>直到<span style='color: #E3CF57'>回合结束</span>；②你可以令其摸一张牌并<span style='color: #00FF00'>回复</span>1点<span style='color: #00FF00'>体力</span>。",
            exzfpx:"咆哮",
            "exzfpx_info":"①<span style='color: #40E0D0'>锁定技</span>，你使用【杀】无<span style='color: #FFFF00'>次数</span>限制，若你于回合内使用过【杀】，则你本回合使用【杀】没有<span style='color: #FFFF00'>距离</span>限制。②<span style='color: #40E0D0'>锁定技</span>，当你使用的【杀】被【闪】抵消时，获得一枚「咆哮」，当你使用的【杀】造成<span style='color: #FF7D40'>伤害</span>时，你弃置所有「咆哮」并令<span style='color: #FF7D40'>伤害</span>值+X（X为「哮」的数量）。<span style='color: #E3CF57'>回合结束</span>后，你弃置所有「咆哮」。",
            exzfts:"替身",
            "exzfts_info":"[你对其他角色使用(每回合限一次)/其他角色对你使用]的【杀】结算后，若此【杀】[未造成/造成过]<span style='color: #FF7D40'>伤害</span>(若你是此【杀】的目标之一且<span style='color: #FF00FF'>手牌</span>中没有【杀】则无需进行此判断)，你可以获得之。",
            exzyld:"龙胆",
            "exzyld_info":"你可以将一张【杀】当做【闪】、【闪】当做【杀】、【酒】当做【桃】、【桃】当做【酒】使用或打出。",
            exzyyj:"涯角",
            "exzyyj_info":"①当你因发动〖龙胆〗而使用或打出【杀】或【闪】时，你可以获得对方的一张<span style='color: #FF00FF'>手牌</span>。②于回合外使用或打出牌时，你可以摸一张牌。③发动过①或②后，你可以将一张牌交给一名其他角色，若①②皆触发而你未交出牌，且你是<span style='color: #FF00FF'>手牌</span>最多的角色，你弃置一张<span style='color: #FF00FF'>手牌</span>。",
            exlbrd:"仁德",
            "exlbrd_info":"<span style='color: #E3CF57'>出牌阶段</span>，你可以将至少一张<span style='color: #FF00FF'>手牌</span>交给其他角色，你于本<span style='color: #E3CF57'>出牌阶段</span>内给出的牌每达到<span style='color: #228B23'>偶数</span>张，你可以视为使用一张<span style='color: #808069'>基本牌</span>(每种牌名每回合限一次)，以此法使用的【杀】不计入使用<span style='color: #FFFF00'>次数</span>。",
            exlbrw:"仁望",
            "exlbrw_info":"当你于一名其他角色的回合内成为该角色使用的【杀】或普通<span style='color: #FCE6C9'>锦囊牌</span>的目标后，若你的<span style='color: #FF00FF'>手牌数</span>小于该角色，你摸一张牌，然后若此牌不是其本回合对你使用的第一张【杀】或普通<span style='color: #FCE6C9'>锦囊牌</span>，则你可以弃置该角色的一张牌。",
            exlbjj:"激将",
            "exlbjj_info":"<span style='color: #8B0000'>主公技</span>，<span style='color: #E3CF57'>出牌阶段</span>限一次，你可以选择一名其他角色，然后依次询问所有角色是否对其使用一张【杀】，若有角色对其使用了【杀】，结束此过程。",
            exsmyfk:"反馈",
            "exsmyfk_info":"每当你受到1点<span style='color: #FF7D40'>伤害</span>时，你可以获得<span style='color: #FF7F50'>伤害来源</span>的一张牌，然后可以摸一张牌(若你未获得<span style='color: #FF7F50'>伤害来源</span>的牌改为摸两张牌)。",
            exsmygc:"鬼才",
            "exsmygc_info":"在任意角色的<span style='color: #03A89E'>判定牌</span>生效前，你可以打出一张牌替换之。",
            exsmyqm:"权谋",
            "exsmyqm_info":"<span style='color: #E3CF57'>出牌阶段</span>限一次，你可以令一名<span style='color: #00FF00'>体力值</span>不小于你的其他角色进行一次<span style='color: #03A89E'>判定</span>：①结果为【杀】，你对其造成1点<span style='color: #FF7D40'>伤害</span>；②结果不为【杀】，其摸两张牌。",
            exxcly:"裸衣",
            "exxcly_info":"<span style='color: #40E0D0'>锁定技</span>：①<span style='color: #E3CF57'>摸牌阶段</span>开始时，你展示牌堆顶的三张牌，然后，你获得其中的<span style='color: #808069'>基本牌</span>、<span style='color: #DA70D6'>武器牌</span>和【决斗】，若你本阶段因〖裸衣〗获得了牌，则本<span style='color: #E3CF57'>摸牌阶段</span>少摸一张牌。②你使用的【杀】或【决斗】造成<span style='color: #FF7D40'>伤害</span>时，此<span style='color: #FF7D40'>伤害</span>+1。",
            exxcxc:"挟缠",
            "exxcxc_info":"<span style='color: #E3CF57'>出牌阶段</span>限一次，你可以将一张<span style='color: #F4A460'>非基本牌</span>当作【决斗】使用。",
            exxhdgl:"刚烈",
            "exxhdgl_info":"当任意角色受到<span style='color: #FF7D40'>伤害</span>后，若<span style='color: #FF7F50'>伤害来源</span>不是你，你可以：第一步-若受到<span style='color: #FF7D40'>伤害</span>的角色是你，你对<span style='color: #FF7F50'>伤害来源</span>造成等量<span style='color: #FF7D40'>伤害</span>，第二步-进行X次<span style='color: #03A89E'>判定</span>(X为<span style='color: #FF7D40'>伤害量</span>)，若结果为<span style='color: #FF0000'>红色</span>，你摸一张牌，若结果为<span style='color: #666666'>黑色</span>，你弃置<span style='color: #FF7F50'>伤害来源</span>一张牌。",
            exxhdqj:"清俭",
            "exxhdqj_info":"当你于<span style='color: #E3CF57'>摸牌阶段</span>外获得牌时，你可以展示任意张牌并交给一名其他角色。然后，直到该角色<span style='color: #E3CF57'>回合结束</span>，其的<span style='color: #FFC0CB'>手牌上限</span>+X(X为你给出的牌中包含的类别数)。",
            exdwqx:"强袭",
            "exdwqx_info":"<span style='color: #E3CF57'>出牌阶段</span>：①你可以弃置一张<span style='color: #DA70D6'>武器牌</span>选择一名其他角色(不计入发动〖强袭〗的<span style='color: #FFFF00'>次数</span>)；②若你本回合发动〖强袭〗的<span style='color: #FFFF00'>次数</span>小于1或不大于你已损失的<span style='color: #00FF00'>体力值</span>，你可以选择在你<span style='color: #C76114'>攻击范围</span>内的一名其他角色后<span style='color: #BC8F8F'>失去</span>1点<span style='color: #00FF00'>体力</span>或<span style='color: #00C78C'>体力上限</span>。在①与②中做出选择后对其造成1点<span style='color: #FF7D40'>伤害</span>，若你选择<span style='color: #BC8F8F'>失去</span><span style='color: #00FF00'>体力</span>，则本回合不能再发动〖强袭〗。",
            exdwpn:"睥睨",
            "exdwpn_info":"<span style='color: #40E0D0'>锁定技</span>，当你的<span style='color: #00FF00'>体力值</span>减少后，你获得1点<span style='color: #00C78C'>体力上限</span>，然后若你没有<span style='color: #DA70D6'>武器牌</span>你从牌堆中获得一张<span style='color: #DA70D6'>武器牌</span>，若你没有【杀】你从牌堆中获得一张【杀】(若牌堆中没有相应的牌改为从弃牌堆中获得)。",
			exgsxz:"陷阵",
			"exgsxz_info":"<span style='color: #E3CF57'>出牌阶段</span>限一次，你可以和一名其他角色<span style='color: #228B22'>拼点</span>：①胜，若你<span style='color: #FF00FF'>手牌</span>中没有【杀】你从弃牌堆中获得一张【杀】，你本回合内对其使用牌没有<span style='color: #FFFF00'>次数</span>和<span style='color: #FFFF00'>距离</span>限制并无视其<span style='color: #DA70D6'>防具</span>且本回合对其使用的下一张【杀】<span style='color: #FF7D40'>伤害</span>+1；②负，你本回合内不能使用【杀】且你的【杀】不计入<span style='color: #FFC0CB'>手牌上限</span>。(若你的<span style='color: #228B22'>拼点牌</span>为【杀】，<span style='color: #228B22'>拼点</span>结算后你收回之)",
			exgsjj:"禁酒",
			"exgsjj_info":"<span style='color: #40E0D0'>锁定技</span>：①你的【酒】均视为【杀】；②你的回合内，所有角色均不能使用【酒】；③当你受到【酒】+【杀】的<span style='color: #FF7D40'>伤害</span>时，你令此<span style='color: #FF7D40'>伤害</span>-X(X为影响过此【杀】的【酒】的数量)。",
			exhxsy:"恃勇",
			"exhxsy_info":"<span style='color: #40E0D0'>锁定技</span>，当你受到牌造成的<span style='color: #FF7D40'>伤害</span>时：①此牌为<span style='color: #FF0000'>红色</span>，<span style='color: #FF7F50'>伤害来源</span>摸一张牌；②此牌不为<span style='color: #FF0000'>红色</span>，你摸X张牌(X等于<span style='color: #FF7D40'>伤害量</span>)。",
			exhxyw:"耀武",
			"exhxyw_info":"任意角色的<span style='color: #E3CF57'>回合结束</span>时，你可以令其将<span style='color: #FF00FF'>手牌</span>摸至X(若该角色是你，X为你已损失的<span style='color: #00FF00'>体力值</span>；否则X为你已损失的<span style='color: #00FF00'>体力值</span>与<span style='color: #00FF00'>体力值</span>中的较大者；X至多为5)，若该角色不是你且本次因〖耀武〗摸的牌大于两张，你<span style='color: #BC8F8F'>失去</span>1点<span style='color: #00FF00'>体力</span>。",
			jcgmc:"明策",
			"jcgmc_info":"一名角色的<span style='color: #E3CF57'>出牌阶段</span>开始时，你可以令该角色从弃牌堆获得一张【杀】且本回合使用【杀】的<span style='color: #FFFF00'>次数</span>+1，并令其<span style='color: #E3CF57'>出牌阶段</span>使用的第一张牌无<span style='color: #FFFF00'>距离</span>限制。",
			jcgzc:"智迟",
			"jcgzc_info":"<span style='color: #40E0D0'>锁定技</span>，每回合限一次，当你于回合外受到<span style='color: #FF7D40'>伤害</span>时，所有不具备“摸牌”或“<span style='color: #00FF00'>回复</span>”标签的牌对你无效直到<span style='color: #E3CF57'>回合结束</span>，然后你可以令<span style='color: #FF7F50'>伤害来源</span>弃置两张牌。",
			exlbws:"无双",
			"exlbws_info":"<span style='color: #40E0D0'>锁定技</span>：①当你使用[【杀】/【决斗】]指定一个目标后，该角色[需依次使用两张【闪】才能抵消此【杀】/每次响应此【决斗】需依次打出两张【杀】]；②你使用【杀】对其他角色造成<span style='color: #FF7D40'>伤害</span>时，若该角色未使用【闪】响应过此【杀】则<span style='color: #FF7D40'>伤害</span>+1。",
			exlbly:"利驭",
			"exlbly_info":"当你使用【杀】对一名其他角色造成<span style='color: #FF7D40'>伤害</span>后，你可以获得其一张牌：①若此牌不为<span style='color: #DA70D6'>装备牌</span>，则其摸一张牌，若此牌为【杀】，则你本回合使用【杀】的<span style='color: #FFFF00'>次数</span>+1；②若此牌为<span style='color: #DA70D6'>装备牌</span>，则视为你对其选择的另一名角色使用一张【决斗】。(你通过〖利驭〗获得的牌不计入<span style='color: #FFC0CB'>手牌上限</span>)",
			exlbxl:"蓄力",
			"exlbxl_info":"<span style='color: #E3CF57'>结束阶段</span>，若你本回合没有造成<span style='color: #FF7D40'>伤害</span>，你从牌堆中获得【决斗】和【杀】各一张(若牌堆中没有相应的牌改为从弃牌堆中获得)。",
			spsgyws:"武神",
			"spsgyws_info":"①你可以将一张<span style='color: #FF0000'>红色</span>牌当做<span style='color: #FF8000'>火</span>【杀】使用或打出。②你使用的<span style='color: #FF0000'>♥</span>【杀】<span style='color: #FF7D40'>伤害</span>+1，你使用<span style='color: #FF0000'>♦</span>【杀】没有<span style='color: #FFFF00'>距离</span>限制。③每回合你使用的第一张【杀】被目标角色使用的【闪】抵消时，你摸一张牌且可以对其使用一张【杀】。",
			spsgyws2:"武神",
			"spsgyws2_info":"①你可以将一张<span style='color: #FF0000'>红色</span>牌当做<span style='color: #FF8000'>火</span>【杀】使用或打出。②你使用的<span style='color: #FF0000'>♥</span>【杀】<span style='color: #FF7D40'>伤害</span>+1，你使用<span style='color: #FF0000'>♦</span>【杀】没有<span style='color: #FFFF00'>距离</span>限制。③当你使用<span style='color: #FF8000'>火</span>【杀】造成<span style='color: #FF7D40'>伤害</span>后，你摸一张牌。",
			spsgyzy:"忠义",
			"spsgyzy_info":"①<span style='color: #40E0D0'>锁定技</span>，其他角色获得你的<span style='color: #FF00FF'>手牌</span>后，若你的<span style='color: #FF00FF'>手牌数</span>小于X(X为你的<span style='color: #00FF00'>体力值</span>且最大为5)，该角色可以令你将<span style='color: #FF00FF'>手牌</span>摸至X张，否则该角色不能使用或打出牌且<span style='color: #F4A460'>非锁定技</span><span style='color: #8B864E'>失效</span>直到<span style='color: #E3CF57'>回合结束</span>；②<span style='color: #E3CF57'>出牌阶段</span>限一次，你可以将一张<span style='color: #FF00FF'>手牌</span>交给一名其他角色。",
			spsgyzy2:"忠义",
			"spsgyzy2_info":"①<span style='color: #40E0D0'>锁定技</span>，其他角色获得你的<span style='color: #FF00FF'>手牌</span>后，若你的<span style='color: #FF00FF'>手牌数</span>小于X(X为你的<span style='color: #00FF00'>体力值</span>且最大为5)，你将<span style='color: #FF00FF'>手牌</span>摸至X张，该角色不能使用或打出牌且<span style='color: #F4A460'>非锁定技</span><span style='color: #8B864E'>失效</span>直到<span style='color: #E3CF57'>回合结束</span>；②<span style='color: #E3CF57'>出牌阶段</span>限一次，你可以将一张<span style='color: #FF00FF'>手牌</span>交给一名其他角色。",
			spsgyzj:"斩将",
			"spsgyzj_info":"<span style='color: #40E0D0'>锁定技</span>，当你击杀一名角色后，本回合使用【杀】的<span style='color: #FFFF00'>次数</span>+1并<span style='color: #7FFFD4'>复原</span>〖忠义〗。",
			spsgyqj:"七军",
			"spsgyqj_info":"<span style='color: #40E0D0'>锁定技</span>：①所有其他角色的<span style='color: #FFC0CB'>手牌上限</span>-X(X为该角色<span style='color: #9933FA'>装备区</span>中的<span style='color: #DA70D6'>装备</span>数量)；②每当其他角色使用或<span style='color: #BC8F8F'>失去</span>一张<span style='color: #DA70D6'>装备牌</span>，该角色弃置一张<span style='color: #FF00FF'>手牌</span>。",
			spsgycb:"成败",
			"spsgycb_info":"<span style='color: #F08080'>使命技</span>。①当其他角色获得你的牌后，该角色获得「成败」标记。②使命：击杀一名拥有「成败」标记的角色或所有其他角色皆拥有「成败」标记，修改技能〖武神〗与〖忠义〗并获得技能〖七军〗。③失败：一名拥有「成败」标记的角色死亡且击杀者不是你，弃置<span style='color: #9933FA'>区域内</span>的所有牌并减少1点<span style='color: #00C78C'>体力上限</span>，然后将此武将牌替换为『界神关羽』并<span style='color: #00FF00'>回复</span>所有<span style='color: #00FF00'>体力</span>且摸两张牌。(达成②或③会清除所有「成败」标记)",
			szjfz:"符咒",
			"szjfz_info":"①[<span style='color: #E3CF57'>出牌阶段</span>/当你使用或打出一张【闪】时]，你可以将[一张具有“<span style='color: #FF7D40'>伤害</span>”标签的牌/此【闪】]置于一名其他角色的武将牌上称作「符」(每名角色每回合只能获得一次「符」)。②<span style='color: #40E0D0'>锁定技</span>，你不能使用(可以打出)具有“<span style='color: #FF7D40'>伤害</span>”标签的牌。",
			szjtf:"吞符",
			"szjtf_info":"一名拥有「符」的其他角色<span style='color: #E3CF57'>出牌阶段</span>开始时，你可以观看并获得该角色X张<span style='color: #FF00FF'>手牌</span>(X为其<span style='color: #FF00FF'>手牌数</span>与其武将牌上「符」数量中的较小者)，并选择「符」中等量的牌令该角色获得。若X不小于2，该角色<span style='color: #00FF00'>回复</span>1点<span style='color: #00FF00'>体力</span>。",
			szjcl:"掣雷",
			"szjcl_info":"①一名拥有「符」的其他角色<span style='color: #E3CF57'>回合开始</span>时，你可以令该角色进行一次<span style='color: #03A89E'>判定</span>：结果为<span style='color: #666666'>黑色</span>，你对其造成X点<span style='color: #0000FF'>雷电</span><span style='color: #FF7D40'>伤害</span>(<span style='color: #666666'>♠</span>:X为其武将牌上「符」的数量/<span style='color: #666666'>♣</span>:X=1)，若为<span style='color: #666666'>♠</span>则移除该角色的所有「符」。②你每造成1点<span style='color: #0000FF'>雷电</span><span style='color: #FF7D40'>伤害</span>后，可以令受伤目标弃置一张牌或令你自己摸一张牌。③你受到<span style='color: #0000FF'>雷电</span><span style='color: #FF7D40'>伤害</span>时改为<span style='color: #00FF00'>回复</span>等量<span style='color: #00FF00'>体力</span>。",
			szjgd:"诡道",
			"szjgd_info":"在任意角色的<span style='color: #03A89E'>判定牌</span>生效前，你可以打出一张<span style='color: #666666'>黑色</span>牌或用该角色的一张「符」代替之，然后获得被替代的<span style='color: #03A89E'>判定牌</span>。",
			sjxqb:"权变",
			"sjxqb_info":"每当你摸牌时，你可以改为由另一名角色摸等量的牌，然后<span style='color: #B3B3B3'>生成</span>X张不同名的牌(X等于你本次原应摸牌数量与本回合〖权变〗可以<span style='color: #B3B3B3'>生成</span>牌数量中的较小者，且每回合每种牌名限一次)并获得这些牌。(当你因〖权变〗<span style='color: #B3B3B3'>生成</span>的牌进入弃牌堆时将其移出游戏)",
			sjxlw:"乱武",
			"sjxlw_info":"<span style='color: #E3CF57'>结束阶段</span>，若本回合你没有发动过〖权变〗，则你可以令所有角色使用有目标的牌时随机指定目标直到<span style='color: #E3CF57'>你下回合开始</span>。",
			jbmhzk:"纵傀",
			"jbmhzk_info":"<span style='color: #40E0D0'>锁定技</span>，[第一轮游戏开始/每轮游戏开始或<span style='color: #E3CF57'>回合开始</span>]时，你令[一半的角色(向下取整)/一名角色]获得「傀」标记。",
			jbmhgj:"骨疽",
			"jbmhgj_info":"<span style='color: #40E0D0'>锁定技</span>，拥有「傀」标记的角色受到<span style='color: #FF7D40'>伤害</span>后，你摸一张牌。",
			jbmhbj:"拜假",
			"jbmhbj_info":"<span style='color: #FF6347'>觉醒技</span>，<span style='color: #E3CF57'>准备阶段</span>，若你因〖骨疽〗获得的牌不少于7张，获得技能〖蚕食〗。",
			jbmhcs:"蚕食",
			"jbmhcs_info":"[一名角色使用/你使用]<span style='color: #808069'>基本牌</span>或普通<span style='color: #FCE6C9'>锦囊牌</span>[指定你为唯一目标/指定唯一目标]时，[若其有「傀」标记，你可以取消之/你可以额外指定任意名带有「傀」标记的角色为目标(无<span style='color: #FFFF00'>距离</span>限制)]，然后[其/这些角色]<span style='color: #BC8F8F'>失去</span>「傀」标记。",
			csts:"通史",
			"csts_info":"<span style='color: #E3CF57'>出牌阶段</span>限一次，你可以令一名角色做一道选择题：答对，你与其各摸一张牌；答错，你与其各弃置一张牌。每回发动此技能限四次，你可以弃置一张牌重复以上步骤。",
			spyhbl:"兵略",
			"spyhbl_info":"①游戏开始时，你将8张<span style='color: #FF0000'>【反攻】</span>、8张<span style='color: #666666'>【夜袭】</span>、6张<span style='color: #FF0000'>【围城】</span>加入牌堆。<span style='color: #E3CF57'>初始摸牌阶段</span>结束时，你将8张<span style='color: #666666'>【伏兵】</span>加入牌堆。②每回合每项限一次，你可以在一名角色：使用<span style='color: #FF0000'>【反攻】</span>、使用<span style='color: #666666'>【伏兵】</span>、弃置了至少两张同色牌、将武将牌<span style='color: #990033'>翻至背面</span>时，触发对应效果。③当其他角色使用的<span style='color: #8200d9'>兵略牌</span>结算后，你可以进行一次<span style='color: #03A89E'>判定</span>：花色[相同/不同]，获得[此牌/<span style='color: #03A89E'>判定牌</span>]。",
			splslm:"联盟",
			"splslm_info":"①游戏开始时，你令场上至多两名角色获得「盟」标记。②你的<span style='color: #E3CF57'>回合开始</span>时，若游戏轮数为[<span style='color: #228B23'>奇数</span>/<span style='color: #228B23'>偶数</span>]，则你可以[摸一张牌移动一枚「盟」标记/弃置一张牌令一名角色获得「盟」标记]。(*「盟」标记：<span style='color: #E3CF57'>摸牌阶段</span>多摸一张牌，<span style='color: #FFC0CB'>手牌上限</span>+1)",
			splstx:"同心",
			"splstx_info":"<span style='color: #40E0D0'>锁定技</span>：①每回合对每名角色限一次(其本回合受到伤害后刷新<span style='color: #FFFF00'>次数</span>)，当有「盟」标记的角色被带有“<span style='color: #FF7D40'>伤害</span>”标签的牌指定时，其他有「盟」标记的角色须展示一张牌，然后该角色选择并获得其中一张牌，最后被获得牌的角色摸一张牌。②当有「盟」标记的角色死亡时，其他有「盟」标记的角色依次进行一次<span style='color: #03A89E'>判定</span>：结果为[<span style='color: #FF0000'>红色</span>/<span style='color: #666666'>黑色</span>]，其[弃置两张牌/受到1点来自击杀者的<span style='color: #FF7D40'>伤害</span>]。",
			zshq:"害亲",
			"zshq_info":"当有角色于其回合外<span style='color: #BC8F8F'>失去</span><span style='color: #00FF00'>体力</span>时，你可以令其本次多<span style='color: #BC8F8F'>失去</span>1点<span style='color: #00FF00'>体力</span>。",
			zsdr:"得荣",
			"zsdr_info":"<span style='color: #FF6347'>觉醒技</span>，第二轮及以后的每轮游戏开始时若上一轮游戏没有任何角色<span style='color: #BC8F8F'>失去</span>过<span style='color: #00FF00'>体力</span>，则你减少1点<span style='color: #00C78C'>体力上限</span>并获得技能〖荣华〗。",
			zsrh:"荣华",
			"zsrh_info":"当一名角色摸牌时，若其本次摸牌数不大于二，你可以令其多摸一张牌。",
			szsrj:"辱骄",
			"szsrj_info":"①你的<span style='color: #E3CF57'>弃牌阶段</span>结束时，你可以弃置两张牌并令一名其他角色获得「骄」标记。②<span style='color: #E3CF57'>出牌阶段</span>开始时，移除所有「骄」标记。(*「骄」标记：其他角色与你计算<span style='color: #FFFF00'>距离</span>时始终-2；你于其他角色回合内受到总计2点<span style='color: #FF7D40'>伤害</span>时，须选择一项：①将<span style='color: #9933FA'>装备区</span>中的所有牌交给「骄」标记来源；②交给「骄」标记来源一张<span style='color: #FF00FF'>手牌</span>；③弃置两张牌)",
			szscs:"畅诵",
			"szscs_info":"<span style='color: #E3CF57'>回合开始</span>时：①若没有角色拥有「骄」标记，你可以弃置X张牌并摸X+2张牌(X为你已损失的<span style='color: #00FF00'>体力值</span>)；②若有角色拥有「骄」标记，你可以<span style='color: #BC8F8F'>失去</span>1点<span style='color: #00FF00'>体力</span>并弃置一张牌，令一名角色获得「骄」标记。",
			szsxz:"寻主",
			"szsxz_info":"<span style='color: #F08080'>使命技</span>。使命：若场上同时存在一枚以上的「骄」标记，则你减少1点<span style='color: #00C78C'>体力上限</span>并<span style='color: #00FF00'>回复</span>1点<span style='color: #00FF00'>体力</span>，<span style='color: #BC8F8F'>失去</span>技能〖辱骄〗和〖畅诵〗并获得技能〖内应〗；失败：若你与拥有「骄」的角色皆没有<span style='color: #FF00FF'>手牌</span>，你<span style='color: #BC8F8F'>失去</span>1点<span style='color: #00FF00'>体力</span>，且在本局游戏剩余的时间里，你受到来自<span style='color: #666666'>♠</span>牌的<span style='color: #FF7D40'>伤害</span>+1，受到<span style='color: #666666'>♣</span>牌的<span style='color: #FF7D40'>伤害</span>时弃置一张牌。",
			szsny:"内应",
			"szsny_info":"①其他角色的<span style='color: #E3CF57'>回合开始</span>时，你可以<span style='color: #BC8F8F'>失去</span>任意点体力，令其摸X张牌(X为你已损失的<span style='color: #00FF00'>体力值</span>)，然后你可以交给该角色一张牌并使其本回合内使用杀的<span style='color: #FFFF00'>次数</span>+1。②<span style='color: #E3CF57'>出牌阶段</span>开始时，你可以展示并交给一名角色至多两张牌，若此做本回合你使用这些牌中所包含类型的牌时摸一张牌。",
			sfzbd:"报德",
			"sfzbd_info":"①每回合限一次，当其他角色于回合外获得牌后，其可以交给你两张牌。②当你获得其他角色的牌时，你可以令其选择摸等量(至多为3)的牌并弃置此数量-1张牌或从牌堆中获得一张<span style='color: #DA70D6'>装备牌</span>或<span style='color: #FCE6C9'>锦囊牌</span>。",
			sfzjs:"较失",
			"sfzjs_info":"<span style='color: #40E0D0'>锁定技</span>，当其他角色[对你造成<span style='color: #FF7D40'>伤害</span>/获得你的<span style='color: #FF00FF'>手牌</span>]时，该角色角色需要选择一项：①<span style='color: #BC8F8F'>失去</span>X点<span style='color: #00FF00'>体力</span>并令你摸X张牌；②摸X张牌并将一半(向下取整且至少为1)的<span style='color: #FF00FF'>手牌</span>交给你。(X为[<span style='color: #FF7D40'>伤害量</span>/被获得牌数量的一半，向下取整且至少为1]，且至多为4)",
			sfzdc:"定才",
			"sfzdc_info":"<span style='color: #E3CF57'>回合开始</span>时，你可以将所有<span style='color: #FF00FF'>手牌</span>交给一名其他角色。",
			zhcx:"才行",
			"zhcx_info":"<span style='color: #E3CF57'>出牌阶段</span>，你可以将一张本回合发动此技能未选择过的花色的牌交给一名本回合发动此技能未选择过的角色(若指定的角色为你自己改为弃置此牌)，然后其可以视为使用一张无<span style='color: #FFFF00'>距离</span>限制的【杀】。",
			zhtc:"推诚",
			"zhtc_info":"每当其他角色获得你的牌后，直到该角色<span style='color: #E3CF57'>回合结束</span>：①其对你造成的<span style='color: #FF7D40'>伤害</span>+1；②其使用这些牌不计入<span style='color: #FFFF00'>次数</span>。",
			spzmjd:"绝斗",
			"spzmjd_info":"当你于回合内使用牌时，若你本回合此前未使用过该[名称/花色]的牌，则你可以摸[一/两]张牌(该摸牌数不可叠加)。[当你摸牌/<span style='color: #E3CF57'>出牌阶段</span>结束]时，若你因〖绝斗〗摸了[<span style='color: #228B23'>奇数</span>/<span style='color: #228B23'>偶数</span>]张牌，则你[少摸一张牌/跳过下个<span style='color: #E3CF57'>出牌阶段</span>]。",
			jmylfp:"凤魄",
			"jmylfp_info":"【杀】与【决斗】每回合各限一次，当你于<span style='color: #E3CF57'>出牌阶段</span>内使用【杀】或【决斗】时，你可以选择此牌指定的其中一名目标，然后选择一项：①摸X张牌，本回合使用【杀】的<span style='color: #FFFF00'>次数</span>+1；②弃置X张牌令此牌对该角色造成的<span style='color: #FF7D40'>伤害</span>+X且不能被该角色响应。(X为该角色<span style='color: #FF00FF'>手牌</span>中<span style='color: #FF0000'>♦</span>牌的数量)",
			exmdqx:"潜袭",
			"exmdqx_info":"<span style='color: #E3CF57'>准备阶段</span>，你可以观看牌堆顶的两张牌，并秘密获得其中一张牌，将另一张牌置于牌堆顶或弃牌堆，然后弃置一张牌并从牌堆底摸一张牌，最后令一名其他角色本回合不能使用或打出与你弃置的牌颜色相同的<span style='color: #FF00FF'>手牌</span>。",
			exmddz:"断指",
			"exmddz_info":"当你使用【杀】对一名角色造成<span style='color: #FF7D40'>伤害</span>时，你可以令其减少X点<span style='color: #00C78C'>体力上限</span>(X等于<span style='color: #FF7D40'>伤害量</span>)并防止此<span style='color: #FF7D40'>伤害</span>。",
			spmzfs:"富商",
			"spmzfs_info":"①<span style='color: #E3CF57'>出牌阶段</span>限一次，你可以打出一张<span style='color: #FF00FF'>手牌</span>，然后从你的下家开始所有角色依次可以打出一张比这张牌大的<span style='color: #FF00FF'>手牌</span>，若其没打出牌，则本次技能结算前其不能再参与此技能，直到能参与本次技能的角色只剩一名，该角色获得本次技能所有角色打出的牌或摸三张牌，若该角色不是你则摸X张牌(X为你于此过程中打出牌的数量且至多为3)。②<span style='color: #40E0D0'>锁定技</span>，你的<span style='color: #FFC0CB'>手牌上限</span>+3。",
			jcccx:"称象",
			"jcccx_info":"当你受到<span style='color: #FF7D40'>伤害</span>后，你可以展示牌堆顶的四张牌，并获得其中任意数量<span style='color: #228B23'>点数</span>之和不大于13的牌，然后你可以将剩余的牌交给一名其他角色，若你令一名角色获得了剩余牌，则该角色须弃置X张牌(X为“其<span style='color: #9933FA'>区域内</span>牌的数量-这些牌的数量”与“这些牌的数量”二者中的较小者)。",
			jccrx:"仁心",
			"jccrx_info":"当一名其他角色进入<span style='color: #E3CF57'>濒死状态</span>时，你可以将所有<span style='color: #FF00FF'>手牌</span>交给该角色并<span style='color: #990033'>翻面</span>，然后该角色<span style='color: #00FF00'>回复</span>1点<span style='color: #00FF00'>体力</span>。",
			jcakk:"慷忾",
			"jcakk_info":"当一名角色成为【杀】的目标后，如果你至该角色的<span style='color: #FFFF00'>距离</span>为1或该角色至你的<span style='color: #FFFF00'>距离</span>为1，你可以摸一张牌，若你本回合[未发动过/发动过]〖慷忾〗，你[可以/须]展示并交给其一张牌，若为<span style='color: #DA70D6'>装备牌</span>，该角色可以使用此牌。",
			spxspj:"评鉴",
			"spxspj_info":"<span style='color: #40E0D0'>锁定技</span>：①游戏开始时或当一名其他角色死亡后，将所有其他角色的武将牌随机替换为<span style='color: #EEC900'>{标准包、神话再临·风、神话再临·火、神话再临·林、神话再临·山}</span>之中的武将牌，然后你从随机三张上述范围里未上场的武将牌中选择一个技能作为<span style='color: #FA8072'>〔表〕</span><span style='color: #FA8072'>形</span><span style='color: #8470FF'>态</span>的技能，再从随机三张上述范围里未上场的武将牌中选择一个技能作为<span style='color: #8470FF'>〔里〕</span><span style='color: #FA8072'>形</span><span style='color: #8470FF'>态</span>的技能；②当你处于某个<span style='color: #FA8072'>形</span><span style='color: #8470FF'>态</span>时，视为拥有最近一次为此<span style='color: #FA8072'>形</span><span style='color: #8470FF'>态</span>选择的技能；③每当你使用的牌结算后，你<span style='color: #FA8072'>切</span><span style='color: #8470FF'>换</span><span style='color: #FA8072'>形</span><span style='color: #8470FF'>态</span>。",
			exsqzh:"制衡",
			"exsqzh_info":"<span style='color: #E3CF57'>出牌阶段</span>限一次，你可以弃置任意张牌并摸等量的牌，若你在每回合第一次发动〖制衡〗时弃置了所有<span style='color: #FF00FF'>手牌</span>，则你多摸一张牌且本回合可以额外发动一次〖制衡〗。",
			exsqjy:"救援",
			"exsqjy_info":"<span style='color: #8B0000'>主公技</span>：①<span style='color: #40E0D0'>锁定技</span>，其他<span style='color: #7FFF00'>吴势力</span>角色对你使用【桃】的<span style='color: #00FF00'>回复值</span>+1；②其他<span style='color: #7FFF00'>吴势力</span>角色对自己使用【桃】时，若其<span style='color: #00FF00'>体力值</span>大于你，则其可以选择令你<span style='color: #00FF00'>回复</span>1点<span style='color: #00FF00'>体力</span>，然后其摸一张牌。",
			exccjx:"奸雄",
			"exccjx_info":"当你受到<span style='color: #FF7D40'>伤害</span>时，你可以选择：①摸两倍<span style='color: #FF7D40'>伤害量</span>张牌；②获得对你造成<span style='color: #FF7D40'>伤害</span>的牌并摸两倍<span style='color: #FF7D40'>伤害量</span>-X张牌(X为组成对你造成<span style='color: #FF7D40'>伤害</span>的牌的实体卡牌数量，且你通过〖奸雄〗获得的对你造成<span style='color: #FF7D40'>伤害</span>的牌不计入<span style='color: #FFC0CB'>手牌上限</span>)。",
			exccxc:"雄才",
			"exccxc_info":"每回合限一次，当你使用牌造成<span style='color: #FF7D40'>伤害</span>后，你可以将此牌收回<span style='color: #FF00FF'>手牌</span>并摸一张牌，且你本回合使用【杀】的<span style='color: #FFFF00'>次数</span>+1。",
			excchj:"护驾",
			"excchj_info":"<span style='color: #8B0000'>主公技</span>，当你受到<span style='color: #FF7D40'>伤害</span>时，你可以依次询问所有其他<span style='color: #3366ff'>魏势力</span>的角色是否替你承受此<span style='color: #FF7D40'>伤害</span>，若有角色选择替你承受此<span style='color: #FF7D40'>伤害</span>，结束此过程。",
			snjs_oldjushou:"据守",
			"snjs_oldjushou_info":"结束阶段，你可以摸三张牌，然后翻面。",
			snjs_oldbuqu:"不屈",
			"snjs_oldbuqu_info":"任何时候，当你的体力被扣减到0或更低时，每扣减1点体力：从牌堆翻开一张牌放在你的角色牌上，若该牌的点数与你角色牌上已有的任何一张牌都不同，你不会死去。",
			jbdx:"独行",
			"jbdx_info":"当你对到你<span style='color: #FFFF00'>距离</span>大于1的角色使用具有“<span style='color: #FF7D40'>伤害</span>”标签的牌时，你可以令其选择一项：①弃置一张牌；②令你摸一张牌。若其选择①则此牌对其造成的<span style='color: #FF7D40'>伤害</span>+1。",
			xhlmt:"命途",
			"xhlmt_info":"<span style='color: #FF6347'>双生觉醒技</span>：①游戏开始时，将你的势力修改为“<span style='color: #3366ff'>魏</span>”；②当一名<span style='color: #ff6600'>蜀势力</span>角色造成<span style='color: #FF7D40'>伤害</span>后，将你的势力修改为“<span style='color: #ff6600'>蜀</span>”。",
			xhljr:"巾戎",
			"xhljr_info":"①当你于<span style='color: #E3CF57'>弃牌阶段</span>弃置过至少两张牌或当你受到<span style='color: #FF7D40'>伤害</span>后，你可以从牌堆中随机获得<span style='color: #FCE6C9'>锦囊牌</span>、<span style='color: #808069'>基本牌</span>各一张，若你的势力为“<span style='color: #3366ff'>魏</span>”则还会获得一张<span style='color: #DA70D6'>装备牌</span>。②当你使用【杀】时，你可以弃置一张牌，若你的势力为“<span style='color: #ff6600'>蜀</span>”改为至多三张牌，并执行以下至多X项：1.令此【杀】不计入使用<span style='color: #FFFF00'>次数</span>；2.摸X张牌并弃置一张牌；3.<span style='color: #A0522D'>横置</span>X名角色。(X为你弃置的牌的数量，在②中若X=1则不弃牌)",
			spxywz:"王佐",
			"spxywz_info":"<span style='color: #40E0D0'>锁定技</span>，游戏开始时，你令一名没有「忠汉」标记的其他角色获得「王佐」标记，每当你摸牌后，该角色也摸等量的牌。",
			spxyzh:"忠汉",
			"spxyzh_info":"<span style='color: #40E0D0'>锁定技</span>，任意角色<span style='color: #E3CF57'>回合开始</span>时，若场上没有「忠汉」标记，你令一名没有「王佐」标记的角色获得「忠汉」标记。拥有「王佐」标记的角色无法对拥有「忠汉」标记的角色造成<span style='color: #FF7D40'>伤害</span>。",
			shct:"从讨",
			"shct_info":"当一名角色受到<span style='color: #FF7D40'>伤害</span>后，若你不是<span style='color: #FF7F50'>伤害来源</span>，你可以从你的<span style='color: #9933FA'>区域内</span>对其使用一张牌，然后该角色可以令你摸一张牌。",
			exzjls:"洛神",
			"exzjls_info":"<span style='color: #E3CF57'>准备阶段</span>与<span style='color: #E3CF57'>结束阶段</span>，你可以进行一次<span style='color: #03A89E'>判定</span>并获得<span style='color: #03A89E'>判定牌</span>且令此牌获得“洛神”标签，本回合拥有“洛神”标签的牌不计入<span style='color: #FFC0CB'>手牌上限</span>。若<span style='color: #03A89E'>判定</span>结果为<span style='color: #666666'>黑色</span>，此时为[<span style='color: #E3CF57'>准备阶段</span>/<span style='color: #E3CF57'>结束阶段</span>]你[可以/你可以弃置一张没有“洛神”标签的牌]重复此流程。",
			exzjqg:"倾国",
			"exzjqg_info":"你可以将一张<span style='color: #666666'>黑色</span>牌当作【闪】使用或打出。",
			exzglgx:"观星",
			"exzglgx_info":"<span style='color: #E3CF57'>准备阶段</span>与<span style='color: #E3CF57'>结束阶段</span>，你可以观看牌堆顶的五张牌，你可以将其中的任意牌按任意顺序放置于牌堆顶或牌堆底，然后你从牌堆底摸X-Y张牌，这些牌在你<span style='color: #FF00FF'>手牌</span>中时拥有“观星”标签。(X为本回合你发动〖观星〗的次数，Y为你<span style='color: #FF00FF'>手牌</span>中带有“观星”标签的牌)",
			exzglkc:"空城",
			"exzglkc_info":"<span style='color: #40E0D0'>锁定技</span>，当你受到<span style='color: #FF7D40'>伤害</span>或<span style='color: #BC8F8F'>失去</span><span style='color: #00FF00'>体力</span>时，若你<span style='color: #FF00FF'>手牌</span>中没有带有“观星”标签以外的牌，取消之。",
			exssxxj:"枭姬",
			"exssxxj_info":"当你<span style='color: #BC8F8F'>失去</span>一张<span style='color: #9933FA'>装备区</span>内的牌后，你可以摸两张牌。",
			exssxjy:"结姻",
			"exssxjy_info":"<span style='color: #E3CF57'>出牌阶段</span>限一次，你可以选择一名其他角色并弃置一张<span style='color: #FF00FF'>手牌</span>或将一张<span style='color: #DA70D6'>装备牌</span>置于其<span style='color: #9933FA'>装备区</span>，你与其各摸一张牌，<span style='color: #00FF00'>体力值</span>较低的角色<span style='color: #00FF00'>回复</span>1点<span style='color: #00FF00'>体力</span>若<span style='color: #00FF00'>体力值</span>相等改为皆<span style='color: #00FF00'>回复</span>1点<span style='color: #00FF00'>体力</span>。",
			zbyf:"仪风",
			"zbyf_info":"每当你一次性获得至少两张牌后，你可以摸一张牌。",
			zbqy:"清雅",
			"zbqy_info":"回合内限两次，当你摸牌后，你可以展示牌堆顶的X张牌并获得其中的一张牌(X为你的<span style='color: #00FF00'>体力值</span>的两倍)。",
			xpzt:"忠谭",
			"xpzt_info":"你的回合开始时，你可以跳过<span style='color: #E3CF57'>摸牌阶段</span>并与一名其他角色各摸一张牌，然后令一名其他角色跳过下个<span style='color: #E3CF57'>摸牌阶段</span>并弃置一张牌。",
			wtaw:"傲武",
			"wtaw_info":"你可以将<span style='color: #FF0000'>♥</span>牌当作【杀】使用或打出，当有角色使用或打出转化的【杀】时，你可以令其摸一张牌，若其武将牌为『关索』则改为两张。",
			wyyh:"意合",
			"wyyh_info":"<span style='color: #E3CF57'>出牌阶段</span>限一次，你可以令一名男性角色摸X张牌(X为其<span style='color: #FFFF00'>攻击距离</span>内的角色数，且至多为5)。若其武将牌为『关索』，则改为摸Y张牌(Y为其<span style='color: #FFFF00'>攻击距离</span>+<span style='color: #FFFF00'>攻击距离</span>内的角色数，且至多为8)。",
			yscy:"承遗",
			"yscy_info":"<span style='color: #E3CF57'>准备阶段</span>你可以选择一项：①将一张<span style='color: #FF00FF'>手牌</span>当作【万箭齐发】使用；②<span style='color: #E3CF57'>摸牌阶段</span>多摸一张牌且本回合<span style='color: #FFC0CB'>手牌上限</span>+1。",
			ysdp:"颠沛",
			"ysdp_info":"<span style='color: #40E0D0'>锁定技</span>，其他角色与你计算<span style='color: #FFFF00'>距离</span>时始终+X(X为你已损失<span style='color: #00FF00'>体力值</span>，且最大为2)。",
			ytzq:"占青",
			"ytzq_info":"任意角色跳过<span style='color: #E3CF57'>摸牌阶段</span>或使用【万箭齐发】时，你可以令其弃置两张牌或摸一张牌。",
			ytjq:"嫉权",
			"ytjq_info":"<span style='color: #E3CF57'>回合结束</span>或使用此技能后，可以<span style='color: #FA8072'>切</span><span style='color: #8470FF'>换</span><span style='color: #FA8072'>形</span><span style='color: #8470FF'>态</span>。<span style='color: #FA8072'>〔表〕»</span> 每回合限两次，当你造成<span style='color: #FF7D40'>伤害</span>后，你可以摸两张牌且本回合<span style='color: #FFC0CB'>手牌上限</span>-2。<span style='color: #8470FF'>〔里〕»</span>每回合限一次， 当你受到<span style='color: #FF7D40'>伤害</span>后，你可以摸一张牌且直到你的<span style='color: #E3CF57'>回合结束</span><span style='color: #FFC0CB'>手牌上限</span>+1。",
			gtqg:"强攻",
			"gtqg_info":"其他角色<span style='color: #E3CF57'>弃牌阶段</span>结束时，你可以令你下个<span style='color: #E3CF57'>摸牌阶段</span>的摸牌数-1，然后使用其于此阶段弃置的牌(无<span style='color: #FFFF00'>次数</span>限制)。若你于一回合内以此法使用的牌超过两张，则你须弃置X张牌(X为本回合你以此法使用的牌的数量-2)。若你弃置了<span style='color: #9933FA'>区域内</span>的所有牌且这些牌的数量小于X，你<span style='color: #BC8F8F'>失去</span>1点<span style='color: #00FF00'>体力</span>且本轮无法发动此技能。",
			pjms:"明私",
			"pjms_info":"当一名角色使用【杀】或【万箭齐发】时，你可以进行一次<span style='color: #03A89E'>判定</span>，若结果不为<span style='color: #666666'>♣</span>，则你令此牌对其目标中的至多X名角色造成的<span style='color: #FF7D40'>伤害</span>+1(X为你的<span style='color: #00FF00'>体力值</span>)，若你的<span style='color: #00FF00'>体力值</span>大于2，你受到一点<span style='color: #FF7D40'>伤害</span>。",
			lxsl:"守雒",
			"lxsl_info":"<span style='color: #40E0D0'>锁定技</span>，当你成为【杀】的目标后，你摸一张牌，转化的【杀】与虚拟的【杀】对你无效。",
			pxtj:"投机",
			"pxtj_info":"<span style='color: #E3CF57'>结束阶段</span>，你可以摸一张牌并弃置一张其他角色<span style='color: #9933FA'>区域内</span>的牌。若此牌为其<span style='color: #9933FA'>判定区</span>里的牌，你可以令其摸两张牌。",
			pxhl:"护利",
			"pxhl_info":"每回合限一次，当你受到<span style='color: #FF7D40'>伤害</span>后，你可以摸X张牌(X为你的<span style='color: #00FF00'>体力值</span>)并<span style='color: #990033'>翻面</span>。",
			fgzj:"资将",
			"fgzj_info":"<span style='color: #E3CF57'>出牌阶段</span>限一次，你可以指定一名其他角色并交给其至多X张牌(X为你与你选定的角色的<span style='color: #00FF00'>体力值</span>之和)，然后你选择一项：①回复Y÷3点<span style='color: #00FF00'>体力</span>，向上取整；②摸Y÷2张牌，向上取整。(Y为你交出的牌的数量)",
			fzbx:"百学",
			"fzbx_info":"①每回合限一次(若此时是你的回合改为限两次)，当你<span style='color: #BC8F8F'>失去</span><span style='color: #FF0000'>♥</span>牌或<span style='color: #666666'>♠</span>牌时，你可以进行一次<span style='color: #03A89E'>判定</span>。②在你的<span style='color: #03A89E'>判定牌</span>生效前，你可以将<span style='color: #03A89E'>判定</span>结果改成任意花色，并从牌堆中随机获得一张与<span style='color: #03A89E'>判定</span>结果花色相同的牌。",
			fzyg:"研卦",
			"fzyg_info":"任意角色进行<span style='color: #03A89E'>判定</span>时，你可以猜测<span style='color: #03A89E'>判定</span>结果的花色，猜对摸两张牌。",
			sphfkq:"恇怯",
			"sphfkq_info":"<span style='color: #40E0D0'>锁定技</span>，当你受到<span style='color: #FF7D40'>伤害</span>时，若你的<span style='color: #FF00FF'>手牌数</span>不为全场最多则此<span style='color: #FF7D40'>伤害</span>+1。每回合限一次：发动此技能后，本回合内你后续受到的<span style='color: #FF7D40'>伤害</span>-1。",
			sphffj:"丰冀",
			"sphffj_info":"①每当你受到1点<span style='color: #FF7D40'>伤害</span>后，你可以摸一张牌；②<span style='color: #E3CF57'>摸牌阶段</span>，你可以多摸X张牌，然后弃置X-2张牌且本回合<span style='color: #FFC0CB'>手牌上限</span>+Y(X为你上<span style='color: #E3CF57'>回合结束</span>到目前为止通过此技能①效果摸牌数量，Y为X的一半且向下取整)",
			
			snjs_card_fangong:'反攻',
			snjs_card_fangong_info:'其他角色使用的【杀】或锦囊牌以你为唯一目标生效前，对此牌使用。除非使用者弃置两张牌或受到1点伤害，否则此牌对你无效。',
			snjs_card_weicheng:'围城',
			snjs_card_weicheng_info:'出牌阶段，对一名角色使用。令目标摸两张牌并翻面。',
			snjs_card_yexi:'夜袭',
			snjs_card_yexi_info:'出牌阶段，对一名其他角色使用。目标选择保留一种颜色的牌并弃置所有另一种颜色的牌。',
			snjs_card_fubing:'伏兵',
			snjs_card_fubing_info:'获得此牌时自动使用。受到1点无来源的伤害并摸一张牌。',
			
			snjs_guisha:"瑰杀",
			"snjs_guisha_info":"当一名角色使用【杀】时，你可弃置一张牌(若此时不是该角色的回合，则只能弃置【杀】或<span style='color: #666666'>♣</span>牌)令此【杀】不计入使用<span style='color: #FFFF00'>次数</span>。若你以此法弃置的牌：①为【杀】，则此【杀】<span style='color: #FF7D40'>伤害</span>+1；②花色为<span style='color: #666666'>♣</span>，则你本回合可以额外发动一次〖姝丽〗。(①与②效果可叠加)",
			snjs_tszz_guisha:"瑰杀",
			"snjs_tszz_guisha_info":"当其他角色使用【杀】时，你可以弃置一张牌使该【杀】<span style='color: #FF7D40'>伤害</span>+1，且不计入使用<span style='color: #FFFF00'>次数</span>。",
			snjs_shuli:"姝丽",
			"snjs_shuli_info":"每回合限两次，当一名角色使用【杀】造成<span style='color: #FF7D40'>伤害</span>后，你可以与其各摸一张牌。",
			snjs_tszz_shuli:"姝丽",
			"snjs_tszz_shuli_info":"每回合限两次，当一名其他角色使用【杀】造成<span style='color: #FF7D40'>伤害</span>后，你可以与其各摸一张牌。",
			snjs_shanwu:"闪舞",
			"snjs_shanwu_info":"当一名角色成为【杀】的目标时，你可以弃置一张【闪】或<span style='color: #FF0000'>♦</span>牌令此【杀】对其无效，若你弃置的牌是不为【闪】的<span style='color: #FF0000'>♦</span>牌或是花色不为<span style='color: #FF0000'>♦</span>的【闪】，则你可以立刻无视条件额外发动一次〖娴丽〗，且此额外〖娴丽〗改为选择获得当前回合角色一张<span style='color: #FF00FF'>手牌</span>或摸一张牌。",
			snjs_tszz_shanwu:"闪舞",
			"snjs_tszz_shanwu_info":"当其他角色成为【杀】的目标时，你可以弃置一张【闪】，取消该【杀】的所有目标。",
			snjs_xianli:"娴丽",
			"snjs_xianli_info":"每回合限两次，当你<span style='color: #BC8F8F'>失去</span>【闪】时，你可以摸一张牌。",
			snjs_tszz_xianli:"娴丽",
			"snjs_tszz_xianli_info":"每回合限两次，当你<span style='color: #BC8F8F'>失去</span>【闪】时，可以获得当前回合角色一张牌。",
			snjs_meiniang:"美酿",
			"snjs_meiniang_info":"当一名角色<span style='color: #E3CF57'>出牌阶段</span>开始时，你可以令该角色将一张<span style='color: #808069'>基本牌</span>或<span style='color: #666666'>♠</span>牌当作【酒】使用，且不计入使用<span style='color: #FFFF00'>次数</span>。",
			snjs_tszz_meiniang:"美酿",
			"snjs_tszz_meiniang_info":"当一名其他角色<span style='color: #E3CF57'>出牌阶段</span>开始时，你可以令该角色视为使用一张【酒】，且不计入使用<span style='color: #FFFF00'>次数</span>。",
			snjs_yaoli:"媱丽",
			"snjs_yaoli_info":"当一名角色于其<span style='color: #E3CF57'>出牌阶段</span>内使用【酒】后，你可以令该角色在此回合中使用的下一张【杀】目标数+1，若其使用的【酒】花色为<span style='color: #666666'>♠</span>则还会令此【杀】无法被响应。",
			snjs_tszz_yaoli:"媱丽",
			"snjs_tszz_yaoli_info":"当一名角色于其<span style='color: #E3CF57'>出牌阶段</span>内使用【酒】后，你可以令该角色在此回合中使用的下一张【杀】目标数+1，且无法被响应。",
			snjs_taoyan:"桃宴",
			"snjs_taoyan_info":"<span style='color: #E3CF57'>出牌阶段</span>限一次，你可以弃置一张牌令一名角色从牌堆获得一张【桃】和一张不为【桃】的<span style='color: #FF0000'>♥</span>牌并摸一张牌，若你弃置的牌是<span style='color: #808069'>基本牌</span>(若该角色是你自己跳过此判断)则其下一个<span style='color: #E3CF57'>摸牌阶段</span>少摸两张牌。",
			snjs_tszz_taoyan:"桃宴",
			"snjs_tszz_taoyan_info":"<span style='color: #E3CF57'>回合开始</span>时，你可以令至多两名其他角色从牌堆获得一张【桃】并摸一张牌。",
			snjs_yanli:"妍丽",
			"snjs_yanli_info":"你的回合外，当有角色进入<span style='color: #E3CF57'>濒死状态</span>时，你可以令其<span style='color: #00FF00'>回复</span>至1点<span style='color: #00FF00'>体力</span>并摸一张牌，每轮限一次。",
			snjs_leyu:"乐虞",
			"snjs_leyu_info":"当一名角色<span style='color: #E3CF57'>回合开始</span>时，你可以展示至多四张花色不同的牌令其进行一次<span style='color: #03A89E'>判定</span>：如果你展示的牌中包含<span style='color: #03A89E'>判定</span>结果的花色，则你弃置展示的牌且该角色跳过<span style='color: #E3CF57'>出牌阶段</span>。",
			snjs_tszz_leyu:"乐虞",
			"snjs_tszz_leyu_info":"当一名角色<span style='color: #E3CF57'>回合开始</span>时，你可以弃置三张牌令其进行<span style='color: #03A89E'>判定</span>：若<span style='color: #03A89E'>判定</span>结果不为<span style='color: #FF0000'>♥</span>，则该角色跳过<span style='color: #E3CF57'>出牌阶段</span>。",
			snjs_yuanli:"媛丽",
			"snjs_yuanli_info":"当一名角色跳过<span style='color: #E3CF57'>出牌阶段</span>时，你可以选择一名其他角色，你与其各摸一张牌。",
			snjs_xuxiang:"虚像",
			"snjs_xuxiang_info":"当你受到<span style='color: #FF7D40'>伤害</span>时，你可以进行一次<span style='color: #03A89E'>判定</span>，若<span style='color: #03A89E'>判定</span>结果的花色与你本局游戏此前发动〖虚像〗<span style='color: #03A89E'>判定</span>成功的花色皆不同，则防止此<span style='color: #FF7D40'>伤害</span>。",
			snjs_tszz_xuxiang:"虚像",
			"snjs_tszz_xuxiang_info":"<span style='color: #40E0D0'>锁定技</span>：①当你受到<span style='color: #FF7D40'>伤害</span>时，防止该<span style='color: #FF7D40'>伤害</span>；②在所有其他<span style='color: #00FA9A'>己方</span>角色皆阵亡后，你死亡。",
					
					snjs_wei:"魏",
					snjs_shu:"蜀",
					snjs_wu:"吴",
					snjs_qun:"群",
					snjs_jin:"晋",
					snjs_huang:"黄巾之乱",
					snjs_gui:"驱鬼逐邪",
					snjs_shi:"戚宦之争",
					snjs_lao:"征战虎牢",
					snjs_dou:"天书乱斗",
					snjs_extreme:"极限突破",
					snjs_virtual:"虚拟偶像",
					snjs_shen:"神怒降世",
					snjs_old:"爷青回",
					snjs_hulao:"征战虎牢挑战武将",
					snjs_qihuan:"戚宦之争挑战武将",
					snjs_zhuogui:"驱鬼逐邪挑战武将",
					snjs_tianshu:"天书乱斗挑战武将",
					
					snjs_boss_zhengzhanhulao:"征战虎牢",
					snjs_boss_hulaojieduan111:"李傕",
					snjs_boss_hulaojieduan112:"郭汜",
					snjs_boss_hulaojieduan113:"樊稠",
					snjs_boss_hulaojieduan114:"张济",
					snjs_boss_hulaojieduan121:"龙骧军",
					snjs_boss_hulaojieduan122:"虎贲军",
					snjs_boss_hulaojieduan123:"凤瑶军",
					snjs_boss_hulaojieduan124:"豹掠军",
					snjs_boss_hulaojieduan125:"飞熊军",
					snjs_boss_hulaojieduan126:"贪狼军",
					snjs_boss_hulaojieduan211:"华雄",
					snjs_boss_hulaojieduan221:"曹性",
					snjs_boss_hulaojieduan222:"陈宫",
					snjs_boss_hulaojieduan223:"高顺",
					snjs_boss_hulaojieduan224:"董翓",
					snjs_boss_hulaolvbu1:"一将霸关",
					snjs_boss_hulaolvbu2:"戾火浮屠",
					snjs_boss_hulaolvbu3:"修罗之怒",
					
					snjs_boss_qihuanzhizheng:"戚宦之争",
					snjs_boss_qihuanzhangrang:"张让",
					snjs_boss_qihuanzhaozhong:"赵忠",
					snjs_boss_qihuancaojie:"曹节",
					snjs_boss_qihuanchengkuang:"程旷",
					snjs_boss_qihuanduangui:"段珪",
					snjs_boss_qihuanfengxu:"封谞",
					snjs_boss_qihuanguosheng:"郭胜",
					snjs_boss_qihuanhoulan:"侯览",
					snjs_boss_qihuanjianshuo:"蹇硕",
					snjs_boss_qihuanxiayun:"夏恽",
					snjs_boss_qihuanhejin:"何进",
					snjs_boss_qihuanhetaihou:"何太后",
					snjs_boss_qihuancaocao:"曹操",
					snjs_boss_qihuanxiahoudun:"夏侯惇",
					snjs_boss_qihuanxiahouyuan:"夏侯渊",
					snjs_boss_qihuancaoren:"曹仁",
					snjs_boss_qihuancaoang:"曹昂",
					snjs_boss_qihuanyuanshao:"袁绍",
					snjs_boss_qihuanxuyou:"许攸",
					snjs_boss_qihuanjushou:"沮授",
					snjs_boss_qihuanyanwen:"颜良文丑",
					snjs_boss_qihuanguofeng:"郭图逄纪",
					snjs_boss_qihuanyuanshu:"袁术",
					snjs_boss_qihuanxunyou:"荀攸",
					snjs_boss_qihuanchenlin:"陈琳",
					
					snjs_boss_quguizhuxie:"驱鬼逐邪",
					snjs_boss_zhuoguimengpo:"孟婆",
					snjs_boss_zhuoguiheiwuchang:"黑无常",
					snjs_boss_zhuoguibaiwuchang:"白无常",
					snjs_boss_zhuoguiheiwuchangbaiwuchang:"黑无常白无常",
					snjs_boss_zhuoguiniutou:"牛头",
					snjs_boss_zhuoguimamian:"马面",
					snjs_boss_zhuoguiniutoumamian:"牛头马面",
					snjs_boss_zhuoguiriyoushenyeyoushen:"日游神夜游神",
					snjs_boss_zhuoguibaowei:"豹尾",
					snjs_boss_zhuoguiniaozui:"鸟嘴",
					snjs_boss_zhuoguiyusai:"鱼鳃",
					snjs_boss_zhuoguihuangfeng:"黄蜂",
					snjs_boss_zhuoguiguiwang:"鬼王",
					snjs_boss_zhuoguiyanluowang:"阎罗王",
					
					snjs_boss_tianshuluandou:"天书乱斗",
					snjs_boss_tianshuzishu:"子鼠",
					snjs_boss_tianshuchouniu:"丑牛",
					snjs_boss_tianshuyinhu:"寅虎",
					snjs_boss_tianshumaotu:"卯兔",
					snjs_boss_tianshuchenlong:"辰龙",
					snjs_boss_tianshusishe:"巳蛇",
					snjs_boss_tianshuwuma:"午马",
					snjs_boss_tianshuweiyang:"未羊",
					snjs_boss_tianshushenhou:"申猴",
					snjs_boss_tianshuyouji:"酉鸡",
					snjs_boss_tianshuxugou:"戌狗",
					snjs_boss_tianshuhaizhu:"亥猪",
					snjs_boss_tianshubaihu:"白虎",
					snjs_boss_tianshuqinglong:"青龙",
					snjs_boss_tianshuzhuque:"朱雀",
					snjs_boss_tianshuxuanwu:"玄武",
					snjs_boss_tianshumengpo:"孟婆",
					snjs_boss_tianshuheiwuchang:"黑无常",
					snjs_boss_tianshubaiwuchang:"白无常",
					snjs_boss_tianshuniutou:"牛头",
					snjs_boss_tianshumamian:"马面",
					snjs_boss_tianshubaowei:"豹尾",
					snjs_boss_tianshuniaozui:"鸟嘴",
					snjs_boss_tianshuyusai:"鱼鳃",
					snjs_boss_tianshuhuangfeng:"黄蜂",
					snjs_boss_tianshuweixi:"夕兽大魏",
					snjs_boss_tianshushuxi:"夕兽大蜀",
					snjs_boss_tianshuwuxi:"夕兽大吴",
					snjs_boss_tianshuqunxi:"夕兽大群",
					snjs_boss_tianshuweinian:"年兽大魏",
					snjs_boss_tianshushunian:"年兽大蜀",
					snjs_boss_tianshuwunian:"年兽大吴",
					snjs_boss_tianshuqunnian:"年兽大群",
					snjs_boss_tianshuweishunian:"年兽魏蜀",
					snjs_boss_tianshuweiwunian:"年兽魏吴",
					snjs_boss_tianshuweiqunnian:"年兽魏群",
					snjs_boss_tianshushuwunian:"年兽蜀吴",
					snjs_boss_tianshushuqunnian:"年兽蜀群",
					snjs_boss_tianshuwuqunnian:"年兽吴群",
					"snjs_boss_tianshuheiwuchangbaiwuchang":"黑无常白无常",
					"snjs_boss_tianshuniutoumamian":"牛头马面",
					"snjs_boss_tianshuriyoushenyeyoushen":"日游神夜游神",
					snjs_boss_tianshuqiuniu:"囚牛",
					snjs_boss_tianshusuanni:"狻猊",
					snjs_boss_tianshuchiwen:"螭吻",
					snjs_boss_tianshuyazi:"睚眦",
					snjs_boss_tianshuchaofeng:"嘲风",
					snjs_boss_tianshupulao:"蒲牢",
					snjs_boss_tianshubian:"狴犴",
					snjs_boss_tianshubixi:"赑屃",
					snjs_boss_tianshufuxi:"负屃",
					snjs_boss_tianshuhuoshenzhurong:"火神祝融",
					snjs_boss_tianshushuishengonggong:"水神共工",
					snjs_boss_tianshubaiqi:"白起",
					snjs_boss_tianshuyanluowang:"阎罗王",
					"snjs_boss_tianshutaoshen":"涛神",
					"snjs_boss_tianshucaoe":"曹娥",
					"snjs_boss_tianshushaohao":"少昊",
					"snjs_boss_tianshuhanba":"旱魃",
					"snjs_boss_tianshuxuannv":"玄女",
					"snjs_boss_tianshukuafu":"夸父",
					
					snjs_boss_baizhantianshu:"百战天书",
					
					snjs_boss_hulaomj:"魔军",
					"snjs_boss_hulaomj_info":"<span style='color: #40E0D0'>锁定技</span>，<span style='color: #00FA9A'>己方</span>角色使用【杀】造成<span style='color: #FF7D40'>伤害</span>后，若其<span style='color: #FF00FF'>手牌数</span>不大于受伤角色，则你和该角色各摸一张牌。",
					snjs_boss_hulaofg:"反攻",
					"snjs_boss_hulaofg_info":"<span style='color: #40E0D0'>锁定技</span>，当你成为一名<span style='color: #FF0000'>敌方</span>角色使用【杀】或伤害型<span style='color: #FCE6C9'>锦囊牌</span>的目标且该牌结算完成后，你视为对其使用一张【杀】（无<span style='color: #FFFF00'>距离</span>限制）。",
					snjs_boss_hulaojl:"劫掠",
					"snjs_boss_hulaojl_info":"<span style='color: #40E0D0'>锁定技</span>，当你对一名其他角色造成<span style='color: #FF7D40'>伤害</span>后，你随机获得其<span style='color: #FF00FF'>手牌</span>、<span style='color: #9933FA'>装备区</span>各一张牌。",
					snjs_boss_hulaolx:"龙骧",
					"snjs_boss_hulaolx_info":"<span style='color: #40E0D0'>锁定技</span>，<span style='color: #E3CF57'>出牌阶段</span>开始时，若<span style='color: #00FA9A'>己方</span>有其他角色已受伤，你<span style='color: #BC8F8F'>失去</span>1点<span style='color: #00FF00'>体力</span>，然后随机一名<span style='color: #00FA9A'>己方</span>受伤角色<span style='color: #00FF00'>回复</span>1点<span style='color: #00FF00'>体力</span>并摸两张牌。",
					snjs_boss_hulaohb:"虎贲",
					"snjs_boss_hulaohb_info":"<span style='color: #40E0D0'>锁定技</span>，<span style='color: #E3CF57'>出牌阶段</span>开始时，随机一名<span style='color: #00FA9A'>己方</span>角色获得牌堆中的两张【杀】。",
					snjs_boss_hulaofy:"凤瑶",
					"snjs_boss_hulaofy_info":"<span style='color: #40E0D0'>锁定技</span>，<span style='color: #FF0000'>敌方</span>角色使用<span style='color: #666666'>黑牌</span>指定<span style='color: #00FA9A'>己方</span>角色为唯一目标后，若目标角色<span style='color: #00FF00'>体力值</span>是全场最少的，则此牌对其无效。",
					snjs_boss_hulaobl:"豹掠",
					"snjs_boss_hulaobl_info":"<span style='color: #40E0D0'>锁定技</span>，<span style='color: #00FA9A'>己方</span>有其他角色进入<span style='color: #E3CF57'>濒死状态</span>时，你随机弃置一张<span style='color: #FF00FF'>手牌</span>，然后该角色<span style='color: #00FF00'>回复</span>1点<span style='color: #00FF00'>体力</span>。",
					snjs_boss_hulaofx:"飞熊",
					"snjs_boss_hulaofx_info":"<span style='color: #40E0D0'>锁定技</span>，<span style='color: #00FA9A'>己方</span>角色计算与<span style='color: #FF0000'>敌方</span>角色的距离-1。",
					snjs_boss_hulaotl:"贪狼",
					"snjs_boss_hulaotl_info":"<span style='color: #40E0D0'>锁定技</span>，<span style='color: #00FA9A'>己方</span>角色<span style='color: #E3CF57'>摸牌阶段</span>额外摸一张牌。",
					snjs_boss_hulaoyw:"耀武",
					"snjs_boss_hulaoyw_info":"<span style='color: #40E0D0'>锁定技</span>，当你受到【杀】造成的<span style='color: #FF7D40'>伤害</span>时，若此【杀】为<span style='color: #FF0000'>红色</span>，<span style='color: #FF7F50'>伤害来源</span><span style='color: #00FF00'>回复</span>1点<span style='color: #00FF00'>体力</span>或摸一张牌；若此【杀】不为<span style='color: #FF0000'>红色</span>，则你摸一张牌。",
					snjs_boss_hulaomq:"魔躯",
					"snjs_boss_hulaomq_info":"<span style='color: #40E0D0'>锁定技</span>，<span style='color: #00FA9A'>己方</span>角色的<span style='color: #E3CF57'>回合结束</span>时，将<span style='color: #FF00FF'>手牌</span>摸至六张。",
					snjs_boss_hulaosc:"神策",
					"snjs_boss_hulaosc_info":"<span style='color: #40E0D0'>锁定技</span>，<span style='color: #00FA9A'>己方</span>角色的<span style='color: #E3CF57'>出牌阶段</span>开始时，该角色从弃牌堆获得一张【杀】且本回合使用【杀】<span style='color: #FFFF00'>次数</span>+1，<span style='color: #E3CF57'>出牌阶段</span>使用的第一张牌无<span style='color: #FFFF00'>距离</span>限制。",
					snjs_boss_hulaosz:"死阵",
					"snjs_boss_hulaosz_info":"<span style='color: #40E0D0'>锁定技</span>，你使用牌无视目标角色<span style='color: #DA70D6'>防具</span>，你使用的【杀】<span style='color: #FF7D40'>伤害</span>+1。",
					snjs_boss_hulaojj:"绝酒",
					"snjs_boss_hulaojj_info":"<span style='color: #40E0D0'>锁定技</span>，你的回合内，所有角色均不能使用【酒】。",
					snjs_boss_hulaows:"无双",
					"snjs_boss_hulaows_info":"<span style='color: #40E0D0'>锁定技</span>，当你使用【杀】指定一个目标后，该角色需依次使用两张【闪】才能抵消此【杀】；当你使用【决斗】指定一个目标后，或成为一名角色使用【决斗】的目标后，该角色每次响应此【决斗】需依次打出两张【杀】。",
					snjs_boss_hulaows2:"无双",
					"snjs_boss_hulaows2_info":"<span style='color: #40E0D0'>锁定技</span>，当你使用【杀】指定一个目标后，该角色需依次使用两张【闪】才能抵消此【杀】；当你使用【决斗】指定一个目标后，或成为一名角色使用【决斗】的目标后，该角色每次响应此【决斗】需依次打出两张【杀】。",
					snjs_boss_hulaobg:"霸关",
					"snjs_boss_hulaobg_info":"其他角色的<span style='color: #E3CF57'>回合结束</span>后，你进行一个额外的回合。此额外回合的<span style='color: #E3CF57'>摸牌阶段</span>，你视为拥有技能〖英姿〗。",
					snjs_boss_hulaozj:"战甲",
					"snjs_boss_hulaozj_info":"<span style='color: #40E0D0'>锁定技</span>，每项每回合限一次：①本回合累计受到2点<span style='color: #FF7D40'>伤害</span>时，摸两张牌。②受到大于2点的<span style='color: #FF7D40'>伤害</span>时，将此<span style='color: #FF7D40'>伤害</span>削减至2点。",
					snjs_boss_hulaoxl:"蓄力",
					"snjs_boss_hulaoxl_info":"当你的<span style='color: #00FF00'>体力值</span>变化后，若你的损失<span style='color: #00FF00'>体力值</span>大于当前<span style='color: #00FF00'>体力值</span>，当前事件结算完毕后，你将<span style='color: #00C78C'>体力上限</span>调整至等于当前<span style='color: #00FF00'>体力值</span>，将<span style='color: #FF00FF'>手牌</span>摸至当前<span style='color: #00FF00'>体力值</span>，然后<span style='color: #E3CF57'>结束当前回合</span>，你进入<span style='color: #FF0000'>下一阶段</span>并开始你的回合。",
					snjs_boss_hulaozk:"战铠",
					"snjs_boss_hulaozk_info":"<span style='color: #40E0D0'>锁定技</span>，你的<span style='color: #FFC0CB'>手牌上限</span>为12。当你受到1点其他角色造成的<span style='color: #FF7D40'>伤害</span>后，<span style='color: #FF7F50'>伤害来源</span>随机弃置一张牌（优先<span style='color: #9933FA'>装备区</span>，若其<span style='color: #9933FA'>装备区</span>中牌的数量大于你，则其弃置<span style='color: #9933FA'>装备区</span>中的所有牌），然后你摸两张牌。",
					snjs_boss_hulaosj:"神戟",
					"snjs_boss_hulaosj_info":"<span style='color: #E3CF57'>判定阶段</span>，你可以弃置两张<span style='color: #FF00FF'>手牌</span>，然后弃置你<span style='color: #9933FA'>判定区</span>里的牌。<span style='color: #E3CF57'>摸牌阶段</span>，你多摸两张牌；<span style='color: #E3CF57'>出牌阶段</span>，你可以多使用两张【杀】，你的【杀】可以多指定两名角色为目标。",
					snjs_boss_hulaolbyw:"扬武",
					"snjs_boss_hulaolbyw_info":"<span style='color: #40E0D0'>锁定技</span>，<span style='color: #FF0000'>敌方</span>有角色使用<span style='color: #FCE6C9'>锦囊牌</span>时，该角色随机弃置一张牌，若使用的牌为【无懈可击】，则随机多弃置一张牌。",
					snjs_boss_hulaoxiuluo:"修罗",
					"snjs_boss_hulaoxiuluo_info":"<span style='color: #40E0D0'>锁定技</span>，登场时，你随机获得一个下列中的技能：〖神剑〗、〖烈杵〗、〖伏魔〗、〖金刚〗。当你<span style='color: #00FF00'>体力值</span>首次降至[16/8]及以下后，[再随机获得一个上述中的技能/获得技能〖狂戟〗]，且在当前事件结算完毕后，<span style='color: #E3CF57'>结束当前回合</span>并开始你的回合。",
					snjs_boss_hulaoshenjian:"神剑",
					"snjs_boss_hulaoshenjian_info":"<span style='color: #40E0D0'>锁定技</span>，你使用【杀】或【决斗】指定目标后，对目标造成1点<span style='color: #FF7D40'>伤害</span>。",
					snjs_boss_hulaoliechu:"烈杵",
					"snjs_boss_hulaoliechu_info":"<span style='color: #40E0D0'>锁定技</span>，你每回合使用的第一张【杀】或【决斗】造成<span style='color: #FF7D40'>伤害</span>后，获得牌堆顶五张牌中的所有<span style='color: #DA70D6'>装备牌</span>、<span style='color: #808069'>基本牌</span>和【决斗】。",
					snjs_boss_hulaofumo:"伏魔",
					"snjs_boss_hulaofumo_info":"<span style='color: #40E0D0'>锁定技</span>，当你<span style='color: #BC8F8F'>失去</span>一张<span style='color: #9933FA'>装备区</span>里的牌后，所有<span style='color: #FF0000'>敌方</span>角色随机弃置两张牌，优先弃置<span style='color: #9933FA'>装备区</span>里的牌。",
					snjs_boss_hulaojingang:"金刚",
					"snjs_boss_hulaojingang_info":"<span style='color: #40E0D0'>锁定技</span>，当你受到1点其他角色造成的<span style='color: #FF7D40'>伤害</span>后，<span style='color: #FF7F50'>伤害来源</span>选择交给你一张本回合未因此技能交出过的花色的牌或受到1点<span style='color: #FF7D40'>伤害</span>。",
					snjs_boss_hulaokuangji:"狂戟",
					"snjs_boss_hulaokuangji_info":"①摸牌阶段，你可以弃置所有<span style='color: #FF00FF'>手牌</span>，然后将<span style='color: #FF00FF'>手牌</span>摸至十张。②你每回合可以多使用一张【杀】，你的【杀】和【决斗】可以多指定两个目标；当你使用【杀】或【决斗】对<span style='color: #FF0000'>敌方</span>角色造成<span style='color: #FF7D40'>伤害</span>后，随机弃置其一张<span style='color: #FF00FF'>手牌</span>。",
					
					snjs_boss_hulao_intro1:'&nbsp;第一关',
					snjs_boss_hulao_intro1_info:'关卡首领：<br>李傕、郭汜、樊稠、张济<br>随机之一<br>关卡随从：<br>龙骧军、虎贲军、凤瑶军、豹掠军、飞熊军、贪狼军<br>随机之三',
					snjs_boss_hulao_intro2:'&nbsp;第二关',
					snjs_boss_hulao_intro2_info:'关卡首领：<br>华雄<br>关卡随从：<br>曹性、陈宫、高顺、董翓<br>随机之二',
					snjs_boss_hulao_intro3:'&nbsp;第三关',
					snjs_boss_hulao_intro3_info:'挑战吕布(可选择版本:2020、2021)',
					snjs_boss_hulao_intro3_append:'①击杀第一关的敌人可以回复1点体力并摸两张牌 ②击杀第二关的敌人可以回复1点体力并摸三张牌 ③吕布生命值变化后若其已损失的体力值大于当前体力值，其会进入第二阶段 ④第一关过关时清零游戏轮数，当前回合的角色取消接下来的所有阶段，直接开始下家的回合，第三关固定从吕布的回合开始',
					
					snjs_boss_qihuangshd:"黑邸",
					"snjs_boss_qihuangshd_info":"<span style='color: #40E0D0'>锁定技</span>，你的<span style='color: #03A89E'>判定牌</span>生效时，若结果为<span style='color: #666666'>黑色</span>，你对所有<span style='color: #FF0000'>敌方</span>角色造成1点<span style='color: #FF7D40'>伤害</span>。",
					snjs_boss_qihuangshm:"黑幕",
					"snjs_boss_qihuangshm_info":"<span style='color: #40E0D0'>锁定技</span>，<span style='color: #FF0000'>敌方</span>角色使用<span style='color: #666666'>黑色</span>牌时，你摸一张牌。你使用<span style='color: #666666'>黑色</span>牌时，<span style='color: #FF0000'>敌方</span>随机一名角色随机弃置一张牌。",
					snjs_boss_qihuanxyjf:"嫉富",
					"snjs_boss_qihuanxyjf_info":"<span style='color: #40E0D0'>锁定技</span>，<span style='color: #E3CF57'>准备阶段</span>，你获得<span style='color: #FF00FF'>手牌数</span>大于你的<span style='color: #FF0000'>敌方</span>角色一张<span style='color: #FF00FF'>手牌</span>。重复此步骤直到所有<span style='color: #FF0000'>敌方</span>角色<span style='color: #FF00FF'>手牌数</span>都不大于你。",
					snjs_boss_qihuanhljs:"惊蛇",
					"snjs_boss_qihuanhljs_info":"<span style='color: #40E0D0'>锁定技</span>，当你受到<span style='color: #FF7D40'>伤害</span>后，若此时为<span style='color: #FF0000'>敌方</span>角色的回合，该角色不能使用牌直到<span style='color: #E3CF57'>出牌阶段</span>结束。若此<span style='color: #FF7D40'>伤害</span>超过1点，你</span><span style='color: #00FF00'>回复</span>1点<span style='color: #00FF00'>体力</span>。",
					snjs_boss_qihuanjsjb:"集兵",
					"snjs_boss_qihuanjsjb_info":"<span style='color: #40E0D0'>锁定技</span>，<span style='color: #E3CF57'>回合结束</span>时，你减少1点<span style='color: #00C78C'>体力上限</span>；当你的<span style='color: #00C78C'>体力上限</span>减少时，你对随机一名<span style='color: #FF0000'>敌方</span>角色造成1点<span style='color: #FF7D40'>伤害</span>。",
					snjs_boss_qihuancjhb:"荒暴",
					"snjs_boss_qihuancjhb_info":"<span style='color: #40E0D0'>锁定技</span>，<span style='color: #E3CF57'>出牌阶段</span>开始时，视为对所有<span style='color: #FF0000'>敌方</span>角色使用一张【南蛮入侵】。若此【南蛮入侵】没有造成<span style='color: #FF7D40'>伤害</span>，你摸三张牌。",
					snjs_boss_qihuanckad:"暗毒",
					"snjs_boss_qihuanckad_info":"<span style='color: #40E0D0'>锁定技</span>，<span style='color: #FF0000'>敌方</span>角色的<span style='color: #E3CF57'>回合结束</span>时，若其<span style='color: #00FF00'>体力值</span>小于等于你，你对其造成1点<span style='color: #FF7D40'>伤害</span>。",
					snjs_boss_qihuanckbr:"蔽日",
					"snjs_boss_qihuanckbr_info":"<span style='color: #40E0D0'>锁定技</span>，当你受到<span style='color: #FF0000'>敌方</span>角色的造成的<span style='color: #FF7D40'>伤害</span>时，该角色弃置所有<span style='color: #FF00FF'>手牌</span>；若其弃置的<span style='color: #FF00FF'>手牌数</span>小于你的<span style='color: #00FF00'>体力值</span>，此<span style='color: #FF7D40'>伤害</span>-1。",
					snjs_boss_qihuandgsx:"速袭",
					"snjs_boss_qihuandgsx_info":"当你造成<span style='color: #FF7D40'>伤害</span>后，你可以弃置一张牌令受伤角色的上家或下家<span style='color: #BC8F8F'>失去</span>1点<span style='color: #00FF00'>体力</span>。",
					snjs_boss_qihuanfxlx:"雷袭",
					"snjs_boss_qihuanfxlx_info":"当于回合外使用或打出【杀】或【闪】时，你可以选择一名其他角色，令其进行<span style='color: #03A89E'>判定</span>，若结果为<span style='color: #FF0000'>红色</span>，弃置该角色两张牌；若结果为<span style='color: #666666'>黑色</span>，对其造成2点<span style='color: #0000FF'>雷电</span><span style='color: #FF7D40'>伤害</span>。",
					snjs_boss_qihuanzrhl:"祸乱",
					"snjs_boss_qihuanzrhl_info":"<span style='color: #40E0D0'>锁定技</span>，<span style='color: #E3CF57'>出牌阶段</span>开始时，你视为随机使用X张牌堆里有的<span style='color: #666666'>黑色</span><span style='color: #FCE6C9'>锦囊牌</span>(<span style='color: #00FF00'>体力值</span>＞10时X为1,5＜<span style='color: #00FF00'>体力值</span>≤10时X为2,<span style='color: #00FF00'>体力值</span>≤5时X为3)。",
					snjs_boss_qihuanzryk:"炎恐",
					"snjs_boss_qihuanzryk_info":"<span style='color: #40E0D0'>锁定技</span>，当你受到<span style='color: #FF7D40'>伤害</span>后，你下一次对<span style='color: #FF0000'>敌方</span>角色造成的<span style='color: #FF7D40'>伤害</span>+1(最多叠加两次)。",
					snjs_boss_qihuanzrjq:"集权",
					"snjs_boss_qihuanzrjq_info":"<span style='color: #40E0D0'>锁定技</span>，<span style='color: #E3CF57'>准备阶段</span>将你的<span style='color: #FF00FF'>手牌</span>摸至五张。",
					snjs_boss_qihuanzrlz:"乱政",
					"snjs_boss_qihuanzrlz_info":"<span style='color: #40E0D0'>锁定技</span>：①<span style='color: #FF0000'>敌方</span>角色于其<span style='color: #E3CF57'>出牌阶段</span>内获得牌或摸牌后，若其<span style='color: #FF00FF'>手牌数</span>超过七张，则其本回合不能再使用牌；②<span style='color: #FF0000'>敌方</span>角色的<span style='color: #E3CF57'>出牌阶段</span>内，当你受到<span style='color: #FF7D40'>伤害</span>后，若你本回合受到的<span style='color: #FF7D40'>伤害</span>超过3点，则其本回合不能再使用牌。",
					snjs_boss_qihuanzzlz:"乱政",
					"snjs_boss_qihuanzzlz_info":"<span style='color: #40E0D0'>锁定技</span>：①<span style='color: #FF0000'>敌方</span>角色于其<span style='color: #E3CF57'>出牌阶段</span>内获得牌或摸牌后，若其<span style='color: #FF00FF'>手牌数</span>超过七张，则其本回合不能再使用牌；②<span style='color: #FF0000'>敌方</span>角色的<span style='color: #E3CF57'>出牌阶段</span>内，当你受到<span style='color: #FF7D40'>伤害</span>后，若你本回合受到的<span style='color: #FF7D40'>伤害</span>超过3点，则其本回合不能再使用牌。",
					snjs_boss_qihuanzzdz:"断政",
					"snjs_boss_qihuanzzdz_info":"<span style='color: #40E0D0'>锁定技</span>，<span style='color: #FF0000'>敌方</span>角色在其回合内使用第一张牌时，其弃置所有与此牌所包含的花色相同的<span style='color: #FF00FF'>手牌</span>。",
					snjs_boss_qihuanzzlh:"连祸",
					"snjs_boss_qihuanzzlh_info":"<span style='color: #40E0D0'>锁定技</span>，你每回合第一次受到<span style='color: #FF7D40'>伤害</span>后，令随机X名<span style='color: #FF0000'>敌方</span>角色<span style='color: #BC8F8F'>失去</span>1点<span style='color: #00FF00'>体力</span>(X等于<span style='color: #FF7D40'>伤害量</span>)。",
					snjs_boss_qihuanzzhk:"惶恐",
					"snjs_boss_qihuanzzhk_info":"<span style='color: #40E0D0'>锁定技</span>，你的回合外，当你成为牌的目标后，若你没有<span style='color: #FF00FF'>手牌</span>，你摸四张牌。",
					snjs_boss_qihuanhthzq:"尊亲",
					"snjs_boss_qihuanhthzq_info":"<span style='color: #40E0D0'>锁定技</span>，以你为目标的<span style='color: #666666'>黑色</span><span style='color: #FCE6C9'>锦囊牌</span>结算后进入弃牌堆时，你获得之(每回合限三次)。",
					snjs_boss_qihuanhthch:"除患",
					"snjs_boss_qihuanhthch_info":"<span style='color: #40E0D0'>锁定技</span>，你使用【杀】指定目标后，你与其各<span style='color: #BC8F8F'>失去</span>1点<span style='color: #00FF00'>体力</span>。",
					snjs_boss_qihuanhthnq:"弄权",
					"snjs_boss_qihuanhthnq_info":"<span style='color: #40E0D0'>锁定技</span>，你每回合第一次受到<span style='color: #FF7D40'>伤害</span>后，你对<span style='color: #FF0000'>敌方</span><span style='color: #00FF00'>体力值</span>唯一最少的角色造成1点<span style='color: #FF7D40'>伤害</span>，若你受到的<span style='color: #FF7D40'>伤害</span>大于1点，则再随机弃置其两张牌。",
					snjs_boss_qihuanhthsx:"蛇蝎",
					"snjs_boss_qihuanhthsx_info":"<span style='color: #40E0D0'>锁定技</span>，<span style='color: #FF0000'>敌方</span>角色进入<span style='color: #E3CF57'>濒死状态</span>时，你随机获得该角色一张<span style='color: #FF00FF'>手牌</span>。",
					snjs_boss_qihuanhjzm:"镇谋",
					"snjs_boss_qihuanhjzm_info":"<span style='color: #40E0D0'>锁定技</span>，<span style='color: #FF0000'>敌方</span>角色于其<span style='color: #E3CF57'>出牌阶段</span>内使用第一张<span style='color: #FCE6C9'>锦囊牌</span>时，除非弃置两张<span style='color: #8E7CC3'>非锦囊牌</span>，否则此牌无效。",
					snjs_boss_qihuanhjgl:"贵乱",
					"snjs_boss_qihuanhjgl_info":"<span style='color: #40E0D0'>锁定技</span>，你使用的【杀】【决斗】【过河拆桥】均指定<span style='color: #FF0000'>敌方</span>所有角色为目标。",
					snjs_boss_qihuanhjwx:"外檄",
					"snjs_boss_qihuanhjwx_info":"<span style='color: #40E0D0'>锁定技</span>，你的回合内，当你第一次造成<span style='color: #FF7D40'>伤害</span>后，你摸三张牌，然后获得每名<span style='color: #FF00FF'>手牌数</span>小于你的<span style='color: #FF0000'>敌方</span>角色各一张牌。",
					snjs_boss_qihuanhjqb:"权霸",
					"snjs_boss_qihuanhjqb_info":"<span style='color: #40E0D0'>锁定技</span>，<span style='color: #FF0000'>敌方</span>角色的回合内，其使用【杀】时，若该角色已经使用了三张或更多的【杀】，其<span style='color: #BC8F8F'>失去</span>1点<span style='color: #00FF00'>体力</span>。",
					
					snjs_boss_qihuan_intro1:'&nbsp;选择：',
					snjs_boss_qihuan_intro1_info:'①外戚<br>②内宦 ',
					snjs_boss_qihuan_intro2:'&nbsp;外戚：',
					snjs_boss_qihuan_intro2_info:'20%几率：<br>何进、何太后<br>随机之一<br>80%几率：<br>曹操&夏侯惇&夏侯渊<br>曹操&曹仁&曹昂<br>袁绍&许攸&沮授<br>袁绍&颜良文丑&郭图逢纪<br>袁术&荀攸&陈琳<br>以上随机一组',
					snjs_boss_qihuan_intro3:'&nbsp;内宦：',
					snjs_boss_qihuan_intro3_info:'20%几率：<br>张让、赵忠<br>随机之一<br>80%几率：<br>曹节、程旷、段珪、封谞、郭胜、侯览、蹇硕、夏恽<br>随机之二',
					
					snjs_boss_zhuoguigm:"鬼魅",
					"snjs_boss_zhuoguigm_info":"<span style='color: #40E0D0'>锁定技</span>：①你不会被<span style='color: #990033'>翻面</span>；②你跳过<span style='color: #E3CF57'>摸牌阶段</span>时，摸一张牌；③你跳过<span style='color: #E3CF57'>出牌阶段</span>时，本回合<span style='color: #FFC0CB'>手牌无上限</span>。",
					snjs_boss_zhuoguimpat:"熬汤",
					"snjs_boss_zhuoguimpat_info":"<span style='color: #40E0D0'>锁定技</span>，<span style='color: #E3CF57'>回合开始</span>时，你令随机一名<span style='color: #FF0000'>敌方</span>角色<span style='color: #8B864E'>遗忘</span>所有武将技能直到你的<span style='color: #E3CF57'>下回合开始</span>。",
					snjs_boss_zhuoguimpyj:"云飓",
					"snjs_boss_zhuoguimpyj_info":"<span style='color: #40E0D0'>锁定技</span>，<span style='color: #FF0000'>敌方</span>角色的<span style='color: #E3CF57'>回合结束</span>时，该角色随机弃置一张<span style='color: #FF00FF'>手牌</span>。",
					snjs_boss_zhuoguihwcxx:"吸星",
					"snjs_boss_zhuoguihwcxx_info":"<span style='color: #40E0D0'>锁定技</span>，<span style='color: #E3CF57'>准备阶段</span>，你对<span style='color: #FF0000'>敌方</span><span style='color: #00FF00'>体力</span>最多的一名角色造成1点<span style='color: #0000FF'>雷电</span><span style='color: #FF7D40'>伤害</span>，然后你<span style='color: #00FF00'>回复</span>1点<span style='color: #00FF00'>体力</span>。",
					snjs_boss_zhuoguihwctp:"太平",
					"snjs_boss_zhuoguihwctp_info":"<span style='color: #40E0D0'>锁定技</span>，每当你受到1点<span style='color: #FF0000'>敌方</span>角色造成的<span style='color: #FF7D40'>伤害</span>后，<span style='color: #FF7F50'>伤害来源</span>需弃置两张花色不同的<span style='color: #FF00FF'>手牌</span>，否则<span style='color: #BC8F8F'>失去</span>1点<span style='color: #00FF00'>体力</span>。",
					snjs_boss_zhuoguihwcdh:"断魂",
					"snjs_boss_zhuoguihwcdh_info":"<span style='color: #40E0D0'>锁定技</span>，若你的<span style='color: #FF00FF'>手牌数</span>小于等于1，你受到非【杀】的<span style='color: #FF7D40'>伤害</span>-1。",
					snjs_boss_zhuoguibwcbl:"暴敛",
					"snjs_boss_zhuoguibwcbl_info":"<span style='color: #40E0D0'>锁定技</span>，<span style='color: #E3CF57'>准备阶段</span>，你放弃摸牌，改为获得每名<span style='color: #FF0000'>敌方</span>角色<span style='color: #9933FA'>装备区</span>里各一张牌。若有角色<span style='color: #9933FA'>装备区</span>里没有牌，则改为随机获得其一张<span style='color: #FF00FF'>手牌</span>。",
					snjs_boss_zhuoguibwcqz:"强征",
					"snjs_boss_zhuoguibwcqz_info":"<span style='color: #40E0D0'>锁定技</span>，<span style='color: #E3CF57'>结束阶段</span>，若<span style='color: #FF0000'>敌方</span>有角色的<span style='color: #FF00FF'>手牌数</span>为1，则你获得其<span style='color: #FF00FF'>手牌</span>。",
					snjs_boss_zhuoguibwcmz:"迷醉",
					"snjs_boss_zhuoguibwcmz_info":"<span style='color: #40E0D0'>锁定技</span>，你的<span style='color: #FF0000'>红色</span>【杀】或<span style='color: #8A2BE2'>属性</span>【杀】造成<span style='color: #FF7D40'>伤害</span>后，你可以弃置受伤角色一张牌。",
					snjs_boss_zhuoguintxs:"枭首",
					"snjs_boss_zhuoguintxs_info":"<span style='color: #40E0D0'>锁定技</span>，<span style='color: #E3CF57'>准备阶段</span>，你对一名<span style='color: #00FF00'>体力值</span>大于你的<span style='color: #FF0000'>敌方</span>角色造成2点<span style='color: #FF7D40'>伤害</span>。",
					snjs_boss_zhuoguintmj:"蛮击",
					"snjs_boss_zhuoguintmj_info":"<span style='color: #40E0D0'>锁定技</span>，你使用【杀】指定单一目标后，你可以弃置该角色一张<span style='color: #FF00FF'>手牌</span>：①若此牌是【杀】，你本次【杀】的<span style='color: #FF7D40'>伤害</span>+1；②若此牌不是【杀】，你获得之。",
					snjs_boss_zhuoguimmsy:"施狱",
					"snjs_boss_zhuoguimmsy_info":"<span style='color: #40E0D0'>锁定技</span>，<span style='color: #E3CF57'>摸牌阶段</span>，你放弃摸牌改为随机获得牌堆中每种花色的牌各一张。",
					snjs_boss_zhuoguimmgz:"诡招",
					"snjs_boss_zhuoguimmgz_info":"<span style='color: #40E0D0'>锁定技</span>，当你于回合内使用一张牌时，若此牌的类别是你本回合第一次使用，则你摸一张牌。",
					snjs_boss_zhuoguibwys:"隐煞",
					"snjs_boss_zhuoguibwys_info":"<span style='color: #40E0D0'>锁定技</span>，<span style='color: #FF0000'>敌方</span>角色的<span style='color: #E3CF57'>出牌阶段</span>开始时，若其<span style='color: #FF00FF'>手牌数</span>大于等于其<span style='color: #00FF00'>体力值</span>，你本回合不能成为【杀】、【决斗】、【火攻】的目标。",
					snjs_boss_zhuoguibwel:"恶力",
					"snjs_boss_zhuoguibwel_info":"<span style='color: #40E0D0'>锁定技</span>，你每回合第一次对<span style='color: #FF0000'>敌方</span>角色造成<span style='color: #FF7D40'>伤害</span>时，你进行一次<span style='color: #03A89E'>判定</span>：①<span style='color: #FF0000'>红色</span>，此<span style='color: #FF7D40'>伤害</span>+1；②<span style='color: #666666'>黑色</span>，你获得〖完杀〗直到<span style='color: #E3CF57'>回合结束</span>。",
					snjs_boss_zhuoguinzby:"病疑",
					"snjs_boss_zhuoguinzby_info":"<span style='color: #40E0D0'>锁定技</span>，每回合限一次，当你<span style='color: #BC8F8F'>失去</span>最后的<span style='color: #FF00FF'>手牌</span>时，你摸六张牌。",
					snjs_boss_zhuoguinzsx:"索穴",
					"snjs_boss_zhuoguinzsx_info":"<span style='color: #40E0D0'>锁定技</span>，你使用【杀】指定单一目标后：①若其<span style='color: #FF00FF'>手牌数</span>大于你，你可将<span style='color: #FF00FF'>手牌</span>摸至与该角色相同；②若其<span style='color: #FF00FF'>手牌数</span>小于你，你可以弃置一张<span style='color: #FF00FF'>手牌</span>令此【杀】不能被抵消。",
					snjs_boss_zhuoguiysgx:"鬼吸",
					"snjs_boss_zhuoguiysgx_info":"<span style='color: #40E0D0'>锁定技</span>，当你受到<span style='color: #FF7D40'>伤害</span>后，你进行一次<span style='color: #03A89E'>判定</span>：①为<span style='color: #FF0000'>♥</span>，你<span style='color: #00FF00'>回复</span>1点<span style='color: #00FF00'>体力</span>；②不为<span style='color: #FF0000'>♥</span>，你<span style='color: #BC8F8F'>失去</span>1点<span style='color: #00FF00'>体力</span>。",
					snjs_boss_zhuoguiysac:"暗潮",
					"snjs_boss_zhuoguiysac_info":"<span style='color: #40E0D0'>锁定技</span>，<span style='color: #00FA9A'>己方</span>角色的<span style='color: #E3CF57'>回合结束</span>时，若此回合该角色没有造成<span style='color: #FF7D40'>伤害</span>，则获得一个「暗潮」标记，若该角色造成过<span style='color: #FF7D40'>伤害</span>，则移去所有「暗潮」标记。<span style='color: #00FA9A'>己方</span>角色的<span style='color: #E3CF57'>回合开始</span>时，若该角色有「暗潮」标记，则本回合<span style='color: #E3CF57'>摸牌阶段</span>多摸X张牌且对<span style='color: #FF0000'>敌方</span>角色造成的<span style='color: #FF7D40'>伤害</span>+X（X为「暗潮」标记数）。",
					snjs_boss_zhuoguihfdz:"毒针",
					"snjs_boss_zhuoguihfdz_info":"<span style='color: #40E0D0'>锁定技</span>，你的回合内，当你使用牌指定单一<span style='color: #FF0000'>敌方</span>角色为目标后，该角色随机弃置一张牌（优先<span style='color: #9933FA'>装备区</span>里的牌）。",
					snjs_boss_zhuoguihfmc:"冥虫",
					"snjs_boss_zhuoguihfmc_info":"<span style='color: #40E0D0'>锁定技</span>，你死亡时，若有其他<span style='color: #00FA9A'>己方</span>角色存活，该角色获得技能〖毒针〗。",
					snjs_boss_zhuoguirysyyszc:"昼刹",
					"snjs_boss_zhuoguirysyyszc_info":"<span style='color: #40E0D0'>锁定技</span>，<span style='color: #E3CF57'>准备阶段</span>，你进行一次<span style='color: #03A89E'>判定</span>并获得<span style='color: #03A89E'>判定牌</span>，若结果为<span style='color: #FF0000'>红色</span>，你本回合使用【杀】的<span style='color: #FFFF00'>次数</span>+2。",
					snjs_boss_zhuoguirysyysyz:"夜冢",
					"snjs_boss_zhuoguirysyysyz_info":"<span style='color: #40E0D0'>锁定技</span>，<span style='color: #E3CF57'>结束阶段</span>，你进行一次<span style='color: #03A89E'>判定</span>并获得<span style='color: #03A89E'>判定牌</span>，若结果为<span style='color: #666666'>黑色</span>，所有<span style='color: #FF0000'>敌方</span>角色每人随机弃置一张<span style='color: #FF00FF'>手牌</span>。",
					snjs_boss_zhuoguirysyyshy:"晦运",
					"snjs_boss_zhuoguirysyyshy_info":"<span style='color: #E3CF57'>出牌阶段</span>限一次，你可以展示一名<span style='color: #FF0000'>敌方</span>角色的<span style='color: #FF00FF'>手牌</span>，并弃置其中至多两张牌。然后你可以弃置一张与该角色弃置牌其中一张名称相同的牌，然后对其造成X点<span style='color: #FF7D40'>伤害</span>(若该角色<span style='color: #00FF00'>体力值</span>大于你的<span style='color: #00FF00'>体力值</span>，X=2，否则X=1)。",
					snjs_boss_zhuoguirysyysde:"断恶",
					"snjs_boss_zhuoguirysyysde_info":"<span style='color: #40E0D0'>锁定技</span>，<span style='color: #FF0000'>敌方</span>角色的<span style='color: #E3CF57'>弃牌阶段</span>结束时，若其此阶段弃置了<span style='color: #666666'>黑色牌</span>，则该角色<span style='color: #BC8F8F'>失去</span>1点<span style='color: #00FF00'>体力</span>。",
					snjs_boss_zhuoguigwjz:"疾咒",
					"snjs_boss_zhuoguigwjz_info":"<span style='color: #40E0D0'>锁定技</span>，<span style='color: #FF0000'>敌方</span>角色的<span style='color: #E3CF57'>出牌阶段</span>结束时，你进行一次<span style='color: #03A89E'>判定</span>，然后该角色选择一项：①弃置任意张<span style='color: #228B23'>点数</span>之和大于<span style='color: #03A89E'>判定</span>结果的牌(若弃置的牌超过X张，你获得一个「啖噬」；你的<span style='color: #00FF00'>体力值</span>大于15时X为1，否则X为2)；②<span style='color: #BC8F8F'>失去</span>1点<span style='color: #00FF00'>体力</span>。",
					snjs_boss_zhuoguigwds:"啖噬",
					"snjs_boss_zhuoguigwds_info":"<span style='color: #40E0D0'>锁定技</span>，当你受到<span style='color: #FF7D40'>伤害</span>时，此<span style='color: #FF7D40'>伤害</span>+X(X为你拥有的「啖噬」数量)，然后你移去一个「啖噬」。",
					snjs_boss_zhuoguigwch:"赤虎",
					"snjs_boss_zhuoguigwch_info":"<span style='color: #40E0D0'>锁定技</span>：①若你的<span style='color: #FF00FF'>手牌数</span>不是全场最多的，<span style='color: #E3CF57'>摸牌阶段</span>你多摸两张牌；②若你的<span style='color: #00FF00'>体力值</span>不大于15，你造成的<span style='color: #FF7D40'>伤害</span>+1。",
					snjs_boss_zhuoguitm:"铁面",
					"snjs_boss_zhuoguitm_info":"<span style='color: #40E0D0'>锁定技</span>，<span style='color: #FF0000'>红</span>【杀】有75%概率对你无效。",
					snjs_boss_zhuoguiylwdf:"地府",
					"snjs_boss_zhuoguiylwdf_info":"<span style='color: #40E0D0'>锁定技</span>，<span style='color: #FF0000'>敌方</span>角色的<span style='color: #E3CF57'>出牌阶段</span>开始时，若其<span style='color: #FF00FF'>手牌数</span>大于<span style='color: #00C78C'>体力上限</span>，则将<span style='color: #FF00FF'>手牌</span>弃至与<span style='color: #00C78C'>体力上限</span>相同。",
					snjs_boss_zhuoguiylwzn:"震怒",
					"snjs_boss_zhuoguiylwzn_info":"<span style='color: #40E0D0'>锁定技</span>，当你的<span style='color: #00FF00'>体力值</span>变化后，若第一次降至11点以下或第一次降至6点以下时，立即开始你的回合且你摸四张牌。",
					snjs_boss_zhuoguiylwxp:"刑判",
					"snjs_boss_zhuoguiylwxp_info":"<span style='color: #40E0D0'>锁定技</span>，<span style='color: #E3CF57'>出牌阶段</span>开始时，你进行一次<span style='color: #03A89E'>判定</span>：①结果为<span style='color: #FF0000'>红色</span>，<span style='color: #FF0000'>敌方</span><span style='color: #FF00FF'>手牌</span>唯一最多的角色将一半数量的<span style='color: #FF00FF'>手牌</span>交给你(向下取整)；②结果为<span style='color: #666666'>黑色</span>，<span style='color: #FF0000'>敌方</span><span style='color: #00FF00'>体力</span>唯一最多的角色<span style='color: #BC8F8F'>失去</span>1点<span style='color: #00FF00'>体力</span>。",
					snjs_boss_zhuoguiylwdw:"殿威",
					"snjs_boss_zhuoguiylwdw_info":"<span style='color: #40E0D0'>锁定技</span>，<span style='color: #E3CF57'>准备阶段</span>，你视为对<span style='color: #9933FA'>装备区</span>里没牌的<span style='color: #FF0000'>敌方</span>角色使用一张【杀】，然后<span style='color: #9933FA'>装备区</span>里有牌的<span style='color: #FF0000'>敌方</span>角色随机弃置一张<span style='color: #9933FA'>装备区</span>里的牌。",
					snjs_boss_zhuoguiylwxp2:"宣判",
					"snjs_boss_zhuoguiylwxp2_info":"<span style='color: #40E0D0'>锁定技</span>，<span style='color: #FF0000'>敌方</span>的<span style='color: #E3CF57'>回合结束</span>时，若本回合其[<span style='color: #00FF00'>回复</span>了至少2点<span style='color: #00FF00'>体力</span>/对你造成了至少3点<span style='color: #FF7D40'>伤害</span>/弃置了至少4张牌/摸牌数达到6张]，你[<span style='color: #00FF00'>回复</span>1点<span style='color: #00FF00'>体力</span>/对其造成1~2点<span style='color: #FF7D40'>伤害</span>/其随机弃置1~2牌/你摸1~3张牌]。",
					
					snjs_boss_zhuogui_intro1:'&nbsp;第一关',
					snjs_boss_zhuogui_intro1_info:'孟婆',
					snjs_boss_zhuogui_intro2:'&nbsp;第二关',
					snjs_boss_zhuogui_intro2_info:'2020:<br>黑无常&白无常、牛头&马面<br>随机一组<br>2021:<br>黑无常白无常、牛头马面、日游神夜游神<br>随机之一<br>豹尾、鸟嘴、鱼鳃、黄蜂<br>随机之一',
					snjs_boss_zhuogui_intro3:'&nbsp;第三关',
					snjs_boss_zhuogui_intro3_info:'2020:<br>豹尾、鸟嘴、鱼鳃、黄蜂<br>随机之二<br>2021(BOSS):<br>鬼王、阎罗王<br>随机之一',
					snjs_boss_zhuogui_intro4:'&nbsp;第四关',
					snjs_boss_zhuogui_intro4_info:'2020(BOSS):<br>阎罗王<br>2021:没有第四关',
					snjs_boss_zhuogui_intro4_append:'①孟婆阵亡时，击杀孟婆的玩家可以选择回复1点体力或摸两张牌，然后所有未击杀孟婆的玩家摸一张牌 ②击杀黑无常、白无常、牛头、马面、鸟嘴、鱼鳃、黄蜂可以回复1点体力并摸两张牌 ③击杀黑无常白无常、牛头马面、日游神夜游神、豹尾可以回复1点体力并摸三张牌 ④过关时清零游戏轮数，当前回合的角色取消接下来的所有阶段，直接开始下家的回合，BOSS关卡固定从BOSS的回合开始 ⑤2021版阎罗王额外拥有技能〖殿威〗〖宣判〗',
					
					snjs_boss_tianshuzishuzishu:"子鼠",
					"snjs_boss_tianshuzishuzishu_info":"<span style='color: #E3CF57'>出牌阶段</span>限一次，你可以获得<span style='color: #FF00FF'>手牌数</span>大于你的其他角色一张<span style='color: #FF00FF'>手牌</span>，你可以重复此流程直到你的<span style='color: #FF00FF'>手牌数</span>为全场最多。",
					snjs_boss_tianshuchouniuchouniu:"丑牛",
					"snjs_boss_tianshuchouniuchouniu_info":"<span style='color: #40E0D0'>锁定技</span>，<span style='color: #E3CF57'>结束阶段</span>，若你的<span style='color: #00FF00'>体力值</span>为全场最少，则你<span style='color: #00FF00'>回复</span>1点<span style='color: #00FF00'>体力</span>。",
					snjs_boss_tianshuyinhuyinhu:"寅虎",
					"snjs_boss_tianshuyinhuyinhu_info":"<span style='color: #E3CF57'>出牌阶段</span>，你可以弃置一张牌(以此法弃置的牌须类型各不相同)，然后对一名其他角色造成1点<span style='color: #FF7D40'>伤害</span>；若你以此法导致一名角色进入濒死状态，则此技能<span style='color: #8B864E'>失效</span>直到<span style='color: #E3CF57'>回合结束</span>。",
					snjs_boss_tianshumaotumaotu:"卯兔",
					"snjs_boss_tianshumaotumaotu_info":"<span style='color: #40E0D0'>锁定技</span>，任意角色阵亡时，直到你的下个<span style='color: #E3CF57'>出牌阶段</span>开始前，你不能成为<span style='color: #00FF00'>体力值</span>大于等于你的其他角色使用牌的目标。",
					snjs_boss_tianshuchenlongchenlong:"辰龙",
					"snjs_boss_tianshuchenlongchenlong_info":"<span style='color: #FFD700'>限定技</span>，<span style='color: #E3CF57'>出牌阶段</span>，你可以指定一名其他角色并<span style='color: #BC8F8F'>失去</span>任意点<span style='color: #00FF00'>体力</span>(至多为5)，然后对该角色造成等量的<span style='color: #FF7D40'>伤害</span>。若你以此法进入濒死状态，则你将<span style='color: #00FF00'>体力值</span><span style='color: #00FF00'>回复</span>至1，然后减少1点<span style='color: #00C78C'>体力上限</span>。",
					snjs_boss_tianshusishesishe:"巳蛇",
					"snjs_boss_tianshusishesishe_info":"当你受到<span style='color: #FF7D40'>伤害</span>后，你可以对<span style='color: #FF7F50'>伤害来源</span>造成等量<span style='color: #FF7D40'>伤害</span>。",
					snjs_boss_tianshuwumawuma:"午马",
					"snjs_boss_tianshuwumawuma_info":"<span style='color: #40E0D0'>锁定技</span>，你不能被<span style='color: #990033'>翻面</span>；你的<span style='color: #E3CF57'>阶段</span>不能被跳过；当你成为其他角色使用<span style='color: #FCE6C9'>锦囊牌</span>的目标后，摸一张牌。",
					snjs_boss_tianshuweiyangweiyang:"未羊",
					"snjs_boss_tianshuweiyangweiyang_info":"<span style='color: #E3CF57'>出牌阶段</span>限一次，你可以弃置任意张不同类型的牌令等量角色<span style='color: #00FF00'>回复</span>1点<span style='color: #00FF00'>体力</span>。",
					snjs_boss_tianshushenhoushenhou:"申猴",
					"snjs_boss_tianshushenhoushenhou_info":"当你成为【杀】的目标后，你可以进行<span style='color: #03A89E'>判定</span>，若结果为<span style='color: #FF0000'>红色</span>，则此【杀】对你无效。",
					snjs_boss_tianshuyoujiyouji:"酉鸡",
					"snjs_boss_tianshuyoujiyouji_info":"<span style='color: #40E0D0'>锁定技</span>，<span style='color: #E3CF57'>摸牌阶段</span>，你多摸X张牌(X为游戏轮数且至多为5)。",
					snjs_boss_tianshuxugouxugou:"戌狗",
					"snjs_boss_tianshuxugouxugou_info":"<span style='color: #40E0D0'>锁定技</span>，<span style='color: #FF0000'>红</span>【杀】对你无效；你使用<span style='color: #FF0000'>红</span>【杀】无<span style='color: #FFFF00'>距离</span>限制且造成的<span style='color: #FF7D40'>伤害</span>+1。",
					snjs_boss_tianshuhaizhuhaizhu:"亥猪",
					"snjs_boss_tianshuhaizhuhaizhu_info":"<span style='color: #40E0D0'>锁定技</span>，当其他角色的<span style='color: #666666'>黑色</span>牌因弃置而置入弃牌堆后，你获得这些牌；<span style='color: #E3CF57'>准备阶段</span>，若你的<span style='color: #FF00FF'>手牌数</span>为场上最多，你<span style='color: #BC8F8F'>失去</span>1点<span style='color: #00FF00'>体力</span>。",
					snjs_boss_tianshuqinglonglonghui:"龙慧",
					"snjs_boss_tianshuqinglonglonghui_info":"<span style='color: #40E0D0'>锁定技</span>，<span style='color: #E3CF57'>准备阶段</span>，从牌堆或弃牌堆中随机获得两张<span style='color: #FCE6C9'>锦囊牌</span>。",
					snjs_boss_tianshuqinglonglonglin:"龙鳞",
					"snjs_boss_tianshuqinglonglonglin_info":"<span style='color: #40E0D0'>锁定技</span>，当你受到<span style='color: #FF7D40'>伤害</span>后，<span style='color: #FF0000'>敌方</span>角色使用的牌对你无效直到<span style='color: #E3CF57'>回合结束</span>。",
					snjs_boss_tianshubaihuhuwei:"虎威",
					"snjs_boss_tianshubaihuhuwei_info":"<span style='color: #40E0D0'>锁定技</span>，<span style='color: #E3CF57'>准备阶段</span>，从牌堆或弃牌堆中随机获得两张【杀】。",
					snjs_boss_tianshubaihukuangxiao:"狂啸",
					"snjs_boss_tianshubaihukuangxiao_info":"<span style='color: #40E0D0'>锁定技</span>，你使用【杀】的<span style='color: #FFFF00'>次数</span>+1，你于回合内使用【杀】没有<span style='color: #FFFF00'>距离</span>限制，且指定所有<span style='color: #FF0000'>敌方</span>角色为目标。",
					snjs_boss_tianshuzhuquezhuyu:"朱羽",
					"snjs_boss_tianshuzhuquezhuyu_info":"<span style='color: #40E0D0'>锁定技</span>，<span style='color: #E3CF57'>准备阶段</span>，从牌堆或弃牌堆中随机获得两张<span style='color: #FF0000'>红</span>牌。",
					snjs_boss_tianshuzhuquefentian:"焚天",
					"snjs_boss_tianshuzhuquefentian_info":"<span style='color: #E3CF57'>出牌阶段</span>限一次，你可以对一名其他角色造成1点<span style='color: #FF8000'>火焰</span><span style='color: #FF7D40'>伤害</span>，然后若其死亡，此阶段你发动此技能的<span style='color: #FFFF00'>次数</span>限制+1。",
					snjs_boss_tianshuxuanwulingqu:"灵躯",
					"snjs_boss_tianshuxuanwulingqu_info":"<span style='color: #40E0D0'>锁定技</span>，当你受到<span style='color: #FF7D40'>伤害</span>时，摸一张牌并令你的<span style='color: #FFC0CB'>手牌上限</span>+1，若有存活的其他<span style='color: #00FA9A'>己方</span>角色则至多承受1点<span style='color: #FF7D40'>伤害</span>。",
					snjs_boss_tianshuxuanwuxuankai:"玄铠",
					"snjs_boss_tianshuxuanwuxuankai_info":"<span style='color: #40E0D0'>锁定技</span>，当你受到<span style='color: #FF7D40'>伤害</span>后，你使用的下一张【杀】无法被响应。",
					snjs_boss_tianshuweixitaoyuan:"饕怨",
					"snjs_boss_tianshuweixitaoyuan_info":"每当你受到1点<span style='color: #FF7D40'>伤害</span>后，你可以展示并获得牌堆顶的两张牌，然后若<span style='color: #FF7F50'>伤害来源</span>不是<span style='color: #00FA9A'>己方</span>角色且这两张牌花色不同，你随机获得<span style='color: #FF7F50'>伤害来源</span>一张<span style='color: #FF00FF'>手牌</span>。",
					snjs_boss_tianshushuxipaoxiao:"咆哮",
					"snjs_boss_tianshushuxipaoxiao_info":"<span style='color: #40E0D0'>锁定技</span>，你使用【杀】没有<span style='color: #FFFF00'>次数</span>限制，你的<span style='color: #E3CF57'>出牌阶段</span>，如果你已经使用过【杀】，你于此阶段使用【杀】无<span style='color: #FFFF00'>距离</span>限制。",
					snjs_boss_tianshushuxilizhan:"历战",
					"snjs_boss_tianshushuxilizhan_info":"①<span style='color: #40E0D0'>锁定技</span>，<span style='color: #E3CF57'>出牌阶段</span>开始时，获得牌堆中的2张【杀】。②你每回合使用的第一张【杀】结算后，你可以将该【杀】交给一名其他角色。",
					snjs_boss_tianshuwuximingzhe:"明哲",
					"snjs_boss_tianshuwuximingzhe_info":"当你于回合外使用或打出<span style='color: #FF0000'>红色</span>牌，或因弃置<span style='color: #BC8F8F'>失去</span>一张<span style='color: #FF0000'>红色</span>牌后，你可以摸一张牌。",
					snjs_boss_tianshuwuxitianxiang:"天香",
					"snjs_boss_tianshuwuxitianxiang_info":"当你受到<span style='color: #FF7D40'>伤害</span>时，你可以弃置一张<span style='color: #FF0000'>♥</span>牌，防止此<span style='color: #FF7D40'>伤害</span>并选择一名其他角色，然后你选择一项：①令其受到<span style='color: #FF7F50'>伤害来源</span>对其造成的1点<span style='color: #FF7D40'>伤害</span>，然后摸X张牌(X为其已损失<span style='color: #00FF00'>体力值</span>且至多为5)；②令其<span style='color: #BC8F8F'>失去</span>1点<span style='color: #00FF00'>体力</span>，然后获得你弃置的牌。",
					snjs_boss_tianshuqunxijvxiang:"巨象",
					"snjs_boss_tianshuqunxijvxiang_info":"<span style='color: #40E0D0'>锁定技</span>，【南蛮入侵】对你无效。其他角色使用的【南蛮入侵】结算后进入弃牌堆时，你获得之。",
					snjs_boss_tianshuqunxishouxi:"兽袭",
					"snjs_boss_tianshuqunxishouxi_info":"每当你使用<span style='color: #666666'>黑色</span><span style='color: #FCE6C9'>锦囊牌</span>时，你可以进行一次<span style='color: #03A89E'>判定</span>，若<span style='color: #03A89E'>判定</span>结果为：①<span style='color: #666666'>黑色</span>，你随机对一名<span style='color: #FF0000'>敌方</span>角色造成1点<span style='color: #FF7D40'>伤害</span>。②<span style='color: #FF0000'>红色</span>，你<span style='color: #00FF00'>回复</span>1点<span style='color: #00FF00'>体力</span>并获得<span style='color: #03A89E'>判定牌</span>。",
					snjs_boss_tianshuweinianfange:"反戈",
					"snjs_boss_tianshuweinianfange_info":"<span style='color: #40E0D0'>锁定技</span>，每当你受到1点<span style='color: #FF7D40'>伤害</span>后，你展示并获得牌堆顶的两张牌，然后若<span style='color: #FF7F50'>伤害来源</span>不是<span style='color: #00FA9A'>己方</span>角色则依次执行以下效果：①若这两张牌的<span style='color: #228B23'>点数</span>之差不小于你的当前<span style='color: #00FF00'>体力值</span>，则你对<span style='color: #FF7F50'>伤害来源</span>造成1点<span style='color: #FF7D40'>伤害</span>；②若这两张牌的<span style='color: #228B23'>点数</span>之和不小于你的当前<span style='color: #00FF00'>体力值</span>，则你随机获得<span style='color: #FF7F50'>伤害来源</span>一张<span style='color: #FF00FF'>手牌</span>。",
					snjs_boss_tianshushuniansiyao:"撕咬",
					"snjs_boss_tianshushuniansiyao_info":"<span style='color: #40E0D0'>锁定技</span>，你每回合使用的第一张【杀】指定<span style='color: #FF0000'>敌方</span>角色为目标后，对其造成1点<span style='color: #FF7D40'>伤害</span>。你使用【杀】对<span style='color: #FF0000'>敌方</span>角色造成<span style='color: #FF7D40'>伤害</span>后，其随机弃置一张牌。",
					snjs_boss_tianshushunianhengsao:"横扫",
					"snjs_boss_tianshushunianhengsao_info":"<span style='color: #40E0D0'>锁定技</span>，你使用【杀】的<span style='color: #FFFF00'>次数</span>+1、目标数+1，且无<span style='color: #FFFF00'>距离</span>限制。",
					snjs_boss_tianshuwunianzhuyan:"朱颜",
					"snjs_boss_tianshuwunianzhuyan_info":"<span style='color: #40E0D0'>锁定技</span>，<span style='color: #E3CF57'>摸牌阶段</span>，你多摸两张牌。",
					snjs_boss_tianshuwunianxiaoshou:"枭兽",
					"snjs_boss_tianshuwunianxiaoshou_info":"<span style='color: #40E0D0'>锁定技</span>，每当你从<span style='color: #FF00FF'>手牌</span>或<span style='color: #9933FA'>装备区</span>中<span style='color: #BC8F8F'>失去</span>一张<span style='color: #DA70D6'>装备牌</span>，你摸两张牌。",
					snjs_boss_tianshuqunnianqunxiang:"群响",
					"snjs_boss_tianshuqunnianqunxiang_info":"<span style='color: #40E0D0'>锁定技</span>，<span style='color: #E3CF57'>准备阶段</span>与<span style='color: #E3CF57'>结束阶段</span>，你视为使用一张【南蛮入侵】，你始终跳过<span style='color: #E3CF57'>摸牌阶段</span>。",
					snjs_boss_tianshuqunniantanshi:"贪食",
					"snjs_boss_tianshuqunniantanshi_info":"<span style='color: #40E0D0'>锁定技</span>，当你造成<span style='color: #FF7D40'>伤害</span>后，你进行一次<span style='color: #03A89E'>判定</span>，若结果为<span style='color: #666666'>黑色</span>，你<span style='color: #00FF00'>回复</span>1点<span style='color: #00FF00'>体力</span>，如果你未受伤则改为摸一张牌。",
					snjs_boss_tianshuweishunianqubi:"祛蔽",
					"snjs_boss_tianshuweishunianqubi_info":"<span style='color: #40E0D0'>锁定技</span>，当你[使用【杀】指定<span style='color: #FF0000'>敌方</span>角色为目标/每受到<span style='color: #FF0000'>敌方</span>角色造成的1点<span style='color: #FF7D40'>伤害</span>]后，你令[其/<span style='color: #FF7F50'>伤害来源</span>]随机弃置一张【杀】和一张【闪】，然后该角色每少弃置一种牌你便摸一张牌。",
					snjs_boss_tianshuweishunianhuaji:"化吉",
					"snjs_boss_tianshuweishunianhuaji_info":"<span style='color: #40E0D0'>锁定技</span>，<span style='color: #00FA9A'>己方</span>角色<span style='color: #E3CF57'>回合结束</span>时，若其本回合造成过<span style='color: #FF7D40'>伤害</span>你摸两张牌，否则你随机对一名<span style='color: #FF0000'>敌方</span>角色造成1点<span style='color: #FF8000'>火焰</span><span style='color: #FF7D40'>伤害</span>。",
					snjs_boss_tianshuweiwunianweihe:"威吓",
					"snjs_boss_tianshuweiwunianweihe_info":"<span style='color: #40E0D0'>锁定技</span>：①当你成为<span style='color: #FF0000'>敌方</span>角色使用【杀】的目标后；②当一名<span style='color: #FF0000'>敌方</span>角色于其<span style='color: #E3CF57'>出牌阶段</span>获得牌后其<span style='color: #FF00FF'>手牌数</span>不小于其<span style='color: #00C78C'>体力上限</span>。满足①②中任意一项，你令其随机弃置两张牌，这两张牌的<span style='color: #228B23'>点数</span>奇偶、类型、花色之中，每有一项相同你便摸一张牌。",
					snjs_boss_tianshuweiqunnianyuxiang:"余响",
					"snjs_boss_tianshuweiqunnianyuxiang_info":"<span style='color: #40E0D0'>锁定技</span>，每当你<span style='color: #BC8F8F'>失去</span>[<span style='color: #808069'>基本牌</span>/<span style='color: #FCE6C9'>锦囊牌</span>/<span style='color: #DA70D6'>装备牌</span>]时，你[摸一张牌并令随机一名<span style='color: #FF0000'>敌方</span>角色随机弃置一张牌/对随机一名<span style='color: #FF0000'>敌方</span>角色造成1点<span style='color: #0000FF'>雷电</span><span style='color: #FF7D40'>伤害</span>/<span style='color: #00FF00'>回复</span>1点<span style='color: #00FF00'>体力</span>]。",
					snjs_boss_tianshushuwunianhuanling:"幻灵",
					"snjs_boss_tianshushuwunianhuanling_info":"锁定技，<span style='color: #E3CF57'>出牌阶段</span>开始时，你<span style='color: #00FF00'>回复</span>1点<span style='color: #00FF00'>体力</span>并视为随机使用两张牌堆里有的<span style='color: #FCE6C9'>锦囊牌</span>。",
					snjs_boss_tianshushuwunianfangong:"返功",
					"snjs_boss_tianshushuwunianfangong_info":"<span style='color: #40E0D0'>锁定技</span>，<span style='color: #E3CF57'>结束阶段</span>，若你本回合[造成过/没有造成过]<span style='color: #FF7D40'>伤害</span>，你[摸两张牌/随机获得两名<span style='color: #FF0000'>敌方</span>角色一张<span style='color: #FF00FF'>手牌</span>]。",
					snjs_boss_tianshushuqunnianxunshou:"巡狩",
					"snjs_boss_tianshushuqunnianxunshou_info":"<span style='color: #40E0D0'>锁定技</span>，一名<span style='color: #FF0000'>敌方</span>角色的<span style='color: #E3CF57'>准备阶段</span>开始时，其选择弃置两张牌或令你摸两张牌。",
					snjs_boss_tianshushuqunnianxunlie:"寻猎",
					"snjs_boss_tianshushuqunnianxunlie_info":"<span style='color: #40E0D0'>锁定技</span>，一名<span style='color: #FF0000'>敌方</span>角色的<span style='color: #E3CF57'>结束阶段</span>开始时，其选择弃置两张牌或受到1点<span style='color: #FF7D40'>伤害</span>。",
					snjs_boss_tianshuwuqunnianhuozhong:"祸重",
					"snjs_boss_tianshuwuqunnianhuozhong_info":"<span style='color: #40E0D0'>锁定技</span>，每种牌名每轮限一次，每当你使用的<span style='color: #808069'>基本牌</span>或<span style='color: #FCE6C9'>锦囊牌</span>结算后，将该牌收回<span style='color: #FF00FF'>手牌</span>。",
					snjs_boss_tianshuwuqunnianzange:"攒戈",
					"snjs_boss_tianshuwuqunnianzange_info":"<span style='color: #40E0D0'>锁定技</span>，每当你使用<span style='color: #FCE6C9'>锦囊牌</span>时，随机将一张你<span style='color: #9933FA'>装备区</span>中没有的类型的<span style='color: #DA70D6'>装备牌</span>置入<span style='color: #9933FA'>装备区</span>。",
					snjs_boss_tianshuqiuniulongxian:"龙弦",
					"snjs_boss_tianshuqiuniulongxian_info":"①每回合限一次，你可以将一张<span style='color: #FF0000'>♦</span>牌当作【乐不思蜀】使用。②每回合限一次，你可以将一张<span style='color: #666666'>♣</span>牌当作【兵粮寸断】使用，且你使用【兵粮寸断】无<span style='color: #FFFF00'>距离</span>限制。",
					snjs_boss_tianshuqiuniulige:"离歌",
					"snjs_boss_tianshuqiuniulige_info":"当一名角色的<span style='color: #03A89E'>判定牌</span>生效前，你可以打出一张牌替换之。",
					snjs_boss_tianshuqiuniuqinlv:"琴律",
					"snjs_boss_tianshuqiuniuqinlv_info":"<span style='color: #40E0D0'>锁定技</span>，每当一名其他角色跳过一个<span style='color: #E3CF57'>阶段</span>时，所有其他<span style='color: #00FA9A'>己方</span>角色各摸一张牌。",
					snjs_boss_tianshuqiuniujilv:"集律",
					"snjs_boss_tianshuqiuniujilv_info":"<span style='color: #40E0D0'>锁定技</span>，当其他角色的<span style='color: #03A89E'>判定牌</span>生效时，你获得此牌。",
					snjs_boss_tianshusuannilongzhen:"龙镇",
					"snjs_boss_tianshusuannilongzhen_info":"<span style='color: #40E0D0'>锁定技</span>，每回合限一次，当其他<span style='color: #00FA9A'>己方</span>角色于其回合外获得牌时，你令其摸两张牌。",
					snjs_boss_tianshusuanniruiyan:"瑞烟",
					"snjs_boss_tianshusuanniruiyan_info":"<span style='color: #40E0D0'>锁定技</span>，<span style='color: #E3CF57'>结束阶段</span>，你摸两张牌。",
					snjs_boss_tianshusuanniraoling:"绕棱",
					"snjs_boss_tianshusuanniraoling_info":"<span style='color: #E3CF57'>出牌阶段</span>限两次，你可以将一张<span style='color: #FF00FF'>手牌</span>交给一名其他<span style='color: #00FA9A'>己方</span>角色。",
					snjs_boss_tianshusuannixiangjin:"香金",
					"snjs_boss_tianshusuannixiangjin_info":"<span style='color: #E3CF57'>出牌阶段</span>限一次，你可以令一名与你<span style='color: #FF00FF'>手牌数</span>不同的其他角色将<span style='color: #FF00FF'>手牌</span>摸或弃置至与你的<span style='color: #FF00FF'>手牌数</span>相同。",
					snjs_boss_tianshuchiwenlongao:"龙鰲",
					"snjs_boss_tianshuchiwenlongao_info":"<span style='color: #40E0D0'>锁定技</span>，当其他<span style='color: #00FA9A'>己方</span>角色受到<span style='color: #8A2BE2'>属性</span><span style='color: #FF7D40'>伤害</span>时，你令此<span style='color: #FF7D40'>伤害</span>-2。",
					snjs_boss_tianshuchiwenquyan:"驱炎",
					"snjs_boss_tianshuchiwenquyan_info":"<span style='color: #40E0D0'>锁定技</span>，你另所有其他<span style='color: #00FA9A'>己方</span>角色造成的<span style='color: #8A2BE2'>属性</span><span style='color: #FF7D40'>伤害</span>+1。",
					snjs_boss_tianshuchiwenyuhuo:"鱼火",
					"snjs_boss_tianshuchiwenyuhuo_info":"①你可以将一张<span style='color: #FF0000'>♦</span><span style='color: #FF00FF'>手牌</span>当作<span style='color: #FF8000'>火</span>【杀】使用。②你可以将一张<span style='color: #666666'>♠</span><span style='color: #FF00FF'>手牌</span>当作【铁索连环】使用。",
					snjs_boss_tianshuchiwenfubing:"负兵",
					"snjs_boss_tianshuchiwenfubing_info":"<span style='color: #40E0D0'>锁定技</span>，<span style='color: #E3CF57'>出牌阶段</span>开始时，你令随机一名<span style='color: #FF0000'>敌方</span>角色的武将牌<span style='color: #A0522D'>横置</span>，令随机一名<span style='color: #00FA9A'>己方</span>角色的武将牌重置。",
					snjs_boss_tianshuyazilonglie:"龙烈",
					"snjs_boss_tianshuyazilonglie_info":"<span style='color: #40E0D0'>锁定技</span>，当你使用的【杀】需要X张【闪】响应(X为你本回合使用【杀】的<span style='color: #FFFF00'>次数</span>)。",
					snjs_boss_tianshuyazichaiyue:"豺月",
					"snjs_boss_tianshuyazichaiyue_info":"<span style='color: #40E0D0'>锁定技</span>，你使用的【杀】指定所有<span style='color: #FF0000'>敌方</span>角色为目标，你不能对<span style='color: #00FA9A'>己方</span>角色使用【杀】。",
					snjs_boss_tianshuyazilangri:"狼日",
					"snjs_boss_tianshuyazilangri_info":"<span style='color: #40E0D0'>锁定技</span>，你使用牌且无视<span style='color: #DA70D6'>防具</span>，且【杀】无<span style='color: #FFFF00'>距离</span>限制。",
					snjs_boss_tianshuyazibibao:"必报",
					"snjs_boss_tianshuyazibibao_info":"<span style='color: #40E0D0'>锁定技</span>，<span style='color: #E3CF57'>回合开始</span>时，你<span style='color: #BC8F8F'>失去</span>1点<span style='color: #00FF00'>体力</span>，视为对随机一名<span style='color: #FF0000'>敌方</span>角色使用一张【杀】。",
					snjs_boss_tianshuchaofenglonglin:"龙鳞",
					"snjs_boss_tianshuchaofenglonglin_info":"<span style='color: #40E0D0'>锁定技</span>，每回合限一次，你装备一张<span style='color: #DA70D6'>防具</span>后，所有其他<span style='color: #00FA9A'>己方</span>角色<span style='color: #00FF00'>回复</span>1点<span style='color: #00FF00'>体力</span>，然后<span style='color: #9933FA'>装备区</span>没有<span style='color: #DA70D6'>防具</span>的所有其他<span style='color: #00FA9A'>己方</span>角色随机将一张<span style='color: #DA70D6'>防具</span>置入<span style='color: #9933FA'>装备区</span>。",
					snjs_boss_tianshuchaofengzhijiao:"置角",
					"snjs_boss_tianshuchaofengzhijiao_info":"<span style='color: #E3CF57'>出牌阶段</span>，你可以将一张<span style='color: #DA70D6'>坐骑牌</span>置入一名其他<span style='color: #00FA9A'>己方</span>角色的<span style='color: #9933FA'>装备区</span>，然后你与其从牌堆中随机获得一张<span style='color: #FF0000'>红色</span>牌。",
					snjs_boss_tianshuchaofengzhixie:"止邪",
					"snjs_boss_tianshuchaofengzhixie_info":"其他角色的<span style='color: #E3CF57'>回合结束</span>时，若其于此回合内未造成过<span style='color: #FF7D40'>伤害</span>，你可以获得场上的一张<span style='color: #DA70D6'>装备牌</span>。",
					snjs_boss_tianshuchaofenghaoxian:"好险",
					"snjs_boss_tianshuchaofenghaoxian_info":"<span style='color: #40E0D0'>锁定技</span>，<span style='color: #E3CF57'>结束阶段</span>，若所有<span style='color: #FF0000'>敌方</span>角色<span style='color: #9933FA'>装备区</span>里的牌数量之和大于3，你令所有<span style='color: #FF0000'>敌方</span>角色弃置其<span style='color: #9933FA'>装备区</span>里的所有牌，然后你摸等量的牌。",
					snjs_boss_tianshupulaolonghou:"龙吼",
					"snjs_boss_tianshupulaolonghou_info":"<span style='color: #40E0D0'>锁定技</span>，<span style='color: #E3CF57'>回合结束</span>时，你视为使用一张【万箭齐发】。",
					snjs_boss_tianshupulaoqiejing:"怯鲸",
					"snjs_boss_tianshupulaoqiejing_info":"<span style='color: #40E0D0'>锁定技</span>，当一名角色使用牌指定了至少两个目标时，你与所有其他<span style='color: #00FA9A'>己方</span>角色摸一张牌，然后若<span style='color: #FF00FF'>手牌数</span>大于1则弃置一张<span style='color: #FF00FF'>手牌</span>。",
					snjs_boss_tianshupulaomingyin:"鸣音",
					"snjs_boss_tianshupulaomingyin_info":"<span style='color: #40E0D0'>锁定技</span>，你对一名角色造成<span style='color: #FF7D40'>伤害</span>时，改为其<span style='color: #BC8F8F'>失去</span>等量<span style='color: #00FF00'>体力</span>。",
					snjs_boss_tianshupulaoduyuan:"独远",
					"snjs_boss_tianshupulaoduyuan_info":"<span style='color: #40E0D0'>锁定技</span>，其他<span style='color: #00FA9A'>己方</span>角色不能成为你使用<span style='color: #808069'>基本牌</span>和<span style='color: #FCE6C9'>锦囊牌</span>的目标。你于<span style='color: #E3CF57'>出牌阶段</span>内造成的<span style='color: #FF7D40'>伤害</span>+1。",
					snjs_boss_tianshubianlongshi:"龙视",
					"snjs_boss_tianshubianlongshi_info":"<span style='color: #40E0D0'>锁定技</span>，每回合每名<span style='color: #00FA9A'>己方</span>角色限一次，当其成为<span style='color: #808069'>基本牌</span>的目标后，其摸一张牌。",
					snjs_boss_tianshubiansongyan:"讼言",
					"snjs_boss_tianshubiansongyan_info":"<span style='color: #40E0D0'>锁定技</span>，每回合每名<span style='color: #00FA9A'>己方</span>角色限一次，当其成为<span style='color: #FCE6C9'>锦囊牌</span>的目标后，所有<span style='color: #00FA9A'>己方</span>角色各摸一张牌。",
					snjs_boss_tianshubiansuwei:"肃威",
					"snjs_boss_tianshubiansuwei_info":"<span style='color: #40E0D0'>锁定技</span>，当一名<span style='color: #FF0000'>敌方</span>角色于其回合内使用牌指定你为目标时，其随机弃置一张<span style='color: #FF00FF'>手牌</span>。",
					snjs_boss_tianshubianhualao:"画牢",
					"snjs_boss_tianshubianhualao_info":"<span style='color: #40E0D0'>锁定技</span>，当一名其他<span style='color: #00FA9A'>己方</span>角色受到来自<span style='color: #FF0000'>敌方</span>角色的<span style='color: #FF7D40'>伤害</span>时，若其<span style='color: #00FF00'>体力值</span>小于4则抵消该<span style='color: #FF7D40'>伤害</span>。",
					snjs_boss_tianshubixilongxuan:"龙玄",
					"snjs_boss_tianshubixilongxuan_info":"<span style='color: #40E0D0'>锁定技</span>，<span style='color: #E3CF57'>摸牌阶段</span>，你少摸一张牌，你的<span style='color: #FFC0CB'>手牌上限</span>-X，(X为「碑铭」的数目)。其他角色的<span style='color: #E3CF57'>出牌阶段</span>限一次，其可以将一张<span style='color: #FCE6C9'>锦囊牌</span>置于你的武将牌上，称为「碑铭」，然后其<span style='color: #00FF00'>回复</span>1点<span style='color: #00FF00'>体力</span>，你获得1点<span style='color: #00C78C'>体力上限</span>。",
					snjs_boss_tianshubixilongxuan2:"龙玄",
					snjs_boss_tianshubixilingxi:"灵屃",
					"snjs_boss_tianshubixilingxi_info":"<span style='color: #40E0D0'>锁定技</span>，每当你受到1点<span style='color: #FF7D40'>伤害</span>后，若你的武将牌上有「碑铭」，你将一张「碑铭」置入弃牌堆，你减少1点<span style='color: #00C78C'>体力上限</span>，然后令所有<span style='color: #00FA9A'>己方</span>角色各摸两张牌。",
					snjs_boss_tianshubixishuliu:"疏流",
					"snjs_boss_tianshubixishuliu_info":"<span style='color: #40E0D0'>锁定技</span>，当你使用的<span style='color: #FCE6C9'>锦囊牌</span>结算后，你将此牌当作「碑铭」，置于你的武将牌上，然后你获得1点<span style='color: #00C78C'>体力上限</span>。",
					snjs_boss_tianshubixijienu:"介怒",
					"snjs_boss_tianshubixijienu_info":"<span style='color: #40E0D0'>锁定技</span>，<span style='color: #E3CF57'>出牌阶段</span>开始时，如果你的「碑铭」大于等于7，你<span style='color: #00FF00'>回复</span>X点<span style='color: #00FF00'>体力</span>，然后对自己造成X点<span style='color: #FF7D40'>伤害</span>(X=「碑铭」数)。",
					snjs_boss_tianshufuxilongzhi:"龙识",
					"snjs_boss_tianshufuxilongzhi_info":"<span style='color: #40E0D0'>锁定技</span>，<span style='color: #E3CF57'>摸牌阶段</span>，你多摸X张牌(X为「碑文」数)。其他角色的<span style='color: #E3CF57'>出牌阶段</span>限一次，其可以将一张<span style='color: #FCE6C9'>锦囊牌</span>置于你的武将牌上，称为「碑文」，然后其摸两张牌。",
					snjs_boss_tianshufuxilongzhi2:"龙识",
					snjs_boss_tianshufuxilingjie:"灵碣",
					"snjs_boss_tianshufuxilingjie_info":"<span style='color: #E3CF57'>出牌阶段</span>限一次，你可以将一张牌当「碑文」中的一张<span style='color: #FCE6C9'>锦囊牌</span>使用，并摸一张牌。",
					snjs_boss_tianshufuxifeizhang:"斐章",
					"snjs_boss_tianshufuxifeizhang_info":"<span style='color: #E3CF57'>出牌阶段</span>限一次，当你使用<span style='color: #FCE6C9'>锦囊牌</span>时，你可以为此牌增加一个目标。",
					snjs_boss_tianshufuxibowen:"博文",
					"snjs_boss_tianshufuxibowen_info":"<span style='color: #E3CF57'>摸牌阶段</span>开始时，你可以获得「碑文」中的一张牌并令你的<span style='color: #FFC0CB'>手牌上限</span>+1。",
					snjs_boss_tianshuhuoshenzhurongxingxia:"行夏",
					"snjs_boss_tianshuhuoshenzhurongxingxia_info":"<span style='color: #40E0D0'>锁定技</span>，[<span style='color: #E3CF57'>准备阶段</span>/<span style='color: #E3CF57'>结束阶段</span>]，你令所有<span style='color: #FF0000'>敌方</span>角色选择一项：①[弃置/交给你]一张<span style='color: #FF0000'>红色</span>牌；②受到1点<span style='color: #FF8000'>火焰</span><span style='color: #FF7D40'>伤害</span>。",
					snjs_boss_tianshushuishengonggongjuehong:"决洪",
					"snjs_boss_tianshushuishengonggongjuehong_info":"<span style='color: #40E0D0'>锁定技</span>，<span style='color: #E3CF57'>准备阶段</span>，你令所有<span style='color: #FF0000'>敌方</span>角色弃置其的<span style='color: #9933FA'>装备区</span>内的所有牌。若其<span style='color: #9933FA'>装备区</span>内没有牌，则改为令其弃置两张<span style='color: #FF00FF'>手牌</span>且你摸2-X张牌(X为其弃置牌的数量)。",
					snjs_boss_tianshubaiqiwuan:"武安",
					"snjs_boss_tianshubaiqiwuan_info":"<span style='color: #40E0D0'>锁定技</span>，每回合限一次，你使用【杀】造成<span style='color: #FF7D40'>伤害</span>时，你摸两张牌且此<span style='color: #FF7D40'>伤害</span>+1。",
					snjs_boss_tianshubaiqishashen:"杀神",
					"snjs_boss_tianshubaiqishashen_info":"你可以将任意一张<span style='color: #FF00FF'>手牌</span>当作【杀】使用或打出。",
					snjs_boss_tianshubaiqichangsheng:"长胜",
					"snjs_boss_tianshubaiqichangsheng_info":"<span style='color: #40E0D0'>锁定技</span>，你使用牌且无视<span style='color: #DA70D6'>防具</span>，你使用【杀】的<span style='color: #FFFF00'>次数</span>+2且无<span style='color: #FFFF00'>距离</span>限制。",
					snjs_boss_tianshutaoshennutao:"怒涛",
					"snjs_boss_tianshutaoshennutao_info":"<span style='color: #40E0D0'>锁定技</span>，<span style='color: #E3CF57'>回合开始</span>时，随机对一名<span style='color: #FF0000'>敌方</span>角色造成1点<span style='color: #0000FF'>雷电</span><span style='color: #FF7D40'>伤害</span>。",
					snjs_boss_tianshutaoshenxiongzi:"雄姿",
					"snjs_boss_tianshutaoshenxiongzi_info":"<span style='color: #40E0D0'>锁定技</span>：①<span style='color: #E3CF57'>摸牌阶段</span>开始时，你从牌堆中获得一张【杀】和一张【闪】；②你的<span style='color: #FFC0CB'>手牌上限</span>等于你的<span style='color: #00C78C'>体力上限</span>。",
					snjs_boss_tianshutaoshenlongdan:"龙胆",
					"snjs_boss_tianshutaoshenlongdan_info":"你可以将一张【杀】当【闪】、【闪】当【杀】使用或打出。",
					snjs_boss_tianshutaoshenwushuang:"无双",
					"snjs_boss_tianshutaoshenwushuang_info":"<span style='color: #40E0D0'>锁定技</span>：①当你使用【杀】指定一个目标后，该角色需依次使用两张【闪】才能抵消此【杀】；②当你使用【决斗】指定一个目标后，或成为一名角色使用【决斗】的目标后，该角色每次响应此【决斗】需依次打出两张【杀】。",
					snjs_boss_tianshutaoshenpaoxiao:"咆哮",
					"snjs_boss_tianshutaoshenpaoxiao_info":"<span style='color: #40E0D0'>锁定技</span>，<span style='color: #E3CF57'>出牌阶段</span>，你使用【杀】没有<span style='color: #FFFF00'>次数</span>限制，若你于回合内使用过【杀】，则你本回合使用【杀】没有<span style='color: #FFFF00'>距离</span>限制。",
					snjs_boss_tianshucaoeshoujiang:"守江",
					"snjs_boss_tianshucaoeshoujiang_info":"<span style='color: #40E0D0'>锁定技</span>，每回合限一次，当你受到大于1的<span style='color: #FF7D40'>伤害</span>时，你摸X-1张牌(X为<span style='color: #FF7D40'>伤害量</span>)，然后防止大于1的那部分<span style='color: #FF7D40'>伤害</span>。",
					snjs_boss_tianshucaoeluoshen:"洛神",
					"snjs_boss_tianshucaoeluoshen_info":"<span style='color: #E3CF57'>准备阶段</span>开始时，你可以进行<span style='color: #03A89E'>判定</span>，当<span style='color: #666666'>黑色</span><span style='color: #03A89E'>判定牌</span>生效后，你获得之。若结果为<span style='color: #666666'>黑色</span>，你可以重复此流程直到出现<span style='color: #FF0000'>红色</span>的<span style='color: #03A89E'>判定</span>结果。你通过〖洛神〗获得的牌，不计入当前回合的<span style='color: #FFC0CB'>手牌上限</span>。",
					snjs_boss_tianshucaoebiyue:"闭月",
					"snjs_boss_tianshucaoebiyue_info":"<span style='color: #E3CF57'>结束阶段</span>，你可以摸一张牌。若你没有<span style='color: #FF00FF'>手牌</span>，则改为摸两张牌。",
					snjs_boss_tianshucaoeguose:"国色",
					"snjs_boss_tianshucaoeguose_info":"<span style='color: #E3CF57'>出牌阶段</span>限一次，你选择一项，然后摸一张牌：①将一张<span style='color: #FF0000'>♦</span>牌当【乐不思蜀】使用；②弃置一张<span style='color: #FF0000'>♦</span>牌并弃置场上的一张【乐不思蜀】。",
					snjs_boss_tianshucaoejizhi:"集智",
					"snjs_boss_tianshucaoejizhi_info":"当你使用非转化的<span style='color: #FCE6C9'>锦囊牌</span>时，你可以摸一张牌。",
					snjs_boss_tianshushaohaoshenen:"神恩",
					"snjs_boss_tianshushaohaoshenen_info":"<span style='color: #40E0D0'>锁定技</span>，所有<span style='color: #00FA9A'>己方</span>角色<span style='color: #FFC0CB'>手牌上限</span>+1且使用牌没有<span style='color: #FFFF00'>距离</span>限制，所有<span style='color: #FF0000'>敌方</span>角色<span style='color: #E3CF57'>摸牌阶段</span>少摸一张牌。",
					snjs_boss_tianshushaohaobaiyi:"白仪",
					"snjs_boss_tianshushaohaobaiyi_info":"<span style='color: #40E0D0'>锁定技</span>：①所有<span style='color: #00FA9A'>己方</span>角色受到<span style='color: #0000FF'>雷电</span><span style='color: #FF7D40'>伤害</span>时，防止该<span style='color: #FF7D40'>伤害</span>；②<span style='color: #E3CF57'>准备阶段</span>，若游戏轮数为5的倍数，你对所有<span style='color: #FF0000'>敌方</span>角色造成2点<span style='color: #0000FF'>雷电</span><span style='color: #FF7D40'>伤害</span>。",
					snjs_boss_tianshuhanbafenshi:"焚世",
					"snjs_boss_tianshuhanbafenshi_info":"<span style='color: #40E0D0'>锁定技</span>，<span style='color: #E3CF57'>准备阶段</span>，若你的<span style='color: #FF00FF'>手牌数</span>小于<span style='color: #00FF00'>体力值</span>，则将<span style='color: #FF00FF'>手牌</span>摸至与<span style='color: #00FF00'>体力值</span>相等；若你的<span style='color: #FF00FF'>手牌数</span>大于<span style='color: #00FF00'>体力值</span>，则你随机对X名<span style='color: #FF0000'>敌方</span>角色造成1点<span style='color: #FF8000'>火焰</span><span style='color: #FF7D40'>伤害</span>(X为你的<span style='color: #FF00FF'>手牌数</span>-<span style='color: #00FF00'>体力值</span>)。",
					snjs_boss_tianshuhanbazhiri:"炙日",
					"snjs_boss_tianshuhanbazhiri_info":"<span style='color: #40E0D0'>锁定技</span>，任意角色使用<span style='color: #FF0000'>红色</span><span style='color: #FCE6C9'>锦囊牌</span>时，你摸三张牌。",
					snjs_boss_tianshuhanbaxinji:"心悸",
					"snjs_boss_tianshuhanbaxinji_info":"<span style='color: #40E0D0'>锁定技</span>，当你于<span style='color: #FF0000'>敌方</span>角色的回合因弃置而<span style='color: #BC8F8F'>失去</span><span style='color: #FF00FF'>手牌</span>时，你对当前回合角色造成1点<span style='color: #FF7D40'>伤害</span>。",
					snjs_boss_tianshushenqu:"神躯",
					"snjs_boss_tianshushenqu_info":"<span style='color: #40E0D0'>锁定技</span>，每当你受到1点<span style='color: #FF7D40'>伤害</span>后，从牌堆底进行一次<span style='color: #03A89E'>判定</span>：若<span style='color: #03A89E'>判定</span>结果为<span style='color: #FF0000'>红色</span>，你摸一张牌，若<span style='color: #FF7F50'>伤害来源</span>是<span style='color: #FF0000'>敌方</span>角色，则<span style='color: #FF7F50'>伤害来源</span>弃置一张牌。",
					snjs_boss_tianshuxuannvdishi:"帝师",
					"snjs_boss_tianshuxuannvdishi_info":"当你使用【杀】或<span style='color: #FCE6C9'>锦囊牌</span>时，如果目标数[为一/大于一]，你可以为此牌[增加/减少]一个目标。",
					snjs_boss_tianshuxuannvjiutian:"九天",
					"snjs_boss_tianshuxuannvjiutian_info":"<span style='color: #40E0D0'>锁定技</span>，<span style='color: #E3CF57'>准备阶段</span>，你获得所有<span style='color: #FF00FF'>手牌</span>中有超过两种不同花色的<span style='color: #FF0000'>敌方</span>角色的一张<span style='color: #FF00FF'>手牌</span>，然后若你本次以此法所获得牌的花色均不同，则对本次所有被获得牌的<span style='color: #FF0000'>敌方</span>角色造成1点<span style='color: #FF7D40'>伤害</span>。",
					snjs_boss_tianshuxuannvxuanlie:"玄烈",
					"snjs_boss_tianshuxuannvxuanlie_info":"<span style='color: #40E0D0'>锁定技</span>，<span style='color: #E3CF57'>结束阶段</span>时，对所有本回合被你获得过牌的<span style='color: #FF0000'>敌方</span>角色造成1点<span style='color: #FF7D40'>伤害</span>。",
					snjs_boss_tianshukuafuzhuri:"逐日",
					"snjs_boss_tianshukuafuzhuri_info":"<span style='color: #40E0D0'>锁定技</span>，<span style='color: #E3CF57'>准备阶段</span>，你进行一次<span style='color: #03A89E'>判定</span>：①若<span style='color: #03A89E'>判定</span>结果为<span style='color: #FF0000'>红色</span>，本回合你使用<span style='color: #FF0000'>红色</span>牌结算后将该牌置于牌堆底；②若<span style='color: #03A89E'>判定</span>结果为<span style='color: #666666'>黑色</span>，本回合你使用<span style='color: #666666'>黑色</span>牌时，你摸一张牌。",
					snjs_boss_tianshukuafuyinjiang:"饮江",
					"snjs_boss_tianshukuafuyinjiang_info":"<span style='color: #40E0D0'>锁定技</span>，当你于<span style='color: #E3CF57'>出牌阶段</span>摸牌后，从牌堆底展示并获得一张牌，若为<span style='color: #FF0000'>红色</span>，则你随机对一名<span style='color: #FF0000'>敌方</span>角色造成1点<span style='color: #FF7D40'>伤害</span>。",
					snjs_boss_tianshukuafulieben:"烈奔",
					"snjs_boss_tianshukuafulieben_info":"<span style='color: #40E0D0'>锁定技</span>，当你使用【杀】指定目标后，使用牌堆底的牌进行一次<span style='color: #03A89E'>判定</span>：若<span style='color: #03A89E'>判定</span>结果为<span style='color: #FF0000'>红色</span>，则此【杀】不计入使用<span style='color: #FFFF00'>次数</span>且<span style='color: #FF7D40'>伤害</span>+1。",
					snjs_boss_tianshu_intro1:'&nbsp;第一关',
					snjs_boss_tianshu_intro1_info:'随机两名本扩展低强度武将（体力及体力上限+2）',
					snjs_boss_tianshu_intro2:'&nbsp;第二关',
					snjs_boss_tianshu_intro2_info:'神关羽、神吕蒙、神周瑜、神诸葛亮、神曹操、神吕布、神司马懿、神赵云、神刘备、神陆逊、十二生肖<br>随机之二（神将体力及体力上限+2）',
					snjs_boss_tianshu_intro3:'&nbsp;第三关',
					snjs_boss_tianshu_intro3_info:'青龙、白虎、朱雀、玄武、孟婆、黑无常、白无常、牛头、马面、豹尾、鱼鳃、黄蜂、鸟嘴、各夕兽<br>随机之二',
					snjs_boss_tianshu_intro4:'&nbsp;第四关',
					snjs_boss_tianshu_intro4_info:'各年兽、囚牛、睚眦、嘲风、蒲牢、狻猊、赑屃、狴犴、负屃、螭吻、白起、火神祝融、水神共工<br>随机之二',
					snjs_boss_tianshu_intro5:'&nbsp;第五关',
					snjs_boss_tianshu_intro5_info:'阎罗王、涛神、曹娥、少昊、旱魃、玄女<br>随机之二',
					snjs_boss_tianshu_intro5_append:'①击杀敌方角色的玩家：受伤，回复1点体力，未受伤，摸两张牌 ②过关时所有非助战角色的玩家可以从三个技能中选择并获得一个技能，然后清零游戏轮数，当前回合的角色取消接下来的所有阶段，直接开始下家的回合',
					
					snjs_tianshuluandou_tiaoxin:"挑衅",
					"snjs_tianshuluandou_tiaoxin_info":"<span style='color: #E3CF57'>出牌阶段</span>限一次，你可以令一名其他角色对你使用一张合法的【杀】，除非此【杀】对你造成<span style='color: #FF7D40'>伤害</span>，否则你弃置其一张牌，然后将此技能于此<span style='color: #E3CF57'>出牌阶段</span>内修改为<span style='color: #E3CF57'>出牌阶段</span>限两次。",
					snjs_tianshuluandou_jiuchi:"酒池",
					"snjs_tianshuluandou_jiuchi_info":"你可以将一张<span style='color: #666666'>♠</span><span style='color: #FF00FF'>手牌</span>当做【酒】使用。<span style='color: #40E0D0'>锁定技</span>，你使用【酒】无<span style='color: #FFFF00'>次数</span>限制。",
					snjs_tianshuluandou_quhu:"驱虎",
					"snjs_tianshuluandou_quhu_info":"<span style='color: #E3CF57'>出牌阶段</span>限一次，你可以与一名其他角色<span style='color: #228B22'>拼点</span>，若你赢，则该角色对其<span style='color: #C76114'>攻击范围</span>内另一名由你指定的角色造成1点<span style='color: #FF7D40'>伤害</span>。若你没赢，该角色对你造成1点<span style='color: #FF7D40'>伤害</span>。",
					snjs_tianshuluandou_pojun:"破军",
					"snjs_tianshuluandou_pojun_info":"当你使用【杀】指定目标后，你可以将其的至多X张牌置于其武将牌上(X为其体力值)。若这些牌中：①有<span style='color: #DA70D6'>装备牌</span>，你将这些<span style='color: #DA70D6'>装备牌</span>中的一张置于弃牌堆；②有<span style='color: #FCE6C9'>锦囊牌</span>，你摸一张牌。其于<span style='color: #E3CF57'>回合结束</span>时获得其武将牌上的这些牌。当你的【杀】造成<span style='color: #FF7D40'>伤害</span>时，若目标的<span style='color: #FF00FF'>手牌数</span>和<span style='color: #9933FA'>装备区</span>内牌的数量均不大于你，则此<span style='color: #FF7D40'>伤害</span>+1。",
					snjs_tianshuluandou_xingri:"星日",
					"snjs_tianshuluandou_xingri_info":"<span style='color: #40E0D0'>锁定技</span>，你造成的<span style='color: #FF7D40'>伤害</span>均视为<span style='color: #FF8000'>火焰</span><span style='color: #FF7D40'>伤害</span>，当你造成<span style='color: #FF8000'>火焰</span><span style='color: #FF7D40'>伤害</span>时，你摸一张牌。",
					snjs_tianshuluandou_kuimu:"奎木",
					"snjs_tianshuluandou_kuimu_info":"<span style='color: #40E0D0'>锁定技</span>，你使用【杀】造成<span style='color: #FF7D40'>伤害</span>后，你对所有<span style='color: #FF0000'>敌方</span>角色造成1点<span style='color: #FF7D40'>伤害</span>。",
					snjs_tianshuluandou_nutao:"怒涛",
					"snjs_tianshuluandou_nutao_info":"<span style='color: #40E0D0'>锁定技</span>，<span style='color: #E3CF57'>准备阶段</span>，对所有<span style='color: #FF0000'>敌方</span>角色造成1点<span style='color: #0000FF'>雷电</span><span style='color: #FF7D40'>伤害</span>。",
					snjs_tianshuluandou_yujian:"玉剑",
					"snjs_tianshuluandou_yujian_info":"<span style='color: #40E0D0'>锁定技</span>，你使用【杀】造成的<span style='color: #FF7D40'>伤害</span>+1。",
					snjs_tianshuluandou_kangjin:"亢金",
					"snjs_tianshuluandou_kangjin_info":"<span style='color: #40E0D0'>锁定技</span>，当你成为<span style='color: #FCE6C9'>锦囊牌</span>的目标后，所有<span style='color: #00FA9A'>己方</span>角色摸一张牌。",
					snjs_tianshuluandou_yihuo:"翼火",
					"snjs_tianshuluandou_yihuo_info":"<span style='color: #40E0D0'>锁定技</span>，你造成的<span style='color: #FF7D40'>伤害</span>均视为<span style='color: #FF8000'>火焰</span><span style='color: #FF7D40'>伤害</span>，当你对<span style='color: #FF0000'>敌方</span>角色造成<span style='color: #FF8000'>火焰</span><span style='color: #FF7D40'>伤害</span>后，所有<span style='color: #FF0000'>敌方</span>角色随机弃置一张牌。",
					snjs_tianshuluandou_yehuo:"业火",
					"snjs_tianshuluandou_yehuo_info":"<span style='color: #E3CF57'>结束阶段</span>，你可以对一名<span style='color: #FF0000'>敌方</span>角色造成2点<span style='color: #FF8000'>火焰</span><span style='color: #FF7D40'>伤害</span>。",
					snjs_tianshuluandou_jinniu:"金牛",
					"snjs_tianshuluandou_jinniu_info":"<span style='color: #40E0D0'>锁定技</span>，<span style='color: #E3CF57'>结束阶段</span>，你<span style='color: #00FF00'>回复</span>1点<span style='color: #00FF00'>体力</span>并摸两张牌。",
					snjs_tianshuluandou_jiaomu:"角木",
					"snjs_tianshuluandou_jiaomu_info":"<span style='color: #40E0D0'>锁定技</span>，每当你使用<span style='color: #FCE6C9'>锦囊牌</span>时，所有<span style='color: #00FA9A'>己方</span>角色摸一张牌。",
					snjs_tianshuluandou_canshui:"参水",
					"snjs_tianshuluandou_canshui_info":"<span style='color: #40E0D0'>锁定技</span>，每当你使用【杀】造成<span style='color: #FF7D40'>伤害</span>后，所有<span style='color: #00FA9A'>己方</span>角色<span style='color: #00FF00'>回复</span>1点<span style='color: #00FF00'>体力</span>。",
					snjs_tianshuluandou_weiyue:"危月",
					"snjs_tianshuluandou_weiyue_info":"每回合限一次，当你在<span style='color: #E3CF57'>摸牌阶段</span>外获得牌或<span style='color: #BC8F8F'>失去</span><span style='color: #FF00FF'>手牌</span>后，可以对一名<span style='color: #FF0000'>敌方</span>角色造成1点<span style='color: #FF7D40'>伤害</span>。",
					snjs_tianshuluandou_doumu:"斗木",
					"snjs_tianshuluandou_doumu_info":"每回合限一次，当你在<span style='color: #E3CF57'>摸牌阶段</span>外获得牌或<span style='color: #BC8F8F'>失去</span><span style='color: #FF00FF'>手牌</span>后，可以令一名<span style='color: #FF0000'>敌方</span>角色随机弃置一张牌，然后视为你对其使用一张【绝斗】。",
					
					snjs_boss_baizhan_intro1:'&nbsp;个位数字为1、6的关卡',
					snjs_boss_baizhan_intro1_info:'随机两名本扩展低强度武将（体力及体力上限+2）',
					snjs_boss_baizhan_intro2:'&nbsp;个位数字为2、7的关卡',
					snjs_boss_baizhan_intro2_info:'神关羽、神吕蒙、神周瑜、神诸葛亮、神曹操、神吕布、神司马懿、神赵云、神刘备、神陆逊、十二生肖<br>随机之二（神将体力及体力上限+2）',
					snjs_boss_baizhan_intro3:'&nbsp;个位数字为3、8的关卡',
					snjs_boss_baizhan_intro3_info:'青龙、白虎、朱雀、玄武、孟婆、黑无常、白无常、牛头、马面、豹尾、鱼鳃、黄蜂、鸟嘴、各年兽夕兽<br>随机之二',
					snjs_boss_baizhan_intro4:'&nbsp;个位数字为4、9的关卡',
					snjs_boss_baizhan_intro4_info:'黑无常白无常、牛头马面、日游神夜游神、各融合年兽、囚牛、睚眦、嘲风、蒲牢、狻猊、赑屃、狴犴、负屃、螭吻、白起、火神祝融、水神共工<br>随机之二',
					snjs_boss_baizhan_intro5:'&nbsp;个位数字为5、0的关卡',
					snjs_boss_baizhan_intro5_info:'阎罗王、涛神、曹娥、少昊、旱魃、玄女、夸父<br>随机之二',
					snjs_boss_baizhan_intro5_append:'①击杀敌方角色的玩家：受伤，回复1点体力，未受伤，摸两张牌 ②过关时清零游戏轮数，当前回合的角色取消接下来的所有阶段，直接开始下家的回合，前五关过关时所有非助战角色的玩家可以从三个技能中选择并获得一个技能，此后过Boss关时获得一次技能(*注：选择获得主动技能会替换掉以此法获得的上一个主动技能) ③每过十关可以结束挑战也可以继续挑战，至多挑战一百关 ④从第十一关开始敌方角色随关卡递增会有增强的效果。(每十关内的具体叠加强化效果：1.体力和体力上限增加1点；2.回合开始时摸1张牌；3.体力和体力上限增加1点；4.回合结束时摸1张牌；5.回合开始时回复1点体力；6.体力和体力上限增加1点；7.回合开始时摸1张牌；8.体力和体力上限增加1点；9.回合结束时摸1张牌；10.造成伤害时，伤害值+1)',
				},
				perfectPair:{
					"snjs_re_shen_caocao":["xuzhu","dianwei","bianfuren","snjs_dianweicaoang"],
					"snjs_sp_liubei":["sunshangxiang","snjs_shen_sunshangxiang"],
					"snjs_re_shen_zhugeliang":["jiangwei","jiangfei","huangyueying"],
					"snjs_re_shen_liubei":["snjs_re_shen_guanyu","snjs_sp_shen_guanyu","snjs_shen_zhangfei","guanyu","zhangfei","ganfuren","snjs_al_guanyu","snjs_ex_guanyu","snjs_guanyuzhangfei","snjs_ex_zhangfei"],
					"snjs_re_shen_guanyu":["snjs_shen_zhangfei","zhangfei","liubei","hujinding","snjs_ex_zhangfei","snjs_ex_liubei"],
					"snjs_sp_shen_guanyu":["snjs_shen_zhangfei","zhangfei","liubei","hujinding","snjs_ex_zhangfei","snjs_ex_liubei"],
					"snjs_re_shen_zhangfei":["snjs_ex_guanyu","guanyu","snjs_al_guanyu","liubei","xiahoushi","snjs_ex_liubei"],
					"snjs_re_shen_zhaoyun":["liushan"],
					"snjs_re_shen_zhouyu":["snjs_sp_shen_sunce","sunce","huanggai","xiaoqiao"],
					"snjs_re_shen_lvbu":["diaochan","chengong"],
					"snjs_sp_lvbu":["diaochan","chengong"],
					"snjs_shen_machao":["madai","mayunlu"],
					"snjs_re_shen_zhangliao":["zangba"],
					"snjs_re_shen_ganning":["lingtong"],
					"snjs_sp_sunyi":["xushi"],
					"snjs_sunyu":["sunquan","zhouyu"],
					"snjs_re_dingfeng":["xusheng"],
					"snjs_shen_caozhi":["zhenji","caopi"],
					"snjs_baoxin":["caocao"],
					"snjs_caohua":["snjs_caoxian"],
					"snjs_gaoxiang":["snjs_wuban","weiyan"],
					"snjs_sp_lvlingqi":["lvbu","zhangliao","lingju"],
					"snjs_shen_weiyan":["huangzhong"],
					"snjs_shen_sunquan":["zhoutai"],
					"snjs_shen_zhoutai":["sunquan","jiangqing"],
					"snjs_shen_xuchu":["caocao"],
					"snjs_zhaoang":["wangyi"],
					"snjs_shen_dianwei":["caocao","caoang","snjs_re_shen_caocao","snjs_re_caoang"],
					"snjs_shen_caoren":["caohong"],
					"snjs_al_guanyu":["liubei","zhangfei","guanyinping","guansuo","hujinding","guanping","snjs_guanyuzhangfei","snjs_ex_liubei"],
					"snjs_caoyuee":["guanyu"],
					"snjs_sp_zhangxiu":["jiaxu","snjs_shen_jiaxu"],
					"snjs_shen_zhangxiu":["jiaxu","snjs_shen_jiaxu"],
					"snjs_shen_jiaxu":["zhangxiu","snjs_shen_zhangxiu"],
					"snjs_ju_sunquan":["zhoutai","sunce"],
					"snjs_shen_yuanshao":["yanwen","tianfeng","snjs_wenchou","snjs_yanliang"],
					"snjs_yanliang":["yanwen","yuanshao","snjs_wenchou"],
					"snjs_wenchou":["yanwen","yuanshao","snjs_yanliang"],
					"snjs_zhanghong":["zhangzhang","sunce","sunquan","snjs_shen_cunce","snjs_shen_sunquan","snjs_ju_sunquan"],
					"snjs_guanyuzhangfei":["liubei","guanyu","zhangfei","snjs_re_shen_guanyu","snjs_sp_shen_guanyu","snjs_shen_zhangfei","snjs_ex_liubei"],
					"snjs_ex_machao":["madai","mayunlu","yangwan"],
					"snjs_ex_huanggai":["zhouyu",'snjs_ex_zhouyu','snjs_re_shen_zhouyu'],
					"snjs_ex_zhangliao":['zangba'],
					"snjs_ex_sunce":['zhouyu','taishici','daqiao','snjs_re_shen_zhouyu'],
					"snjs_ex_sunjian":['wuguotai'],
					"snjs_ex_ganning":['lingtong'],
					"snjs_ex_zhouyu":['xiaoqiao','sunce','snjs_ex_sunce','snjs_sp_shen_sunce'],
					"snjs_ex_huangzhong":['weiyan','snjs_shen_weiyan'],
					"snjs_ex_guanyu":["liubei","zhangfei","guanyinping","guansuo","hujinding","guanping","snjs_guanyuzhangfei","snjs_ex_liubei"],
					"snjs_ex_zhangfei":["snjs_ex_guanyu","guanyu","snjs_al_guanyu","liubei","xiahoushi","snjs_ex_liubei"],
					"snjs_ex_zhaoyun":["liushan"],
					"snjs_ex_liubei":["snjs_re_shen_guanyu","snjs_sp_shen_guanyu","snjs_shen_zhangfei","guanyu","zhangfei","ganfuren","snjs_al_guanyu","snjs_ex_guanyu","snjs_guanyuzhangfei","snjs_ex_zhangfei"],
					"snjs_ex_simayi":["zhangchunhua"],
					"snjs_ex_xuchu":["caocao","snjs_re_shen_caocao"],
					"snjs_ex_xiahoudun":['xiahouyuan'],
					"snjs_ex_dianwei":["snjs_re_shen_caocao","caocao","caoang","snjs_re_caoang"],
					"snjs_re_chengong":['lvbu','snjs_sp_lvbu','snjs_re_shen_lvbu','snjs_ex_lvbu'],
					"snjs_ex_lvbu":["diaochan","chengong"],
					"snjs_re_mayunlu":['machao','madai','mateng','snjs_ex_machao','snjs_ex_zhaoyun','snjs_ex_madai','snjs_re_shen_zhaoyun','snjs_shen_machao'],
					"snjs_ex_madai":['machao','mateng','snjs_ex_machao','snjs_shen_machao'],
					"snjs_re_caoang":['caocao','snjs_ex_caocao','snjs_re_shen_caocao','dianwei','snjs_ex_dianwei','snjs_shen_dianwei'],
					"snjs_ex_sunquan":["zhoutai","snjs_shen_zhoutai","snjs_zhonghong","zhangzhang"],
					"snjs_ex_caocao":["xuzhu","dianwei","bianfuren","snjs_dianweicaoang","snjs_ex_dianwei","snjs_shen_dianwei","snjs_shen_xuchu","snje_ex_xuchu"],
					"snjs_jibu":["caopi","zhangchunhua"],
					"snjs_ex_zhenji":["caopi"],
					"snjs_ex_zhugeliang":["jiangwei","jiangfei","huangyueying"],
					"snjs_wangtao":["snjs_wangyue"],
					"snjs_wangyue":["snjs_wangtao","guansuo"],
					"snjs_xiaosha":["snjs_xiaoshan","snjs_xiaojiu","snjs_xiaotao","snjs_xiaole"],
					"snjs_xiaoshan":["snjs_xiaosha","snjs_xiaojiu","snjs_xiaotao","snjs_xiaole"],
					"snjs_xiaojiu":["snjs_xiaosha","snjs_xiaoshan","snjs_xiaotao","snjs_xiaole"],
					"snjs_xiaotao":["snjs_xiaosha","snjs_xiaoshan","snjs_xiaojiu","snjs_xiaole"],
					"snjs_xiaole":["snjs_xiaosha","snjs_xiaoshan","snjs_xiaojiu","snjs_xiaotao"],
				},
				characterReplace:{
					dingfeng:['dingfeng','snjs_re_dingfeng'],
					shen_caocao:['shen_caocao','snjs_re_shen_caocao'],
					shen_ganning:['shen_ganning','snjs_re_shen_ganning'],
					shen_guanyu:['shen_guanyu','snjs_re_shen_guanyu','snjs_sp_shen_guanyu'],
					shen_luxun:['shen_luxun','snjs_re_shen_luxun'],
					shen_lvbu:['shen_lvbu','snjs_re_shen_lvbu','mini_lvbu'],
					shen_lvmeng:['shen_lvmeng','snjs_re_shen_lvmeng'],
					shen_simayi:['shen_simayi','snjs_re_shen_simayi'],
					shen_zhangliao:['shen_zhangliao','snjs_re_shen_zhangliao','ol_zhangliao'],
					shen_zhaoyun:['shen_zhaoyun','snjs_re_shen_zhaoyun'],
					shen_zhouyu:['shen_zhouyu','snjs_re_shen_zhouyu'],
					shen_zhugeliang:['shen_zhugeliang','snjs_re_shen_zhugeliang','mini_zhugeliang'],
					liubei:['liubei','re_liubei','sp_liubei','snjs_sp_liubei','snjs_ex_liubei'],
					lvbu:['lvbu','re_lvbu','snjs_sp_lvbu','snjs_ex_lvbu'],
					xujing:['xujing','snjs_sp_xvjing'],
					zhangjiao:['zhangjiao','re_zhangjiao','sp_zhangjiao','snjs_sp_zhangjiao'],
					zhangrang:['zhangrang','snjs_sp_zhangrang'],
					zhoufei:['zhoufei','snjs_sp_zhouche'],
					sp_chenzhen:['sp_chenzhen','snjs_sp_chenzhen'],
					fanyufeng:['fanyufeng','snjs_sp_fanyufeng'],
					zhaozhong:['zhaozhong','snjs_sp_zhaozhong'],
					shen_guojia:['shen_guojia','snjs_sp_shen_guojia'],
					guanyu:['re_guanyu','guanyu','snjs_al_guanyu','snjs_ex_guanyu','jsp_guanyu'],
					zhangxiu:['zhangxiu','snjs_sp_zhangxiu'],
					snjs_chenqian:['snjs_chenqian','snjs_al_chenqian'],
					sunquan:['sunquan','re_sunquan','sp_sunquan','snjs_ju_sunquan'],
					dongbai:['dongbai','snjs_sp_dongbai'],
					machao:['machao','re_machao','sp_machao','snjs_ex_machao'],
					sp_machao:['sp_machao','machao','re_machao','snjs_ex_machao'],
					guojia:['guojia','re_guojia','snjs_ex_guojia'],
					huanggai:['huanggai','re_huanggai','snjs_ex_huanggai'],
					zhangliao:['zhangliao','re_zhangliao','snjs_ex_zhangliao'],
					sunce:['sunce','re_sunce','re_sunben','snjs_ex_sunce'],
					sunjian:['sunjian','re_sunjian','ol_sunjian','snjs_ex_sunjian'],
					ganning:['ganning','re_ganning','snjs_ex_ganning'],
					zhouyu:['zhouyu','re_zhouyu','snjs_ex_zhouyu'],
					luxun:['luxun','re_luxun','snjs_ex_luxun'],
					huangzhong:['huangzhong','re_huangzhong','snjs_ex_huangzhong'],
					zhangfei:['zhangfei','re_zhangfei','xin_zhangfei','old_zhangfei','snjs_ex_zhangfei'],
					zhaoyun:['zhaoyun','re_zhaoyun','snjs_ex_zhaoyun','old_zhaoyun','sp_zhaoyun','jsp_zhaoyun'],
					simayi:['simayi','re_simayi','snjs_ex_simayi'],
					xuzhu:['xuzhu','re_xuzhu','snjs_ex_xuchu'],
					xiahoudun:['xiahoudun','re_xiahoudun','xin_xiahoudun','snjs_ex_xiahoudun'],
					dianwei:['dianwei','re_dianwei','snjs_ex_dianwei'],
					gaoshun:['gaoshun','re_gaoshun','snjs_ex_gaoshun'],
					huaxiong:['huaxiong','re_huaxiong','old_huaxiong','ol_huaxiong','snjs_ex_huaxiong'],
					chengong:['chengong','snjs_re_chengong'],
					beimihu:['beimihu','snjs_re_beimihu'],
					sp_yanghu:['sp_yanghu','snjs_sp_yanghu'],
					lusu:['lusu','re_lusu','ol_lusu','snjs_sp_lusu'],
					zumao:['zumao','snjs_sp_zumao','tw_zumao'],
					mayunlu:['mayunlu','snjs_re_mayunlu'],
					madai:['old_madai','madai','snjs_ex_madai'],
					mizhu:['mizhu','snjs_sp_mizhu'],
					caochong:['caochong','old_caochong','snjs_re_caochong'],
					caoang:['caoang','snjs_re_caoang','yj_caoang','tw_caoang'],
					xushao:['xushao','snjs_sp_xushao'],
					sunquan:['re_sunquan','snjs_ex_sunquan','sunquan'],
					caocao:['re_caocao','caocao','snjs_ex_caocao'],
					shen_sunce:['shen_sunce','snjs_sp_shen_sunce'],
					zhangning:['zhangning','snjs_sp_zhangning'],
					lvlingqi:['lvlingqi','snjs_sp_lvlingqi'],
					xunyu:['re_xunyu','xunyu','snjs_sp_xunyu'],
					zhenji:['re_zhenji','zhenji','snjs_ex_zhenji'],
					zhugeliang:['re_zhugeliang','zhugeliang','snjs_ex_zhugeliang'],
					sunshangxiang:['re_sunshangxiang','sunshangxiang','snjs_ex_sunshangxiang'],
					sunyi:['sunyi','snjs_sp_sunyi'],
					hanfu:['hanfu','snjs_sp_hanfu'],
				},
				card:{
					snjs_card_fangong:{
						image:"ext:神怒降世/snjs_card_fangong.png",
						fullskin:true,
						type:'trick',
						wuxieable:true,
						global:['snjs_card_fangong_skill','snjs_card_skill'],
						notarget:true,
						derivation:'snjs_sp_yanghu',
						content:function(){
							'step 0'
							event.ren=player.storage.snjs_card_fangong_skill;
							delete player.storage.snjs_card_fangong_skill;
							'step 1'
							if(!event.ren.isAlive()) event.finish();
							event.evt2=event.getParent(3)._trigger;
							'step 2'
							event.ren.chooseControl('令'+get.translation(event.evt2)+'对'+get.translation(player)+'生效','令'+get.translation(event.evt2)+'对'+get.translation(player)+'失效').set('ai',function(target){
								if(get.attitude(event.ren,player)>0||(event.ren.countCards('he')<2&&event.ren.hp<2)) return '令'+get.translation(event.evt2)+'对'+get.translation(player)+'失效';
								return '令'+get.translation(event.evt2)+'对'+get.translation(player)+'生效';
							});
							'step 3'
							if(result.control=='令'+get.translation(event.evt2)+'对'+get.translation(player)+'生效'){
								if(event.ren.countCards('he')>=2) event.ren.chooseToDiscard('弃置两张牌或受到1点伤害',2,'he').set('ai',function(card){
									if(event.ren.needsToDiscard()) return 8-get.value(card);
									return false;
								});
								else{
									event.ren.damage();
									event.finish();
								}
							}
							else{
								event.evt2.cancel();
								event.evt=event.evt2.getParent();
								event.finish();
							}
							'step 4'
							if(result&&result.bool&&player.isAlive()){
								event.finish();
							}
							else event.ren.damage();
						},
						ai:{
							loseCard:1,
							discard:1,
							damage:0.5,
							basic:{
								useful:8,
								value:8,
							},
							result:{player:1},
						},
					},
					snjs_card_yexi:{
						image:"ext:神怒降世/snjs_card_yexi.png",
						fullskin:true,
						type:'trick',
						enable:true,
						global:['snjs_card_skill'],
						derivation:'snjs_sp_yanghu',
						selectTarget:1,
						filterTarget:function(card,player,target){
							if(player==target) return false;
							return target.countCards('he');
						},
						content:function(){
							'step 0'
							target.chooseControl('保留黑色','保留红色').set('prompt','选择保留一种颜色的牌，并弃置所有另一种颜色的牌').set('ai',function(){
								if(get.value(target.getCards('he',{color:'red'}))>get.value(target.getCards('he',{color:'black'}))) return '保留红色';
								return '保留黑色';
							});
							'step 1'
							if(result.control=='保留黑色') target.discard(target.getCards('he',{color:'red'}));
							else target.discard(target.getCards('he',{color:'black'}));
						},
						ai:{
							basic:{
								order:20,
								useful:8,
								value:8,
							},
							result:{
								target:function(player,target){
									if(get.attitude(player,target)<0&&target.isMaxHandcard()) return -1;
									return -target.countCards('he');
								},
							},
							tag:{
								loseCard:1,
								discard:1
							}
						}
					},
					snjs_card_weicheng:{
						image:"ext:神怒降世/snjs_card_weicheng.png",
						fullskin:true,
						type:'trick',
						enable:true,
						global:['snjs_card_skill'],
						selectTarget:1,
						filterTarget:true,
						derivation:'snjs_sp_yanghu',
						content:function(){
							target.draw(2);
							target.turnOver();
						},
						ai:{
							basic:{
								order:1,
								useful:8,
								value:8,
							},
							result:{
								target:function(player,target){
									if(get.attitude(player,target)>0&&target.isTurnedOver()) return 1;
									if(get.attitude(player,target)<0&&!target.isTurnedOver()) return -1;
									return 0;
								},
							},
							tag:{
								draw:2,
								turnOver:1,
							}
						}
					},
					snjs_card_fubing:{
						image:"ext:神怒降世/snjs_card_fubing.png",
						fullskin:true,
						type:'trick',
						global:['snjs_card_fubing_skill','snjs_card_skill'],
						notarget:true,
						derivation:'snjs_sp_yanghu',
						content:function(){
							player.damage('nocard','nosource');
							player.draw();
						},
						ai:{
							basic:{
								useful:0,
								value:-5,
							},
							tag:{
								damage:1,
								draw:1,
							},
						},
					},
				},
				dynamicTranslate:{
					syjr:function(player){
						if(player.storage.syjr==true) return '<span style="color: #DA70D6">转换技</span>&<span style="color: #40E0D0">锁定技</span>。<span class="bluetext">阳：你视为拥有技能〖制衡〗。</span>阴：你视为拥有技能〖英姿〗。';
						return '<span style="color: #DA70D6">转换技</span>&<span style="color: #40E0D0">锁定技</span>。阳：你视为拥有技能〖制衡〗。<span class="bluetext">阴：你视为拥有技能〖英姿〗。</span>';
					},
					snjs_boss_zhuoguibwys:function(player){
						if(player.hasSkill('snjs_boss_zhuoguibanbenqubie')) return '<span style="color: #40E0D0">锁定技</span>，<span style="color: #FF0000">敌方</span>角色的<span style="color: #E3CF57">出牌阶段</span>开始时，若其<span style="color: #FF00FF">手牌数</span>大于等于其<span style="color: #00FF00">体力值</span>，你本回合不能成为【杀】的目标。';
						return '<span style="color: #40E0D0">锁定技</span>，<span style="color: #FF0000">敌方</span>角色的<span style="color: #E3CF57">出牌阶段</span>开始时，若其<span style="color: #FF00FF">手牌数</span>大于等于其<span style="color: #00FF00">体力值</span>，你本回合不能成为【杀】、【决斗】、【火攻】的目标。';
					},
					zzzrzhmm:function(player){
						var scjg='<span style="color: #FF6347">觉醒技</span>：'
						if(player.storage.zzzrzhmm_zzxag==true) scjg+='<span class="bluetext">①当你于<span style="color: #00FF00">体力值</span>/<span style="color: #9933FA">装备区</span>内的牌/<span style="color: #FF00FF">手牌数</span>为全场最少时<span style="color: #00FF00">回复</span><span style="color: #00FF00">体力</span>/使用<span style="color: #DA70D6">装备牌</span>/摸牌时，获得技能〖安国〗。</span>';
						else scjg+='①当你于<span style="color: #00FF00">体力值</span>/<span style="color: #9933FA">装备区</span>内的牌/<span style="color: #FF00FF">手牌数</span>为全场最少时<span style="color: #00FF00">回复</span><span style="color: #00FF00">体力</span>/使用<span style="color: #DA70D6">装备牌</span>/摸牌时，获得技能〖安国〗。';
						if(player.storage.zzzrzhmm_zrxds==true) scjg+='<span class="bluetext">②当你在任意回合第二次成为<span style="color: #808069">基本牌</span>或<span style="color: #FCE6C9">锦囊牌</span>的目标时，获得技能〖胆守〗。</span>';
						else scjg+='②当你在任意回合第二次成为<span style="color: #808069">基本牌</span>或<span style="color: #FCE6C9">锦囊牌</span>的目标时，获得技能〖胆守〗。';
						if(player.storage.zzzrzhmm_zhfl==true) scjg+='<span class="bluetext">③<span style="color: #E3CF57">准备阶段</span>，若你的<span style="color: #00FF00">体力值</span>、<span style="color: #9933FA">装备区</span>内的牌与<span style="color: #FF00FF">手牌数</span>之中任意一者为全场最多，获得技能〖奋励〗。</span>';
						else scjg+='③<span style="color: #E3CF57">准备阶段</span>，若你的<span style="color: #00FF00">体力值</span>、<span style="color: #9933FA">装备区</span>内的牌与<span style="color: #FF00FF">手牌数</span>之中任意一者为全场最多，获得技能〖奋励〗。';
						if(player.storage.zzzrzhmm_zhpk==true) scjg+='<span class="bluetext">④<span style="color: #E3CF57">回合结束</span>，若你本回合跳过了任意阶段，获得技能〖平寇〗。</span>';
						else scjg+='④<span style="color: #E3CF57">回合结束</span>，若你本回合跳过了任意阶段，获得技能〖平寇〗。';
						return scjg+'(每回合只能获得一个技能,获得所有技能后减少1点<span style="color: #00C78C">体力上限</span>)';
					},
					jslbln:function(player){
						if(player.storage.jslbln==true) return '<span style="color: #DA70D6">转换技</span>&<span style="color: #40E0D0">锁定技</span>。<span class="bluetext">阳：<span style="color: #E3CF57">出牌阶段</span>开始时，摸一张牌，然后本回合内你的<span style="color: #FF0000">红色</span><span style="color: #FF00FF">手牌</span>均视为<span style="color: #FF8000">火</span>【杀】且无<span style="color: #FFFF00">距离</span>限制。</span>阴：<span style="color: #E3CF57">出牌阶段</span>开始时，摸一张牌，然后本回合你的<span style="color: #FCE6C9">锦囊牌</span>均视为<span style="color: #0000FF">雷</span>【杀】且无使用<span style="color: #FFFF00">次数</span>限制。';
						return '<span style="color: #DA70D6">转换技</span>&<span style="color: #40E0D0">锁定技</span>。阳：<span style="color: #E3CF57">出牌阶段</span>开始时，摸一张牌，然后本回合内你的<span style="color: #FF0000">红色</span><span style="color: #FF00FF">手牌</span>均视为<span style="color: #FF8000">火</span>【杀】且无<span style="color: #FFFF00">距离</span>限制。<span class="bluetext">阴：<span style="color: #E3CF57">出牌阶段</span>开始时，摸一张牌，然后本回合你的<span style="color: #FCE6C9">锦囊牌</span>均视为<span style="color: #0000FF">雷</span>【杀】且无使用<span style="color: #FFFF00">次数</span>限制。</span>';
					},
					jszyjj:function(player){
						if(player.storage.jszyjj==true) return '<span style="color: #DA70D6">转换技</span>&<span style="color: #40E0D0">锁定技</span>。①<span class="bluetext">阳，回合内，拥有技能〖神威〗。</span>阴，回合外，拥有技能〖神躯〗；②你的<span style="color: #FFC0CB">手牌上限</span>+1。';
						return '<span style="color: #DA70D6">转换技</span>&<span style="color: #40E0D0">锁定技</span>。①阳，回合内，拥有技能〖神威〗。<span class="bluetext">阴，回合外，拥有技能〖神躯〗</span>；②你的<span style="color: #FFC0CB">手牌上限</span>+1。</span>';
					},
					sscyg:function(player){
						if(player.countMark('sscwl')<2) return '以你拥有的「武略」标记数量获得以下效果：<span class="bluetext">①0枚以上，每当你使用（指定目标后）或被使用（成为目标后）一张【决斗】或<span style="color: #FF0000">红色</span>的【杀】时，你可以摸一张牌；</span>②1枚以上，当你成为其他角色<span style="color: #FF0000">红牌</span>的目标时，你可以摸一张牌；③2枚以上，当你使用<span style="color: #FF0000">红牌</span>时，你可以摸一张牌。';
						else if(player.countMark('sscwl')<3) return '以你拥有的「武略」标记数量获得以下效果：<span class="bluetext">①0枚以上，每当你使用（指定目标后）或被使用（成为目标后）一张【决斗】或<span style="color: #FF0000">红色</span>的【杀】时，你可以摸一张牌；②1枚以上，当你成为其他角色<span style="color: #FF0000">红牌</span>的目标时，你可以摸一张牌；</span>③2枚以上，当你使用<span style="color: #FF0000">红牌</span>时，你可以摸一张牌。';
						else return '以你拥有的「武略」标记数量获得以下效果：<span class="bluetext">①0枚以上，每当你使用（指定目标后）或被使用（成为目标后）一张【决斗】或<span style="color: #FF0000">红色</span>的【杀】时，你可以摸一张牌；②1枚以上，当你成为其他角色<span style="color: #FF0000">红牌</span>的目标时，你可以摸一张牌；③2枚以上，当你使用<span style="color: #FF0000">红牌</span>时，你可以摸一张牌。</span>';
					},
					szfyb:function(player){
						if(player.storage.szffq) return '<span style="color: #40E0D0">锁定技</span>，每回合限一次，任意角色使用的【杀】结算后，你获得之。';
						return '<span style="color: #40E0D0">锁定技</span>，每回合限一次，任意角色使用的【杀】结算后，你将之置于「疑兵」中。';
					},
					sztfq:function(player){
						if(player.storage.sztfq==true) return '<span style="color: #DA70D6">转换技</span>。<span class="bluetext">阳：当一名其他角色受到<span style="color: #FF7D40">伤害</span>时，若其到你的<span style="color: #FFFF00">距离</span>为1，你可以代替成为受伤目标。</span>阴：当一名角色的<span style="color: #FF00FF">手牌</span>被其他角色弃置或获得后，你可以<span style="color: #BC8F8F">失去</span>1点<span style="color: #00FF00">体力</span>，然后令该角色摸两张牌。';
						return '<span style="color: #DA70D6">转换技</span>。阳：当一名其他角色受到<span style="color: #FF7D40">伤害</span>时，若其到你的<span style="color: #FFFF00">距离</span>为1，你可以代替成为受伤目标。<span class="bluetext">阴：当一名角色的<span style="color: #FF00FF">手牌</span>被其他角色弃置或获得后，你可以<span style="color: #BC8F8F">失去</span>1点<span style="color: #00FF00">体力</span>，然后令该角色摸两张牌。</span>';
					},
					exgjyj:function(player){
						if(player.storage.exgjyc) return '当你受到<span style="color: #FF7D40">伤害</span>时，你可以摸2X张牌并从牌堆中获得X张<span style="color: #FCE6C9">锦囊牌</span>，然后可以将至多2X张牌交给其他角色(X为<span style="color: #FF7D40">伤害量</span>)。所有角色通过〖遗计〗获得的牌不计入<span style="color: #FFC0CB">手牌上限</span>。';
						return '当你受到<span style="color: #FF7D40">伤害</span>时，你可以摸2X张牌，然后可以将至多2X张牌交给其他角色(X为<span style="color: #FF7D40">伤害量</span>)。所有角色通过〖遗计〗获得的牌不计入<span style="color: #FFC0CB">手牌上限</span>。';
					},
					jsgnxj:function(player){
						if(player.storage.jsgnjj&&player.storage.jsgnjj==true) return '<span style="color: #E3CF57">结束阶段</span>，你可以令一名其他角色获得技能〖神魄〗(<span style="color: #E3CF57">其回合结束</span>时<span style="color: #BC8F8F">失去</span>技能〖神魄〗)，然后你可以使一名其他角色获得「袭劫」标记，拥有「袭劫」标记的角色<span style="color: #E3CF57">回合结束</span>，你获得其所有<span style="color: #FF00FF">手牌</span>。';
						return '<span style="color: #E3CF57">结束阶段</span>，你可以令一名其他角色获得技能〖神魄〗，<span style="color: #E3CF57">其回合结束</span>时<span style="color: #BC8F8F">失去</span>技能〖神魄〗，且你可以获得其所有<span style="color: #FF00FF">手牌</span>。';
					},
					chrh:function(player){
						if(player.storage.chrh1&&player.storage.chrh1==true) return '<span style="color: #E3CF57">出牌阶段</span>，你可以选择一名其他角色，你获得「容华」内的至多X张牌(X为你已损失的<span style="color: #00FF00">体力值</span>，且至少为1)，然后你须将「容华」内的至少一张牌交给该角色。<span style="color: #40E0D0">锁定技</span>，<span style="color: #E3CF57">准备阶段</span>，你将「容华」摸至Y张(Y为你的<span style="color: #00C78C">体力上限</span>)。';
						return '<span style="color: #40E0D0">锁定技</span>，<span style="color: #E3CF57">准备阶段</span>，你从牌堆顶获得X张牌置于你的武将牌上(X为你的<span style="color: #00C78C">体力上限</span>)，称作「容华」，然后若你的<span style="color: #00C78C">体力上限</span>：①小于3，则你获得1点<span style="color: #00C78C">体力上限</span>，且<span style="color: #E3CF57">出牌阶段</span>结束时，你可以将大于<span style="color: #00FF00">体力值</span>部分的<span style="color: #FF00FF">手牌</span>交给一名其他角色。②不小于3，则你使一名角色获得所有「容华」，然后你<span style="color: #00FF00">回复</span>所有<span style="color: #00FF00">体力</span>、<span style="color: #BC8F8F">失去</span>〖豆蔻〗并修改〖容华〗(若获得所有「容华」的是自己，则<span style="color: #BC8F8F">失去</span>〖容华〗)。';
					},
					spsgyws:function(player){
						if(player.storage.spsgycb&&player.storage.spsgycb==true) return '①你可以将一张<span style="color: #FF0000">红色</span>牌当做<span style="color: #FF8000">火</span>【杀】使用或打出。②你使用的<span style="color: #FF0000">♥</span>【杀】<span style="color: #FF7D40">伤害</span>+1，你使用<span style="color: #FF0000">♦</span>【杀】没有<span style="color: #FFFF00">距离</span>限制。③当你使用<span style="color: #FF8000">火</span>【杀】造成<span style="color: #FF7D40">伤害</span>后，你摸一张牌。';
						return '①你可以将一张<span style="color: #FF0000">红色</span>牌当做<span style="color: #FF8000">火</span>【杀】使用或打出。②你使用的<span style="color: #FF0000">♥</span>【杀】<span style="color: #FF7D40">伤害</span>+1，你使用<span style="color: #FF0000">♦</span>【杀】没有<span style="color: #FFFF00">距离</span>限制。③每回合你使用的第一张【杀】被目标角色使用的【闪】抵消时，你摸一张牌且可以对其使用一张【杀】。';
					},
					spsgyzy:function(player){
						if(player.storage.spsgycb&&player.storage.spsgycb==true) return '①<span style="color: #40E0D0">锁定技</span>，其他角色获得你的<span style="color: #FF00FF">手牌</span>后，若你的<span style="color: #FF00FF">手牌数</span>小于X(X为你的<span style="color: #00FF00">体力值</span>且最大为5)，你将<span style="color: #FF00FF">手牌</span>摸至X张，该角色不能使用或打出牌且<span style="color: #F4A460">非锁定技</span><span style="color: #8B864E">失效</span>直到<span style="color: #E3CF57">回合结束</span>；②<span style="color: #E3CF57">出牌阶段</span>限一次，你可以将一张<span style="color: #FF00FF">手牌</span>交给一名其他角色。';
						return '①<span style="color: #40E0D0">锁定技</span>，其他角色获得你的<span style="color: #FF00FF">手牌</span>后，若你的<span style="color: #FF00FF">手牌数</span>小于X(X为你的<span style="color: #00FF00">体力值</span>且最大为5)，该角色可以令你将<span style="color: #FF00FF">手牌</span>摸至X张，否则该角色不能使用或打出牌且<span style="color: #F4A460">非锁定技</span><span style="color: #8B864E">失效</span>直到<span style="color: #E3CF57">回合结束</span>；②<span style="color: #E3CF57">出牌阶段</span>限一次，你可以将一张<span style="color: #FF00FF">手牌</span>交给一名其他角色。';
					},
					jslbwm:function(player){
						if(player.storage.snjs_xingtai_skill&&player.storage.snjs_xingtai_skill==true) return '<span style="color: #40E0D0">锁定技</span>：<span style="color: #FA8072">〔表〕»</span> 你的[具有/不具有]“<span style="color: #FF7D40">伤害</span>”标签的<span style="color: #FCE6C9">锦囊</span>视为[【决斗】/【杀】]。<span class="bluetext"><span style="color: #8470FF">〔里〕»</span> 任意角色使用<span style="color: #FCE6C9">锦囊牌</span>时，须弃置一张牌。</span>';
						return '<span style="color: #40E0D0">锁定技</span>：<span class="bluetext"><span style="color: #FA8072">〔表〕»</span> 你的[具有/不具有]“<span style="color: #FF7D40">伤害</span>”标签的<span style="color: #FCE6C9">锦囊</span>视为[【决斗】/【杀】]。</span><span style="color: #8470FF">〔里〕»</span> 任意角色使用<span style="color: #FCE6C9">锦囊牌</span>时，须弃置一张牌。';
					},
					jslbwq:function(player){
						if(player.storage.snjs_xingtai_skill&&player.storage.snjs_xingtai_skill==true) return '<span style="color: #40E0D0">锁定技</span>：你使用牌无视<span style="color: #DA70D6">防具</span>。<span style="color: #FA8072">〔表〕»</span> 你使用【杀】或【决斗】可以指定至多三个目标；你计算与其他角色的<span style="color: #FFFF00">距离</span>时始终-1。<span class="bluetext"><span style="color: #8470FF">〔里〕»</span> <span style="color: #E3CF57">摸牌阶段</span>多摸两张牌；使用【杀】的<span style="color: #FFFF00">次数</span>+2。</span>';
						return '<span style="color: #40E0D0">锁定技</span>：你使用牌无视<span style="color: #DA70D6">防具</span>。<span class="bluetext"><span style="color: #FA8072">〔表〕»</span> 你使用【杀】或【决斗】可以指定至多三个目标；你计算与其他角色的<span style="color: #FFFF00">距离</span>时始终-1。</span><span style="color: #8470FF">〔里〕»</span> <span style="color: #E3CF57">摸牌阶段</span>多摸两张牌；使用【杀】的<span style="color: #FFFF00">次数</span>+2。';
					},
					jslbsf:function(player){
						if(player.storage.snjs_xingtai_skill&&player.storage.snjs_xingtai_skill==true) return '①<span style="color: #E3CF57">出牌阶段</span>限一次，你可以弃置5枚「暴怒」，令所有其他角色[<span style="color: #FA8072">〔表〕»</span> 受到1点<span style="color: #FF7D40">伤害</span>/<span class="bluetext"><span style="color: #8470FF">〔里〕»</span> 弃置所有牌</span>]，然后你将武将牌<span style="color: #990033">翻面</span>。②<span style="color: #E3CF57">结束阶段</span>，你可以弃置2枚「暴怒」并将武将牌<span style="color: #990033">翻面</span>。③<span style="color: #40E0D0">锁定技</span>，当你[造成或受到1点<span style="color: #FF7D40">伤害</span>后/武将牌<span style="color: #990033">翻面</span>时]，你[获得1枚「暴怒」/改为<span style="color: #FA8072">切</span><span style="color: #8470FF">换</span><span style="color: #FA8072">形</span><span style="color: #8470FF">态</span>并摸两张牌]。';
						return '①<span style="color: #E3CF57">出牌阶段</span>限一次，你可以弃置5枚「暴怒」，令所有其他角色[<span class="bluetext"><span style="color: #FA8072">〔表〕»</span> 受到1点<span style="color: #FF7D40">伤害</span></span>/<span style="color: #8470FF">〔里〕»</span> 弃置所有牌]，然后你将武将牌<span style="color: #990033">翻面</span>。②<span style="color: #E3CF57">结束阶段</span>，你可以弃置2枚「暴怒」并将武将牌<span style="color: #990033">翻面</span>。③<span style="color: #40E0D0">锁定技</span>，当你[造成或受到1点<span style="color: #FF7D40">伤害</span>后/武将牌<span style="color: #990033">翻面</span>时]，你[获得1枚「暴怒」/改为<span style="color: #FA8072">切</span><span style="color: #8470FF">换</span><span style="color: #FA8072">形</span><span style="color: #8470FF">态</span>并摸两张牌]。';
					},
					ytjq:function(player){
						if(player.storage.snjs_xingtai_skill==true) return "<span style='color: #E3CF57'>回合结束</span>或使用此技能后，可以<span style='color: #FA8072'>切</span><span style='color: #8470FF'>换</span><span style='color: #FA8072'>形</span><span style='color: #8470FF'>态</span>。<span style='color: #FA8072'>〔表〕»</span> 每回合限两次，当你造成<span style='color: #FF7D40'>伤害</span>后，你可以摸两张牌且本回合<span style='color: #FFC0CB'>手牌上限</span>-2。<span class='bluetext'><span style='color: #8470FF'>〔里〕»</span>每回合限一次， 当你受到<span style='color: #FF7D40'>伤害</span>后，你可以摸一张牌且直到你的<span style='color: #E3CF57'>回合结束</span><span style='color: #FFC0CB'>手牌上限</span>+1。</span>";
						return "<span style='color: #E3CF57'>回合结束</span>或使用此技能后，可以<span style='color: #FA8072'>切</span><span style='color: #8470FF'>换</span><span style='color: #FA8072'>形</span><span style='color: #8470FF'>态</span>。<span class='bluetext'><span style='color: #FA8072'>〔表〕»</span> 每回合限两次，当你造成<span style='color: #FF7D40'>伤害</span>后，你可以摸两张牌且本回合<span style='color: #FFC0CB'>手牌上限</span>-2。</span><span style='color: #8470FF'>〔里〕»</span>每回合限一次， 当你受到<span style='color: #FF7D40'>伤害</span>后，你可以摸一张牌且直到你的<span style='color: #E3CF57'>回合结束</span><span style='color: #FFC0CB'>手牌上限</span>+1。";
					},
				},
				characterTitle:{
					snjs_re_shen_caocao:'#b天下归心',
					snjs_re_shen_ganning:'#g天降神矢',
					snjs_re_shen_guanyu:'#r炼狱鬼神',
					snjs_sp_shen_guanyu:'#r威震华夏',
					snjs_re_shen_liubei:'#r昭烈怒火',
					snjs_re_shen_luxun:'#g绽炎摧枯',
					snjs_re_shen_lvbu:'<div class="text center" style="color:#808A87">'+'戾火浮屠',
					snjs_re_shen_lvmeng:'#g兼资文武',
					snjs_re_shen_simayi:'#b天狼吞魏',
					snjs_re_shen_zhangliao:'#b雁门刑天',
					snjs_re_shen_zhaoyun:'#r神龙佑主',
					snjs_re_shen_zhouyu:'#g红莲业炎',
					snjs_re_shen_zhugeliang:'#r赤壁唤风',
					snjs_shen_caozhi:'#b七步绝章',
					snjs_sp_shen_guojia:'#b十胜十败',
					snjs_shen_liuyan:'<div class="text center" style="color:#808A87">'+'雄踞益州',
					snjs_shen_machao:'#r西凉雄狮',
					snjs_sp_shen_sunce:'#g江东猛虎',
					snjs_shen_sunshangxiang:'#g魅影剑舞',
					snjs_shen_zhangfei:'#r据水断桥',
					snjs_shen_zhangxiu:'<div class="text center" style="color:#808A87">'+'北地枪王',
					snjs_shen_zhugeguo:'#r踏云羽升',
					snjs_shen_weiyan:'#r嗜血独狼',
					snjs_shen_sunquan:'#g镇军十万',
					snjs_shen_zhoutai:'#g历战之躯',
					snjs_shen_xuchu:'#b勇力绝人',
					snjs_shen_dianwei:'#b古之恶来',
					snjs_shen_caoren:'#b坚石铁壁',
					snjs_shen_zuoci:'<div class="text center" style="color:#808A87">'+'亦幻亦真',
					snjs_shen_dongzhuo:'<div class="text center" style="color:#808A87">'+'乱世魔王<br>(身份限定武将)',
					snjs_shen_yuanshao:'<div class="text center" style="color:#808A87">'+'傲视群雄',
					snjs_shen_zhangjiao:'<div class="text center" style="color:#808A87">'+'天公将军',
					snjs_shen_jiaxu:'<div class="text center" style="color:#808A87">'+'文和乱武',
					snjs_sp_zhangjiao:'<div class="text center" style="color:#808A87">'+'身份限定武将',
					snjs_yuanshi:'#g身份限定武将',
					snjs_chenqian:'<div class="text center" style="color:#8200d9">'+'身份限定武将',
					snjs_shen_zhangsong:'#r献图求主',
					snjs_shen_fazheng:'#r恩仇必报',
					snjs_sp_xushao:'<div class="text center" style="color:#808A87">'+'禁用模式：<br>国战、挑战',
					snjs_sp_xunyu:'<div class="text center" style="color:#808A87">'+'禁用模式：<br>单挑、斗地主',
				},
				characterFilter:{
					snjs_sp_zhangjiao:function(mode){
						return mode=='identity';
					},
					snjs_yuanshi:function(mode){
						return mode=='identity';
					},
					snjs_shen_dongzhuo:function(mode){
						return mode=='identity';
					},
					snjs_chenqian:function(mode){
						return mode=='identity';
					},
					snjs_sp_xushao:function(mode){
						return mode!='guozhan'&&mode!='boss';
					},
					snjs_sp_xunyu:function(mode){
						return mode!='single'&&mode!='doudizhu';
					},
				},
			};
			for(var i in snjs.character){
				if(!snjs.character[i][4]) snjs.character[i][4]=[];
				if(lib.device||lib.node){
					snjs.character[i][4].push('ext:神怒降世/'+i+'.jpg');
				}
				else{
					snjs.character[i][4].push('db:extension-神怒降世:'+i+'.jpg');
				}
			}
			lib.arenaReady.unshift(function(){
				try{
					for(var i of snjs.characterSort.snjs.snjs_shen) lib.rank.rarity.legend.push(i);
					for(var i of snjs.characterSort.snjs.snjs_extreme) lib.rank.rarity.epic.push(i);
					for(var i of snjs.characterSort.snjs.snjs_virtual) lib.rank.rarity.epic.push(i);
					for(var i of snjs.characterSort.snjs.snjs_lao) lib.rank.rarity.epic.push(i);
					for(var i of snjs.characterSort.snjs.snjs_dou) lib.rank.rarity.epic.push(i);
					for(var i of snjs.characterSort.snjs.snjs_gui) lib.rank.rarity.epic.push(i);
					var shishi=['dongxie','snjs_caojie','snjs_dianweicaoang','snjs_sp_fanyufeng','snjs_guanyuzhangfei','snjs_guosheng','snjs_sp_lvbu','snjs_sp_zhangjiao','snjs_sp_zhangrang','snjs_sp_zhouche','snjs_xiahouzie','snjs_sp_zhangning','snjs_zhangwei','snjs_sp_zhaozhong','snjs_zhuzhizhuranzhuhuan','snjs_sunyu','snjs_caohua','snjs_sp_lvlingqi','snjs_sp_dongbai','snjs_caoyuee','snjs_al_guanyu','snjs_sp_zhangxiu','snjs_al_chenqian','snjs_ju_sunquan','snjs_sp_yanghu','snjs_sp_lusu','snjs_re_mayunlu','snjs_re_caochong','snjs_xiahoulan'];
					for(var i of shishi) lib.rank.rarity.epic.push(i);
					var xiyou=['snjs_bianxi','snjs_bocai','snjs_caojie','snjs_chengkuang','snjs_duangui','snjs_fanqiangzhangda','snjs_fengxu','snjs_sp_fushirenmifang','snjs_gouan','snjs_guanhai','snjs_haomeng','snjs_houlan','snjs_jianshuo','snjs_penghu','snjs_pengqi','snjs_simayan','snjs_sp_xvjing','snjs_sp_liubei','snjs_wangchong','snjs_wenchou','snjs_wuban','snjs_xiahouen','snjs_xiayun','snjs_yanliang','snjs_yushe','snjs_zhangchu','snjs_zhangjvzhangchun','snjs_zhangyan','snjs_zhaoang','snjs_zhucaizhuji','snjs_sp_chenzhen','snjs_sp_sunyi','snjs_re_dingfeng','snjs_yuanshi','snjs_baoxin','snjs_chezhou','snjs_xianyufu','snjs_jiachong','snjs_gaoxiang','snjs_liuli','snjs_guodian','snjs_caoxian','snjs_chengyuanzhi','snjs_jiangwan','snjs_chenqian','snjs_zhanghong','snjs_chenshou','snjs_zhangsu','snjs_zhuhao','snjs_sp_zumao','snjs_sp_mizhu','snjs_re_caoang','snjs_sunhuan','snjs_jibu','snjs_sp_xunyu','snjs_zhangbiao','snjs_xinping','snjs_wangtao','snjs_wangyue','snjs_yuanshang','snjs_yuantan','snjs_pangji','snjs_guotu','snjs_liuxun','snjs_pangxi','snjs_feiguan','snjs_fazhen','snjs_sp_hanfu'];
					for(var i of xiyou) lib.rank.rarity.rare.push(i);
					var putong=['snjs_huangjinbing','snjs_old_caoren','snjs_old_zhoutai'];
					for(var i of putong) lib.rank.rarity.junk.push(i);
				}catch(e){
					console.error(e);
				}
			});
			return snjs;
		});
		lib.config.all.characters.push('snjs');
		if(!lib.config.characters.contains('snjs')) lib.config.characters.remove('snjs');
		lib.translate['snjs_character_config']='神怒降世';
	},
	package:{
		intro:(function(){
			var log1 = [
				'<span style="color: #00BFFF">作者：</span>雾纱弄尘<br>',
				'<span style="color: #00BFFF">作者QQ：</span>2985679615<br>',
				'<span style="color: #00BFFF">『绘声』I群：</span>343332101<br>',
				'<span style="color: #00BFFF">参与设计：</span><br>世中人、肉丸子、龙傲天<br>',
				'<span style="color: #00BFFF">素材支持：</span>世中人、肉丸子<br>',
				'<span style="color: #00BFFF">更新日期：</span>2022-01-28',
				'<span style="color: #00BFFF">目前已有的挑战模式：</span><br><center>征战虎牢</center><br><center>戚宦之争</center><br><center>驱鬼逐邪</center><br><center>天书乱斗</center><br><center>百战天书</center>',
			];
			var log2 = [
				'<span style="color: #A020F0">Bug以及各种问题修复：</span><br>①更正了极孙尚香的资料描述<br>②修复了汲布技能〖独行〗指定目标后，该目标只能弃牌的问题<br>③修复了极孙坚只有第一个回合可以发动〖武烈〗的问题<br>④优化了神张绣〖纳计〗的文字描述<br>',
				'<span style="color: #FFD700">新武将：</span><br>『蜀』：张表、王桃、王悦、刘循、庞羲、费观<br>『群』：辛评、袁尚、袁谭、郭图、逄纪、法真、SP韩馥<br>',
				'<span style="color: #FFD700">新挑战：</span><br>无<br>',
				'<span style="color: #FF82AB">大幅修改以及重做武将：</span><br>无<br>',
				'<span style="color: #00FF00">增强：</span><br>无<br>',
				'<span style="color: #FF0000">削弱：</span><br>无<br>',
				'<span style="color: #999999">调整：</span><br>无<br>',
			];
		
			return '<p style="font-size:16px; line-height:20px; text-shadow: 0 0 4px black;">' + log1.join('<br>') + '</p>'+'<p style="font-size:16px; line-height:20px; text-shadow: 0 0 4px black;">' + log2.join('<br>') + '</p>';
		})(),
	},
	}
});